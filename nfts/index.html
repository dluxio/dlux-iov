<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <title>DLUX - NFTS</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="apple-touch-icon" href="/img/dlux-icon-192.png">
    <meta name="theme-color" content="#111222" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <!-- Bootstrap -->
    <link href="/css/custom.css" rel="stylesheet" />
    <!-- Icons -->
    <script src="https://kit.fontawesome.com/0f693ffc58.js" crossorigin="anonymous"></script>
    <script type="module" src="/js/nftsvue.js"></script>
    <script>
        // navigator.serviceWorker.getRegistrations().then(function(registrations) {
        //     for(let registration of registrations) {
        //         registration.unregister();
        //     } 
        // });
        if ('serviceWorker' in navigator) {
            navigator
                .serviceWorker
                .register(
                    // path to the service worker file
                    '/sw.js'
                )
                // the registration is async and it returns a promise
                .then(function (reg) {
                    console.log('Registration Successful');
                });
        }
      </script>
    <style>
        .circle {
            width: 50px;
            height: 50px;
            line-height: 50px;
            border-radius: 50%;
            font-size: 25px;
            color: #fff;
            text-align: center;
            background: #000;
        }

        .circle2 {
            width: 75px;
            height: 75px;
            line-height: 75px;
            border-radius: 50%;
            font-size: 50px;
            color: crimson;
            text-align: center;
            background: #000;
        }

        .arrow {
            position: absolute;
            background: #ffc107;
            border-radius: 50%;
            border: black thick solid;
            text-align: center;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4rem;
            height: 4rem;
            z-index: 1;
            color: crimson;
        }

        .arrow2 {
            position: absolute;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
        }

        .card-ft {
            width: 26em;
        }

        .shimmer {
            background-image: linear-gradient(to right,
                    rgb(194, 255, 182),
                    rgb(255, 163, 182),
                    rgb(221, 169, 255),
                    rgb(162, 209, 255));
        }

        .wallet-accordion-item {
             /* width: 350px; */
        }

        .wallet-accordion {

            --bs-accordion-border-color: clear !important;
            --bs-accordion-active-bg: clear !important;
            --bs-accordion-btn-color: #000000;
            --bs-accordion-btn-icon: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
            --bs-accordion-btn-active-icon: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");

        }

        #dluxWallet {
            background-image: linear-gradient(to right,
                    rgb(194, 255, 182),
                    rgb(255, 163, 182),
                    rgb(221, 169, 255),
                    rgb(162, 209, 255));
        }

        #duatWallet {
            background-color: #ffc107;
        }

        .mint-img {
            width: 200px;
        }

        .carousel {
            width: 600px;
        }

        .carousel-indicators {
            left: 0;
            right: 0;
            top: auto;
            bottom: -15px;
            text-align: center;
        }
    </style>
</head>

<body class="d-flex flex-column h-100 text-white" style="padding-top: 150px;" id="index">
    <div id="app" v-cloak>
        <div>
            <nav-vue @login="setValue('account', $event);getTokenUser($event);getHiveUser($event);getUserNFTs()"
                @logout="setValue('account', '');removeUser()" @ack="removeOp($event)" @refresh="run($event)"
                :op="toSign" :lapi="lapi" />
        </div>
        <main role="main">
            <div class="m-auto" style="max-width: 1800px !important">
                <div class="container-fluid fixed-top px-0" style="margin-top: 94px; z-index: 900">
                    <div class="d-flex flex-column justify-content-between align-items-center nav-blur px-2"
                        style="background-color: rgba(0,0,0,0.6)">
                        <div class="d-flex py-1 align-itmes-center justify-content-between w-100"
                            style="max-width: 1800px !important;">

                            <a class="btn btn-lg btn-outline-primary d-flex" href="sets" type="button">
                                <i class="fa-solid fa-book-open force-parent-lh"></i>
                                <span class="d-none d-sm-block ms-1">SETS</span>
                                <span v-if="!account" class="d-sm-none ms-1">SETS</span></a>
                            <!-- wallet modal button -->
                            <button type="button" v-if="account"
                                class="ms-auto btn btn-lg btn-outline-success d-flex align-items-center"
                                data-bs-toggle="modal" data-bs-target="#walletModal">
                                <i class="fa-solid fa-wallet force-parent-lh me-2"></i>
                                <p class="me-1 mb-0 fs-6" v-cloak>
                                    {{formatNumber(chains['dlux'].account.balance/1000,
                                    3,
                                    '.', ',')}} DLUX
                                    <i class="fa-fw fa-solid fa-caret-down"></i>
                                </p>
                            </button>



                        </div>
                    </div>
                </div>
                <div class="d-flex py-2 mx-1 align-items-stretch flex-wrap">

                    <div class="px-2 rounded-3 card d-flex w-100">
                        <div class="d-flex align-items-center justify-content-around">

                            <!-- MESSAGE -->
                            <div class="pt-2">
                                <h1 class="display-5 text-uppercase fw-lighter mb-0">Marketplace</h1>
                                <p class="fs-4 fw-light">Browse, bid, buy</p>
                                <div class="d-flex">
                                    <a class="btn btn-primary btn-lg me-2 d-none" type="button" href="sets">Explore
                                        Sets</a>
                                    <a class="btn btn-secondary btn-lg disabled d-none" disabled type="button"
                                        href="create">Create</a>
                                </div>
                            </div>


                            <!-- MINTS -->
                            <div id="carouselExampleCaptions" class="carousel d-none">
                                <div class="carousel-inner text-center">
                                    <div v-for="mint in mintData">
                                        <div class="carousel-item"
                                            :class="{'active': mint.set == mintData[activeIndex].set && mint.chain == mintData[activeIndex].chain}">
                                            <div v-if="chains[mint.chain].sets[mint.set].forAuctionMint || chains[mint.chain].sets[mint.set].mintSales?.length"
                                                class="d-flex mx-5 mt-2 mb-3 align-items-center rounded">
                                                <a role="button" title="Mint Details" data-bs-toggle="modal"
                                                    data-bs-target="#transferModal"
                                                    @click="focusItem.set = mint.set; focusItem.token = mint.chain">
                                                    <img v-if="chains[mint.chain].sets[mint.set].computed"
                                                        :src="'https://ipfs.io/ipfs/' + chains[mint.chain].sets[mint.set].computed.set.wrapped"
                                                        class="mint-img responsive rounded"></a>
                                                <div class="w-100 d-flex">
                                                    <div class="ms-auto text-end">
                                                        <h5>{{chains[mint.chain].sets[mint.set].name_long}}</h5>
                                                        <div v-if="chains[mint.chain].sets[mint.set].mintSales.length">
                                                            <small>Lowest Price</small>
                                                            <p>{{naiString(chains[mint.chain].sets[mint.set].mintSales[0].pricenai)}}
                                                            </p>
                                                        </div>
                                                        <div
                                                            v-if="chains[mint.chain].sets[mint.set].mintAuctions.length">
                                                            <small>Lowest Bid</small>
                                                            <p>{{naiString(chains[mint.chain].sets[mint.set].mintAuctions[0].pricenai)}}
                                                            </p>
                                                        </div>
                                                        <a role="button" title="Mint Details" data-bs-toggle="modal"
                                                            data-bs-target="#transferModal"
                                                            @click="focusItem.set = mint.set; focusItem.token = mint.chain">
                                                            <button
                                                                class="btn btn-sm btn-outline-light">{{formatNumber((chains[mint.chain].sets[mint.set].forAuctionMint
                                                                +
                                                                chains[mint.chain].sets[mint.set].forSaleMint),0,'.',',')}}
                                                                Available</button>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" @click="pairMints();activeIndexDn()"
                                    data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" @click="pairMints();activeIndexUp()"
                                    data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                                <div class="carousel-indicators">
                                    <div v-for="(mint, name, index) in mintData">
                                        <button type="button" data-bs-target="#carouselExampleCaptions"
                                            :data-bs-slide-to="index" @click="pairMints();activeIndex = index"
                                            class="active" aria-current="true" :aria-label="'Slide ' + index"></button>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>

                </div>
                <!-- ACTION BAR -->
                <div class="d-flex flex-wrap align-items-center justify-content-center">



                    <!-- Chain -->
                    <div class="order-1 dropdown d-none d-xl-block mb-1">
                        <button class="btn btn-outline-light dropdown-toggle mx-1" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Chain
                        </button>
                        <ul class="dropdown-menu bg-black">
                            <li v-for="(item, name, index) in chainSorted">
                                <div class="py-1 px-2">
                                    <div class="form-check">
                                        <input @change="addFilters('Chain', item);displaynfts()"
                                            class="form-check-input" type="checkbox" v-model="chains[item].enabled"
                                            :id="item +'ChainCheck'">
                                        <label class="form-check-label" :for="item +'ChainCheck'">
                                            {{item}}
                                        </label>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- Set -->
                    <div class="order-2 dropdown d-none d-xl-block mb-1">
                        <button class="btn btn-outline-light dropdown-toggle mx-1" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Set
                        </button>
                        <ul class="dropdown-menu bg-black">
                            <div v-for="(item, name, index) in chains">
                                <li v-for="(set, setname, setindex) in chains[name].sets">
                                    <div class="py-1 px-2">
                                        <div class="form-check">
                                            <input @change="addFilters('Set', setname, name);displaynfts()"
                                                class="form-check-input" type="checkbox"
                                                v-model="chains[name].sets[setname].enabled" :id="setname + 'SetCheck'">
                                            <label class="form-check-label" :for="setname + 'SetCheck'">
                                                {{set.name_long}}
                                            </label>
                                        </div>
                                    </div>
                                </li>
                            </div>
                        </ul>
                    </div>
                    <!-- Status -->
                    <div class="order-3 dropdown d-none d-xl-block mb-1">
                        <button class="btn btn-outline-light dropdown-toggle mx-1" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Status
                        </button>
                        <ul class="dropdown-menu bg-black">
                            <li v-for="(item, name, index) in selectors">
                                <div class="py-1 px-2">
                                    <div class="form-check">
                                        <input @change="addFilters('Status', name);displaynfts()"
                                            class="form-check-input" type="checkbox" v-model="item.checked"
                                            :id="name + 'StatusCheck'">
                                        <label class="form-check-label" :for="name + 'StatusCheck'">
                                            {{name}}
                                        </label>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- Currency -->
                    <div class="order-4 dropdown d-none d-xl-block mb-1 ">
                        <button class="btn btn-outline-light dropdown-toggle mx-1" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Currency
                        </button>
                        <ul class="dropdown-menu bg-black">
                            <li v-for="(item, name, index) in denoms">
                                <div class="py-1 px-2">
                                    <div class="form-check">
                                        <input @change="addFilters('Currency', name);displaynfts()"
                                            class="form-check-input" type="checkbox" v-model="item.checked"
                                            :id="name + 'CurrencyCheck'">
                                        <label class="form-check-label" :for="name + 'CurrencyCheck'">
                                            {{name}}
                                        </label>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- Search -->
                    <div class="position-relative flex-grow-1 mb-1 mx-1 order-md-5">
                        <span class="position-absolute top-50 translate-middle-y ps-2"><i
                                class="fa-solid fa-magnifying-glass fa-fw"></i></span>
                        <input @keyup="displaynfts()" @change="displaynfts()" @search="displaynfts()"
                            class="ps-4 form-control border-white" type="search" v-model="NFTselect.searchTerm"
                            placeholder="Search sets, items, and accounts">
                    </div>
                    <div class="d-flex order-last mx-1 w-sm-100 justify-content-between ">
                        <!-- Filter button -->
                        <div class="d-xl-none mb-1 me-2 flex-fill">
                            <button class="btn btn-outline-light w-100" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseFilter" aria-expanded="false" aria-controls="collapseFilter">
                                <i class="fa-solid fa-filter me-1"></i>Filter
                            </button>


                        </div>
                        <!-- Sort -->
                        <div class="dropdown mb-1 flex-fill">
                            <button class="btn btn-outline-light w-100" type="button" data-bs-toggle="dropdown"
                                aria-expanded="false"><i class="fa-solid fa-sort fa-fw ms-1"></i>
                                {{NFTselect.sort == 'uid' ? 'Sort' : ( (NFTselect.sort == 'price' ?
                                'Price: ' :
                                'Time: ') + (NFTselect.dir == 'asc' ? 'Low to High' : 'High to Low'))}}
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end bg-black">
                                <li>
                                    <a @click="NFTselect.dir='asc';NFTselect.sort='price';displaynfts()"
                                        class="dropdown-item" role="button">Price low to high</a>
                                </li>
                                <li>
                                    <a @click="NFTselect.dir='dec';NFTselect.sort='price';displaynfts()"
                                        class="dropdown-item" role="button">Price high to low</a>
                                </li>
                                <li>
                                    <a @click="NFTselect.dir='asc';NFTselect.sort='time';displaynfts()"
                                        class="dropdown-item" role="button">Time ending soonest</a>
                                </li>
                                <li>
                                    <a @click="NFTselect.dir='dec';NFTselect.sort='time';displaynfts()"
                                        class="dropdown-item" role="button">Time ending latest</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- filter collapse-->
                    <div class="collapse order-last d-xl-none mx-1" id="collapseFilter">
                        <div class="d-flex flex-row flex-wrap">

                            <!-- Chain -->
                            <div class="order-1 dropdown mb-1">
                                <button class="btn btn-outline-light dropdown-toggle me-2" type="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Chain
                                </button>
                                <ul class="dropdown-menu bg-black">
                                    <li v-for="(item, name, index) in chainSorted">
                                        <div class="py-1 px-2">
                                            <div class="form-check">
                                                <input @change="addFilters('Chain', item);displaynfts()"
                                                    class="form-check-input" type="checkbox"
                                                    v-model="chains[item].enabled" :id="item +'ChainCheck'">
                                                <label class="form-check-label" :for="item +'ChainCheck'">
                                                    {{item}}
                                                </label>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <!-- Set -->
                            <div class="order-2 dropdown mb-1">
                                <button class="btn btn-outline-light dropdown-toggle me-2" type="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Set
                                </button>
                                <ul class="dropdown-menu bg-black">
                                    <div v-for="(item, name, index) in chains">
                                        <li v-for="(set, setname, setindex) in chains[name].sets">
                                            <div class="py-1 px-2">
                                                <div class="form-check">
                                                    <input @change="addFilters('Set', setname, name);displaynfts()"
                                                        class="form-check-input" type="checkbox"
                                                        v-model="chains[name].sets[setname].enabled"
                                                        :id="setname + 'SetCheck'">
                                                    <label class="form-check-label" :for="setname + 'SetCheck'">
                                                        {{set.name_long}}
                                                    </label>
                                                </div>
                                            </div>
                                        </li>
                                    </div>
                                </ul>
                            </div>
                            <!-- Status -->
                            <div class="order-3 dropdown mb-1">
                                <button class="btn btn-outline-light dropdown-toggle me-2" type="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Status
                                </button>
                                <ul class="dropdown-menu bg-black">
                                    <li v-for="(item, name, index) in selectors">
                                        <div class="py-1 px-2">
                                            <div class="form-check">
                                                <input @change="addFilters('Status', name);displaynfts()"
                                                    class="form-check-input" type="checkbox" v-model="item.checked"
                                                    :id="name + 'StatusCheck'">
                                                <label class="form-check-label" :for="name + 'StatusCheck'">
                                                    {{name}}
                                                </label>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <!-- Currency -->
                            <div class="order-4 dropdown mb-1 ">
                                <button class="btn btn-outline-light dropdown-toggle me-2" type="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Currency
                                </button>
                                <ul class="dropdown-menu bg-black">
                                    <li v-for="(item, name, index) in denoms">
                                        <div class="py-1 px-2">
                                            <div class="form-check">
                                                <input @change="addFilters('Currency', name);displaynfts()"
                                                    class="form-check-input" type="checkbox" v-model="item.checked"
                                                    :id="name + 'CurrencyCheck'">
                                                <label class="form-check-label" :for="name + 'CurrencyCheck'">
                                                    {{name}}
                                                </label>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>

                        </div>

                        <div class="d-flex flex-row flex-wrap mt-2 order-last" v-if="NFTselect.keys.length">
                            <!-- Active Filters -->
                            <div v-for="(item, name, index) in NFTselect.keys"
                                class="rounded bg-secondary text-black filter-bubble me-1 mb-1 d-flex align-items-center">
                                <span>{{item}}</span>
                                <button @click="clearFilters(item)" type="button"
                                    class="ms-1 btn-close btn-close-white"></button>
                            </div>
                            <button @click="clearFilters()" type="button" v-if="NFTselect.keys.length > 1"
                                class="btn btn-secondary mb-1">
                                Clear All
                            </button>
                        </div>


                    </div>

                </div>
                <div class="d-flex align-items-center mx-1">
                    <h5 class="mb-0">{{displayNFTs.length}} Items</h5>
                    <div class="d-none d-sm-flex d-md-none ms-auto">
                        <div class="btn-group">
                            <input type="radio" class="btn-check" name="smView" id="setSingle" autocomplete="off" />
                            <label class="btn btn-outline-warning" for="setSingle"><i
                                    class="fa-regular fa-square fa-fw"></i></label>
                            <input type="radio" class="btn-check" name="smView" id="setDouble" autocomplete="off"
                                checked />
                            <label class="btn btn-outline-warning" for="setDouble"><i
                                    class="fa-solid fa-table-cells-large fa-fw"></i></label>
                        </div>
                    </div>

                </div>
                <div class="d-flex flex-wrap mt-2 d-none d-xl-flex mx-1" v-if="NFTselect.keys.length">
                    <!-- Active Filters -->
                    <div v-for="(item, name, index) in NFTselect.keys"
                        class="rounded bg-secondary text-black filter-bubble me-1 mb-1 d-flex align-items-center">
                        <span>{{item}}</span>
                        <button @click="clearFilters(item)" type="button"
                            class="ms-1 btn-close btn-close-white"></button>
                    </div>
                    <button @click="clearFilters()" type="button" v-if="NFTselect.keys.length > 1"
                        class="btn btn-secondary mb-1">
                        Clear All
                    </button>
                </div>



                <div class="w-100 ms-0 row row-cols-xxl-6 row-cols-xl-5 row-cols-lg-4 row-cols-md-3 row-cols-xs-1"
                    :class="{'row-cols-sm-2' : buyhive.checked, 'row-cols-sm-1' : buyhbd.checked }">
                    <!-- NFTCARD REPEAT AUCTION -->
                    <div class="col my-1" v-for="(item, name, index) in displayNFTs">
                        <nftcard :item="item" :uid="Base64toNumber(item.uid)" :icon="getIcon(item.script)"
                            @focusitem="focusItem = $event" :multisig="chains[item.token].multisig"
                            :colors="getSetDetailsColors(item.script)" :index="index" :auction="item.auction"
                            :sale="item.sale" :account="account"
                            @detail="modalIndex('itemModal', $event, 'displayNFTs');itemModal.hidden = false"
                            @tosign="toSign = $event" />
                    </div>
                </div>
            </div>

            <!-- wallet modal -->
            <div class="modal fade" id="walletModal" tabindex="-1" aria-labelledby="walletModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header border-bottom-0">
                            <h1 class="modal-title fs-5" id="walletModalLabel">Wallet</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body p-0">
                            <!-- WALLETS -->
                            <div class="d-flex justify-content-center">
                                <div class="accordion wallet-accordion w-100 rounded-0 text-black" id="accordionWallet">
                                    <!-- HIVE -->
                                    <div class="accordion-item wallet-accordion-item rounded-0 bg-hive shadow"
                                        id="hiveWallet">
                                        <h2 class="accordion-header rounded-0">
                                            <button onclick="this.blur();"
                                                class="accordion-button rounded-0 text-black collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#collapsehive"
                                                aria-expanded="false" aria-controls="collapsehive">
                                                HIVE<span class="ms-auto small" id="hiveBal">{{formatNumber(barhive, 3,
                                                    '.', ',')}}</span>
                                            </button>
                                        </h2>
                                        <div id="collapsehive" class="accordion-collapse collapse"
                                            data-bs-parent="#accordionWallet">
                                            <div class="accordion-body">
                                                <h3 class="pt-3 pb-4 m-0 font-weight-bolder text-black text-end">
                                                    {{formatNumber(barhive, 3,
                                                    '.', ',')}} HIVE</h3>
                                                <div class="mt-1 text-end">
                                                    <button class="btn btn-outline-dark d-none disabled btn-sm"
                                                        class="a-1" data-bs-toggle="modal">
                                                        Get HIVE
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- HBD -->
                                    <div class="accordion-item wallet-accordion-item bg-hbd shadow" id="hbdWallet">
                                        <h2 class="accordion-header">
                                            <button onclick="this.blur();" class="accordion-button text-black collapsed"
                                                type="button" data-bs-toggle="collapse" data-bs-target="#collapsehbd"
                                                aria-expanded="false" aria-controls="collapsehbd">
                                                HBD<span class="ms-auto small" id="hbdBal">{{formatNumber(barhbd, 3,
                                                    '.', ',')}}</span>
                                            </button>
                                        </h2>
                                        <div id="collapsehbd" class="accordion-collapse collapse"
                                            data-bs-parent="#accordionWallet">
                                            <div class="accordion-body">
                                                <h3 class="pt-3 pb-4 m-0 font-weight-bolder text-black text-end">
                                                    {{formatNumber(barhbd, 3,
                                                    '.', ',')}} HBD</h3>
                                                <div class="mt-1 text-end">
                                                    <button class="btn btn-outline-dark d-none disabled btn-sm"
                                                        class="a-1" data-bs-toggle="modal">
                                                        Get HBD
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- HONEYCOMB -->
                                    <div class="accordion-item rounded-0 wallet-accordion-item shadow"
                                        :id="name + 'Wallet'" v-for="name in chainSorted">
                                        <h2 class="accordion-header rounded-0">

                                            <button onclick="this.blur();" class="accordion-button rounded-0 text-black"
                                                :class="{'collapsed': name != 'dlux'}" type="button"
                                                data-bs-toggle="collapse" :data-bs-target="'#collapse' + name"
                                                aria-expanded="true" :aria-controls="'#collapse' + name">
                                                {{toUpperCase(name)}}<span class="ms-auto small" :id="name + 'Bal'"
                                                    :class="{'d-none': name == 'dlux'}">
                                                    {{formatNumber(chains[name].account.balance/1000,
                                                    3,
                                                    '.', ',')}}</span>
                                            </button>
                                        </h2>
                                        <div :id="'collapse' + name" :ref="'show' + name"
                                            class="accordion-collapse collapse" data-bs-parent="#accordionWallet"
                                            :class="{'show': name == 'dlux'}">
                                            <div class="accordion-body">
                                                <h3 class="pt-2 pb-3 m-0 font-weight-bolder text-black text-end">
                                                    {{formatNumber(chains[name].account.balance/1000, 3, '.', ',')}}
                                                    {{toUpperCase(name)}}
                                                </h3>
                                                <div class="mt-1 text-end">
                                                    <button class="btn btn-outline-dark btn-sm" href="#buyTokenModal"
                                                        class="a-1" data-bs-toggle="modal" @click="popDex(name)">
                                                        Get {{toUpperCase(name)}}
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="modal-footer border-top-0">

                        </div>
                    </div>
                </div>
            </div>
            <!-- Get Token Modal-->
            <div class="modal fade" id="buyTokenModal" tabindex="-1" role="dialog" aria-labelledby="buyDluxModalTitle"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document" id="buy-modal">
                    <div class="modal-content">
                        <form class="needs-validation" novalidate id="marketorderform" @submit.prevent="dexBuy()">
                            <input id="markethbd" value="0" class="d-none">
                            <input id="marketqty" value="0" class="d-none">
                            <input id="markettime" value="0" class="d-none">
                            <div class="modal-header d-flex flex-fill justify-content-between align-items-center">
                                <h5 class="modal-title">MARKET ORDER</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                </button>
                            </div>
                            <div class="modal-body">
                                <p class="small text-white-50">Market Orders utilize multisig to
                                    complete partial fills of open orders on the <a
                                        :href="'/dex#' + marketorder.name">DEX</a>,
                                    starting
                                    with the lowest rate to ensure you're getting the best
                                    price.</p>
                                <div class="d-flex flex-column">
                                    <div class="d-flex flex-column flex-fill rounded-top p-3 bg-darker">
                                        <div class="d-flex flex-row flex-fill align-items-center">
                                            <p style="font-size: 18px;" class="p-0 m-0 font-weight-light">From
                                            </p>
                                            <div class="d-flex ms-auto align-items-baseline">
                                                <div class="d-flex small justify-content-between">
                                                    <p class="my-0 text-white-50">Available<i
                                                            class="fab fa-hive mx-1"></i></p>
                                                    <p @click="popOrder()" class="my-0 text-primary">
                                                        {{ barhive }}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex flex-row flex-fill mt-1">
                                            <div class="d-flex align-items-center">
                                                <div class="circle2"><i class="fab fa-hive"></i>
                                                </div>
                                                <h2 class="p-0 m-0 ms-2 font-weight-bold">HIVE
                                                </h2>
                                            </div>
                                            <div class="d-flex ms-auto flex-column">
                                                <p class="ms-auto my-0 text-white-50 font-weight-bolder"
                                                    style="font-size: 30px;">
                                                    <input class="form-control text-white" v-model="marketorder.hive"
                                                        style="background-color: rgba(0,0,0,0.5); max-width: 150px"
                                                        id="markethive" value="1" placeholder="0" type="number"
                                                        min="0.001" step="0.001" required @change="marketValue()"
                                                        @keyup="marketValue()" :max="parseFloat(barhive)">
                                                </p>
                                                <p class="ms-auto my-0 text-muted font-weight-bold"
                                                    style="font-size: 16px;">
                                                    &asymp;
                                                    $ {{ marketorder.hive * hiveprice }}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <div></div>
                                            <div>
                                                <button class="btn btn-outline-secondary btn-sm text-muted"
                                                    type="button" data-bs-toggle="collapse"
                                                    data-bs-target="#collapseExample" aria-expanded="false"
                                                    aria-controls="collapseExample"><i
                                                        class="fas fa-info-circle"></i></button>
                                            </div>
                                        </div>
                                        <div class="collapse" id="collapseExample">
                                            <div class="d-flex">
                                                <p style="font-size: 18px;"
                                                    class="p-0 m-0 text-white-50 font-weight-light">
                                                    Rate</p>
                                                <p style="font-size: 16px;" class="p-0 m-0 text-white-50 ms-auto">1
                                                    HIVE
                                                    &asymp; {{1 / chains[marketorder.name].account.tick }} DLUX
                                                </p>
                                            </div>
                                            <div class="d-flex">
                                                <p style="font-size: 12px;"
                                                    class="p-0 m-0 text-muted ms-auto text-success">
                                                    1 DLUX &asymp; {{chains[marketorder.name].account.tick}}
                                                    HIVE</p>
                                            </div>
                                            <hr width="100%" style="border: #333 thin solid">
                                            <div class="d-flex">
                                                <p style="font-size: 18px;"
                                                    class="p-0 m-0 text-white-50 font-weight-light">
                                                    Swap Fee<small
                                                        class="rounded-pill border border-secondary py-05 px-1 ms-1">0.1%</small>
                                                </p>
                                                <p style="font-size: 16px;" class="p-0 m-0 text-white-50 ms-auto">
                                                    &asymp;
                                                    <input id="marketfee" class="d-none"
                                                        value="((markethive.value/dexview1.data[0].rate)*0.001).formatNumber(3,'.',',')">
                                                    {{ (marketorder.hive * .999 ) *
                                                    chains[marketorder.name].account.tick}} DLUX
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-0 m-0 bg-dark">
                                        <div class="arrow2 rounded-circle border border-warning bg-darker text-warning">
                                            <h1 class="m-2 px-2 py-1"><i class="fas fa-angle-double-down"></i>
                                            </h1>
                                        </div>
                                    </div>
                                    <div class="d-flex flex-column flex-fill rounded-bottom p-3 border border-warning"
                                        style="background: radial-gradient(#222,#111);">
                                        <div class="d-flex flex-row flex-fill align-items-center">
                                            <p style="font-size: 18px;" class="p-0 m-0 font-weight-light">To</p>
                                        </div>
                                        <div class="d-flex flex-row flex-fill mt-1 align-items-center">
                                            <div class="d-flex align-items-center">
                                                <div class="circle2 d-flex align-items-center justify-content-around">
                                                    <img src="/img/dlux-hive-logo-alpha.svg" width="70%">
                                                </div>
                                                <h2 class="p-0 m-0 ms-2 font-weight-bold">
                                                    {{toUpperCase(marketorder.name)}}
                                                </h2>
                                            </div>
                                            <div class="d-flex ms-auto">
                                                <p class="ms-auto my-0 text-warning font-weight-bolder"
                                                    style="font-size: 30px;">&asymp;
                                                    {{ marketorder.value / 1000}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="d-flex justify-content-around">
                                    <button type="submit" class="btn btn-lg btn-primary">Convert</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- NFT Detail Modal -->
            <div>
                <nftdetail :sets="focusSet" :account="account" :denoms="denoms" :itemmodal="itemModal" :pfp="pfp"
                    :item="focusItem" :chains="chains"
                    @detail="modalIndex('itemModal', $event);itemModal.hidden = false" @tosign="toSign=$event" />
            </div>

            <!-- Mint Detail modal -->
            <div>
                <fttransfer :account="account" :item="focusItem" :mint="true" :numitems="mintData.length"
                    :denoms="denoms" @modal="injectIndex($event)" :activeindex="activeIndex"
                    :icon="chains[focusItem.token].sets[focusItem.set].computed.set.faicon"
                    :setdetail="chains[focusItem.token].sets[focusItem.set]" :api="chains[focusItem.token].api"
                    :wrapped="chains[focusItem.token].sets[focusItem.set].computed.set.wrapped"
                    :qty="mintsQty(focusItem)"
                    :colors="'linear-gradient(' + chains[focusItem.token].sets[focusItem.set].computed.set.Color1 + ',' + chains[focusItem.token].sets[focusItem.set].computed.set.Color2 + ')'"
                    @tosign="toSign = $event"
                    :info="chains[focusItem.token].sets[focusItem.set].computed.set.Description" />
            </div>



    </div>
    </main>
    <div>
        <foot-vue />
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script>

        (function () {
            "use strict";
            window.addEventListener(
                "load",
                function () {
                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    var forms = document.getElementsByClassName("needs-validation");
                    // Loop over them and prevent submission
                    var validation = Array.prototype.filter.call(
                        forms,
                        function (form) {
                            form.addEventListener(
                                "submit",
                                function (event) {
                                    if (form.checkValidity() === false) {
                                        event.preventDefault();
                                        event.stopPropagation();
                                    }
                                    form.classList.add("was-validated");
                                },
                                false
                            );
                        }
                    );
                },
                false
            );
        })();
        var disabletab = document.getElementsByClassName("disabled-input");
        for (var i = 0; i < disabletab.length; i++) {
            disabletab[i].setAttribute("tabindex", "-1");
        }
        var toastElList = [].slice.call(document.querySelectorAll(".toast"));
        var toastList = toastElList.map(function (toastEl) {
            return new bootstrap.Toast(toastEl, option);
        });
        var tooltipTriggerList = [].slice.call(
            document.querySelectorAll('[data-bs-toggle="tooltip"]')
        );
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            //WALLET WIDGET

            // HIVE Balance
            var hiveCollapse = document.getElementById('collapsehive');
            hiveCollapse.addEventListener('show.bs.collapse', event => {
                var hiveBal = document.getElementById('hiveBal');
                hiveBal.classList.add('d-none');
            })
            hiveCollapse.addEventListener('hide.bs.collapse', event => {
                var hiveBal = document.getElementById('hiveBal');
                hiveBal.classList.remove('d-none');
            })
            // HBD Balance
            var hbdCollapse = document.getElementById('collapsehbd');
            hbdCollapse.addEventListener('show.bs.collapse', event => {
                var hbdBal = document.getElementById('hbdBal');
                hbdBal.classList.add('d-none');
            })
            hbdCollapse.addEventListener('hide.bs.collapse', event => {
                var hbdBal = document.getElementById('hbdBal');
                hbdBal.classList.remove('d-none');
            })
            // DUAT Balance
            var duatCollapse = document.getElementById('collapseduat');
            duatCollapse.addEventListener('show.bs.collapse', event => {
                var duatBal = document.getElementById('duatBal');
                duatBal.classList.add('d-none');
            })
            duatCollapse.addEventListener('hide.bs.collapse', event => {
                var duatBal = document.getElementById('duatBal');
                duatBal.classList.remove('d-none');
            })
            // DLUX Balance
            var dluxCollapse = document.getElementById('collapsedlux');
            dluxCollapse.addEventListener('show.bs.collapse', event => {
                var dluxBal = document.getElementById('dluxBal');
                dluxBal.classList.add('d-none');
            })
            dluxCollapse.addEventListener('hide.bs.collapse', event => {
                var dluxBal = document.getElementById('dluxBal');
                dluxBal.classList.remove('d-none');
            })
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"
        integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js"></script>
</body>

</html>