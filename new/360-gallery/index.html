<!doctype html>
<html lang="en" class="h-100">

<head>
    <title>DLUX 360Â° Gallery</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="apple-touch-icon" href="/img/dlux-icon-192.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DLUX">
    <meta name="theme-color" content="#111222" />
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <script src="https://kit.fontawesome.com/0f693ffc58.js" crossorigin="anonymous"></script>
    <!-- Markdown -->
    <script src="https://unpkg.com/showdown@1.x/dist/showdown.min.js"></script>
    <link href="/css/smde.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
    <!-- Tagify -->
    <script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify"></script>
    <script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.polyfills.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css" rel="stylesheet" type="text/css" />
    <!-- Bootstrap -->
    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">-->
    <!-- Upload Scripts -->
    <script type="text/javascript" src="/js/onlyhash.js"></script>
    <script src="/js/buffer.js"></script>
    <script src="/js/drag-drop.js"></script>
    <!-- <script src="/js/drag-sort.js"></script>
	<script src="https://unpkg.com/lodash@4.16.0"></script> -->
    <!-- Vue Controller -->
    <script type="module" src="/js/spkvue.js"></script>
    <link href="/css/custom.css" rel="stylesheet" />
    <script>
        if ('serviceWorker' in navigator) {
            navigator
                .serviceWorker
                .register(
                    // path to the service worker file
                    '/sw.js'
                )
                // the registration is async and it returns a promise
                .then(function (reg) {
                    console.log('Registration Successful');
                });
        }
    </script>
    <style>
        .form-switch.form-switch-lg .form-check-input {
            height: 2rem;
            width: calc(3rem + 0.75rem);
            border-radius: 4rem;
        }

        .accordion {
            --bs-accordion-color: rgb(173, 181, 189);
            --bs-accordion-bg: #212529;
            --bs-accordion-border-color: #495057;
            --bs-accordion-btn-color: #5C94FE;
            --bs-accordion-btn-bg: #2f3133;
            --bs-accordion-btn-icon: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%235C94FE'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
            --bs-accordion-btn-active-icon: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%235C94FE'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
            --bs-accordion-active-color: #5C94FE;
            --bs-accordion-active-bg: #001D4C;

        }

        .selected-div {
            background: #434851;
            border: 0;
        }

        .hover-div:hover {
            background: #434851;
        }

        .v-enter-active,
        .v-leave-active {
            transition: opacity .0s ease;
        }

        .scroll {
            padding-top: 70px;
            padding-bottom: 20px;
        }

        @media (min-width: 1200px) {
            .scroll {
                overflow-y: scroll;
                height: 100%;

            }
        }

        iframe {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        iframe img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .v-enter-from,
        .v-leave-to {
            opacity: 0;
        }

        [data-bs-toggle="collapse"].collapsed .if-not-collapsed {
            display: none;
        }

        [data-bs-toggle="collapse"]:not(.collapsed) .if-collapsed {
            display: none;
        }

        #img-well {
            color: #0041C3;
            background: #d9f7fc;
            border-style: solid;
            border-radius: 10px;
            border-width: 5px;
            border-color: #0041C3;
        }

        #img-well.drag {
            background: #8ED2C9;
        }

        .overlay {
            z-index: 1;
            background-color: transparent;
        }

        .frame-360 {
            position: relative;
            z-index: 0;
        }
    </style>

</head>

<body class="d-flex flex-column text-center text-white">
    <div id="app">
        <div>
            <nav-vue @login="account = $event;newme($event)" @logout="account = '';removeUser()" @ack="removeOp($event)"
                @refresh="run($event)" :op="toSign" :lapi="lapi" />
        </div>
        <main role="main" class="">


            <div class="row ms-auto me-auto w-100" style="height: 100vh;">
                <div class="text-center" style="margin-top: 94px;">
                    <h1 class="mt-3 mb-3 text-center display-4"><i class="fa-solid fa-globe me-2"></i>360 Builder</h1>
                </div>
                <div class="col-xl-6 pt-0 pb-0 px-0 px-md-1 scroll">
                    <h3 class="d-none">Build</h3>
                    <div class="accordion text-start bg-blur-darkg rounded" id="360accordion">
                        <div class="accordion-item bg-img-none">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#fileHosting" aria-expanded="true" aria-controls="fileHosting">
                                    Image Upload via SPK Network
                                </button>
                            </h2>
                            <div id="fileHosting" class="accordion-collapse collapse show">
                                <div class="accordion-body p-0">
                                    <div class="d-flex flex-wrap justify-content-between p-2"
                                        style="background: #16191C;">
                                        <div class="flex-column m-1">
                                            <div class="input-group">
                                                <span class="input-group-text">@</span>
                                                <input type="text" class="form-control text-info" readonly id="username"
                                                    v-model="account" placeholder="Please login">
                                            </div>
                                        </div>
                                        <div class="flex-column m-1">
                                            <div class="btn-group">
                                                <button type="button" class="btn btn-info" data-bs-toggle="modal"
                                                    data-bs-target="#spkWalletModal" aria-expanded="false"
                                                    aria-controls="SPK Wallet"><i
                                                        class="fa-solid fa-wallet fa-fw me-2"></i>Wallet</button>
                                                <button type="button"
                                                    class="btn btn-dark ms-0 me-0 ps-0 pe-0" disabled></button>
                                                <button v-if="saccountapi.pubKey != 'NA'" type="button"
                                                    class="btn btn-info">
                                                    <modal-vue type="build" token="BROCA"
                                                        :balance="broca_calc(saccountapi.broca)" :account="account"
                                                        @modalsign="sendIt($event)" :ipfsproviders="ipfsProviders">
                                                            <span slot="trigger" class="p-2">
                                                                <i class="fa-solid fa-file-contract fa-fw me-2"></i>Contract
                                                            </span>
                                                    </modal-vue>
                                                </button>
                                                <button type="button" class="btn btn-dark ms-0 me-0 ps-0 pe-0"
                                                    disabled></button>
                                                <button v-if="saccountapi.pubKey == 'NA'" type="button"
                                                    class="btn btn-info" @click="updatePubkey">
                                                    <i class="fas fa-plus fa-fw me-2"></i>Register Account
                                                </button>
                                                <button v-if="saccountapi.pubKey != 'NA'" type="button"
                                                    class="btn btn-info" @click="petitionForContract">
                                                    <i class="fa-solid fa-wand-magic-sparkles fa-fw me-2"></i>Sponsored
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                   
                                    <!--no contracts message-->
                                    <div v-show="!numChannels" class="p-3">
                                        <p class="m-0">You have no available SPK Network
                                            contracts for file hosting. <span v-if="saccountapi.pubKey == 'NA'">After
                                                your account is registered, create a
                                                hosting contract to
                                                upload files.</span><span v-if="saccountapi.pubKey != 'NA'">Create a
                                                hosting contract to upload files.</span></p>
                                    </div>
                                    <!--table of available contracts-->
                                    <div v-show="numChannels" class="">
                                        <table
                                            class="table table-dark table-striped table-hover text-center align-middle mb-0">
                                            <thead>
                                                <tr>

                                                    <th scope="col"><i
                                                            class="fa-solid fa-database fa-fw me-2"></i>Storage</th>
                                                    <th scope="col"><i
                                                            class="fa-solid fa-clock fa-fw me-2"></i>Expiration</th>
                                                    <th scope="col"><i
                                                            class="fa-solid fa-hand-holding-dollar fa-fw me-2"></i>Benificiary
                                                    </th>
                                                    <th scope="col"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <Transition>
                                                    <tr v-for="(sponsor, key, index) in saccountapi.channels">
                                                        <td colspan="4" class="p-0">
                                                            <div class="table-responsive">
                                                                <table class="table text-white align-middle mb-0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <th class="border-0"
                                                                                v-for="channel in sponsor"
                                                                                v-if="channel.c == 1">
                                                                                {{channel.a/1000000}}
                                                                                MB</th>
                                                                            <td class="border-0"
                                                                                v-for="channel in sponsor"
                                                                                v-if="channel.c == 1">
                                                                                {{exp_to_time(channel.e)}}
                                                                            </td>
                                                                            <td class="border-0" scope="row"
                                                                                v-for="channel in sponsor"
                                                                                v-if="channel.c == 1 && channel.s">
                                                                                @{{slotDecode(channel.s, 0)}}
                                                                                ({{slotDecode(channel.s, 1)}}%)</td>
                                                                            <td class="border-0" scope="row"
                                                                                v-for="channel in sponsor"
                                                                                v-if="channel.c == 1 && !channel.s">
                                                                            </td>
                                                                            <td class="border-0 text-end"
                                                                                v-for="channel in sponsor"
                                                                                v-if="channel.c == 1">

                                                                                <button type="button"
                                                                                    class="btn btn-outline-success m-1"
                                                                                    v-bind:class="{'invisible': contract.id}"
                                                                                    @click="selectContract(channel.i, channel.b)"><i
                                                                                        class="fa-solid fa-file-import fa-fw"></i></button>

                                                                                <button type="button"
                                                                                    class="btn btn-success m-1"
                                                                                    v-bind:class="{'d-none': !contract.id || contract.id != channel.i}"
                                                                                    @click="contract.id = ''; contract.api = ''"><i
                                                                                        class="fa-solid fa-file-import fa-fw"></i></button>



                                                                                <a class="collapsed"
                                                                                    data-bs-toggle="collapse"
                                                                                    :href="'#' + replace(channel.i)">
                                                                                    <span class="if-collapsed"><button
                                                                                            class="btn btn-outline-primary"><i
                                                                                                class="fa-solid fa-magnifying-glass fa-fw"></i></button></span>
                                                                                    <span
                                                                                        class="if-not-collapsed"><button
                                                                                            class="btn btn-primary"><i
                                                                                                class="fa-solid fa-magnifying-glass fa-fw"></i></button></span>
                                                                                </a>


                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td class="collapse border-0" colspan="4"
                                                                                :id="replace(channel.i)"
                                                                                v-for="channel in sponsor"
                                                                                v-if="channel.c == 1">
                                                                                <ul class="text-start">
                                                                                    <li>Contract ID: {{channel.i}}
                                                                                    </li>
                                                                                    <li v-if="channel.c == 1">Size
                                                                                        Allowed:
                                                                                        {{channel.a}} bytes</li>
                                                                                    <li v-if="channel.c == 2">Size:
                                                                                        {{channel.u}} bytes
                                                                                    </li>
                                                                                    <li>File Owner: @{{channel.t}}
                                                                                    </li>
                                                                                    <li>Service Provider:
                                                                                        @{{channel.b}}
                                                                                    </li>
                                                                                    <li>Sponsor: @{{channel.f}}</li>
                                                                                    <li>Expiration:
                                                                                        {{exp_to_time(channel.e)}}
                                                                                    </li>
                                                                                    <li>Price: {{channel.r}} Broca
                                                                                    </li>
                                                                                    <li>Redundancy: {{channel.p}}
                                                                                    </li>
                                                                                    <li v-if="channel.s">Terms:
                                                                                        {{slotDecode(channel.s,
                                                                                        1)}}%
                                                                                        Bennificiary to
                                                                                        @{{slotDecode(channel.s,
                                                                                        0)}}</li>
                                                                                    <li>Status: {{channel.c == 1 ?
                                                                                        'Waiting For Upload' :
                                                                                        'Uploaded'}}
                                                                                    </li>
                                                                                    <li v-if="channel.df">Files:<p
                                                                                            v-for="file in channel.df">
                                                                                            {{file}}
                                                                                        </p>
                                                                                    </li>
                                                                                    <li v-if="channel.n">Stored by:
                                                                                        <p v-for="acc in channel.n">
                                                                                            @{{acc}}
                                                                                        </p>
                                                                                    </li>
                                                                                </ul>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </td>



                                                    </tr>
                                                </Transition>

                                            </tbody>
                                        </table>


                                        <!--file uploader-->
                                        <Transition>
                                            <div v-if="contract.id" style="background: #16191C;">
                                                <div class="p-2">
                                                    <form onsubmit="return false;">
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <h5 class="mb-0 mx-2">Upload Files</h5>
                                                            <div class="flex-column ms-auto me-auto">
                                                                <input type="file" @change="uploadFile" multiple
                                                                    class="form-control bg-darkg border-secondary text-white-50" />
                                                            </div>
                                                            <button type="button"
                                                                class="btn-lg btn-close btn-close-white ms-2"
                                                                @click="contract.id = ''; contract.api = ''"
                                                                aria-label="Close"></button>
                                                        </div>
                                                        <div class="p-5 my-4 mx-3 text-center" id="img-well"
                                                            @drop="dragFile($event)" @dragenter.prevent
                                                            @dragover.prevent>
                                                            Or drag the file(s) here
                                                        </div>
                                                    </form>
                                                </div>
                                                <div id="listOfImgs" v-for="(file, index) in File">
                                                    <div class="p-3 mb-3 bg-dark" style="border-radius: 10px;">
                                                        <div class="d-flex align-items-center flex-row pb-2 mb-2">
                                                            <h6 class="m-0">{{file.name}}</h6>
                                                            <div class="flex-grow-1 mx-5">
                                                                <div class="progress" role="progressbar"
                                                                    aria-label="Upload progress" aria-valuenow="25"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    <div class="progress-bar"
                                                                        :style="'width: ' + file.progress + '%'">
                                                                        {{file.progress}}%
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="flex-shrink" v-if="File.length">
                                                                <button type="button" class="me-2 btn btn-secondary"
                                                                    v-if="file.actions.pause"
                                                                    @click="fileRequest[index].resumeFileUpload()">Pause</button>
                                                                <button type="button" class="me-2 btn btn-secondary"
                                                                    v-if="file.actions.resume"
                                                                    @click="fileRequest[index].resumeFileUpload()">Resume</button>
                                                                <button type="button" class="me-2 btn btn-secondary"
                                                                    v-if="file.actions.cancel"
                                                                    @click="fileRequest[index].resumeFileUpload()">Cancel</button>
                                                            </div>
                                                            <div class="ms-auto">
                                                                <button class="btn btn-danger"
                                                                    @click="deleteImg(index, file.name)"
                                                                    data-toggle="tooltip" data-placement="top"
                                                                    title="Delete Asset"><i
                                                                        class="fas fa-fw fa-trash-alt"></i></button>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex w-100">
                                                            <ul class="text-start w-100">
                                                                <li class="">Bytes: {{file.size}}</li>
                                                                <li class="">CID:
                                                                    {{FileInfo[file.name].hash}}</li>
                                                                <li class="">Status:
                                                                    {{FileInfo[file.name].status}}
                                                                </li>
                                                                <li class=""><a
                                                                        :href="'https://ipfs.dlux.io/ipfs/' + FileInfo[file.name].hash"
                                                                        target="_blank">{{FileInfo[file.name].hash}}<i
                                                                            class="fa-solid fa-up-right-from-square fa-fw ms-1"></i></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div v-if="File.length" class="text-center">
                                                    <button type="button" class="btn btn-info mb-2"
                                                        @click="signNUpload()"><i
                                                            class="fa-solid fa-file-signature fa-fw me-2"></i>Sign
                                                        and
                                                        Upload</button>
                                                </div>
                                            </div>
                                        </Transition>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-img-none">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#executedContracts" aria-expanded="false"
                                    aria-controls="executedContracts">
                                    Your Hosted Images
                                </button>
                            </h2>
                            <div id="executedContracts" class="accordion-collapse collapse">
                                <div class="accordion-body p-0">
                                    <div v-if="!hasFiles" class="p-3">
                                        <p class="m-0">You don't have any active SPK Network hosting contracts. If
                                            you have not
                                            yet created a contract, do that first. If you have created a contract,
                                            upload files
                                            and execute the contract. If your contract has expired, extend the
                                            contract.</p>
                                    </div>
                                    <div v-if="hasFiles" style="background-color: #16191C;" class="p-2">


                                        <div v-for="(contract, key, index) in saccountapi.file_contracts"
                                            class="bg-darkg rounded my-2 p-2">
                                            <div class="d-flex flex-wrap align-items-center p-2">
                                                <div class="rounded bg-info px-2 py-1 me-2 text-black"
                                                    title="Contract Size">
                                                    <i
                                                        class="fa-solid fa-database fa-fw me-2"></i>{{contract.u/1000000}}
                                                    MB
                                                </div>
                                                <div class="rounded bg-info px-2 py-1 me-2 text-black"
                                                    title="Expiration">
                                                    <i
                                                        class="fa-solid fa-clock fa-fw me-2"></i>{{exp_to_time(contract.e)}}
                                                </div>
                                                <div v-if="contract.s"
                                                    class="rounded bg-warning px-2 py-1 me-2 text-black"
                                                    title="Beneficiary">
                                                    <i
                                                        class="fa-solid fa-hand-holding-dollar fa-fw me-2"></i>@{{slotDecode(contract.s,
                                                    0)}} ({{slotDecode(contract.s, 1)}}%)
                                                </div>
                                                <div class="btn-group ms-auto" role="group"
                                                    aria-label="Contract Actions">
                                                    <button class="btn btn-secondary">
                                                        <modal-vue type="extend" token="BROCA" :contract="contract"
                                                            v-if="contract.c == 3" :balance="saccountapi.broca"
                                                            :account="account" @modalsign="sendIt($event)">
                                                            <span slot="trigger"
                                                                :test="lapi == 'https://spktest.dlux.io' ? true : false"><i
                                                                    class="fa-solid fa-clock-rotate-left fa-fw me-2"></i>Extend</span></modal-vue></button>
                                                    <!-- <button type="button"
                                                            class="btn btn-secondary" @click=""><i
                                                                class="fa-solid fa-clock-rotate-left fa-fw me-2"></i>Extend</button> -->
                                                    <button v-if="contract.c == 2" type="button" class="btn btn-warning"
                                                        @click="addBen(slotDecode(contract.s,
                                        0), slotDecode(contract.s, 1) * 100)"><i
                                                            class="fa-solid fa-file-pen fa-fw me-2"></i>Finalize</button>
                                                    <button type="button" class="btn btn-dark ms-0 me-0 ps-0 pe-0"
                                                        disabled></button>
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-toggle="collapse"
                                                        :data-bs-target="'#' + replace(contract.i)"><i
                                                            class="fa-solid fa-magnifying-glass fa-fw me-2"></i>Details</button>
                                                </div>
                                            </div>
                                            <div class="collapse" :id="replace(contract.i)">
                                                <ul class="text-start">
                                                    <li>Contract ID: {{contract.i}}</li>
                                                    <li>Size: {{contract.u/1000000}} MB</li>
                                                    <li>File Owner: @{{contract.t}}</li>
                                                    <li>Service Provider: @{{contract.b}}</li>
                                                    <li>Sponsor: @{{contract.f}}</li>
                                                    <li>Expiration: {{exp_to_time(contract.e)}}</li>
                                                    <li>Price: {{contract.r}} Broca</li>
                                                    <li>Redundancy: {{contract.p}}</li>
                                                    <li v-if="contract.s">Terms: {{slotDecode(contract.s, 1)}}%
                                                        Bennificiary to
                                                        @{{slotDecode(contract.s, 0)}}</li>
                                                    <li>Status: {{contract.c == 2 ? 'Waiting For Post' :
                                                        'Decentralizing'}}</li>
                                                    <li v-if="contract.n">Stored by:<p v-for="acc in contract.n">
                                                            @{{acc}} </p>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div v-if="contract.df">
                                                <div class="d-flex flex-wrap">
                                                    <div v-for="(size, file) in contract.df"
                                                        class="d-flex flex-column p-2 rounded m-1"
                                                        style="background-color: #000000;">
                                                        <a :href="'https://ipfs.dlux.io/ipfs/' + file"
                                                            target="_blank"><img
                                                                :src="'https://ipfs.dlux.io/ipfs/' + file"
                                                                onerror="this.style.display='none'" class="img-fluid"
                                                                style="max-width: 300px;" :alt="file"></a>
                                                        <button type="button" class="btn btn-primary mt-2"
                                                            v-if="publishPage" @click="addAsset(file, contract.i)"><i
                                                                class="fa-solid fa-square-plus me-2"></i>Add</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-img-none">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#assetManager" aria-expanded="false" aria-controls="assetManager">
                                    360 Asset Manager
                                </button>
                            </h2>
                            <div id="assetManager" class="accordion-collapse collapse">
                                <div class="accordion-body">
                                    <!-- Asset Manager -->
                                    <div v-if="!postCustom_json.assets.length">No assets added. Use the File Upload
                                        & Hosting section to view or create hosting contracts, then upload assets
                                        into a hosting contract. Once you have assets in a hosting contract, you can
                                        add them to your 360 post and they will appear here.</div>
                                    <div v-if="postCustom_json.assets.length">
                                        <h6>Assets</h6>
                                        <div v-for="(asset, index) in postCustom_json.assets">
                                            <form onsubmit="return false;">
                                                <p class="text-break">CID: {{asset.hash}}</p>
                                                <p>In: {{asset.contract}}</p>
                                                <div
                                                    class="d-flex p-2 justify-content-between align-items-center flex-wrap">
                                                    <div class="m-2">
                                                        <div class="input-group m-2">
                                                            <input type="text" class="form-control" v-model="asset.name"
                                                                placeholder="Picture Name">
                                                        </div>
                                                        <div class="input-group m-2">
                                                            <input type="text" class="form-control"
                                                                v-model="asset.thumbHash"
                                                                placeholder="Thumbnail IPFS Hash">
                                                        </div>
                                                    </div>
                                                    <div class="d-flex flex-column p-2 m-2">
                                                        <div class="row g-3 align-items-center">
                                                            <div class="col-auto me-auto">
                                                                <label for="ry" class="col-form-label"><i
                                                                        class="fa-solid fa-arrows-left-right me-2"></i>Pan
                                                                    Y:{{asset.ry}}</label>
                                                            </div>
                                                            <div class="col-auto">
                                                                <input type="range" class="form-range" id="ry"
                                                                    v-model="asset.ry"
                                                                    @input="focusAsset(asset.hash, asset.contract, asset.name, asset.thumbHash, [asset.rx, asset.ry, asset.rz])"
                                                                    min="-180" max="180" step="1">
                                                            </div>
                                                        </div>
                                                        <div class="row g-3 align-items-center">
                                                            <div class="col-auto me-auto">
                                                                <label for="rx" class="col-form-label"><i
                                                                        class="fa-solid fa-arrows-rotate me-2"></i>Roll
                                                                    X:{{asset.rx}}</label>
                                                            </div>
                                                            <div class="col-auto">
                                                                <input type="range" class="form-range" id="rx"
                                                                    v-model="asset.rx"
                                                                    @input="focusAsset(asset.hash, asset.contract, asset.name, asset.thumbHash, [asset.rx, asset.ry, asset.rz])"
                                                                    min="-180" max="180" step="1">
                                                            </div>
                                                        </div>
                                                        <div class="row g-3 align-items-center">
                                                            <div class="col-auto me-auto">
                                                                <label for="rz" class="col-form-label"><i
                                                                        class="fa-solid fa-arrows-rotate me-2"></i>Roll
                                                                    Z:{{asset.rz}}</label>
                                                            </div>
                                                            <div class="col-auto">
                                                                <input type="range" class="form-range" id="rz"
                                                                    v-model="asset.rz"
                                                                    @input="focusAsset(asset.hash, asset.contract, asset.name, asset.thumbHash, [asset.rx, asset.ry, asset.rz])"
                                                                    min="-180" max="180" step="1">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex flex-column">
                                                        <div class="d-flex" style="justify-content: center;"><img
                                                                :src="'https://ipfs.dlux.io/ipfs/' + asset.hash"
                                                                class="img-fluid" style="max-width: 300px;"
                                                                :alt="asset.hash"></div>
                                                        <div class="m-2 btn-group">
                                                            <button class="btn btn-primary"
                                                                @click="addAsset(asset.hash, asset.contract, asset.name, asset.thumbHash, asset.r)">Refresh
                                                                dApp</button>
                                                            <button type="button"
                                                                class="btn btn-dark ms-0 me-0 ps-0 pe-0"
                                                                disabled></button>
                                                            <button class="btn btn-primary"
                                                                @click="delAsset(asset.hash, asset.contract, asset.name, asset.thumbHash)">Delete
                                                                Asset</button>
                                                            <button type="button"
                                                                class="btn btn-dark ms-0 me-0 ps-0 pe-0"
                                                                disabled></button>
                                                            <button class="btn btn-primary" :disabled="index == 0"
                                                                @click="moveAsset(asset.hash, 'up')"><i
                                                                    class="fa-solid fa-up-long"></i></button>
                                                            <button type="button"
                                                                class="btn btn-dark ms-0 me-0 ps-0 pe-0"
                                                                disabled></button>
                                                            <button class="btn btn-primary"
                                                                :disabled="index == postCustom_json.assets.length - 1"
                                                                @click="moveAsset(asset.hash, 'down')"><i
                                                                    class="fa-solid fa-down-long"></i></button>
                                                        </div>
                                                        <div class="form-check ms-auto me-auto">
                                                            <input class="form-check-input" type="checkbox" value=""
                                                                id="firstImage" :checked="asset.f"
                                                                @click="focusAsset(asset.hash, asset.contract, asset.name, asset.thumbHash, [asset.rx, asset.ry, asset.rz])">
                                                            <label class="form-check-label" for="firstImage">
                                                                Initial Image
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-img-none">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#postDetails" aria-expanded="false" aria-controls="postDetails">
                                    Post Details
                                </button>
                            </h2>
                            <div id="postDetails" class="accordion-collapse collapse">
                                <div class="accordion-body">
                                    <form onsubmit="return false;">
                                        <div class="form-group mb-3">
                                            <label for="username">Author</label>
                                            <div class="input-group">
                                                <span class="input-group-text">@</span>
                                                <input type="text" class="form-control text-info" readonly id="username"
                                                    v-model="account">
                                            </div>
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="title">Title</label>
                                            <input type="text" class="form-control" id="title"
                                                placeholder="Enter an attention grabbing title" v-model="postTitle"
                                                @blur="permlink()">
                                            <small id="permlinkPreview" class="form-text text-muted d-flex"><span
                                                    id="permlink" class="mr-auto">Permlink:
                                                    https://dlux.io/dlux/@{{account}}/{{postPermlink}}</span>
                                                <!-- <a href="#" class="ml-auto"> Edit Permlink</a> -->
                                            </small>
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="body">Post Body</label>
                                            <mde id="body" @data="postBody = $event" />
                                        </div>
                                        <div class="form-group mb-3">
                                            <label for="tags">Tags</label><br>
                                            <tagify class="rounded w-100" @data="postTags = $event" id="tags" />
                                        </div>
                                        <ul v-if="postBens.length">
                                            <h6>Benificiaries: ({{postBens.length}}/8) </h6>

                                            <li v-for="ben in postBens">@{{ben.account}}: {{formatNumber(ben.weight
                                                / 100,
                                                2, '.')}}% <button type="button" class="btn btn-outline-danger btn-sm"
                                                    @click="delBen(ben.account)">Remove</button></li>
                                        </ul>
                                        <button class="btn btn-outline-primary" v-if="!isntDlux" type="button"
                                            @click="addBen('dlux-io', 1000)">Include in
                                            DLUX Ecosystem</button>
                                        <button v-for="item in isntBenned" type="button"
                                            @click="addBen(item.account, item.weight)">Include Contract
                                            {{item.contract}}</button>
                                        <div class="text-center">
                                            <button ref="publishButton" type="button" @keyUp="buildTags()"
                                                class="btn btn-danger" data-toggle="tooltip" data-placement="top"
                                                title="Publish Gallery to HIVE" :disable="!validPost"
                                                @click="post([['vrHash', 'QmNby3SMAAa9hBVHvdkKvvTqs7ssK4nYa2jBdZkxqmRc16']])">Publish</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-xl-6 pt-0 px-0 px-md-1 scroll">
                    <h3 class="d-none">Preview</h3>
                    <div class="accordion bg-blur-darkg rounded" id="previewCol">
                        <div class="accordion-item bg-img-none">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#preview360" aria-expanded="true" aria-controls="preview360">
                                    360 Preview
                                </button>
                            </h2>
                            <div id="preview360" class="accordion-collapse collapse show">
                                <div class="accordion-body p-0">
                                    <div class="position-relative">
                                        <div
                                            class="d-flex w-100 justify-content-end align-items-center p-2 overlay position-absolute top-0 start-50 translate-middle-x">

                                            <div class="form-check form-switch  form-switch-lg me-2">
                                                <input class="form-check-input bg-blur-darkg" type="checkbox"
                                                    role="switch" id="flexSwitchCheckChecked" v-model="showLine"
                                                    title="Horizon Line">
                                            </div>
                                            <button class="btn btn-dark bg-blur-darkg border-0" title="Reset Camera"
                                                @click="resetCamera()"><i
                                                    class="fa-solid fa-camera-rotate"></i></button>
                                        </div>

                                        <hr style="border: 5px solid red;" :class="{'invisible': !showLine}"
                                            class="overlay m-0 w-100 position-absolute top-50 start-0 translate-middle-y" />
                                        <div class="ratio ratio-1x1 frame-360">
                                            <iframe ref="aframePreview" id="aframePreview"
                                                src="https://turnkey-360-gallery.glitch.me/post.html" frameborder="0"
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                allowfullscreen></iframe>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item bg-img-none">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#previewPost" aria-expanded="true" aria-controls="previewPost">
                                    Post Preview
                                </button>
                            </h2>
                            <div id="previewPost" class="accordion-collapse collapse show">
                                <div class="accordion-body text-start">
                                    <div v-if="!postBody.length">
                                        <p class="text-center">Use the Post Details area to compose the body of your
                                            post.</p>
                                    </div>
                                    <!-- <vue-showdown :markdown="postBody" /> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
         <!-- SPK Wallet Modal -->
         <div class="modal modal-xl fade" id="spkWalletModal" tabindex="-1"
         aria-labelledby="spkWalletModalLabel" aria-hidden="true">
         <div class="modal-dialog">
             <div class="modal-content">
                 <div class="modal-header">
                     <h1 class="modal-title fs-5" id="spkWalletModalLabel">SPK Testnet
                         Wallet</h1>
                     <button type="button" class="btn-close" data-bs-dismiss="modal"
                         aria-label="Close"></button>
                 </div>
                 <div class="modal-body">
                     <spk-vue node="false" :account="account"
                         @tosign="toSign=$event;log($event)" />
                 </div>
                 <div class="modal-footer">
                     <button type="button" class="btn btn-primary"
                         data-bs-dismiss="modal">Close</button>
                 </div>
             </div>
         </div>
     </div>
    </div>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>

</body>

</html>