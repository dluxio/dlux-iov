<!doctype html>
<html lang="en" class="h-100">

<head>
    <title>DLUX - Farcaster</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="apple-touch-icon" href="/img/dlux-icon-192.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DLUX">
    <meta name="theme-color" content="#111222" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <!-- Bootstrap -->
    <link href="/css/custom.css" rel="stylesheet" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Markdown Processing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked-linkify-it/lib/index.umd.js"></script>
    <!-- Highlight.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked-highlight@2.2.1/lib/index.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- KaTeX for Math Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked-katex-extension@5.1.4/lib/index.umd.js"></script>
    <script src="/js/purify.min.js"></script>
    <!-- End Markdown Processing -->
    <script src="/js/cryptojs.min.js"></script>
    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="/js/diff.js"></script>
    <script src="/js/purify.min.js"></script>
    <!-- Font Awesome -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/hive-tx/dist/hive-tx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <!-- HLS.js for M3U8 video playback support in Chrome/Firefox -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script type="module" src="/js/v3-far.js"></script>
    <link href="/css/smde-comment.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
    <script src="/reg-sw.js"></script>
    
    <!-- Farcaster-style CSS -->
    <style>
        :root {
            --fc-purple: #855DCD;
            --fc-purple-hover: #7952BD;
            --fc-bg-primary: #0e0e10;
            --fc-bg-secondary: #17171a;
            --fc-bg-tertiary: #212124;
            --fc-text-primary: #ffffff;
            --fc-text-secondary: #8b8b8e;
            --fc-text-tertiary: #5b5b5e;
            --fc-border: #2a2a2d;
            --fc-hover: rgba(255, 255, 255, 0.05);
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: rgb(23, 16, 31) !important;
            /* background-color: var(--fc-bg-primary) !important; */
            color: var(--fc-text-primary) !important;
        }
        
        /* Layout Structure */
        .fc-layout {
            display: flex;
            max-width: 1280px;
            margin: 0 auto;
            min-height: 100vh;
        }
        
        /* Sidebar Navigation */
        .fc-sidebar {
            width: 275px;
            padding: 20px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            border-right: 1px solid var(--fc-border);
        }
        
        .fc-sidebar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            padding: 10px;
        }
        
        .fc-sidebar-logo i {
            font-size: 28px;
            color: var(--fc-purple);
        }
        
        .fc-sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .fc-nav-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 12px 16px;
            border-radius: 12px;
            color: var(--fc-text-primary);
            text-decoration: none;
            font-size: 18px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .fc-nav-item:hover {
            background-color: var(--fc-hover);
            color: var(--fc-text-primary);
        }
        
        .fc-nav-item.active {
            background-color: var(--fc-purple);
            color: white;
        }
        
        .fc-nav-item i {
            font-size: 22px;
            width: 24px;
            text-align: center;
        }
        
        .fc-nav-item .badge {
            background-color: var(--bs-danger);
            margin-left: auto;
        }
        
        /* Main Feed */
        .fc-main {
            flex: 1;
            max-width: 600px;
            border-right: 1px solid var(--fc-border);
        }
        
        .fc-feed-header {
            position: sticky;
            top: 0;
            background-color: rgba(14, 14, 16, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--fc-border);
            z-index: 100;
        }
        
        .fc-feed-title {
            padding: 16px;
            font-size: 20px;
            font-weight: 700;
        }
        
        /* Compose Cast */
        .fc-compose-cast {
            border-bottom: 1px solid var(--fc-border);
            padding: 16px;
        }
        
        .fc-compose-input {
            display: flex;
            gap: 12px;
        }
        
        .fc-compose-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: var(--fc-bg-tertiary);
            flex-shrink: 0;
        }
        
        .fc-compose-form {
            flex: 1;
        }
        
        .fc-compose-textarea {
            width: 100%;
            background-color: transparent;
            border: none;
            color: var(--fc-text-primary);
            font-size: 18px;
            resize: none;
            outline: none;
            min-height: 50px;
            font-family: inherit;
        }
        
        .fc-compose-textarea::placeholder {
            color: var(--fc-text-tertiary);
        }
        
        .fc-compose-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
        }
        
        .fc-compose-tools {
            display: flex;
            gap: 16px;
        }
        
        .fc-compose-tool {
            color: var(--fc-text-secondary);
            font-size: 20px;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .fc-compose-tool:hover {
            color: var(--fc-purple);
        }
        
        .fc-cast-btn {
            background-color: var(--fc-purple);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .fc-cast-btn:hover {
            background-color: var(--fc-purple-hover);
        }
        
        .fc-cast-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Cast (Post) Styles */
        .fc-cast {
            border-bottom: 1px solid var(--fc-border);
            padding: 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .fc-cast:hover {
            background-color: var(--fc-hover);
        }
        
        .fc-cast-header {
            display: flex;
            gap: 12px;
        }
        
        .fc-cast-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--fc-bg-tertiary);
            flex-shrink: 0;
        }
        
        .fc-cast-content {
            flex: 1;
            min-width: 0;
        }
        
        .fc-cast-meta {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 4px;
        }
        
        .fc-cast-author {
            font-weight: 600;
            color: var(--fc-text-primary);
            text-decoration: none;
        }
        
        .fc-cast-author:hover {
            text-decoration: underline;
        }
        
        .fc-cast-username {
            color: var(--fc-text-secondary);
        }
        
        .fc-cast-time {
            color: var(--fc-text-tertiary);
            font-size: 14px;
        }
        
        .fc-cast-text {
            color: var(--fc-text-primary);
            line-height: 1.5;
            margin-bottom: 12px;
            word-wrap: break-word;
        }
        
        .fc-cast-media {
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        
        .fc-cast-media img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .fc-cast-actions {
            display: flex;
            justify-content: space-between;
            max-width: 425px;
        }
        
        .fc-cast-action {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--fc-text-tertiary);
            font-size: 14px;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .fc-cast-action:hover {
            color: var(--fc-text-secondary);
        }
        
        .fc-cast-action:hover i {
            color: var(--fc-purple);
        }
        
        .fc-cast-action.liked i {
            color: #e0245e;
        }
        
        .fc-cast-action.recasted i {
            color: #1d9bf0;
        }
        
        /* Right Sidebar */
        .fc-right-sidebar {
            width: 350px;
            padding: 20px;
        }
        
        .fc-widget {
            background-color: var(--fc-bg-secondary);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .fc-widget-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
        }
        
        .fc-trending-item {
            padding: 12px 0;
            border-bottom: 1px solid var(--fc-border);
        }
        
        .fc-trending-item:last-child {
            border-bottom: none;
        }
        
        .fc-trending-meta {
            color: var(--fc-text-tertiary);
            font-size: 13px;
            margin-bottom: 2px;
        }
        
        .fc-trending-title {
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .fc-trending-count {
            color: var(--fc-text-tertiary);
            font-size: 13px;
        }
        
        /* Loading Spinner */
        .fc-loading {
            display: flex;
            justify-content: center;
            padding: 40px;
        }
        
        .fc-spinner {
            width: 32px;
            height: 32px;
            border: 3px solid var(--fc-border);
            border-top-color: var(--fc-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive Design */
        @media (max-width: 1280px) {
            .fc-right-sidebar {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .fc-sidebar {
                display: none;
            }
            
            .fc-main {
                max-width: 100%;
                border-right: none;
            }
        }
        
        /* Community Badge */
        .fc-community-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            background-color: var(--fc-bg-tertiary);
            border-radius: 12px;
            font-size: 13px;
            color: var(--fc-text-secondary);
            margin-left: 8px;
        }
        
        /* Verified Badge */
        .fc-verified {
            color: var(--fc-purple);
            font-size: 16px;
            margin-left: 4px;
        }
        
        /* Fix for Bootstrap modals */
        .modal {
            z-index: 9999 !important;
        }
        
        .modal-backdrop {
            z-index: 9998 !important;
        }
        
        /* Notifications Styles */
        .fc-notifications {
            min-height: 100vh;
        }
        
        .fc-notification-tabs {
            display: flex;
            border-bottom: 1px solid var(--fc-border);
            position: sticky;
            top: 61px;
            background-color: var(--fc-bg-primary);
            z-index: 99;
        }
        
        .fc-notification-tab {
            flex: 1;
            padding: 16px;
            background: none;
            border: none;
            color: var(--fc-text-secondary);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }
        
        .fc-notification-tab:hover {
            background-color: var(--fc-hover);
        }
        
        .fc-notification-tab.active {
            color: var(--fc-text-primary);
        }
        
        .fc-notification-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background-color: var(--fc-purple);
        }
        
        .fc-notification-actions {
            display: flex;
            justify-content: space-between;
            padding: 12px 16px;
            border-bottom: 1px solid var(--fc-border);
        }
        
        .fc-notification-action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            background-color: var(--fc-bg-secondary);
            border: 1px solid var(--fc-border);
            border-radius: 20px;
            color: var(--fc-text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .fc-notification-action-btn:hover {
            background-color: var(--fc-bg-tertiary);
        }
        
        .fc-notification-action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .fc-notification-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            border-bottom: 1px solid var(--fc-border);
            position: relative;
            transition: background-color 0.2s ease;
        }
        
        .fc-notification-clickable {
            cursor: pointer;
        }
        
        .fc-notification-clickable:hover {
            background-color: var(--fc-hover);
        }
        
        .fc-notification-avatars {
            display: flex;
            align-items: center;
            position: relative;
            min-width: 40px;
        }
        
        .fc-notification-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--fc-bg-primary);
            background-color: var(--fc-bg-tertiary);
            position: relative;
        }
        
        .fc-notification-content {
            flex: 1;
            min-width: 0;
        }
        
        .fc-notification-text {
            color: var(--fc-text-primary);
            font-size: 15px;
            line-height: 1.4;
            margin-bottom: 4px;
        }
        
        .fc-notification-time {
            color: var(--fc-text-tertiary);
            font-size: 14px;
        }
        
        .fc-notification-actions-inline {
            display: flex;
            align-items: center;
        }
        
        .fc-notification-action-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            color: var(--fc-text-tertiary);
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .fc-notification-action-icon:hover {
            color: var(--fc-text-secondary);
            background-color: var(--fc-hover);
        }
        
        .fc-notification-unread {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background-color: var(--fc-purple);
            border-radius: 50%;
        }
        /* Invites Styles */
        .fc-invites {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .fc-invite-card {
            background-color: var(--fc-bg-secondary);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .fc-invite-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 16px;
            background-color: var(--fc-bg-tertiary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--fc-purple);
        }
        
        .fc-invite-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .fc-invite-description {
            color: var(--fc-text-secondary);
            margin-bottom: 16px;
        }
        
        .fc-invite-btn {
            background-color: var(--fc-purple);
            color: white;
            border: none;
            border-radius: 999px;
            padding: 8px 24px;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        .fc-invite-btn:hover {
            opacity: 0.9;
        }
        
        .fc-balance-widget {
            background-color: var(--fc-bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .fc-balance-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--fc-border);
        }
        
        .fc-balance-item:last-child {
            border-bottom: none;
        }
        
        .fc-qr-container {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            display: inline-block;
        }
        
        /* Mini Apps Styles */
        .fc-mini-apps {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .fc-apps-section {
            margin-bottom: 32px;
        }
        
        .fc-apps-section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--fc-text-primary);
        }
        
        .fc-app-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background-color: var(--fc-bg-secondary);
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            color: var(--fc-text-primary);
        }
        
        .fc-app-item:hover {
            background-color: var(--fc-bg-tertiary);
            transform: translateX(4px);
        }
        
        .fc-app-icon {
            width: 48px;
            height: 48px;
            background-color: var(--fc-bg-tertiary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 16px;
            flex-shrink: 0;
        }
        
        .fc-app-info {
            flex: 1;
            min-width: 0;
        }
        
        .fc-app-name {
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .fc-app-creator {
            font-size: 14px;
            color: var(--fc-text-secondary);
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .fc-app-type {
            font-size: 12px;
            color: var(--fc-text-secondary);
            background-color: var(--fc-bg-tertiary);
            padding: 2px 8px;
            border-radius: 4px;
            margin-top: 4px;
            display: inline-block;
        }
        
        .fc-app-rank {
            font-size: 20px;
            font-weight: 600;
            color: var(--fc-text-secondary);
            margin-left: 16px;
        }
        
        /* Warps Styles */
        .fc-warps {
            max-width: 600px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* Token Tabs */
        .fc-token-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--fc-border);
        }
        
        .fc-token-tab {
            padding: 8px 16px;
            border-radius: 8px;
            background: none;
            border: 1px solid var(--fc-border);
            color: var(--fc-text-secondary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .fc-token-tab:hover {
            background-color: var(--fc-hover);
            color: var(--fc-text-primary);
        }
        
        .fc-token-tab.active {
            background-color: var(--fc-purple);
            border-color: var(--fc-purple);
            color: white;
        }
        
        .fc-warps-balance {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .fc-warps-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #6B46C1 0%, #9333EA 100%);
            border-radius: 50%;
            margin-bottom: 24px;
            font-size: 48px;
            color: white;
        }
        
        .fc-warps-count {
            font-size: 48px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--fc-text-primary);
        }
        
        .fc-warps-subtitle {
            color: var(--fc-text-secondary);
            max-width: 400px;
            margin: 0 auto;
        }
        
        .fc-warps-purchase {
            background: var(--fc-card-bg);
            border: 1px solid var(--fc-border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }
        
        .fc-warps-purchase h2 {
            font-size: 20px;
            margin-bottom: 24px;
            color: var(--fc-text-primary);
        }
        
        .fc-warps-amounts h3 {
            font-size: 14px;
            color: var(--fc-text-secondary);
            margin-bottom: 12px;
        }
        
        .fc-warps-options {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .fc-warp-option {
            flex: 1;
            padding: 16px;
            background: transparent;
            border: 2px solid var(--fc-border);
            border-radius: 8px;
            color: var(--fc-text-primary);
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .fc-warp-option:hover {
            border-color: #6B46C1;
        }
        
        .fc-warp-option.active {
            border-color: #9333EA;
            background: rgba(147, 51, 234, 0.1);
        }
        
        .fc-warps-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-top: 1px solid var(--fc-border);
            border-bottom: 1px solid var(--fc-border);
            margin-bottom: 16px;
        }
        
        .fc-price-label {
            color: var(--fc-text-secondary);
            font-size: 16px;
        }
        
        .fc-price-values {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        
        .fc-price-usd {
            font-size: 20px;
            font-weight: 600;
            color: var(--fc-text-primary);
        }
        
        .fc-price-crypto {
            color: var(--fc-text-secondary);
            font-size: 14px;
        }
        
        .fc-warps-info {
            color: var(--fc-text-secondary);
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .fc-buy-warps-btn {
            width: 100%;
            padding: 14px;
            background: #9333EA;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .fc-buy-warps-btn:hover:not(:disabled) {
            background: #7C3AED;
        }
        
        .fc-buy-warps-btn:disabled {
            background: #4B5563;
            cursor: not-allowed;
        }
        
        .fc-warps-activity {
            margin-top: 32px;
        }
        
        .fc-warp-activity-item {
            display: flex;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid var(--fc-border);
        }
        
        .fc-activity-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }
        
        .fc-activity-details {
            flex-grow: 1;
        }
        
        .fc-activity-user {
            font-weight: 600;
            color: var(--fc-text-primary);
        }
        
        .fc-activity-time {
            font-size: 14px;
            color: var(--fc-text-secondary);
        }
        
        .fc-activity-amount {
            font-size: 18px;
            font-weight: 600;
            color: var(--fc-text-secondary);
        }
        
        .fc-activity-amount.positive {
            color: #10B981;
        }
        
        .fc-activity-message {
            padding: 16px;
            margin-top: 16px;
            background: rgba(147, 51, 234, 0.1);
            border-radius: 8px;
            text-align: center;
            color: var(--fc-text-secondary);
        }
        
        .fc-apps-empty {
            text-align: center;
            padding: 40px;
            color: var(--fc-text-secondary);
        }
        
        .fc-apps-loading {
            text-align: center;
            padding: 40px;
        }
        
        /* Profile Styles */
        .fc-profile {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .fc-profile-header {
            position: relative;
            margin-bottom: 24px;
        }
        
        .fc-profile-cover {
            height: 200px;
            background: linear-gradient(135deg, #2D1B69 0%, #0F0C29 100%);
            background-size: cover;
            background-position: center;
            border-radius: 0 0 16px 16px;
            position: relative;
        }
        
        .fc-profile-cover::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 0 0 16px 16px;
        }
        
        .fc-profile-info {
            display: flex;
            align-items: flex-end;
            padding: 0 24px;
            margin-top: -50px;
            position: relative;
        }
        
        .fc-profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid var(--fc-bg);
            background: var(--fc-card-bg);
        }
        
        .fc-profile-details {
            flex-grow: 1;
            margin-left: 20px;
            padding-bottom: 10px;
        }
        
        .fc-profile-name {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
            color: var(--fc-text-primary);
        }
        
        .fc-profile-username {
            color: var(--fc-text-secondary);
            margin: 4px 0;
        }
        
        .fc-profile-stats {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }
        
        .fc-stat-item {
            color: var(--fc-text-secondary);
            font-size: 14px;
        }
        
        .fc-stat-item strong {
            color: var(--fc-text-primary);
            font-weight: 600;
        }
        
        .fc-profile-actions {
            display: flex;
            gap: 8px;
            padding-bottom: 10px;
        }
        
        .fc-profile-bio {
            padding: 20px 24px;
            color: var(--fc-text-primary);
        }
        
        .fc-profile-bio p {
            margin: 0;
            line-height: 1.5;
        }
        
        .fc-profile-links {
            display: flex;
            gap: 20px;
            padding: 0 24px 20px;
            flex-wrap: wrap;
        }
        
        .fc-link-item {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--fc-text-secondary);
            text-decoration: none;
            font-size: 14px;
        }
        
        .fc-link-item:hover {
            color: var(--fc-text-primary);
        }
        
        .fc-profile-tabs {
            display: flex;
            border-bottom: 1px solid var(--fc-border);
            margin-bottom: 24px;
        }
        
        .fc-tab {
            flex: 1;
            padding: 16px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            color: var(--fc-text-secondary);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .fc-tab:hover {
            color: var(--fc-text-primary);
        }
        
        .fc-tab.active {
            color: var(--fc-text-primary);
            border-bottom-color: var(--fc-purple);
        }
        
        .fc-profile-content {
            min-height: 400px;
        }
        
        .fc-loading {
            text-align: center;
            padding: 60px 20px;
            color: var(--fc-text-secondary);
        }
        
        .fc-empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--fc-text-secondary);
        }
        
        .fc-apps-search {
            margin-bottom: 24px;
        }
        
        .fc-apps-search input {
            width: 100%;
            background-color: var(--fc-bg-secondary);
            border: 1px solid var(--fc-border);
            border-radius: 8px;
            padding: 12px 16px;
            color: var(--fc-text-primary);
            font-size: 16px;
        }
        
        .fc-apps-search input::placeholder {
            color: var(--fc-text-secondary);
        }
        
        .fc-apps-search input:focus {
            outline: none;
            border-color: var(--fc-purple);
        }
    </style>

</head>
<!-- class="bg-img-gradient" -->
<body id="farcaster" >
    <div id="app" class="fc-layout" v-cloak>
        
        <!-- Left Sidebar Navigation -->
        <aside class="fc-sidebar">
            <div class="fc-sidebar-logo">
                <i class="fa-solid fa-vr-cardboard"></i>
                <span class="h4 mb-0 fw-bold">DLUX</span>
            </div>
            
            <nav class="fc-sidebar-nav">
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'home'}" @click="switchView('home')">
                    <i class="fa-solid fa-house"></i>
                    <span>Home</span>
                </a>
                
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'notifications'}" @click="switchView('notifications')">
                    <i class="fa-solid fa-bell"></i>
                    <span>Notifications</span>
                    <span class="badge rounded-pill" v-if="unreadNotifications > 0">{{unreadNotifications}}</span>
                </a>
                
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'invites'}" @click="switchView('invites')">
                    <i class="fa-solid fa-user-plus"></i>
                    <span>Invites</span>
                </a>
                
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'bookmarks'}" @click="switchView('bookmarks')">
                    <i class="fa-solid fa-bookmark"></i>
                    <span>Bookmarks</span>
                </a>
                
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'packs'}" @click="switchView('packs')">
                    <i class="fa-solid fa-box-open"></i>
                    <span>Starter Packs</span>
                </a>
                
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'apps'}" @click="switchView('apps')">
                    <i class="fa-solid fa-expand"></i>
                    <span>Mini Apps</span>
                </a>
                
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'warps'}" @click="switchView('warps')">
                    <i class="fa-solid fa-bolt"></i>
                    <span>Honey</span>
                </a>
                
                <a href="#" class="fc-nav-item" :class="{'active': currentView === 'profile'}" @click="switchView('profile')" v-if="account">
                    <i class="fa-solid fa-user"></i>
                    <span>Profile</span>
                </a>
            </nav>
            
            <!-- User Profile Section -->
            <div class="mt-auto pt-4" v-if="account && account !== 'GUEST'">
                <div class="dropdown dropup">
                    <div class="fc-nav-item" data-bs-toggle="dropdown" aria-expanded="false" style="cursor: pointer;">
                        <img :src="`https://images.hive.blog/u/${account}/avatar/small`" 
                             class="fc-cast-avatar" 
                             @error="$event.target.src='/img/no-user.png'" />
                        <div class="flex-grow-1">
                            <div class="fw-semibold">@{{account}}</div>
                            <div class="small text-muted">
                                <i class="fa-solid fa-circle-check text-success me-1"></i>
                                {{userReputation}} Rep
                            </div>
                        </div>
                        <i class="fa-solid fa-ellipsis"></i>
                    </div>
                    <ul class="dropdown-menu dropdown-menu-dark">
                        <li><h6 class="dropdown-header">Signed in as {{account}}</h6></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" :href="`/@${account}`" target="_blank">
                            <i class="fa-solid fa-user me-2"></i>View Profile
                        </a></li>
                        <li><a class="dropdown-item" href="/wallet" target="_blank">
                            <i class="fa-solid fa-wallet me-2"></i>Wallet
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" @click="logout()" style="cursor: pointer;">
                            <i class="fa-solid fa-right-from-bracket me-2"></i>Sign Out
                        </a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Login Button / Not Logged In State -->
            <div class="mt-auto pt-4" v-else>
                <div class="text-center mb-3">
                    <p class="text-muted small mb-2">Not signed in</p>
                </div>
                <a href="#" class="fc-cast-btn w-100 text-center text-decoration-none d-block" 
                   data-bs-toggle="modal" 
                   data-bs-target="#loginModal" 
                   aria-controls="loginModal">
                    <i class="fa-solid fa-right-to-bracket me-2"></i>Sign In with Hive
                </a>
            </div>
        </aside>
        
        <!-- Main Feed -->
        <main class="fc-main">
            <!-- Feed Header -->
            <header class="fc-feed-header">
                <div class="fc-feed-title">
                    {{getFeedTitle()}}
                </div>
                
                <!-- Feed Tabs -->
                <div class="nav nav-tabs border-0" v-if="currentView === 'home'">
                    <button class="nav-link" :class="{'active': feedType === 'following'}" @click="switchFeed('following')" v-if="account && account !== 'GUEST'">
                        Following
                    </button>
                    <button class="nav-link" :class="{'active': feedType === 'trending'}" @click="switchFeed('trending')">
                        Trending
                    </button>
                    <button class="nav-link" :class="{'active': feedType === 'new'}" @click="switchFeed('new')">
                        New
                    </button>
                </div>
            </header>
            
            <!-- Compose Cast Area -->
            <div class="fc-compose-cast" v-if="account && account !== 'GUEST' && currentView === 'home'">
                <div class="fc-compose-input">
                    <img :src="`https://images.hive.blog/u/${account}/avatar/small`" 
                         class="fc-compose-avatar" 
                         @error="$event.target.src='/img/no-user.png'" />
                    <div class="fc-compose-form">
                        <textarea 
                            class="fc-compose-textarea" 
                            placeholder="What's happening?"
                            v-model="newCast"
                            @input="autoResize"
                            rows="1"
                        ></textarea>
                        <div class="fc-compose-actions">
                            <div class="fc-compose-tools">
                                <i class="fa-solid fa-image fc-compose-tool" @click="addImage()"></i>
                                <i class="fa-solid fa-cube fc-compose-tool" @click="add3D()"></i>
                                <i class="fa-solid fa-video fc-compose-tool" @click="addVideo()"></i>
                                <i class="fa-solid fa-link fc-compose-tool" @click="addLink()"></i>
                            </div>
                            <button class="fc-cast-btn" :disabled="!newCast.trim()" @click="submitCast()">
                                Cast
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Feed Content for Home -->
            <div class="fc-feed" v-if="currentView === 'home'">
                <!-- Loading State -->
                <div class="fc-loading" v-if="loading">
                    <div class="fc-spinner"></div>
                </div>
                
                <!-- Empty State -->
                <div class="text-center p-5" v-else-if="displayPosts.length === 0 && !loading">
                    <div v-if="feedType === 'following' && account && account !== 'GUEST'">
                        <i class="fa-solid fa-users" style="font-size: 4em; color: var(--fc-text-tertiary);"></i>
                        <h4 class="mt-3 mb-2">Your following feed is empty</h4>
                        <p class="text-muted mb-4">Follow accounts to see their posts here</p>
                        <div class="d-flex flex-column align-items-center gap-3" style="max-width: 400px; margin: 0 auto;">
                            <div class="w-100 text-start">
                                <h6 class="text-white-50 mb-3">Suggested accounts to follow:</h6>
                                <div class="d-flex align-items-center p-3 bg-dark rounded mb-2" v-for="user in suggestedUsers.slice(0, 3)" :key="user.account">
                                    <img :src="`https://images.hive.blog/u/${user.account}/avatar/small`" 
                                         class="fc-cast-avatar me-3" 
                                         style="width: 40px; height: 40px;" 
                                         @error="$event.target.src='/img/no-user.png'" />
                                    <div class="flex-grow-1">
                                        <div class="fw-semibold">@{{user.account}}</div>
                                        <div class="small text-muted">{{user.reputation}} Rep</div>
                                    </div>
                                    <a :href="`https://hive.blog/@${user.account}`" target="_blank" class="btn btn-sm btn-outline-light">View Profile</a>
                                </div>
                            </div>
                            <button class="fc-cast-btn" @click="switchFeed('trending')">
                                <i class="fa-solid fa-fire me-2"></i>Browse Trending
                            </button>
                        </div>
                    </div>
                    <div v-else>
                        <i class="fa-solid fa-comment-slash" style="font-size: 4em; color: var(--fc-text-tertiary);"></i>
                        <p class="mt-3 text-muted">No casts to display</p>
                    </div>
                </div>
                
                <!-- Cast List -->
                <article class="fc-cast" v-for="post in displayPosts" :key="post.url" @click="openPost(post)">
                    <div class="fc-cast-header">
                        <img :src="`https://images.hive.blog/u/${post.author}/avatar/small`" 
                             class="fc-cast-avatar" 
                             @error="$event.target.src='/img/no-user.png'" />
                        <div class="fc-cast-content">
                            <div class="fc-cast-meta">
                                <a href="#" class="fc-cast-author" @click.prevent="viewProfile(post.author)">{{post.author}}</a>
                                <i class="fa-solid fa-circle-check fc-verified" v-if="post.reputation > 70"></i>
                                <span class="fc-cast-username">@{{post.author}}</span>
                                <span class="fc-cast-time"> Â· {{formatTime(post.created)}}</span>
                                <span class="fc-community-badge" v-if="post.community">
                                    <i class="fa-solid fa-users"></i>
                                    {{post.community_title || post.community}}
                                </span>
                            </div>
                            <div class="fc-cast-text">
                                {{post.title}}
                                <div v-if="post.description" class="mt-2 text-white-50">{{post.description}}</div>
                            </div>
                            <div class="fc-cast-media" v-if="post.pics && post.pics.length > 0">
                                <img :src="post.pics[0]" :alt="post.title" />
                            </div>
                            <div class="fc-cast-actions">
                                <span class="fc-cast-action" @click.stop="reply(post)">
                                    <i class="fa-regular fa-comment"></i>
                                    <span v-if="post.children > 0">{{post.children}}</span>
                                </span>
                                <span class="fc-cast-action" :class="{'recasted': post.reblogged}" @click.stop="recast(post)">
                                    <i class="fa-solid fa-retweet"></i>
                                    <span v-if="post.reblogs > 0">{{post.reblogs}}</span>
                                </span>
                                <span class="fc-cast-action" :class="{'liked': post.voted}" @click.stop="like(post)">
                                    <i class="fa-heart" :class="post.voted ? 'fa-solid' : 'fa-regular'"></i>
                                    <span v-if="post.votes > 0">{{post.votes}}</span>
                                </span>
                                <span class="fc-cast-action" @click.stop="share(post)">
                                    <i class="fa-solid fa-arrow-up-from-bracket"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </article>
                
                <!-- Load More -->
                <div class="fc-loading" v-if="hasMore && !loading">
                    <button class="fc-cast-btn" @click="loadMore()">Load More</button>
                </div>
            </div>
            
            <!-- Notifications View -->
            <div class="fc-notifications" v-if="currentView === 'notifications'">
                <!-- Notification Tabs -->
                <div class="fc-notification-tabs">
                    <button 
                        class="fc-notification-tab" 
                        :class="{'active': activeNotificationTab === 'activity'}"
                        @click="activeNotificationTab = 'activity'">
                        Activity
                    </button>
                    <button 
                        class="fc-notification-tab" 
                        :class="{'active': activeNotificationTab === 'channels'}"
                        @click="activeNotificationTab = 'channels'">
                        Channels
                    </button>
                    <button 
                        class="fc-notification-tab" 
                        :class="{'active': activeNotificationTab === 'mentions'}"
                        @click="activeNotificationTab = 'mentions'">
                        Mentions
                    </button>
                </div>
                
                <!-- Loading State -->
                <div class="fc-loading" v-if="notificationsLoading">
                    <div class="fc-spinner"></div>
                </div>
                
                <!-- Error State -->
                <div v-else-if="notificationsError" class="text-center p-5">
                    <i class="fa-solid fa-exclamation-triangle" style="font-size: 3em; color: var(--fc-text-tertiary);"></i>
                    <p class="mt-3 text-muted">{{ notificationsError }}</p>
                    <button class="fc-cast-btn" @click="getNotifications()">
                        <i class="fa-solid fa-rotate me-2"></i>Retry
                    </button>
                </div>
                
                <!-- Empty State -->
                <div v-else-if="filteredNotifications.length === 0" class="text-center p-5">
                    <i class="fa-solid fa-bell-slash" style="font-size: 4em; color: var(--fc-text-tertiary);"></i>
                    <p class="mt-3 text-muted">No notifications</p>
                </div>
                
                <!-- Notifications List -->
                <div v-else>
                    <!-- Action Buttons -->
                    <div class="fc-notification-actions" v-if="filteredNotifications.length > 0">
                        <button @click="getNotifications()" 
                                class="fc-notification-action-btn"
                                :disabled="notificationsLoading">
                            <i class="fa-solid fa-rotate" :class="{'fa-spin': notificationsLoading}"></i>
                            <span>Refresh</span>
                        </button>
                        <button @click="markAllNotificationsRead()" 
                                class="fc-notification-action-btn"
                                v-if="notificationsCount > 0">
                            <i class="fa-solid fa-check-double"></i>
                            <span>Mark All Read</span>
                        </button>
                    </div>
                    
                    <!-- Notification Items -->
                    <div class="fc-notification-item" 
                         v-for="notification in filteredNotifications" 
                         :key="notification.id"
                         @click="notification.data.url ? window.open(notification.data.url, '_blank') : null"
                         :class="{'fc-notification-clickable': notification.data.url}">
                        
                        <!-- Avatars -->
                        <div class="fc-notification-avatars">
                            <img v-for="(avatar, index) in getNotificationAvatars(notification).slice(0, 3)" 
                                 :key="index"
                                 :src="avatar" 
                                 class="fc-notification-avatar"
                                 :style="index > 0 ? `margin-left: -12px; z-index: ${3-index}` : `z-index: 3`"
                                 @error="$event.target.src='/img/no-user.png'" />
                        </div>
                        
                        <!-- Content -->
                        <div class="fc-notification-content">
                            <div class="fc-notification-text">
                                {{ formatNotificationMessage(notification) }}
                            </div>
                            <div class="fc-notification-time">
                                {{ formatTime(notification.createdAt) }}
                            </div>
                        </div>
                        
                        <!-- Actions -->
                        <div class="fc-notification-actions-inline">
                            <button class="fc-notification-action-icon" 
                                    @click.stop="dismissNotification(notification.id)"
                                    title="Dismiss">
                                <i class="fa-solid fa-times"></i>
                            </button>
                        </div>
                        
                        <!-- Unread indicator -->
                        <div v-if="notification.status === 'unread'" 
                             class="fc-notification-unread"></div>
                    </div>
                </div>
            </div>
            
            
            <!-- Invites View -->
            <div class="fc-invites" v-if="currentView === 'invites'">
                <!-- Logged In State -->
                <div v-if="account && account !== 'GUEST'">
                    <!-- QR Code Card -->
                    <div class="fc-invite-card">
                        <h3 class="fc-invite-title mb-3">Invite Friends to DLUX</h3>
                        <div class="fc-qr-container mb-3" ref="inviteQrCode"></div>
                        <p class="fc-invite-description">
                            Scan this QR code to join DLUX with @{{account}}
                        </p>
                    </div>
                    
                    <!-- Balance Widget -->
                    <div class="fc-balance-widget">
                        <h4 class="mb-3">Account Creation Resources</h4>
                        <div class="fc-balance-item">
                            <span>HIVE Balance</span>
                            <span>{{formatNumber(accountinfo.balance || '0', 3)}}<i class="fa-brands fa-hive ms-1"></i></span>
                        </div>
                        <div class="fc-balance-item" 
                             :class="{'text-success': parseFloat(accountinfo.balance || 0) >= parseFloat(hivestats.account_creation_fee || 3), 'text-danger': parseFloat(accountinfo.balance || 0) < parseFloat(hivestats.account_creation_fee || 3)}">
                            <span>Creation Fee</span>
                            <span>{{formatNumber(hivestats.account_creation_fee || '3', 3)}}<i class="fa-brands fa-hive ms-1"></i></span>
                        </div>
                        <div class="fc-balance-item"
                             :class="{'text-success': (accountinfo.pending_claimed_accounts || 0) > 0, 'text-danger': (accountinfo.pending_claimed_accounts || 0) <= 0}">
                            <span>Account Creation Tokens</span>
                            <span>{{accountinfo.pending_claimed_accounts || 0}}<i class="fa-solid fa-circle-dot ms-1"></i></span>
                        </div>
                        
                        <div class="d-grid gap-2 mt-3">
                            <button class="fc-invite-btn" @click="startAccountCreation()">
                                <i class="fa-solid fa-user-plus me-2"></i>Create Account
                            </button>
                            <button class="fc-invite-btn" @click="claimACT()">
                                <i class="fa-solid fa-circle-dot me-2"></i>Claim ACT
                            </button>
                            <small class="text-muted mt-2">
                                Claiming ACTs requires â{{ claimActHpNeeded }} HP
                            </small>
                        </div>
                    </div>
                </div>
                
                <!-- Not Logged In State -->
                <div v-else>
                    <!-- Get Started Card -->
                    <div class="fc-invite-card">
                        <div class="fc-invite-icon">
                            <i class="fa-solid fa-user-plus"></i>
                        </div>
                        <h3 class="fc-invite-title">Create a new HIVE account</h3>
                        <p class="fc-invite-description">
                            Join the decentralized social media revolution
                        </p>
                        <button class="fc-invite-btn" @click="startAccountCreation()">
                            Get Started<i class="fa-solid fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                    
                    <!-- Key Recovery Card -->
                    <div class="fc-invite-card">
                        <div class="fc-invite-icon">
                            <i class="fa-solid fa-key"></i>
                        </div>
                        <h3 class="fc-invite-title">Already have keys?</h3>
                        <p class="fc-invite-description">
                            Recover your HIVE account keys generated with a crypto wallet
                        </p>
                        <button class="fc-invite-btn" @click="startKeyRecovery()">
                            Key Recovery<i class="fa-solid fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mini Apps View -->
            <div class="fc-mini-apps" v-if="currentView === 'apps'">
                <!-- Search Bar -->
                <div class="fc-apps-search">
                    <input type="search" 
                           placeholder="Search dApps..." 
                           v-model="dappSearchQuery" 
                           @input="searchDapps">
                </div>
                
                <!-- Loading State -->
                <div v-if="dappsLoading" class="fc-apps-loading">
                    <i class="fa-solid fa-spinner fa-spin fa-2x mb-3"></i>
                    <p>Loading dApps...</p>
                </div>
                
                <!-- Apps Lists -->
                <div v-else>
                    <!-- Your Mini Apps Section -->
                    <div class="fc-apps-section" v-if="userDapps.length > 0">
                        <h3 class="fc-apps-section-title">Your mini apps</h3>
                        <a v-for="app in userDapps" 
                           :key="`${app.author}/${app.permlink}`"
                           :href="`/@${app.author}/${app.permlink}`"
                           target="_blank"
                           class="fc-app-item">
                            <div class="fc-app-icon">
                                {{ appTypeIcons[app.type] || 'ð' }}
                            </div>
                            <div class="fc-app-info">
                                <div class="fc-app-name">{{ app.title }}</div>
                                <div class="fc-app-creator">
                                    by <img :src="`https://images.hive.blog/u/${app.author}/avatar/small`" 
                                            style="width: 16px; height: 16px; border-radius: 50%;"
                                            @error="$event.target.src='/img/no-user.png'"> 
                                    @{{ app.author }}
                                </div>
                                <div class="fc-app-type">{{ app.type }}</div>
                            </div>
                        </a>
                    </div>
                    
                    <!-- Top Mini Apps Section -->
                    <div class="fc-apps-section">
                        <h3 class="fc-apps-section-title">Top mini apps</h3>
                        <div v-if="topDapps.length === 0" class="fc-apps-empty">
                            <i class="fa-solid fa-cube fa-3x mb-3"></i>
                            <p>No dApps found. Be the first to create one!</p>
                        </div>
                        <a v-else
                           v-for="(app, index) in topDapps" 
                           :key="`${app.author}/${app.permlink}`"
                           :href="`/@${app.author}/${app.permlink}`"
                           target="_blank"
                           class="fc-app-item">
                            <div class="fc-app-icon">
                                {{ appTypeIcons[app.type] || 'ð' }}
                            </div>
                            <div class="fc-app-info">
                                <div class="fc-app-name">{{ app.title }}</div>
                                <div class="fc-app-creator">
                                    by <img :src="`https://images.hive.blog/u/${app.author}/avatar/small`" 
                                            style="width: 16px; height: 16px; border-radius: 50%;"
                                            @error="$event.target.src='/img/no-user.png'"> 
                                    @{{ app.author }}
                                </div>
                                <div class="fc-app-type">{{ app.type }}</div>
                            </div>
                            <div class="fc-app-rank">#{{ index + 1 }}</div>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Warps View -->
            <div class="fc-warps" v-if="currentView === 'warps'">
                <!-- Token Tabs -->
                <div class="fc-token-tabs">
                    <button :class="['fc-token-tab', { active: activeToken === 'dlux' }]" 
                            @click="switchToken('dlux')">
                        DLUX
                    </button>
                    <button :class="['fc-token-tab', { active: activeToken === 'spk' }]" 
                            @click="switchToken('spk')">
                        SPK
                    </button>
                </div>
                
                <!-- Token Balance Display -->
                <div class="fc-warps-balance">
                    <div class="fc-warps-icon">
                        <i :class="getTokenIcon(activeToken)"></i>
                    </div>
                    <h1 class="fc-warps-count">{{ formatNumber(getTokenBalance(activeToken), 0, '.', ',') }} {{ getTokenName(activeToken) }}</h1>
                    <p class="fc-warps-subtitle">{{ getTokenDescription(activeToken) }}</p>
                </div>
                
                <!-- Purchase Section -->
                <div class="fc-warps-purchase">
                    <h2>Purchase</h2>
                    
                    <!-- Amount Selection -->
                    <div class="fc-warps-amounts">
                        <h3>Select amount</h3>
                        <div class="fc-warps-options">
                            <button :class="['fc-warp-option', { active: selectedWarpAmount === 500 }]" 
                                    @click="selectedWarpAmount = 500">
                                500
                            </button>
                            <button :class="['fc-warp-option', { active: selectedWarpAmount === 2500 }]" 
                                    @click="selectedWarpAmount = 2500">
                                2,500
                            </button>
                            <button :class="['fc-warp-option', { active: selectedWarpAmount === 10000 }]" 
                                    @click="selectedWarpAmount = 10000">
                                10,000
                            </button>
                        </div>
                    </div>
                    
                    <!-- Price Display -->
                    <div class="fc-warps-price">
                        <span class="fc-price-label">Price</span>
                        <div class="fc-price-values">
                            <span class="fc-price-usd">~${{ calculateWarpPriceUSD() }}</span>
                            <span class="fc-price-crypto">~{{ calculateWarpPriceHive() }} HIVE</span>
                        </div>
                    </div>
                    
                    <!-- Purchase Info -->
                    <p class="fc-warps-info">
                        Payments are made onchain using HIVE or HBD, and may have additional fees.
                    </p>
                    
                    <!-- Buy Button -->
                    <button class="fc-buy-warps-btn" @click="purchaseWarps" :disabled="!account || account === 'GUEST'">
                        Buy Honey <i class="fa-solid fa-arrow-up-right-from-square ms-1"></i>
                    </button>
                </div>
                
                <!-- Recent Activity -->
                <div class="fc-warps-activity" v-if="warpsActivity.length > 0">
                    <div v-for="activity in warpsActivity" :key="activity.id" class="fc-warp-activity-item">
                        <img :src="`https://images.hive.blog/u/${activity.user}/avatar/small`" 
                             class="fc-activity-avatar" 
                             @error="$event.target.src='/img/no-user.png'">
                        <div class="fc-activity-details">
                            <div class="fc-activity-user">@{{ activity.user }}</div>
                            <div class="fc-activity-time">{{ activity.time }}</div>
                        </div>
                        <div class="fc-activity-amount" :class="{ positive: activity.type === 'received' }">
                            {{ activity.type === 'received' ? '+' : '' }}{{ activity.amount }}
                        </div>
                    </div>
                    <div class="fc-activity-message">
                        <span>A small thank you from Farcaster for joining.</span>
                    </div>
                </div>
            </div>
            
            <!-- Profile View -->
            <div class="fc-profile" v-if="currentView === 'profile'">
                <!-- Profile Header -->
                <div class="fc-profile-header">
                    <div class="fc-profile-cover" 
                     :style="profileInfo.cover_image ? 
                            `background-image: url('${proxyBannerImage(profileInfo.cover_image)}'); background-size: cover; background-position: center;` : 
                            ''"></div>
                    <div class="fc-profile-info">
                        <img :src="`https://images.hive.blog/u/${profileAccount}/avatar`" 
                             class="fc-profile-avatar" 
                             @error="$event.target.src='/img/no-user.png'">
                        <div class="fc-profile-details">
                            <h1 class="fc-profile-name">{{ profileInfo.name || profileAccount }}</h1>
                            <p class="fc-profile-username">@{{ profileAccount }}</p>
                            <div class="fc-profile-stats">
                                <span class="fc-stat-item">
                                    <strong>{{ formatNumber(profileStats.following, 0, '.', ',') }}</strong> Following
                                </span>
                                <span class="fc-stat-item">
                                    <strong>{{ formatNumber(profileStats.followers, 0, '.', ',') }}</strong> Followers
                                </span>
                            </div>
                        </div>
                        <div class="fc-profile-actions">
                            <button v-if="isOwnProfile" class="btn btn-outline-light" @click="editProfile">
                                Edit Profile
                            </button>
                            <button v-else :class="['btn', isFollowing ? 'btn-outline-light' : 'btn-primary']" 
                                    @click="toggleFollow">
                                {{ isFollowing ? 'Following' : 'Follow' }}
                            </button>
                            <button class="btn btn-primary ms-2" @click="createNewCast">
                                Cast
                            </button>
                        </div>
                    </div>
                    
                    <!-- Profile Bio -->
                    <div class="fc-profile-bio" v-if="profileInfo.about">
                        <p>{{ profileInfo.about }}</p>
                    </div>
                    
                    <!-- Profile Links -->
                    <div class="fc-profile-links" v-if="profileInfo.website || profileInfo.location">
                        <span v-if="profileInfo.location" class="fc-link-item">
                            <i class="fa-solid fa-location-dot"></i> {{ profileInfo.location }}
                        </span>
                        <a v-if="profileInfo.website" :href="profileInfo.website" target="_blank" class="fc-link-item">
                            <i class="fa-solid fa-link"></i> {{ profileInfo.website }}
                        </a>
                    </div>
                </div>
                
                <!-- Profile Tabs -->
                <div class="fc-profile-tabs">
                    <button :class="['fc-tab', { active: profileView === 'casts' }]" 
                            @click="switchProfileTab('casts')">
                        Casts
                    </button>
                    <button :class="['fc-tab', { active: profileView === 'replies' }]" 
                            @click="switchProfileTab('replies')">
                        Casts + Replies
                    </button>
                    <button :class="['fc-tab', { active: profileView === 'likes' }]" 
                            @click="switchProfileTab('likes')">
                        Likes
                    </button>
                    <button :class="['fc-tab', { active: profileView === 'starter-packs' }]" 
                            @click="switchProfileTab('starter-packs')">
                        Starter Packs
                    </button>
                </div>
                
                <!-- Profile Content -->
                <div class="fc-profile-content">
                    <!-- Loading State -->
                    <div v-if="profileLoading" class="fc-loading">
                        <i class="fa-solid fa-spinner fa-spin fa-2x"></i>
                        <p>Loading profile...</p>
                    </div>
                    
                    <!-- Empty State -->
                    <div v-else-if="profilePosts.length === 0" class="fc-empty-state">
                        <p>{{ profileAccount }} hasn't {{ profileView === 'likes' ? 'liked anything' : 'casted' }} yet.</p>
                    </div>
                    
                    <!-- Posts List -->
                    <div v-else class="fc-posts">
                        <div v-for="post in profilePosts" :key="`${post.author}/${post.permlink}`" class="fc-cast">
                            <img :src="`https://images.hive.blog/u/${post.author}/avatar/small`" 
                                 class="fc-cast-avatar" 
                                 @error="$event.target.src='/img/no-user.png'">
                            <div class="fc-cast-content">
                                <div class="fc-cast-header">
                                    <a href="#" class="fc-cast-author" @click.prevent="viewProfile(post.author)">{{ post.author }}</a>
                                    <span class="fc-cast-time"> Â· {{ formatTime(post.created) }}</span>
                                </div>
                                <div class="fc-cast-text">
                                    {{ post.title }}
                                    <div v-if="post.description" class="mt-2 text-white-50">{{ post.description }}</div>
                                </div>
                                <div class="fc-cast-media" v-if="post.pics && post.pics.length > 0">
                                    <img :src="post.pics[0]" :alt="post.title" />
                                </div>
                                <div class="fc-cast-actions">
                                    <span class="fc-cast-action" @click="likePost(post)">
                                        <i :class="['fa-heart', post.liked ? 'fa-solid' : 'fa-regular']"></i>
                                        <span v-if="post.active_votes.length > 0">{{ post.active_votes.length }}</span>
                                    </span>
                                    <span class="fc-cast-action" @click="replyTo(post)">
                                        <i class="fa-regular fa-comment"></i>
                                        <span v-if="post.children > 0">{{ post.children }}</span>
                                    </span>
                                    <span class="fc-cast-action" @click="recast(post)">
                                        <i class="fa-solid fa-retweet"></i>
                                    </span>
                                    <span class="fc-cast-action" @click="sharePost(post)">
                                        <i class="fa-solid fa-share"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Right Sidebar -->
        <aside class="fc-right-sidebar">
            <!-- Search Widget -->
            <div class="fc-widget">
                <input type="search" class="form-control bg-dark border-0" placeholder="Search casts, channels and users" v-model="searchQuery" @keyup.enter="search()">
            </div>
            
            <!-- Trending Widget -->
            <div class="fc-widget">
                <h3 class="fc-widget-title">Trending</h3>
                <div class="fc-trending-item" v-for="trend in trending" :key="trend.tag">
                    <div class="fc-trending-meta">{{trend.category}}</div>
                    <div class="fc-trending-title">#{{trend.tag}}</div>
                    <div class="fc-trending-count">{{trend.count}} casts</div>
                </div>
            </div>
            
            <!-- Suggested Users Widget -->
            <div class="fc-widget">
                <h3 class="fc-widget-title">Who to follow</h3>
                <div class="d-flex align-items-center py-3" v-for="user in suggestedUsers" :key="user.account">
                    <img :src="`https://images.hive.blog/u/${user.account}/avatar/small`" class="fc-cast-avatar me-3" @error="$event.target.src='/img/no-user.png'" />
                    <div class="flex-grow-1">
                        <div class="fw-semibold">{{user.account}}</div>
                        <div class="small text-muted">{{user.reputation}} Rep</div>
                    </div>
                    <button class="btn btn-sm btn-outline-light">Follow</button>
                </div>
            </div>
            
            <!-- Footer Links -->
            <div class="small text-muted px-3">
                <a href="#" class="text-muted me-3">Terms</a>
                <a href="#" class="text-muted me-3">Privacy</a>
                <a href="#" class="text-muted">About</a>
                <div class="mt-2">Â© 2025 DLUX Network</div>
            </div>
        </aside>
        
        <!-- Detail Modal -->
        <detail-vue :post="displayPost.item" :account="account" :modal="true" 
            :has_ipfs="spkapi.storage?.length ? true : false" :voteval="voteVal" 
            :head_block="sstats.head_block" :broca_refill="sstats.broca_refill" 
            :broca="spkapi.broca" :spk_power="spkapi.spk_power"
            :contracts="contracts" :extendcost="extendcost" 
            :post_select="postSelect"
            @tosign="sendIt($event)" @reply="reply($event)"
            @modalselect="modalSelect($event)" @vote="vote($event)">
        </detail-vue>
        
        <!-- Login Modal component (integrated into main app) -->
        <login-modal @login="handleLogin($event)" 
                     @logout="removeUser()" 
                     :account="account"
                     :lapi="lapi" />
    </div>
    
    <!-- Footer -->
    <foot-vue style="display: none;" />
    
    <script>
        // Marked.js configuration (same as hub)
        const { Marked } = globalThis.marked;
        const { markedHighlight } = globalThis.markedHighlight
        const marked = new Marked(
            markedHighlight({
                emptyLangClass: 'hljs',
                langPrefix: 'hljs language-',
                highlight(code, lang, info) {
                    const language = hljs.getLanguage(lang) ? lang : 'plaintext';
                    return hljs.highlight(code, { language }).value;
                }
            })
        )
        
        marked.use(markedKatex({
            throwOnError: false,
            displayMode: true
        }));
        
        marked.use(markedLinkifyIt({
            '@': {
                validate: function (text, pos, self) {
                    var tail = text.slice(pos);
                    if (!self.re.hive) {
                        self.re.hive = new RegExp(
                            '^([a-z0-9\.\-]){1,16}(?!_)(?=$|' + self.re.src_ZPCc + ')'
                        );
                    }
                    if (self.re.hive.test(tail)) {
                        if (pos >= 2 && tail[pos - 2] === '@') {
                            return false;
                        }
                        return tail.match(self.re.hive)[0].length;
                    }
                    return 0;
                },
                normalize: function (match) {
                    if (match.url.endsWith('.')) {
                        match.url = match.url.substring(0, match.url.length - 1);
                    }
                    match.url = '/@' + match.url.replace(/^@/, '');
                }
            }
        }, {}));
    </script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"
        integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js"></script>
</body>

</html>