/*! For license information please see collaboration.bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.collaborationBundle=t():e.collaborationBundle=t()}(this,()=>(()=>{var e={184:e=>{var t={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function i(e,n,i){this.hasBeenReset=!1;var s="",o=!1,a=e,l=n,c=i,u=null,d="",h=!0,p="auto",f="start",m="auto",g="auto",y=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return s},set:function(e){s=""+e}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");d=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=r(e);t?(f=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(e){var t=r(e);t?(g=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=r(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=i},447:()=>{},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},542:()=>{},579:(e,t,n)=>{var r=n(3738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,n)=>{var r=n(6993),i=n(1791);e.exports=function(e,t,n,s,o){return new i(r().w(e,t,n,s),o||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},1002:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s)()(i());o.push([e.id,'.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}',""]);const a=o},1036:(e,t,n)=>{"use strict";var r=n(9840),i=n(4634),s=n(7056),o=n(6162),a=n(8670);u.httpHandler=n(7495),u.requestInterceptorsStorage=new o,u.responseInterceptorsStorage=new o,u.retryManager=new a;var l=function(e){var t={};return e?(e.trim().split("\n").forEach(function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),i=e.slice(n+1).trim();void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]}),t):t};function c(e,t,n){var r=e;return s(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=i({},t,{uri:e}),r.callback=n,r}function u(e,t,n){return d(t=c(e,t,n))}function d(e){if(void 0===e.callback)throw new Error("callback argument missing");if(e.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var t={uri:e.uri||e.url,headers:e.headers||{},body:e.body,metadata:e.metadata||{},retry:e.retry,timeout:e.timeout},n=u.requestInterceptorsStorage.execute(e.requestType,t);e.uri=n.uri,e.headers=n.headers,e.body=n.body,e.metadata=n.metadata,e.retry=n.retry,e.timeout=n.timeout}var r=!1,i=function(t,n,i){r||(r=!0,e.callback(t,n,i))};function s(){var e=void 0;if(e=p.response?p.response:p.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(p),_)try{e=JSON.parse(e)}catch(e){}return e}function o(t){if(clearTimeout(f),clearTimeout(e.retryTimeout),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,h||!u.retryManager.getIsEnabled()||!e.retry||!e.retry.shouldRetry()){if(e.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var n={headers:w.headers||{},body:w.body,responseUrl:p.responseURL,responseType:p.responseType},r=u.responseInterceptorsStorage.execute(e.requestType,n);w.body=r.body,w.headers=r.headers}return i(t,w)}e.retryTimeout=setTimeout(function(){e.retry.moveToNextAttempt(),e.xhr=p,d(e)},e.retry.getCurrentFuzzedDelay())}function a(){if(!h){var t;clearTimeout(f),clearTimeout(e.retryTimeout),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var n=w,r=null;if(0!==t?(n={body:s(),statusCode:t,method:g,headers:{},url:m,rawRequest:p},p.getAllResponseHeaders&&(n.headers=l(p.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),e.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var o={headers:n.headers||{},body:n.body,responseUrl:p.responseURL,responseType:p.responseType},a=u.responseInterceptorsStorage.execute(e.requestType,o);n.body=a.body,n.headers=a.headers}return i(r,n,n.body)}}var c,h,p=e.xhr||null;p||(p=e.cors||e.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var f,m=p.url=e.uri||e.url,g=p.method=e.method||"GET",y=e.body||e.data,v=p.headers=e.headers||{},b=!!e.sync,_=!1,w={body:void 0,headers:{},statusCode:0,method:g,url:m,rawRequest:p};if("json"in e&&!1!==e.json&&(_=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),y=JSON.stringify(!0===e.json?y:e.json))),p.onreadystatechange=function(){4!==p.readyState||u.responseInterceptorsStorage.getIsEnabled()||setTimeout(a,0)},p.onload=a,p.onerror=o,p.onprogress=function(){},p.onabort=function(){h=!0,clearTimeout(e.retryTimeout)},p.ontimeout=o,p.open(g,m,!b,e.username,e.password),b||(p.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(f=setTimeout(function(){if(!h){h=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),p.setRequestHeader)for(c in v)v.hasOwnProperty(c)&&p.setRequestHeader(c,v[c]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(p),p.send(y||null),p}e.exports=u,e.exports.default=u,u.XMLHttpRequest=r.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){u["delete"===e?"del":e]=function(t,n,r){return(n=c(t,n,r)).method=e.toUpperCase(),d(n)}})},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1601:e=>{"use strict";e.exports=function(e){return e[1]}},1736:(e,t,n)=>{var r,i,s;e.exports=(r=Math.floor,i=Math.abs,s=Math.pow,function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){return i(t[o][1][e]||e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){return o[63&e>>18]+o[63&e>>12]+o[63&e>>6]+o[63&e]}function s(e,t,n){for(var r,s=[],o=t;o<n;o+=3)r=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),s.push(i(r));return s.join("")}n.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=function(e){var t,n,i=r(e),s=i[0],o=i[1],c=new l(function(e,t,n){return 3*(t+n)/4-n}(0,s,o)),u=0,d=0<o?s-4:s;for(n=0;n<d;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],c[u++]=255&t>>16,c[u++]=255&t>>8,c[u++]=255&t;return 2===o&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===o&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,c[u++]=255&t>>8,c[u++]=255&t),c},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],a=16383,l=0,c=n-r;l<c;l+=a)i.push(s(e,l,l+a>c?c:l+a));return 1===r?(t=e[n-1],i.push(o[t>>2]+o[63&t<<4]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(o[t>>10]+o[63&t>>4]+o[63&t<<2]+"=")),i.join("")};for(var o=[],a=[],l="undefined"==typeof Uint8Array?Array:Uint8Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0;u<64;++u)o[u]=c[u],a[c.charCodeAt(u)]=u;a[45]=62,a[95]=63},{}],2:[function(){},{}],3:[function(e,t,n){(function(){(function(){"use strict";var t=String.fromCharCode,r=Math.min;function i(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=i(n),s=r.write(e,t);return s!==n&&(r=r.slice(0,s)),r}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,t,n){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=o.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);var s=function(e){if(o.isBuffer(e)){var t=0|d(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0:"number"!=typeof e.length||F(e.length)?i(0):u(e)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),i(0>e?0:0|d(e))}function u(e){for(var t=0>e.length?0:0|d(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(i)return r?-1:N(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),F(n=+n)&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){function s(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var o,a=1,l=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return-1;a=2,l/=2,c/=2,n/=2}if(i){var u=-1;for(o=n;o<l;o++)if(s(e,o)!==s(t,-1===u?0:o-u))-1!==u&&(o-=o-u),u=-1;else if(-1===u&&(u=o),o-u+1===c)return u*a}else for(n+c>l&&(n=l-c),o=n;0<=o;o--){for(var d=!0,h=0;h<c;h++)if(s(e,o+h)!==s(t,h)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=+n||0;var i=e.length-n;r?(r=+r)>i&&(r=i):r=i;var s=t.length;r>s/2&&(r=s/2);for(var o,a=0;a<r;++a){if(F(o=parseInt(t.substr(2*a,2),16)))return a;e[n+a]=o}return a}function v(e,t,n,r){return U(N(t,e.length-n),e,n,r)}function b(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return b(e,t,n,r)}function w(e,t,n,r){return U(R(t),e,n,r)}function S(e,t,n,r){return U(function(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!(0>(t-=2));++o)r=(n=e.charCodeAt(o))>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,n))}function T(e,t,n){n=r(e.length,n);for(var i=[],s=t;s<n;){var o,a,l,c,u=e[s],d=null,h=239<u?4:223<u?3:191<u?2:1;s+h<=n&&(1===h?128>u&&(d=u):2===h?128==(192&(o=e[s+1]))&&127<(c=(31&u)<<6|63&o)&&(d=c):3===h?(o=e[s+1],a=e[s+2],128==(192&o)&&128==(192&a)&&2047<(c=(15&u)<<12|(63&o)<<6|63&a)&&(55296>c||57343<c)&&(d=c)):4===h&&(o=e[s+1],a=e[s+2],l=e[s+3],128==(192&o)&&128==(192&a)&&128==(192&l)&&65535<(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&l)&&1114112>c&&(d=c))),null===d?(d=65533,h=1):65535<d&&(d-=65536,i.push(55296|1023&d>>>10),d=56320|1023&d),i.push(d),s+=h}return x(i)}function x(e){var n=e.length;if(n<=4096)return t.apply(String,e);for(var r="",i=0;i<n;)r+=t.apply(String,e.slice(i,i+=4096));return r}function E(e,n,i){var s="";i=r(e.length,i);for(var o=n;o<i;++o)s+=t(127&e[o]);return s}function C(e,n,i){var s="";i=r(e.length,i);for(var o=n;o<i;++o)s+=t(e[o]);return s}function A(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=L(e[s]);return i}function O(e,n,r){for(var i=e.slice(n,r),s="",o=0;o<i.length;o+=2)s+=t(i[o]+256*i[o+1]);return s}function M(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function j(e,t,n,r,i){return t=+t,n>>>=0,i||D(e,0,n,4),$.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,i){return t=+t,n>>>=0,i||D(e,0,n,8),$.write(e,t,n,r,52,8),n+8}function L(e){return 16>e?"0"+e.toString(16):e.toString(16)}function N(e,t){t=t||1/0;for(var n,r=e.length,i=null,s=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&57344>n){if(!i){if(56319<n){-1<(t-=3)&&s.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&s.push(239,191,189);continue}i=n;continue}if(56320>n){-1<(t-=3)&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,128>n){if(0>(t-=1))break;s.push(n)}else if(2048>n){if(0>(t-=2))break;s.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;s.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(t-=4))break;s.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return s}function R(e){return z.toByteArray(function(e){if(2>(e=(e=e.split("=")[0]).trim().replace(q,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}var z=e("base64-js"),$=e("ieee754");n.Buffer=o,n.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return o.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return o.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,n){return function(e,t,n){return l(e),0>=e||void 0===t?i(e):"string"==typeof n?i(e).fill(t,n):i(e).fill(t)}(e,t,n)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(B(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,s=0,a=r(n,i);s<a;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(B(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,i,s){if(B(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),0>t||n>e.length||0>i||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(s>>>=0)-(i>>>=0),l=(n>>>=0)-(t>>>=0),c=r(a,l),u=this.slice(i,s),d=e.slice(t,n),h=0;h<c;++h)if(u[h]!==d[h]){a=u[h],l=d[h];break}return a<l?-1:l<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var n=this.length;0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),0>(t=void 0===t?n:~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=s(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=s(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),$.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),$.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),$.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),$.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,s(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=255&e/i;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||I(this,e,t,n,s(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=255&e/o;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=s(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=0,a=1,l=0;for(this[t]=255&e;++o<n&&(a*=256);)0>e&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=255&(e/a|0)-l;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=s(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=n-1,a=1,l=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)0>e&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=255&(e/a|0)-l;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var s=i-1;0<=s;--s)e[s+t]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&128>i||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=o.isBuffer(e)?e:o.from(e,r),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=a[s%l]}return this};var q=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,n){(function(r){(function(){n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"===e||(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(n);const{formatters:i}=t.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,t){t.exports=function(t){function n(e){function t(...e){if(!t.enabled)return;const r=t,s=+new Date,o=s-(i||s);r.diff=o,r.prev=i,r.curr=s,i=s,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,i)=>{if("%%"===t)return"%";a++;const s=n.formatters[i];if("function"==typeof s){const n=e[a];t=s.call(r,n),e.splice(a,1),a--}return t}),n.formatArgs.call(r,e),(r.log||n.log).apply(r,e)}let i,s=null;return t.namespace=e,t.useColors=n.useColors(),t.color=n.selectColor(e),t.extend=r,t.destroy=n.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===s?n.enabled(e):s,set:e=>{s=e}}),"function"==typeof n.init&&n.init(t),t}function r(e,t){const r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){const e=[...n.names.map(s),...n.skips.map(s).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{n[e]=t[e]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return n.colors[i(t)%n.colors.length]},n.enable(n.load()),n}},{ms:11}],6:[function(e,t){"use strict";function n(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=""),t&&(r.code=t);try{return n(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),n(new i,r)}}},{}],7:[function(e,t){"use strict";function n(){n.init.call(this)}function r(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function s(e,t,n,s){var o,a,l;if(r(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),l=a[t]),void 0===l)l=a[t]=n,++e._eventsCount;else if("function"==typeof l?l=a[t]=s?[n,l]:[l,n]:s?l.unshift(n):l.push(n),0<(o=i(e))&&l.length>o&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,function(e){console&&console.warn&&console.warn(e)}(c)}return e}function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.bind(r);return i.listener=n,r.wrapFn=i,i}function l(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):u(i,i.length)}function c(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function u(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)})}}var h,p="object"==typeof Reflect?Reflect:null,f=p&&"function"==typeof p.apply?p.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};h=p&&"function"==typeof p.ownKeys?p.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var m=Number.isNaN||function(e){return e!=e};t.exports=n,t.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}d(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&d(e,"error",t,n)}(e,i,{once:!0})})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var g=10;Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(e){if("number"!=typeof e||0>e||m(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");g=e}}),n.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||m(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return i(this)},n.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(0<t.length&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)f(a,this,t);else{var l=a.length,c=u(a,l);for(n=0;n<l;++n)f(c[n],this,t)}return!0},n.prototype.addListener=function(e,t){return s(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return s(this,e,t,!0)},n.prototype.once=function(e,t){return r(t),this.on(e,a(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return r(t),this.prependListener(e,a(this,e,t)),this},n.prototype.removeListener=function(e,t){var n,i,s,o,a;if(r(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(s=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(0>s)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},n.prototype.listeners=function(e){return l(this,e,!0)},n.prototype.rawListeners=function(e){return l(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},n.prototype.listenerCount=c,n.prototype.eventNames=function(){return 0<this._eventsCount?h(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,l=8*i-r-1,c=(1<<l)-1,u=c>>1,d=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,o=f&(1<<-d)-1,f>>=-d,d+=l;0<d;o=256*o+e[t+h],h+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;0<d;a=256*a+e[t+h],h+=p,d-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=s(2,r),o-=u}return(f?-1:1)*a*s(2,o-r)},n.write=function(e,t,n,o,a,l){var c,u,d,h=Math.LN2,p=Math.log,f=8*l-a-1,m=(1<<f)-1,g=m>>1,y=23===a?s(2,-24)-s(2,-77):0,v=o?0:l-1,b=o?1:-1,_=0>t||0===t&&0>1/t?1:0;for(t=i(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,c=m):(c=r(p(t)/h),1>t*(d=s(2,-c))&&(c--,d*=2),2<=(t+=1<=c+g?y/d:y*s(2,1-g))*d&&(c++,d/=2),c+g>=m?(u=0,c=m):1<=c+g?(u=(t*d-1)*s(2,a),c+=g):(u=t*s(2,g-1)*s(2,a),c=0));8<=a;e[n+v]=255&u,v+=b,u/=256,a-=8);for(c=c<<a|u,f+=a;0<f;e[n+v]=255&c,v+=b,c/=256,f-=8);e[n+v-b]|=128*_}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,t){var n=Math.round;function r(e){var t=i(e);return 864e5<=t?n(e/864e5)+"d":36e5<=t?n(e/36e5)+"h":6e4<=t?n(e/6e4)+"m":1e3<=t?n(e/1e3)+"s":e+"ms"}function s(e){var t=i(e);return 864e5<=t?o(e,t,864e5,"day"):36e5<=t?o(e,t,36e5,"hour"):6e4<=t?o(e,t,6e4,"minute"):1e3<=t?o(e,t,1e3,"second"):e+" ms"}function o(e,t,r,i){return n(e/r)+" "+i+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(!(100<(e+="").length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?315576e5*n:"weeks"===r||"week"===r||"w"===r?6048e5*n:"days"===r||"day"===r||"d"===r?864e5*n:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?36e5*n:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?6e4*n:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1e3*n:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?n:void 0}}}(e);if("number"===n&&isFinite(e))return t.long?s(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(){f&&h&&(f=!1,h.length?p=h.concat(p):m=-1,p.length&&o())}function o(){if(!f){var e=i(s);f=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var c,u,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var h,p=[],f=!1,m=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new a(e,t)),1!==p.length||f||i(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],13:[function(e,t){(function(e){(function(){let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?e:window):e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))}).call(this)}).call(this,void 0===n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],14:[function(e,t){(function(n,r){(function(){"use strict";var i=e("safe-buffer").Buffer,s=r.crypto||r.msCrypto;t.exports=s&&s.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(0<e)if(65536<e)for(var o=0;o<e;o+=65536)s.getRandomValues(r.slice(o,o+65536));else s.getRandomValues(r);return"function"==typeof t?n.nextTick(function(){t(null,r)}):r}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),void 0===n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{_process:12,"safe-buffer":30}],15:[function(e,t){"use strict";function n(e,t,n){function r(e,n,r){return"string"==typeof t?t:t(e,n,r)}n||(n=Error);var s=function(e){function t(t,n,i){return e.call(this,r(t,n,i))||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(n);s.prototype.name=n.name,s.prototype.code=e,i[e]=s}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return e+""}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}var i={};n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,n){var i,s;if("string"==typeof t&&function(e,t,n){return e.substr(!n||0>n?0:+n,t.length)===t}(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var o=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(o," ").concat(i," ").concat(r(t,"type"))}return s+". Received type ".concat(typeof n)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},{}],16:[function(e,t){(function(n){(function(){"use strict";function r(e){return this instanceof r?(a.call(this,e),l.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new r(e)}function i(){this._writableState.ended||n.nextTick(s,this)}function s(e){e.end()}var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var a=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(r,a);for(var c,u=o(l.prototype),d=0;d<u.length;d++)c=u[d],r.prototype[c]||(r.prototype[c]=l.prototype[c]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){"use strict";function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform");e("inherits")(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,t){(function(n,r){(function(){"use strict";function i(t,n,r){S=S||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof S),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=P(this,t,"readableHighWaterMark",r),this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!O&&(O=e("string_decoder/").StringDecoder),this.decoder=new O(t.encoding),this.encoding=t.encoding)}function s(t){if(S=S||e("./_stream_duplex"),!(this instanceof s))return new s(t);var n=this instanceof S;this._readableState=new i(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),x.call(this)}function o(e,t,n,r,i){k("readableAddChunk",t);var s,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(k("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?u(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,d(e)))}}(e,o);else if(i||(s=l(o,t)),s)F(e,s);else if(o.objectMode||t&&0<t.length)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===E.prototype||(t=function(e){return E.from(e)}(t)),r)o.endEmitted?F(e,new B):a(e,o,t,!0);else if(o.ended)F(e,new R);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?a(e,o,t,!1):h(e,o)):a(e,o,t,!1)}else r||(o.reading=!1,h(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function a(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&u(e)),h(e,t)}function l(e,t){var n;return function(e){return E.isBuffer(e)||e instanceof C}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new N("chunk",["string","Buffer","Uint8Array"],t)),n}function c(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=function(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function u(e){var t=e._readableState;k("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(k("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(d,e))}function d(e){var t=e._readableState;k("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,y(e)}function h(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(p,e,t))}function p(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(k("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function f(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function m(e){k("readable nexttick read 0"),e.read(0)}function g(e,t){k("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;for(k("flow",t.flowing);t.flowing&&null!==e.read(););}function v(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function b(e){var t=e._readableState;k("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(_,t,e))}function _(e,t){if(k("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function w(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var S;t.exports=s,s.ReadableState=i,e("events").EventEmitter;var k,T=function(e,t){return e.listeners(t).length},x=e("./internal/streams/stream"),E=e("buffer").Buffer,C=r.Uint8Array||function(){},A=e("util");k=A&&A.debuglog?A.debuglog("stream"):function(){};var O,M,I,D=e("./internal/streams/buffer_list"),j=e("./internal/streams/destroy"),P=e("./internal/streams/state").getHighWaterMark,L=e("../errors").codes,N=L.ERR_INVALID_ARG_TYPE,R=L.ERR_STREAM_PUSH_AFTER_EOF,U=L.ERR_METHOD_NOT_IMPLEMENTED,B=L.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(s,x);var F=j.errorOrDestroy,z=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=j.destroy,s.prototype._undestroy=j.undestroy,s.prototype._destroy=function(e,t){t(e)},s.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=E.from(e,t),t=""),n=!0),o(this,e,t,!1,n)},s.prototype.unshift=function(e){return o(this,e,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(t){O||(O=e("string_decoder/").StringDecoder);var n=new O(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},s.prototype.read=function(e){k("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return k("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):u(this),null;if(0===(e=c(e,t))&&t.ended)return 0===t.length&&b(this),null;var r,i=t.needReadable;return k("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&k("length less than watermark",i=!0),t.ended||t.reading?k("reading or ended",i=!1):i&&(k("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=c(n,t))),null===(r=0<e?v(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&b(this)),null!==r&&this.emit("data",r),r},s.prototype._read=function(){F(this,new U("_read()"))},s.prototype.pipe=function(e,t){function r(e,t){k("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,s())}function i(){k("onend"),e.end()}function s(){k("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",f),e.removeListener("error",a),e.removeListener("unpipe",r),d.removeListener("end",i),d.removeListener("end",u),d.removeListener("data",o),m=!0,h.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}function o(t){k("ondata");var n=e.write(t);k("dest.write",n),!1===n&&((1===h.pipesCount&&h.pipes===e||1<h.pipesCount&&-1!==w(h.pipes,e))&&!m&&(k("false write response, pause",h.awaitDrain),h.awaitDrain++),d.pause())}function a(t){k("onerror",t),u(),e.removeListener("error",a),0===T(e,"error")&&F(e,t)}function l(){e.removeListener("finish",c),u()}function c(){k("onfinish"),e.removeListener("close",l),u()}function u(){k("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,k("pipe count=%d opts=%j",h.pipesCount,t);var p=t&&!1===t.end||e===n.stdout||e===n.stderr?u:i;h.endEmitted?n.nextTick(p):d.once("end",p),e.on("unpipe",r);var f=function(e){return function(){var t=e._readableState;k("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T(e,"data")&&(t.flowing=!0,y(e))}}(d);e.on("drain",f);var m=!1;return d.on("data",o),function(e,t,n){"function"==typeof e.prependListener?e.prependListener(t,n):e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",a),e.once("close",l),e.once("finish",c),e.emit("pipe",d),h.flowing||(k("pipe resume"),d.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=w(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},s.prototype.on=function(e,t){var r=x.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"==e&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,k("on readable",i.length,i.reading),i.length?u(this):!i.reading&&n.nextTick(m,this)),r},s.prototype.addListener=s.prototype.on,s.prototype.removeListener=function(e,t){var r=x.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(f,this),r},s.prototype.removeAllListeners=function(e){var t=x.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(f,this),t},s.prototype.resume=function(){var e=this._readableState;return e.flowing||(k("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(g,e,t))}(this,e)),e.paused=!1,this},s.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},s.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(k("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){k("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||!(n.objectMode||i&&i.length)||t.push(i)||(r=!0,e.pause())}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<z.length;s++)e.on(z[s],this.emit.bind(this,z[s]));return this._read=function(t){k("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(s.prototype[Symbol.asyncIterator]=function(){return void 0===M&&(M=e("./internal/streams/async_iterator")),M(this)}),Object.defineProperty(s.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(s.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(s.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),s._fromList=v,Object.defineProperty(s.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(s.from=function(t,n){return void 0===I&&(I=e("./internal/streams/from")),I(s,t,n)})}).call(this)}).call(this,e("_process"),void 0===n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){"use strict";function n(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new l);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(e){return this instanceof r?(d.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",i)):new r(e)}function i(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?s(this,null,null):this._flush(function(t,n){s(e,t,n)})}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new u;if(e._transformState.transforming)throw new c;return e.push(null)}t.exports=r;var o=e("../errors").codes,a=o.ERR_METHOD_NOT_IMPLEMENTED,l=o.ERR_MULTIPLE_CALLBACK,c=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=o.ERR_TRANSFORM_WITH_LENGTH_0,d=e("./_stream_duplex");e("inherits")(r,d),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){n(new a("_transform()"))},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},r.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,t){(function(n,r){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}function s(){}function o(t,n,r){_=_||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof _),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=C(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){h(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function a(t){var n=this instanceof(_=_||e("./_stream_duplex"));return n||w.call(a,this)?(this._writableState=new o(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void k.call(this)):new a(t)}function l(e,t){var r=new L;R(e,r),n.nextTick(t,r)}function c(e,t,r,i){var s;return null===r?s=new P:"string"!=typeof r&&!t.objectMode&&(s=new O("chunk",["string","Buffer"],r)),!s||(R(e,s),n.nextTick(i,s),!1)}function u(e,t,n,r,i,s){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=T.from(t,n)),t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var a=t.objectMode?1:r.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,a,r,i,s);return l}function d(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new j("write")):n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function h(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new I;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(v,e,t),e._writableState.errorEmitted=!0,R(e,i)):(s(i),e._writableState.errorEmitted=!0,R(e,i),v(e,t))}(e,r,i,t,s);else{var o=m(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||f(e,r),i?n.nextTick(p,e,r,o,s):p(e,r,o,s)}}function p(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),v(e,t)}function f(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)s[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;s.allBuffers=l,d(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(d(e,t,!1,t.objectMode?1:c.length,c,u,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function g(e,t){e._final(function(n){t.pendingcb--,n&&R(e,n),t.prefinished=!0,e.emit("prefinish"),v(e,t)})}function y(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(g,e,t)))}function v(e,t){var n=m(t);if(n&&(y(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}function b(e,t,r){t.ending=!0,v(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}var _;t.exports=a,a.WritableState=o;var w,S={deprecate:e("util-deprecate")},k=e("./internal/streams/stream"),T=e("buffer").Buffer,x=r.Uint8Array||function(){},E=e("./internal/streams/destroy"),C=e("./internal/streams/state").getHighWaterMark,A=e("../errors").codes,O=A.ERR_INVALID_ARG_TYPE,M=A.ERR_METHOD_NOT_IMPLEMENTED,I=A.ERR_MULTIPLE_CALLBACK,D=A.ERR_STREAM_CANNOT_PIPE,j=A.ERR_STREAM_DESTROYED,P=A.ERR_STREAM_NULL_VALUES,L=A.ERR_STREAM_WRITE_AFTER_END,N=A.ERR_UNKNOWN_ENCODING,R=E.errorOrDestroy;e("inherits")(a,k),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:S.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return!!w.call(this,e)||!(this!==a)&&e&&e._writableState instanceof o}})):w=function(e){return e instanceof this},a.prototype.pipe=function(){R(this,new D)},a.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&function(e){return T.isBuffer(e)||e instanceof x}(e);return o&&!T.isBuffer(e)&&(e=function(e){return T.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":!t&&(t=r.defaultEncoding),"function"!=typeof n&&(n=s),r.ending?l(this,n):(o||c(this,r,e,n))&&(r.pendingcb++,i=u(this,r,o,e,t,n)),i},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&f(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new N(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),a.prototype._write=function(e,t,n){n(new M("_write()"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||b(this,r,n),this},Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),a.prototype.destroy=E.destroy,a.prototype._undestroy=E.undestroy,a.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),void 0===n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(n){(function(){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return{value:e,done:t}}function s(e){var t=e[c];if(null!==t){var n=e[m].read();null!==n&&(e[p]=null,e[c]=null,e[u]=null,t(i(n,!1)))}}function o(e){n.nextTick(s,e)}var a,l=e("./end-of-stream"),c=Symbol("lastResolve"),u=Symbol("lastReject"),d=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),f=Symbol("handlePromise"),m=Symbol("stream"),g=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((a={get stream(){return this[m]},next:function(){var e=this,t=this[d];if(null!==t)return Promise.reject(t);if(this[h])return Promise.resolve(i(void 0,!0));if(this[m].destroyed)return new Promise(function(t,r){n.nextTick(function(){e[d]?r(e[d]):t(i(void 0,!0))})});var r,s=this[p];if(s)r=new Promise(function(e,t){return function(n,r){e.then(function(){return t[h]?void n(i(void 0,!0)):void t[f](n,r)},r)}}(s,this));else{var o=this[m].read();if(null!==o)return Promise.resolve(i(o,!1));r=new Promise(this[f])}return this[p]=r,r}},r(a,Symbol.asyncIterator,function(){return this}),r(a,"return",function(){var e=this;return new Promise(function(t,n){e[m].destroy(null,function(e){return e?void n(e):void t(i(void 0,!0))})})}),a),g);t.exports=function(e){var t,n=Object.create(y,(r(t={},m,{value:e,writable:!0}),r(t,c,{value:null,writable:!0}),r(t,u,{value:null,writable:!0}),r(t,d,{value:null,writable:!0}),r(t,h,{value:e._readableState.endEmitted,writable:!0}),r(t,f,{value:function(e,t){var r=n[m].read();r?(n[p]=null,n[c]=null,n[u]=null,e(i(r,!1))):(n[c]=e,n[u]=t)},writable:!0}),t));return n[p]=null,l(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[u];return null!==t&&(n[p]=null,n[c]=null,n[u]=null,t(e)),void(n[d]=e)}var r=n[c];null!==r&&(n[p]=null,n[c]=null,n[u]=null,r(i(void 0,!0))),n[h]=!0}),e.on("readable",o.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t,n){o.prototype.copy.call(e,t,n)}var o=e("buffer").Buffer,a=e("util").inspect,l=a&&a.custom||"inspect";t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)s(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(r+=s===i.length?i:i.slice(0,e),0===(e-=s)){s===i.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(s));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0===(e-=s)){s===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return a(this,function(e){for(var t,i=1;i<arguments.length;i++)t=null==arguments[i]?{}:arguments[i],i%2?n(Object(t),!0).forEach(function(n){r(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){"use strict";function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(s?s(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(r,o):(o._writableState.errorEmitted=!0,e.nextTick(n,o,t)):e.nextTick(n,o,t):s?(e.nextTick(r,o),s(t)):e.nextTick(r,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){"use strict";function n(){}var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=function e(t,i,s){if("function"==typeof i)return e(t,null,i);i||(i={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(s||n);var o=i.readable||!1!==i.readable&&t.readable,a=i.writable||!1!==i.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){a=!1,c=!0,o||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,d=!0,a||s.call(t)},p=function(e){s.call(t,e)},f=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",u),!1!==i.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){"use strict";function n(e){if(e)throw e}function r(t,n,r,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var s=!1;t.on("close",function(){s=!0}),void 0===a&&(a=e("./end-of-stream")),a(t,{readable:n,writable:r},function(e){return e?i(e):(s=!0,void i())});var o=!1;return function(e){if(!s)return o?void 0:(o=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void i(e||new u("pipe")))}}function i(e){e()}function s(e,t){return e.pipe(t)}function o(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():n}var a,l=e("../../../errors").codes,c=l.ERR_MISSING_ARGS,u=l.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=o(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new c("streams");var l,u=t.map(function(e,n){var s=n<t.length-1;return r(e,s,0<n,function(e){l||(l=e),e&&u.forEach(i),s||(u.forEach(i),a(l))})});return t.reduce(s)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,t){"use strict";var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,i,s){var o=function(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark}(t,s,i);if(null!=o){if(!isFinite(o)||r(o)!==o||0>o)throw new n(s?i:"highWaterMark",o);return r(o)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}var s=e("buffer"),o=s.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=s:(r(s,n),n.Buffer=i),i.prototype=Object.create(o.prototype),r(o,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0===t?r.fill(0):"string"==typeof n?r.fill(t,n):r.fill(t),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,n){"use strict";function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(h.isEncoding===p||!p(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=a,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=u,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(t)}function i(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):n}function o(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}var h=e("safe-buffer").Buffer,p=h.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var s=i(t[r]);return 0<=s?(0<s&&(e.lastNeed=s-1),s):--r<n||-2===s?0:0<=(s=i(t[r]))?(0<s&&(e.lastNeed=s-2),s):--r<n||-2===s?0:0<=(s=i(t[r]))?(0<s&&(2===s?s=0:e.lastNeed=s-3),s):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":30}],32:[function(e,t){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,void 0===n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],"/":[function(e,t){function n(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}const r=e("debug")("simple-peer"),i=e("get-browser-rtc"),s=e("randombytes"),o=e("readable-stream"),a=e("queue-microtask"),l=e("err-code"),{Buffer:c}=e("buffer"),u=65536;class d extends o.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!this._wrtc)throw"undefined"==typeof window?l(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):l(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(l(e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch(e=>{this.destroy(l(e,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(l(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(l(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?function(e){console.warn(e)}("Ignoring unsupported ICE candidate."):this.destroy(l(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(l(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(r)throw r.removed?l(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):l(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw l(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null==i.replaceTrack?this.destroy(l(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw l(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(r):this.destroy(l(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),a(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy(l(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(l(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(l(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(l(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(l(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(l(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(l(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(l(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(l(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const r=[];n.forEach(e=>{r.push(t(e))}),e(null,r)},t=>e(t)):0<this._pc.getStats.length?this._pc.getStats(n=>{if(this.destroyed)return;const r=[];n.result().forEach(e=>{const n={};e.names().forEach(t=>{n[t]=e.stat(t)}),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))}),e(null,r)},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},i={},s={};let o=!1;n.forEach(e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(r[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(s[e.id]=e)});const a=e=>{o=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(s[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),o||Object.keys(s).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(l(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>u)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=c.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}d.WEBRTC_SUPPORT=!!i(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},t.exports=d},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/"))},1791:(e,t,n)=>{var r=n(5172),i=n(5546);e.exports=function e(t,n){function s(e,i,o,a){try{var l=t[e](i),c=l.value;return c instanceof r?n.resolve(c.v).then(function(e){s("next",e,o,a)},function(e){s("throw",e,o,a)}):n.resolve(c).then(function(e){l.value=e,o(l)},function(e){return s("throw",e,o,a)})}catch(e){a(e)}}var o;this.next||(i(e.prototype),i(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),i(this,"_invoke",function(e,t,r){function i(){return new n(function(t,n){s(e,r,t,n)})}return o=o?o.then(i,i):i()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},2096:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{Y:()=>i});var i=function(){function e(){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(t="task")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}var t,n;return t=e,(n=[{key:"request",value:function(){this.cancel();var e=window.requestIdleCallback||window.requestAnimationFrame;return new Promise(function(t){return e(t)})}},{key:"cancel",value:function(){var e=window.cancelIdleCallack||window.cancelAnimationFrame;this.task&&e(this.task)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},3024:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(1601),i=n.n(r),s=n(6314),o=n.n(s),a=n(4417),l=n.n(a),c=new URL(n(7422),n.b),u=o()(i()),d=l()(c);u.push([e.id,`.vjs-svg-icon {\n  display: inline-block;\n  background-repeat: no-repeat;\n  background-position: center;\n  fill: currentColor;\n  height: 1.8em;\n  width: 1.8em;\n}\n.vjs-svg-icon:before {\n  content: none !important;\n}\n\n.vjs-svg-icon:hover,\n.vjs-control:focus .vjs-svg-icon {\n  filter: drop-shadow(0 0 0.25em #fff);\n}\n\n.vjs-modal-dialog .vjs-modal-dialog-content, .video-js .vjs-modal-dialog, .vjs-button > .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.vjs-button > .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  text-align: center;\n}\n\n@font-face {\n  font-family: VideoJS;\n  src: url(${d}) format("woff");\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play, .video-js .vjs-play-control .vjs-icon-placeholder, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play:before, .video-js .vjs-play-control .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  content: "\\f101";\n}\n\n.vjs-icon-play-circle {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play-circle:before {\n  content: "\\f102";\n}\n\n.vjs-icon-pause, .video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-pause:before, .video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before {\n  content: "\\f103";\n}\n\n.vjs-icon-volume-mute, .video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-mute:before, .video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before {\n  content: "\\f104";\n}\n\n.vjs-icon-volume-low, .video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-low:before, .video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before {\n  content: "\\f105";\n}\n\n.vjs-icon-volume-mid, .video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-mid:before, .video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before {\n  content: "\\f106";\n}\n\n.vjs-icon-volume-high, .video-js .vjs-mute-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-high:before, .video-js .vjs-mute-control .vjs-icon-placeholder:before {\n  content: "\\f107";\n}\n\n.vjs-icon-fullscreen-enter, .video-js .vjs-fullscreen-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-fullscreen-enter:before, .video-js .vjs-fullscreen-control .vjs-icon-placeholder:before {\n  content: "\\f108";\n}\n\n.vjs-icon-fullscreen-exit, .video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-fullscreen-exit:before, .video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before {\n  content: "\\f109";\n}\n\n.vjs-icon-spinner {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-spinner:before {\n  content: "\\f10a";\n}\n\n.vjs-icon-subtitles, .video-js .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder, .video-js .vjs-subtitles-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-subtitles:before, .video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before, .video-js .vjs-subtitles-button .vjs-icon-placeholder:before {\n  content: "\\f10b";\n}\n\n.vjs-icon-captions, .video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder, .video-js .vjs-captions-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-captions:before, .video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before, .video-js .vjs-captions-button .vjs-icon-placeholder:before {\n  content: "\\f10c";\n}\n\n.vjs-icon-hd {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-hd:before {\n  content: "\\f10d";\n}\n\n.vjs-icon-chapters, .video-js .vjs-chapters-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-chapters:before, .video-js .vjs-chapters-button .vjs-icon-placeholder:before {\n  content: "\\f10e";\n}\n\n.vjs-icon-downloading {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-downloading:before {\n  content: "\\f10f";\n}\n\n.vjs-icon-file-download {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-file-download:before {\n  content: "\\f110";\n}\n\n.vjs-icon-file-download-done {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-file-download-done:before {\n  content: "\\f111";\n}\n\n.vjs-icon-file-download-off {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-file-download-off:before {\n  content: "\\f112";\n}\n\n.vjs-icon-share {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-share:before {\n  content: "\\f113";\n}\n\n.vjs-icon-cog {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-cog:before {\n  content: "\\f114";\n}\n\n.vjs-icon-square {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-square:before {\n  content: "\\f115";\n}\n\n.vjs-icon-circle, .vjs-seek-to-live-control .vjs-icon-placeholder, .video-js .vjs-volume-level, .video-js .vjs-play-progress {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle:before, .vjs-seek-to-live-control .vjs-icon-placeholder:before, .video-js .vjs-volume-level:before, .video-js .vjs-play-progress:before {\n  content: "\\f116";\n}\n\n.vjs-icon-circle-outline {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle-outline:before {\n  content: "\\f117";\n}\n\n.vjs-icon-circle-inner-circle {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle-inner-circle:before {\n  content: "\\f118";\n}\n\n.vjs-icon-cancel, .video-js .vjs-control.vjs-close-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-cancel:before, .video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before {\n  content: "\\f119";\n}\n\n.vjs-icon-repeat {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-repeat:before {\n  content: "\\f11a";\n}\n\n.vjs-icon-replay, .video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-replay:before, .video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before {\n  content: "\\f11b";\n}\n\n.vjs-icon-replay-5, .video-js .vjs-skip-backward-5 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-replay-5:before, .video-js .vjs-skip-backward-5 .vjs-icon-placeholder:before {\n  content: "\\f11c";\n}\n\n.vjs-icon-replay-10, .video-js .vjs-skip-backward-10 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-replay-10:before, .video-js .vjs-skip-backward-10 .vjs-icon-placeholder:before {\n  content: "\\f11d";\n}\n\n.vjs-icon-replay-30, .video-js .vjs-skip-backward-30 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-replay-30:before, .video-js .vjs-skip-backward-30 .vjs-icon-placeholder:before {\n  content: "\\f11e";\n}\n\n.vjs-icon-forward-5, .video-js .vjs-skip-forward-5 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-forward-5:before, .video-js .vjs-skip-forward-5 .vjs-icon-placeholder:before {\n  content: "\\f11f";\n}\n\n.vjs-icon-forward-10, .video-js .vjs-skip-forward-10 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-forward-10:before, .video-js .vjs-skip-forward-10 .vjs-icon-placeholder:before {\n  content: "\\f120";\n}\n\n.vjs-icon-forward-30, .video-js .vjs-skip-forward-30 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-forward-30:before, .video-js .vjs-skip-forward-30 .vjs-icon-placeholder:before {\n  content: "\\f121";\n}\n\n.vjs-icon-audio, .video-js .vjs-audio-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-audio:before, .video-js .vjs-audio-button .vjs-icon-placeholder:before {\n  content: "\\f122";\n}\n\n.vjs-icon-next-item {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-next-item:before {\n  content: "\\f123";\n}\n\n.vjs-icon-previous-item {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-previous-item:before {\n  content: "\\f124";\n}\n\n.vjs-icon-shuffle {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-shuffle:before {\n  content: "\\f125";\n}\n\n.vjs-icon-cast {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-cast:before {\n  content: "\\f126";\n}\n\n.vjs-icon-picture-in-picture-enter, .video-js .vjs-picture-in-picture-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-picture-in-picture-enter:before, .video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before {\n  content: "\\f127";\n}\n\n.vjs-icon-picture-in-picture-exit, .video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-picture-in-picture-exit:before, .video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before {\n  content: "\\f128";\n}\n\n.vjs-icon-facebook {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-facebook:before {\n  content: "\\f129";\n}\n\n.vjs-icon-linkedin {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-linkedin:before {\n  content: "\\f12a";\n}\n\n.vjs-icon-twitter {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-twitter:before {\n  content: "\\f12b";\n}\n\n.vjs-icon-tumblr {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-tumblr:before {\n  content: "\\f12c";\n}\n\n.vjs-icon-pinterest {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-pinterest:before {\n  content: "\\f12d";\n}\n\n.vjs-icon-audio-description, .video-js .vjs-descriptions-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-audio-description:before, .video-js .vjs-descriptions-button .vjs-icon-placeholder:before {\n  content: "\\f12e";\n}\n\n.video-js {\n  display: inline-block;\n  vertical-align: top;\n  box-sizing: border-box;\n  color: #fff;\n  background-color: #000;\n  position: relative;\n  padding: 0;\n  font-size: 10px;\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  font-family: Arial, Helvetica, sans-serif;\n  word-break: initial;\n}\n.video-js:-moz-full-screen {\n  position: absolute;\n}\n.video-js:-webkit-full-screen {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.video-js[tabindex="-1"] {\n  outline: none;\n}\n\n.video-js *,\n.video-js *:before,\n.video-js *:after {\n  box-sizing: inherit;\n}\n\n.video-js ul {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  list-style-position: outside;\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.video-js.vjs-fluid,\n.video-js.vjs-16-9,\n.video-js.vjs-4-3,\n.video-js.vjs-9-16,\n.video-js.vjs-1-1 {\n  width: 100%;\n  max-width: 100%;\n}\n\n.video-js.vjs-fluid:not(.vjs-audio-only-mode),\n.video-js.vjs-16-9:not(.vjs-audio-only-mode),\n.video-js.vjs-4-3:not(.vjs-audio-only-mode),\n.video-js.vjs-9-16:not(.vjs-audio-only-mode),\n.video-js.vjs-1-1:not(.vjs-audio-only-mode) {\n  height: 0;\n}\n\n.video-js.vjs-16-9:not(.vjs-audio-only-mode) {\n  padding-top: 56.25%;\n}\n\n.video-js.vjs-4-3:not(.vjs-audio-only-mode) {\n  padding-top: 75%;\n}\n\n.video-js.vjs-9-16:not(.vjs-audio-only-mode) {\n  padding-top: 177.7777777778%;\n}\n\n.video-js.vjs-1-1:not(.vjs-audio-only-mode) {\n  padding-top: 100%;\n}\n\n.video-js.vjs-fill:not(.vjs-audio-only-mode) {\n  width: 100%;\n  height: 100%;\n}\n\n.video-js .vjs-tech {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.video-js.vjs-audio-only-mode .vjs-tech {\n  display: none;\n}\n\nbody.vjs-full-window,\nbody.vjs-pip-window {\n  padding: 0;\n  margin: 0;\n  height: 100%;\n}\n\n.vjs-full-window .video-js.vjs-fullscreen,\nbody.vjs-pip-window .video-js {\n  position: fixed;\n  overflow: hidden;\n  z-index: 1000;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.video-js.vjs-fullscreen:not(.vjs-ios-native-fs),\nbody.vjs-pip-window .video-js {\n  width: 100% !important;\n  height: 100% !important;\n  padding-top: 0 !important;\n  display: block;\n}\n\n.video-js.vjs-fullscreen.vjs-user-inactive {\n  cursor: none;\n}\n\n.vjs-pip-container .vjs-pip-text {\n  position: absolute;\n  bottom: 10%;\n  font-size: 2em;\n  background-color: rgba(0, 0, 0, 0.7);\n  padding: 0.5em;\n  text-align: center;\n  width: 100%;\n}\n\n.vjs-layout-tiny.vjs-pip-container .vjs-pip-text,\n.vjs-layout-x-small.vjs-pip-container .vjs-pip-text,\n.vjs-layout-small.vjs-pip-container .vjs-pip-text {\n  bottom: 0;\n  font-size: 1.4em;\n}\n\n.vjs-hidden {\n  display: none !important;\n}\n\n.vjs-disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n\n.video-js .vjs-offscreen {\n  height: 1px;\n  left: -9999px;\n  position: absolute;\n  top: 0;\n  width: 1px;\n}\n\n.vjs-lock-showing {\n  display: block !important;\n  opacity: 1 !important;\n  visibility: visible !important;\n}\n\n.vjs-no-js {\n  padding: 20px;\n  color: #fff;\n  background-color: #000;\n  font-size: 18px;\n  font-family: Arial, Helvetica, sans-serif;\n  text-align: center;\n  width: 300px;\n  height: 150px;\n  margin: 0px auto;\n}\n\n.vjs-no-js a,\n.vjs-no-js a:visited {\n  color: #66A8CC;\n}\n\n.video-js .vjs-big-play-button {\n  font-size: 3em;\n  line-height: 1.5em;\n  height: 1.63332em;\n  width: 3em;\n  display: block;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  padding: 0;\n  margin-top: -0.81666em;\n  margin-left: -1.5em;\n  cursor: pointer;\n  opacity: 1;\n  border: 0.06666em solid #fff;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n  border-radius: 0.3em;\n  transition: all 0.4s;\n}\n.vjs-big-play-button .vjs-svg-icon {\n  width: 1em;\n  height: 1em;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  line-height: 1;\n  transform: translate(-50%, -50%);\n}\n\n.video-js:hover .vjs-big-play-button,\n.video-js .vjs-big-play-button:focus {\n  border-color: #fff;\n  background-color: rgb(114.9141509434, 132.7028301887, 159.3858490566);\n  background-color: rgba(114.9141509434, 132.7028301887, 159.3858490566, 0.5);\n  transition: all 0s;\n}\n\n.vjs-controls-disabled .vjs-big-play-button,\n.vjs-has-started .vjs-big-play-button,\n.vjs-using-native-controls .vjs-big-play-button,\n.vjs-error .vjs-big-play-button {\n  display: none;\n}\n\n.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause:not(.vjs-seeking, .vjs-scrubbing, .vjs-error) .vjs-big-play-button {\n  display: block;\n}\n\n.video-js button {\n  background: none;\n  border: none;\n  color: inherit;\n  display: inline-block;\n  font-size: inherit;\n  line-height: inherit;\n  text-transform: none;\n  text-decoration: none;\n  transition: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n       appearance: none;\n}\n\n.video-js.vjs-spatial-navigation-enabled .vjs-button:focus {\n  outline: 0.0625em solid white;\n  box-shadow: none;\n}\n\n.vjs-control .vjs-button {\n  width: 100%;\n  height: 100%;\n}\n\n.video-js .vjs-control.vjs-close-button {\n  cursor: pointer;\n  height: 3em;\n  position: absolute;\n  right: 0;\n  top: 0.5em;\n  z-index: 2;\n}\n.video-js .vjs-modal-dialog {\n  background: rgba(0, 0, 0, 0.8);\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.8), rgba(255, 255, 255, 0));\n  overflow: auto;\n}\n\n.video-js .vjs-modal-dialog > * {\n  box-sizing: border-box;\n}\n\n.vjs-modal-dialog .vjs-modal-dialog-content {\n  font-size: 1.2em;\n  line-height: 1.5;\n  padding: 20px 24px;\n  z-index: 1;\n}\n\n.vjs-menu-button {\n  cursor: pointer;\n}\n\n.vjs-menu-button.vjs-disabled {\n  cursor: default;\n}\n\n.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu {\n  display: none;\n}\n\n.vjs-menu .vjs-menu-content {\n  display: block;\n  padding: 0;\n  margin: 0;\n  font-family: Arial, Helvetica, sans-serif;\n  overflow: auto;\n}\n\n.vjs-menu .vjs-menu-content > * {\n  box-sizing: border-box;\n}\n\n.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu {\n  display: none;\n}\n\n.vjs-menu li {\n  display: flex;\n  justify-content: center;\n  list-style: none;\n  margin: 0;\n  padding: 0.2em 0;\n  line-height: 1.4em;\n  font-size: 1.2em;\n  text-align: center;\n  text-transform: lowercase;\n}\n\n.vjs-menu li.vjs-menu-item:focus,\n.vjs-menu li.vjs-menu-item:hover,\n.js-focus-visible .vjs-menu li.vjs-menu-item:hover {\n  background-color: rgb(114.9141509434, 132.7028301887, 159.3858490566);\n  background-color: rgba(114.9141509434, 132.7028301887, 159.3858490566, 0.5);\n}\n\n.vjs-menu li.vjs-selected,\n.vjs-menu li.vjs-selected:focus,\n.vjs-menu li.vjs-selected:hover,\n.js-focus-visible .vjs-menu li.vjs-selected:hover {\n  background-color: #fff;\n  color: #2B333F;\n}\n.vjs-menu li.vjs-selected .vjs-svg-icon,\n.vjs-menu li.vjs-selected:focus .vjs-svg-icon,\n.vjs-menu li.vjs-selected:hover .vjs-svg-icon,\n.js-focus-visible .vjs-menu li.vjs-selected:hover .vjs-svg-icon {\n  fill: #000000;\n}\n\n.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),\n.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible) {\n  background: none;\n}\n\n.vjs-menu li.vjs-menu-title {\n  text-align: center;\n  text-transform: uppercase;\n  font-size: 1em;\n  line-height: 2em;\n  padding: 0;\n  margin: 0 0 0.3em 0;\n  font-weight: bold;\n  cursor: default;\n}\n\n.vjs-menu-button-popup .vjs-menu {\n  display: none;\n  position: absolute;\n  bottom: 0;\n  width: 10em;\n  left: -3em;\n  height: 0em;\n  margin-bottom: 1.5em;\n  border-top-color: rgba(43, 51, 63, 0.7);\n}\n\n.vjs-pip-window .vjs-menu-button-popup .vjs-menu {\n  left: unset;\n  right: 1em;\n}\n\n.vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n  position: absolute;\n  width: 100%;\n  bottom: 1.5em;\n  max-height: 15em;\n}\n\n.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 5em;\n}\n\n.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 10em;\n}\n\n.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 14em;\n}\n\n.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 25em;\n}\n\n.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,\n.vjs-menu-button-popup .vjs-menu.vjs-lock-showing {\n  display: block;\n}\n\n.video-js .vjs-menu-button-inline {\n  transition: all 0.4s;\n  overflow: hidden;\n}\n\n.video-js .vjs-menu-button-inline:before {\n  width: 2.222222222em;\n}\n\n.video-js .vjs-menu-button-inline:hover,\n.video-js .vjs-menu-button-inline:focus,\n.video-js .vjs-menu-button-inline.vjs-slider-active {\n  width: 12em;\n}\n\n.vjs-menu-button-inline .vjs-menu {\n  opacity: 0;\n  height: 100%;\n  width: auto;\n  position: absolute;\n  left: 4em;\n  top: 0;\n  padding: 0;\n  margin: 0;\n  transition: all 0.4s;\n}\n\n.vjs-menu-button-inline:hover .vjs-menu,\n.vjs-menu-button-inline:focus .vjs-menu,\n.vjs-menu-button-inline.vjs-slider-active .vjs-menu {\n  display: block;\n  opacity: 1;\n}\n\n.vjs-menu-button-inline .vjs-menu-content {\n  width: auto;\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n}\n\n.video-js .vjs-control-bar {\n  display: none;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3em;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n}\n\n.video-js.vjs-spatial-navigation-enabled .vjs-control-bar {\n  gap: 1px;\n}\n\n.video-js:not(.vjs-controls-disabled, .vjs-using-native-controls, .vjs-error) .vjs-control-bar.vjs-lock-showing {\n  display: flex !important;\n}\n\n.vjs-has-started .vjs-control-bar,\n.vjs-audio-only-mode .vjs-control-bar {\n  display: flex;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.1s, opacity 0.1s;\n}\n\n.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  visibility: visible;\n  opacity: 0;\n  pointer-events: none;\n  transition: visibility 1s, opacity 1s;\n}\n\n.vjs-controls-disabled .vjs-control-bar,\n.vjs-using-native-controls .vjs-control-bar,\n.vjs-error .vjs-control-bar {\n  display: none !important;\n}\n\n.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,\n.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  opacity: 1;\n  visibility: visible;\n  pointer-events: auto;\n}\n\n.video-js .vjs-control {\n  position: relative;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: 100%;\n  width: 4em;\n  flex: none;\n}\n\n.video-js .vjs-control.vjs-visible-text {\n  width: auto;\n  padding-left: 1em;\n  padding-right: 1em;\n}\n\n.vjs-button > .vjs-icon-placeholder:before {\n  font-size: 1.8em;\n  line-height: 1.67;\n}\n\n.vjs-button > .vjs-icon-placeholder {\n  display: block;\n}\n\n.vjs-button > .vjs-svg-icon {\n  display: inline-block;\n}\n\n.video-js .vjs-control:focus:before,\n.video-js .vjs-control:hover:before,\n.video-js .vjs-control:focus {\n  text-shadow: 0em 0em 1em white;\n}\n\n.video-js *:not(.vjs-visible-text) > .vjs-control-text {\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.video-js .vjs-custom-control-spacer {\n  display: none;\n}\n\n.video-js .vjs-progress-control {\n  cursor: pointer;\n  flex: auto;\n  display: flex;\n  align-items: center;\n  min-width: 4em;\n  touch-action: none;\n}\n\n.video-js .vjs-progress-control.disabled {\n  cursor: default;\n}\n\n.vjs-live .vjs-progress-control {\n  display: none;\n}\n\n.vjs-liveui .vjs-progress-control {\n  display: flex;\n  align-items: center;\n}\n\n.video-js .vjs-progress-holder {\n  flex: auto;\n  transition: all 0.2s;\n  height: 0.3em;\n}\n\n.video-js .vjs-progress-control .vjs-progress-holder {\n  margin: 0 10px;\n}\n\n.video-js .vjs-progress-control:hover .vjs-progress-holder,\n.video-js.vjs-scrubbing.vjs-touch-enabled .vjs-progress-control .vjs-progress-holder {\n  font-size: 1.6666666667em;\n}\n\n.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled {\n  font-size: 1em;\n}\n\n.video-js .vjs-progress-holder .vjs-play-progress,\n.video-js .vjs-progress-holder .vjs-load-progress,\n.video-js .vjs-progress-holder .vjs-load-progress div {\n  position: absolute;\n  display: block;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  width: 0;\n}\n\n.video-js .vjs-play-progress {\n  background-color: #fff;\n}\n.video-js .vjs-play-progress:before {\n  font-size: 0.9em;\n  position: absolute;\n  right: -0.5em;\n  line-height: 0.35em;\n  z-index: 1;\n}\n\n.vjs-svg-icons-enabled .vjs-play-progress:before {\n  content: none !important;\n}\n\n.vjs-play-progress .vjs-svg-icon {\n  position: absolute;\n  top: -0.35em;\n  right: -0.4em;\n  width: 0.9em;\n  height: 0.9em;\n  pointer-events: none;\n  line-height: 0.15em;\n  z-index: 1;\n}\n\n.video-js .vjs-load-progress {\n  background: rgba(114.9141509434, 132.7028301887, 159.3858490566, 0.5);\n}\n\n.video-js .vjs-load-progress div {\n  background: rgba(114.9141509434, 132.7028301887, 159.3858490566, 0.75);\n}\n\n.video-js .vjs-time-tooltip {\n  background-color: #fff;\n  background-color: rgba(255, 255, 255, 0.8);\n  border-radius: 0.3em;\n  color: #000;\n  float: right;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  padding: 6px 8px 8px 8px;\n  pointer-events: none;\n  position: absolute;\n  top: -3.4em;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.video-js .vjs-progress-holder:focus .vjs-time-tooltip {\n  display: none;\n}\n\n.video-js .vjs-progress-control:hover .vjs-time-tooltip,\n.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,\n.video-js.vjs-scrubbing.vjs-touch-enabled .vjs-progress-control .vjs-time-tooltip {\n  display: block;\n  font-size: 0.6em;\n  visibility: visible;\n}\n\n.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip {\n  font-size: 1em;\n}\n\n.video-js .vjs-progress-control .vjs-mouse-display {\n  display: none;\n  position: absolute;\n  width: 1px;\n  height: 100%;\n  background-color: #000;\n  z-index: 1;\n}\n\n.video-js .vjs-progress-control:hover .vjs-mouse-display {\n  display: block;\n}\n\n.video-js.vjs-scrubbing.vjs-touch-enabled .vjs-progress-control .vjs-mouse-display {\n  display: block;\n}\n\n.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display,\n.video-js.vjs-touch-enabled:not(.vjs-scrubbing) .vjs-progress-control .vjs-mouse-display {\n  visibility: hidden;\n  opacity: 0;\n  transition: visibility 1s, opacity 1s;\n}\n\n.vjs-mouse-display .vjs-time-tooltip {\n  color: #fff;\n  background-color: #000;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n.video-js .vjs-slider {\n  position: relative;\n  cursor: pointer;\n  padding: 0;\n  margin: 0 0.45em 0 0.45em;\n  /* iOS Safari */\n  -webkit-touch-callout: none;\n  /* Safari, and Chrome 53 */\n  -webkit-user-select: none;\n  /* Non-prefixed version, currently supported by Chrome and Opera */\n  -moz-user-select: none;\n       user-select: none;\n  background-color: rgb(114.9141509434, 132.7028301887, 159.3858490566);\n  background-color: rgba(114.9141509434, 132.7028301887, 159.3858490566, 0.5);\n}\n\n.video-js .vjs-slider.disabled {\n  cursor: default;\n}\n\n.video-js .vjs-slider:focus {\n  text-shadow: 0em 0em 1em white;\n  box-shadow: 0 0 1em #fff;\n}\n\n.video-js.vjs-spatial-navigation-enabled .vjs-slider:focus {\n  outline: 0.0625em solid white;\n}\n\n.video-js .vjs-mute-control {\n  cursor: pointer;\n  flex: none;\n}\n.video-js .vjs-volume-control {\n  cursor: pointer;\n  margin-right: 1em;\n  display: flex;\n}\n\n.video-js .vjs-volume-control.vjs-volume-horizontal {\n  width: 5em;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control {\n  visibility: visible;\n  opacity: 0;\n  width: 1px;\n  height: 1px;\n  margin-left: -1px;\n}\n\n.video-js .vjs-volume-panel {\n  transition: width 1s;\n}\n.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control, .video-js .vjs-volume-panel:active .vjs-volume-control, .video-js .vjs-volume-panel:focus .vjs-volume-control, .video-js .vjs-volume-panel .vjs-volume-control:active, .video-js .vjs-volume-panel.vjs-hover .vjs-mute-control ~ .vjs-volume-control, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active {\n  visibility: visible;\n  opacity: 1;\n  position: relative;\n  transition: visibility 0.1s, opacity 0.1s, height 0.1s, width 0.1s, left 0s, top 0s;\n}\n.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal, .video-js .vjs-volume-panel.vjs-hover .vjs-mute-control ~ .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal {\n  width: 5em;\n  height: 3em;\n  margin-right: 0;\n}\n.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical, .video-js .vjs-volume-panel.vjs-hover .vjs-mute-control ~ .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical {\n  left: -3.5em;\n  transition: left 0s;\n}\n.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover, .video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active {\n  width: 10em;\n  transition: width 0.1s;\n}\n.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only {\n  width: 4em;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical {\n  height: 8em;\n  width: 3em;\n  left: -3000em;\n  transition: visibility 1s, opacity 1s, height 1s 1s, width 1s 1s, left 1s 1s, top 1s 1s;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal {\n  transition: visibility 1s, opacity 1s, height 1s 1s, width 1s, left 1s 1s, top 1s 1s;\n}\n\n.video-js .vjs-volume-panel {\n  display: flex;\n}\n\n.video-js .vjs-volume-bar {\n  margin: 1.35em 0.45em;\n}\n\n.vjs-volume-bar.vjs-slider-horizontal {\n  width: 5em;\n  height: 0.3em;\n}\n\n.vjs-volume-bar.vjs-slider-vertical {\n  width: 0.3em;\n  height: 5em;\n  margin: 1.35em auto;\n}\n\n.video-js .vjs-volume-level {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: #fff;\n}\n.video-js .vjs-volume-level:before {\n  position: absolute;\n  font-size: 0.9em;\n  z-index: 1;\n}\n\n.vjs-slider-vertical .vjs-volume-level {\n  width: 0.3em;\n}\n.vjs-slider-vertical .vjs-volume-level:before {\n  top: -0.5em;\n  left: -0.3em;\n  z-index: 1;\n}\n\n.vjs-svg-icons-enabled .vjs-volume-level:before {\n  content: none;\n}\n\n.vjs-volume-level .vjs-svg-icon {\n  position: absolute;\n  width: 0.9em;\n  height: 0.9em;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.vjs-slider-horizontal .vjs-volume-level {\n  height: 0.3em;\n}\n.vjs-slider-horizontal .vjs-volume-level:before {\n  line-height: 0.35em;\n  right: -0.5em;\n}\n\n.vjs-slider-horizontal .vjs-volume-level .vjs-svg-icon {\n  right: -0.3em;\n  transform: translateY(-50%);\n}\n\n.vjs-slider-vertical .vjs-volume-level .vjs-svg-icon {\n  top: -0.55em;\n  transform: translateX(-50%);\n}\n\n.video-js .vjs-volume-panel.vjs-volume-panel-vertical {\n  width: 4em;\n}\n\n.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level {\n  height: 100%;\n}\n\n.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level {\n  width: 100%;\n}\n\n.video-js .vjs-volume-vertical {\n  width: 3em;\n  height: 8em;\n  bottom: 8em;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n}\n\n.video-js .vjs-volume-horizontal .vjs-menu {\n  left: -2em;\n}\n\n.video-js .vjs-volume-tooltip {\n  background-color: #fff;\n  background-color: rgba(255, 255, 255, 0.8);\n  border-radius: 0.3em;\n  color: #000;\n  float: right;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  padding: 6px 8px 8px 8px;\n  pointer-events: none;\n  position: absolute;\n  top: -3.4em;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.video-js .vjs-volume-control:hover .vjs-volume-tooltip,\n.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip {\n  display: block;\n  font-size: 1em;\n  visibility: visible;\n}\n\n.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,\n.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip {\n  left: 1em;\n  top: -12px;\n}\n\n.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip {\n  font-size: 1em;\n}\n\n.video-js .vjs-volume-control .vjs-mouse-display {\n  display: none;\n  position: absolute;\n  width: 100%;\n  height: 1px;\n  background-color: #000;\n  z-index: 1;\n}\n\n.video-js .vjs-volume-horizontal .vjs-mouse-display {\n  width: 1px;\n  height: 100%;\n}\n\n.video-js .vjs-volume-control:hover .vjs-mouse-display {\n  display: block;\n}\n\n.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display {\n  visibility: hidden;\n  opacity: 0;\n  transition: visibility 1s, opacity 1s;\n}\n\n.vjs-mouse-display .vjs-volume-tooltip {\n  color: #fff;\n  background-color: #000;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n.vjs-poster {\n  display: inline-block;\n  vertical-align: middle;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n}\n\n.vjs-has-started .vjs-poster,\n.vjs-using-native-controls .vjs-poster {\n  display: none;\n}\n\n.vjs-audio.vjs-has-started .vjs-poster,\n.vjs-has-started.vjs-audio-poster-mode .vjs-poster,\n.vjs-pip-container.vjs-has-started .vjs-poster {\n  display: block;\n}\n\n.vjs-poster img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n\n.video-js .vjs-live-control {\n  display: flex;\n  align-items: flex-start;\n  flex: auto;\n  font-size: 1em;\n  line-height: 3em;\n}\n\n.video-js:not(.vjs-live) .vjs-live-control,\n.video-js.vjs-liveui .vjs-live-control {\n  display: none;\n}\n\n.video-js .vjs-seek-to-live-control {\n  align-items: center;\n  cursor: pointer;\n  flex: none;\n  display: inline-flex;\n  height: 100%;\n  padding-left: 0.5em;\n  padding-right: 0.5em;\n  font-size: 1em;\n  line-height: 3em;\n  width: auto;\n  min-width: 4em;\n}\n\n.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,\n.video-js:not(.vjs-live) .vjs-seek-to-live-control {\n  display: none;\n}\n\n.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge {\n  cursor: auto;\n}\n\n.vjs-seek-to-live-control .vjs-icon-placeholder {\n  margin-right: 0.5em;\n  color: #888;\n}\n\n.vjs-svg-icons-enabled .vjs-seek-to-live-control {\n  line-height: 0;\n}\n\n.vjs-seek-to-live-control .vjs-svg-icon {\n  width: 1em;\n  height: 1em;\n  pointer-events: none;\n  fill: #888888;\n}\n\n.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder {\n  color: red;\n}\n\n.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-svg-icon {\n  fill: red;\n}\n\n.video-js .vjs-time-control {\n  flex: none;\n  font-size: 1em;\n  line-height: 3em;\n  min-width: 2em;\n  width: auto;\n  padding-left: 1em;\n  padding-right: 1em;\n}\n\n.vjs-live .vjs-time-control,\n.vjs-live .vjs-time-divider,\n.video-js .vjs-current-time,\n.video-js .vjs-duration {\n  display: none;\n}\n\n.vjs-time-divider {\n  display: none;\n  line-height: 3em;\n}\n\n.vjs-normalise-time-controls:not(.vjs-live) .vjs-time-control {\n  display: flex;\n}\n\n.video-js .vjs-play-control {\n  cursor: pointer;\n}\n\n.video-js .vjs-play-control .vjs-icon-placeholder {\n  flex: none;\n}\n\n.vjs-text-track-display {\n  position: absolute;\n  bottom: 3em;\n  left: 0;\n  right: 0;\n  top: 0;\n  pointer-events: none;\n}\n\n.vjs-error .vjs-text-track-display {\n  display: none;\n}\n\n.video-js.vjs-controls-disabled .vjs-text-track-display,\n.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display {\n  bottom: 1em;\n}\n\n.video-js .vjs-text-track {\n  font-size: 1.4em;\n  text-align: center;\n  margin-bottom: 0.1em;\n}\n\n.vjs-subtitles {\n  color: #fff;\n}\n\n.vjs-captions {\n  color: #fc6;\n}\n\n.vjs-tt-cue {\n  display: block;\n}\n\nvideo::-webkit-media-text-track-display {\n  transform: translateY(-3em);\n}\n\n.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,\n.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display {\n  transform: translateY(-1.5em);\n}\n\n.video-js.vjs-force-center-align-cues .vjs-text-track-cue {\n  text-align: center !important;\n  width: 80% !important;\n}\n\n@supports not (inset: 10px) {\n  .video-js .vjs-text-track-display > div {\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.video-js .vjs-picture-in-picture-control {\n  cursor: pointer;\n  flex: none;\n}\n.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control,\n.vjs-pip-window .vjs-picture-in-picture-control {\n  display: none;\n}\n\n.video-js .vjs-fullscreen-control {\n  cursor: pointer;\n  flex: none;\n}\n.video-js.vjs-audio-only-mode .vjs-fullscreen-control,\n.vjs-pip-window .vjs-fullscreen-control {\n  display: none;\n}\n\n.vjs-playback-rate > .vjs-menu-button,\n.vjs-playback-rate .vjs-playback-rate-value {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.vjs-playback-rate .vjs-playback-rate-value {\n  pointer-events: none;\n  font-size: 1.5em;\n  line-height: 2;\n  text-align: center;\n}\n\n.vjs-playback-rate .vjs-menu {\n  width: 4em;\n  left: 0em;\n}\n\n.vjs-error .vjs-error-display .vjs-modal-dialog-content {\n  font-size: 1.4em;\n  text-align: center;\n}\n\n.vjs-loading-spinner {\n  display: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  opacity: 0.85;\n  text-align: left;\n  border: 0.6em solid rgba(43, 51, 63, 0.7);\n  box-sizing: border-box;\n  background-clip: padding-box;\n  width: 5em;\n  height: 5em;\n  border-radius: 50%;\n  visibility: hidden;\n}\n\n.vjs-seeking .vjs-loading-spinner,\n.vjs-waiting .vjs-loading-spinner {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: vjs-spinner-show 0s linear 0.3s forwards;\n}\n\n.vjs-error .vjs-loading-spinner {\n  display: none;\n}\n\n.vjs-loading-spinner:before,\n.vjs-loading-spinner:after {\n  content: "";\n  position: absolute;\n  box-sizing: inherit;\n  width: inherit;\n  height: inherit;\n  border-radius: inherit;\n  opacity: 1;\n  border: inherit;\n  border-color: transparent;\n  border-top-color: white;\n}\n\n.vjs-seeking .vjs-loading-spinner:before,\n.vjs-seeking .vjs-loading-spinner:after,\n.vjs-waiting .vjs-loading-spinner:before,\n.vjs-waiting .vjs-loading-spinner:after {\n  animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\n}\n\n.vjs-seeking .vjs-loading-spinner:before,\n.vjs-waiting .vjs-loading-spinner:before {\n  border-top-color: rgb(255, 255, 255);\n}\n\n.vjs-seeking .vjs-loading-spinner:after,\n.vjs-waiting .vjs-loading-spinner:after {\n  border-top-color: rgb(255, 255, 255);\n  animation-delay: 0.44s;\n}\n\n@keyframes vjs-spinner-show {\n  to {\n    visibility: visible;\n  }\n}\n@keyframes vjs-spinner-spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@keyframes vjs-spinner-fade {\n  0% {\n    border-top-color: rgb(114.9141509434, 132.7028301887, 159.3858490566);\n  }\n  20% {\n    border-top-color: rgb(114.9141509434, 132.7028301887, 159.3858490566);\n  }\n  35% {\n    border-top-color: white;\n  }\n  60% {\n    border-top-color: rgb(114.9141509434, 132.7028301887, 159.3858490566);\n  }\n  100% {\n    border-top-color: rgb(114.9141509434, 132.7028301887, 159.3858490566);\n  }\n}\n.video-js.vjs-audio-only-mode .vjs-captions-button {\n  display: none;\n}\n\n.vjs-chapters-button .vjs-menu ul {\n  width: 24em;\n}\n\n.video-js.vjs-audio-only-mode .vjs-descriptions-button {\n  display: none;\n}\n\n.vjs-subs-caps-button + .vjs-menu .vjs-captions-menu-item .vjs-svg-icon {\n  width: 1.5em;\n  height: 1.5em;\n}\n\n.video-js .vjs-subs-caps-button + .vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder {\n  vertical-align: middle;\n  display: inline-block;\n  margin-bottom: -0.1em;\n}\n\n.video-js .vjs-subs-caps-button + .vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  content: "\\f10c";\n  font-size: 1.5em;\n  line-height: inherit;\n}\n\n.video-js.vjs-audio-only-mode .vjs-subs-caps-button {\n  display: none;\n}\n\n.video-js .vjs-audio-button + .vjs-menu .vjs-descriptions-menu-item .vjs-menu-item-text .vjs-icon-placeholder,\n.video-js .vjs-audio-button + .vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder {\n  vertical-align: middle;\n  display: inline-block;\n  margin-bottom: -0.1em;\n}\n\n.video-js .vjs-audio-button + .vjs-menu .vjs-descriptions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before,\n.video-js .vjs-audio-button + .vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  content: " \\f12e";\n  font-size: 1.5em;\n  line-height: inherit;\n}\n\n.video-js.vjs-layout-small .vjs-current-time,\n.video-js.vjs-layout-small .vjs-time-divider,\n.video-js.vjs-layout-small .vjs-duration,\n.video-js.vjs-layout-small .vjs-remaining-time,\n.video-js.vjs-layout-small .vjs-playback-rate,\n.video-js.vjs-layout-small .vjs-volume-control, .video-js.vjs-layout-x-small .vjs-current-time,\n.video-js.vjs-layout-x-small .vjs-time-divider,\n.video-js.vjs-layout-x-small .vjs-duration,\n.video-js.vjs-layout-x-small .vjs-remaining-time,\n.video-js.vjs-layout-x-small .vjs-playback-rate,\n.video-js.vjs-layout-x-small .vjs-volume-control, .video-js.vjs-layout-tiny .vjs-current-time,\n.video-js.vjs-layout-tiny .vjs-time-divider,\n.video-js.vjs-layout-tiny .vjs-duration,\n.video-js.vjs-layout-tiny .vjs-remaining-time,\n.video-js.vjs-layout-tiny .vjs-playback-rate,\n.video-js.vjs-layout-tiny .vjs-volume-control {\n  display: none;\n}\n.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover, .video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover {\n  width: auto;\n  width: initial;\n}\n.video-js.vjs-layout-x-small .vjs-progress-control, .video-js.vjs-layout-tiny .vjs-progress-control {\n  display: none;\n}\n.video-js.vjs-layout-x-small .vjs-custom-control-spacer {\n  flex: auto;\n  display: block;\n}\n\n.vjs-modal-dialog.vjs-text-track-settings {\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.75);\n  color: #fff;\n  height: 70%;\n}\n.vjs-spatial-navigation-enabled .vjs-modal-dialog.vjs-text-track-settings {\n  height: 80%;\n}\n\n.vjs-error .vjs-text-track-settings {\n  display: none;\n}\n\n.vjs-text-track-settings .vjs-modal-dialog-content {\n  display: table;\n}\n\n.vjs-text-track-settings .vjs-track-settings-colors,\n.vjs-text-track-settings .vjs-track-settings-font,\n.vjs-text-track-settings .vjs-track-settings-controls {\n  display: table-cell;\n}\n\n.vjs-text-track-settings .vjs-track-settings-controls {\n  text-align: right;\n  vertical-align: bottom;\n}\n\n@supports (display: grid) {\n  .vjs-text-track-settings .vjs-modal-dialog-content {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr;\n    padding: 20px 24px 0px 24px;\n  }\n  .vjs-track-settings-controls .vjs-default-button {\n    margin-bottom: 20px;\n  }\n  .vjs-text-track-settings .vjs-track-settings-controls {\n    grid-column: 1/-1;\n  }\n  .vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,\n  .vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,\n  .vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content {\n    grid-template-columns: 1fr;\n  }\n}\n.vjs-text-track-settings select {\n  font-size: inherit;\n}\n\n.vjs-track-setting > select {\n  margin-right: 1em;\n  margin-bottom: 0.5em;\n}\n\n.vjs-text-track-settings fieldset {\n  margin: 10px;\n  border: none;\n}\n\n.vjs-text-track-settings fieldset span {\n  display: inline-block;\n  padding: 0 0.6em 0.8em;\n}\n\n.vjs-text-track-settings fieldset span > select {\n  max-width: 7.3em;\n}\n\n.vjs-text-track-settings legend {\n  color: #fff;\n  font-weight: bold;\n  font-size: 1.2em;\n}\n\n.vjs-text-track-settings .vjs-label {\n  margin: 0 0.5em 0.5em 0;\n}\n\n.vjs-track-settings-controls button:focus,\n.vjs-track-settings-controls button:active {\n  outline-style: solid;\n  outline-width: medium;\n  background-image: linear-gradient(0deg, #fff 88%, rgb(114.9141509434, 132.7028301887, 159.3858490566) 100%);\n}\n\n.vjs-track-settings-controls button:hover {\n  color: rgba(43, 51, 63, 0.75);\n}\n\n.vjs-track-settings-controls button {\n  background-color: #fff;\n  background-image: linear-gradient(-180deg, #fff 88%, rgb(114.9141509434, 132.7028301887, 159.3858490566) 100%);\n  color: #2B333F;\n  cursor: pointer;\n  border-radius: 2px;\n}\n\n.vjs-track-settings-controls .vjs-default-button {\n  margin-right: 1em;\n}\n\n.vjs-title-bar {\n  background: rgba(0, 0, 0, 0.9);\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.7) 60%, rgba(0, 0, 0, 0) 100%);\n  font-size: 1.2em;\n  line-height: 1.5;\n  transition: opacity 0.1s;\n  padding: 0.666em 1.333em 4em;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.vjs-error .vjs-title-bar {\n  display: none;\n}\n\n.vjs-title-bar-title,\n.vjs-title-bar-description {\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.vjs-title-bar-title {\n  font-weight: bold;\n  margin-bottom: 0.333em;\n}\n\n.vjs-playing.vjs-user-inactive .vjs-title-bar {\n  opacity: 0;\n  transition: opacity 1s;\n}\n\n.video-js .vjs-skip-forward-5 {\n  cursor: pointer;\n}\n.video-js .vjs-skip-forward-10 {\n  cursor: pointer;\n}\n.video-js .vjs-skip-forward-30 {\n  cursor: pointer;\n}\n.video-js .vjs-skip-backward-5 {\n  cursor: pointer;\n}\n.video-js .vjs-skip-backward-10 {\n  cursor: pointer;\n}\n.video-js .vjs-skip-backward-30 {\n  cursor: pointer;\n}\n.video-js .vjs-transient-button {\n  position: absolute;\n  height: 3em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(50, 50, 50, 0.5);\n  cursor: pointer;\n  opacity: 1;\n  transition: opacity 1s;\n}\n\n.video-js:not(.vjs-has-started) .vjs-transient-button {\n  display: none;\n}\n\n.video-js.not-hover .vjs-transient-button:not(.force-display),\n.video-js.vjs-user-inactive .vjs-transient-button:not(.force-display) {\n  opacity: 0;\n}\n\n.video-js .vjs-transient-button span {\n  padding: 0 0.5em;\n}\n\n.video-js .vjs-transient-button.vjs-left {\n  left: 1em;\n}\n\n.video-js .vjs-transient-button.vjs-right {\n  right: 1em;\n}\n\n.video-js .vjs-transient-button.vjs-top {\n  top: 1em;\n}\n\n.video-js .vjs-transient-button.vjs-near-top {\n  top: 4em;\n}\n\n.video-js .vjs-transient-button.vjs-bottom {\n  bottom: 4em;\n}\n\n.video-js .vjs-transient-button:hover {\n  background-color: rgba(50, 50, 50, 0.9);\n}\n\n@media print {\n  .video-js > *:not(.vjs-tech):not(.vjs-poster) {\n    visibility: hidden;\n  }\n}\n.vjs-resize-manager {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: none;\n  z-index: -1000;\n}\n\n.js-focus-visible .video-js *:focus:not(.focus-visible) {\n  outline: none;\n}\n\n.video-js *:focus:not(:focus-visible) {\n  outline: none;\n}\n`,""]);const h=u},3626:e=>{var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getBigUint64?(n=r.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:r.getUint32(0)*t+r.getUint32(4)},MAX_UINT32:t}},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4226:(e,t,n)=>{"use strict";n.r(t),n.d(t,{JsonDiffMain:()=>He});var r=n(2096),i=n(6317),s=n(4617),o=(0,s.P$)({"../../node_modules/.pnpm/diff-match-patch@1.0.5/node_modules/diff-match-patch/index.js"(e,t){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},r=-1;n.Diff=function(e,t){return[e,t]},n.prototype.diff_main=function(e,t,r,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var s=i;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new n.Diff(0,e)]:[];void 0===r&&(r=!0);var o=r,a=this.diff_commonPrefix(e,t),l=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var u=this.diff_compute_(e,t,o,s);return l&&u.unshift(new n.Diff(0,l)),c&&u.push(new n.Diff(0,c)),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,i,s){var o;if(!e)return[new n.Diff(1,t)];if(!t)return[new n.Diff(r,e)];var a=e.length>t.length?e:t,l=e.length>t.length?t:e,c=a.indexOf(l);if(-1!=c)return o=[new n.Diff(1,a.substring(0,c)),new n.Diff(0,l),new n.Diff(1,a.substring(c+l.length))],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==l.length)return[new n.Diff(r,e),new n.Diff(1,t)];var u=this.diff_halfMatch_(e,t);if(u){var d=u[0],h=u[1],p=u[2],f=u[3],m=u[4],g=this.diff_main(d,p,i,s),y=this.diff_main(h,f,i,s);return g.concat([new n.Diff(0,m)],y)}return i&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,s):this.diff_bisect_(e,t,s)},n.prototype.diff_lineMode_=function(e,t,i){var s=this.diff_linesToChars_(e,t);e=s.chars1,t=s.chars2;var o=s.lineArray,a=this.diff_main(e,t,!1,i);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push(new n.Diff(0,""));for(var l=0,c=0,u=0,d="",h="";l<a.length;){switch(a[l][0]){case 1:u++,h+=a[l][1];break;case r:c++,d+=a[l][1];break;case 0:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var p=this.diff_main(d,h,!1,i),f=p.length-1;f>=0;f--)a.splice(l,0,p[f]);l+=p.length}u=0,c=0,d="",h=""}l++}return a.pop(),a},n.prototype.diff_bisect_=function(e,t,i){for(var s=e.length,o=t.length,a=Math.ceil((s+o)/2),l=a,c=2*a,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var p=s-o,f=p%2!=0,m=0,g=0,y=0,v=0,b=0;b<a&&!((new Date).getTime()>i);b++){for(var _=-b+m;_<=b-g;_+=2){for(var w=l+_,S=(C=_==-b||_!=b&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-_;C<s&&S<o&&e.charAt(C)==t.charAt(S);)C++,S++;if(u[w]=C,C>s)g+=2;else if(S>o)m+=2;else if(f&&(x=l+p-_)>=0&&x<c&&-1!=d[x]&&C>=(T=s-d[x]))return this.diff_bisectSplit_(e,t,C,S,i)}for(var k=-b+y;k<=b-v;k+=2){for(var T,x=l+k,E=(T=k==-b||k!=b&&d[x-1]<d[x+1]?d[x+1]:d[x-1]+1)-k;T<s&&E<o&&e.charAt(s-T-1)==t.charAt(o-E-1);)T++,E++;if(d[x]=T,T>s)v+=2;else if(E>o)y+=2;else if(!f){var C;if((w=l+p-k)>=0&&w<c&&-1!=u[w])if(S=l+(C=u[w])-w,C>=(T=s-T))return this.diff_bisectSplit_(e,t,C,S,i)}}}return[new n.Diff(r,e),new n.Diff(1,t)]},n.prototype.diff_bisectSplit_=function(e,t,n,r,i){var s=e.substring(0,n),o=t.substring(0,r),a=e.substring(n),l=t.substring(r),c=this.diff_main(s,o,!1,i),u=this.diff_main(a,l,!1,i);return c.concat(u)},n.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function i(e){for(var t="",i=0,o=-1,a=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",i))&&(o=e.length-1);var l=e.substring(i,o+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(a==s&&(l=e.substring(i),o=e.length),t+=String.fromCharCode(a),r[l]=a,n[a++]=l),i=o+1}return t}n[0]="";var s=4e4,o=i(e);return s=65535,{chars1:o,chars2:i(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],s=0;s<r.length;s++)i[s]=t[r.charCodeAt(s)];e[n][1]=i.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,s=0;n<i;)e.substring(s,i)==t.substring(s,i)?s=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,s=0;n<i;)e.substring(e.length-i,e.length-s)==t.substring(t.length-i,t.length-s)?s=n=i:r=i,i=Math.floor((r-n)/2+n);return i},n.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var s=0,o=1;;){var a=e.substring(i-o),l=t.indexOf(a);if(-1==l)return s;o+=l,0!=l&&e.substring(i-o)!=t.substring(0,o)||(s=o,o++)}},n.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var i=this;function s(e,t,n){for(var r,s,o,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=i.diff_commonPrefix(e.substring(n),t.substring(c)),h=i.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<h+d&&(u=t.substring(c-h,c)+t.substring(c,c+d),r=e.substring(0,n-h),s=e.substring(n+d),o=t.substring(0,c-h),a=t.substring(c+d))}return 2*u.length>=e.length?[r,s,o,a,u]:null}var o,a,l,c,u,d=s(n,r,Math.ceil(n.length/4)),h=s(n,r,Math.ceil(n.length/2));return d||h?(o=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(a=o[0],l=o[1],c=o[2],u=o[3]):(c=o[0],u=o[1],a=o[2],l=o[3]),[a,l,c,u,o[4]]):null},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,i=[],s=0,o=null,a=0,l=0,c=0,u=0,d=0;a<e.length;)0==e[a][0]?(i[s++]=a,l=u,c=d,u=0,d=0,o=e[a][1]):(1==e[a][0]?u+=e[a][1].length:d+=e[a][1].length,o&&o.length<=Math.max(l,c)&&o.length<=Math.max(u,d)&&(e.splice(i[s-1],0,new n.Diff(r,o)),e[i[s-1]+1][0]=1,s--,a=--s>0?i[s-1]:-1,l=0,c=0,u=0,d=0,o=null,t=!0)),a++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(e[a-1][0]==r&&1==e[a][0]){var h=e[a-1][1],p=e[a][1],f=this.diff_commonOverlap_(h,p),m=this.diff_commonOverlap_(p,h);f>=m?(f>=h.length/2||f>=p.length/2)&&(e.splice(a,0,new n.Diff(0,p.substring(0,f))),e[a-1][1]=h.substring(0,h.length-f),e[a+1][1]=p.substring(f),a++):(m>=h.length/2||m>=p.length/2)&&(e.splice(a,0,new n.Diff(0,h.substring(0,m))),e[a-1][0]=1,e[a-1][1]=p.substring(0,p.length-m),e[a+1][0]=r,e[a+1][1]=h.substring(m),a++),a++}a++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var r=e.charAt(e.length-1),i=t.charAt(0),s=r.match(n.nonAlphaNumericRegex_),o=i.match(n.nonAlphaNumericRegex_),a=s&&r.match(n.whitespaceRegex_),l=o&&i.match(n.whitespaceRegex_),c=a&&r.match(n.linebreakRegex_),u=l&&i.match(n.linebreakRegex_),d=c&&e.match(n.blanklineEndRegex_),h=u&&t.match(n.blanklineStartRegex_);return d||h?5:c||u?4:s&&!a&&l?3:a||l?2:s||o?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var i=e[r-1][1],s=e[r][1],o=e[r+1][1],a=this.diff_commonSuffix(i,s);if(a){var l=s.substring(s.length-a);i=i.substring(0,i.length-a),s=l+s.substring(0,s.length-a),o=l+o}for(var c=i,u=s,d=o,h=t(i,s)+t(s,o);s.charAt(0)===o.charAt(0);){i+=s.charAt(0),s=s.substring(1)+o.charAt(0),o=o.substring(1);var p=t(i,s)+t(s,o);p>=h&&(h=p,c=i,u=s,d=o)}e[r-1][1]!=c&&(c?e[r-1][1]=c:(e.splice(r-1,1),r--),e[r][1]=u,d?e[r+1][1]=d:(e.splice(r+1,1),r--))}r++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,i=[],s=0,o=null,a=0,l=!1,c=!1,u=!1,d=!1;a<e.length;)0==e[a][0]?(e[a][1].length<this.Diff_EditCost&&(u||d)?(i[s++]=a,l=u,c=d,o=e[a][1]):(s=0,o=null),u=d=!1):(e[a][0]==r?d=!0:u=!0,o&&(l&&c&&u&&d||o.length<this.Diff_EditCost/2&&l+c+u+d==3)&&(e.splice(i[s-1],0,new n.Diff(r,o)),e[i[s-1]+1][0]=1,s--,o=null,l&&c?(u=d=!0,s=0):(a=--s>0?i[s-1]:-1,u=d=!1),t=!0)),a++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push(new n.Diff(0,""));for(var t,i=0,s=0,o=0,a="",l="";i<e.length;)switch(e[i][0]){case 1:o++,l+=e[i][1],i++;break;case r:s++,a+=e[i][1],i++;break;case 0:s+o>1?(0!==s&&0!==o&&(0!==(t=this.diff_commonPrefix(l,a))&&(i-s-o>0&&0==e[i-s-o-1][0]?e[i-s-o-1][1]+=l.substring(0,t):(e.splice(0,0,new n.Diff(0,l.substring(0,t))),i++),l=l.substring(t),a=a.substring(t)),0!==(t=this.diff_commonSuffix(l,a))&&(e[i][1]=l.substring(l.length-t)+e[i][1],l=l.substring(0,l.length-t),a=a.substring(0,a.length-t))),i-=s+o,e.splice(i,s+o),a.length&&(e.splice(i,0,new n.Diff(r,a)),i++),l.length&&(e.splice(i,0,new n.Diff(1,l)),i++),i++):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,o=0,s=0,a="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),c=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),c=!0)),i++;c&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var n,i=0,s=0,o=0,a=0;for(n=0;n<e.length&&(1!==e[n][0]&&(i+=e[n][1].length),e[n][0]!==r&&(s+=e[n][1].length),!(i>t));n++)o=i,a=s;return e.length!=n&&e[n][0]===r?a:a+(t-o)},n.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,i=/</g,s=/>/g,o=/\n/g,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1].replace(n,"&amp;").replace(i,"&lt;").replace(s,"&gt;").replace(o,"&para;<br>");switch(l){case 1:t[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case r:t[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[a]="<span>"+c+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==r&&(t[n]=e[n][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,n=0,i=0,s=0;s<e.length;s++){var o=e[s][0],a=e[s][1];switch(o){case 1:n+=a.length;break;case r:i+=a.length;break;case 0:t+=Math.max(n,i),n=0,i=0}}return t+Math.max(n,i)},n.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case r:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var i=[],s=0,o=0,a=t.split(/\t/g),l=0;l<a.length;l++){var c=a[l].substring(1);switch(a[l].charAt(0)){case"+":try{i[s++]=new n.Diff(1,decodeURI(c))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var d=e.substring(o,o+=u);"="==a[l].charAt(0)?i[s++]=new n.Diff(0,d):i[s++]=new n.Diff(r,d);break;default:if(a[l])throw new Error("Invalid diff operation in diff_fromDelta: "+a[l])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return i},n.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},n.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this;function s(e,r){var s=e/t.length,o=Math.abs(n-r);return i.Match_Distance?s+o/i.Match_Distance:o?1:s}var o=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(o=Math.min(s(0,a),o),-1!=(a=e.lastIndexOf(t,n+t.length))&&(o=Math.min(s(0,a),o)));var l,c,u=1<<t.length-1;a=-1;for(var d,h=t.length+e.length,p=0;p<t.length;p++){for(l=0,c=h;l<c;)s(p,n+c)<=o?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var f=Math.max(1,n-c+1),m=Math.min(n+c,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var y=m;y>=f;y--){var v=r[e.charAt(y-1)];if(g[y]=0===p?(g[y+1]<<1|1)&v:(g[y+1]<<1|1)&v|(d[y+1]|d[y])<<1|1|d[y+1],g[y]&u){var b=s(p,y-1);if(b<=o){if(o=b,!((a=y-1)>n))break;f=Math.max(1,2*n-a)}}}if(s(p+1,n)>o)break;d=g}return a},n.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var r=t.substring(e.start2,e.start2+e.length1),i=0;t.indexOf(r)!=t.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=t.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var s=t.substring(e.start2-i,e.start2);s&&e.diffs.unshift(new n.Diff(0,s));var o=t.substring(e.start2+e.length1,e.start2+e.length1+i);o&&e.diffs.push(new n.Diff(0,o)),e.start1-=s.length,e.start2-=s.length,e.length1+=s.length+o.length,e.length2+=s.length+o.length}},n.prototype.patch_make=function(e,t,i){var s,o;if("string"==typeof e&&"string"==typeof t&&void 0===i)s=e,(o=this.diff_main(s,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===i)o=e,s=this.diff_text1(o);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===i)s=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");s=e,o=i}if(0===o.length)return[];for(var a=[],l=new n.patch_obj,c=0,u=0,d=0,h=s,p=s,f=0;f<o.length;f++){var m=o[f][0],g=o[f][1];switch(c||0===m||(l.start1=u,l.start2=d),m){case 1:l.diffs[c++]=o[f],l.length2+=g.length,p=p.substring(0,d)+g+p.substring(d);break;case r:l.length1+=g.length,l.diffs[c++]=o[f],p=p.substring(0,d)+p.substring(d+g.length);break;case 0:g.length<=2*this.Patch_Margin&&c&&o.length!=f+1?(l.diffs[c++]=o[f],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,h),a.push(l),l=new n.patch_obj,c=0,h=p,u=d)}1!==m&&(u+=g.length),m!==r&&(d+=g.length)}return c&&(this.patch_addContext_(l,h),a.push(l)),a},n.prototype.patch_deepCopy=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r],s=new n.patch_obj;s.diffs=[];for(var o=0;o<i.diffs.length;o++)s.diffs[o]=new n.Diff(i.diffs[o][0],i.diffs[o][1]);s.start1=i.start1,s.start2=i.start2,s.length1=i.length1,s.length2=i.length2,t[r]=s}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var i=0,s=[],o=0;o<e.length;o++){var a,l,c=e[o].start2+i,u=this.diff_text1(e[o].diffs),d=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(t,u.substring(0,this.Match_MaxBits),c))&&(-1==(d=this.match_main(t,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||a>=d)&&(a=-1):a=this.match_main(t,u,c),-1==a)s[o]=!1,i-=e[o].length2-e[o].length1;else if(s[o]=!0,i=a-c,u==(l=-1==d?t.substring(a,a+u.length):t.substring(a,d+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[o].diffs)+t.substring(a+u.length);else{var h=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(h)/u.length>this.Patch_DeleteThreshold)s[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var p,f=0,m=0;m<e[o].diffs.length;m++){var g=e[o].diffs[m];0!==g[0]&&(p=this.diff_xIndex(h,f)),1===g[0]?t=t.substring(0,a+p)+g[1]+t.substring(a+p):g[0]===r&&(t=t.substring(0,a+p)+t.substring(a+this.diff_xIndex(h,f+g[1].length))),g[0]!==r&&(f+=g[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),s]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,r="",i=1;i<=t;i++)r+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=t,e[i].start2+=t;var s=e[0],o=s.diffs;if(0==o.length||0!=o[0][0])o.unshift(new n.Diff(0,r)),s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t;else if(t>o[0][1].length){var a=t-o[0][1].length;o[0][1]=r.substring(o[0][1].length)+o[0][1],s.start1-=a,s.start2-=a,s.length1+=a,s.length2+=a}return 0==(o=(s=e[e.length-1]).diffs).length||0!=o[o.length-1][0]?(o.push(new n.Diff(0,r)),s.length1+=t,s.length2+=t):t>o[o.length-1][1].length&&(a=t-o[o.length-1][1].length,o[o.length-1][1]+=r.substring(0,a),s.length1+=a,s.length2+=a),r},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=t)){var s=e[i];e.splice(i--,1);for(var o=s.start1,a=s.start2,l="";0!==s.diffs.length;){var c=new n.patch_obj,u=!0;for(c.start1=o-l.length,c.start2=a-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new n.Diff(0,l)));0!==s.diffs.length&&c.length1<t-this.Patch_Margin;){var d=s.diffs[0][0],h=s.diffs[0][1];1===d?(c.length2+=h.length,a+=h.length,c.diffs.push(s.diffs.shift()),u=!1):d===r&&1==c.diffs.length&&0==c.diffs[0][0]&&h.length>2*t?(c.length1+=h.length,o+=h.length,u=!1,c.diffs.push(new n.Diff(d,h)),s.diffs.shift()):(h=h.substring(0,t-c.length1-this.Patch_Margin),c.length1+=h.length,o+=h.length,0===d?(c.length2+=h.length,a+=h.length):u=!1,c.diffs.push(new n.Diff(d,h)),h==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(h.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push(new n.Diff(0,p))),u||e.splice(++i,0,c)}}},n.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var i=e.split("\n"),s=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<i.length;){var a=i[s].match(o);if(!a)throw new Error("Invalid patch string: "+i[s]);var l=new n.patch_obj;for(t.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),s++;s<i.length;){var c=i[s].charAt(0);try{var u=decodeURI(i[s].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new n.Diff(r,u));else if("+"==c)l.diffs.push(new n.Diff(1,u));else if(" "==c)l.diffs.push(new n.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}s++}}return t},(n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case r:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},t.exports=n,t.exports.diff_match_patch=n,t.exports.DIFF_DELETE=r,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0}}),a=(0,s.P$)({"../../node_modules/.pnpm/escape-string-regexp@1.0.5/node_modules/escape-string-regexp/index.js"(e,t){var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}}}),l=(0,s.P$)({"../../node_modules/.pnpm/ansi-styles@3.2.1/node_modules/ansi-styles/index.js"(e,t){var n=(0,i.C)(),r=(e,t)=>function(){return`[${e.apply(n,arguments)+t}m`},s=(e,t)=>function(){const r=e.apply(n,arguments);return`[${38+t};5;${r}m`},o=(e,t)=>function(){const r=e.apply(n,arguments);return`[${38+t};2;${r[0]};${r[1]};${r[2]}m`};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.grey=t.color.gray;for(const n of Object.keys(t)){const r=t[n];for(const n of Object.keys(r)){const i=r[n];t[n]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[n]=t[n],e.set(i[0],i[1])}Object.defineProperty(t,n,{value:r,enumerable:!1}),Object.defineProperty(t,"codes",{value:e,enumerable:!1})}const i=e=>e,a=(e,t,n)=>[e,t,n];t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi={ansi:r(i,0)},t.color.ansi256={ansi256:s(i,0)},t.color.ansi16m={rgb:o(a,0)},t.bgColor.ansi={ansi:r(i,10)},t.bgColor.ansi256={ansi256:s(i,10)},t.bgColor.ansi16m={rgb:o(a,10)};for(let e of Object.keys(n)){if("object"!=typeof n[e])continue;const i=n[e];"ansi16"===e&&(e="ansi"),"ansi16"in i&&(t.color.ansi[e]=r(i.ansi16,0),t.bgColor.ansi[e]=r(i.ansi16,10)),"ansi256"in i&&(t.color.ansi256[e]=s(i.ansi256,0),t.bgColor.ansi256[e]=s(i.ansi256,10)),"rgb"in i&&(t.color.ansi16m[e]=o(i.rgb,0),t.bgColor.ansi16m[e]=o(i.rgb,10))}return t}})}}),c=(0,s.P$)({"../../node_modules/.pnpm/has-flag@3.0.0/node_modules/has-flag/index.js"(e,t){t.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}}}),u=(0,s.P$)({"../../node_modules/.pnpm/supports-color@5.5.0/node_modules/supports-color/index.js"(e,t){var n,r=(0,s.ki)("os"),i=c(),o=process.env;function a(e){const t=function(e){if(!1===n)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==n)return 0;const t=n?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}i("no-color")||i("no-colors")||i("color=false")?n=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(n=!0),"FORCE_COLOR"in o&&(n=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),t.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}}}),d=(0,s.P$)({"../../node_modules/.pnpm/chalk@2.4.2/node_modules/chalk/templates.js"(e,t){var n=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,r=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,i=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,o=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function a(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):o.get(e)||e}function l(e,t){const n=[],r=t.trim().split(/\s*,\s*/g);let o;for(const t of r)if(isNaN(t)){if(!(o=t.match(i)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(o[2].replace(s,(e,t,n)=>t?a(t):n))}else n.push(Number(t));return n}function c(e){r.lastIndex=0;const t=[];let n;for(;null!==(n=r.exec(e));){const e=n[1];if(n[2]){const r=l(e,n[2]);t.push([e].concat(r))}else t.push([e])}return t}function u(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const e of Object.keys(n))if(Array.isArray(n[e])){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=n[e].length>0?r[e].apply(r,n[e]):r[e]}return r}t.exports=(e,t)=>{const r=[],i=[];let s=[];if(t.replace(n,(t,n,o,l,d,h)=>{if(n)s.push(a(n));else if(l){const t=s.join("");s=[],i.push(0===r.length?t:u(e,r)(t)),r.push({inverse:o,styles:c(l)})}else if(d){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");i.push(u(e,r)(s.join(""))),s=[],r.pop()}else s.push(h)}),i.push(s.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")}}}),h=(0,s.P$)({"../../node_modules/.pnpm/chalk@2.4.2/node_modules/chalk/index.js"(e,t){var n=a(),r=l(),i=u().stdout,s=d(),o="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),c=["ansi","ansi","ansi256","ansi16m"],h=new Set(["gray"]),p=Object.create(null);function f(e,t){t=t||{};const n=i?i.level:0;e.level=void 0===t.level?n:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function m(e){if(!this||!(this instanceof m)||this.template){const t={};return f(t,e),t.template=function(){const e=[].slice.call(arguments);return b.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,m.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=m,t.template}f(this,e)}o&&(r.blue.open="[94m");for(const e of Object.keys(r))r[e].closeRe=new RegExp(n(r[e].close),"g"),p[e]={get(){const t=r[e];return y.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};p.visible={get(){return y.call(this,this._styles||[],!0,"visible")}},r.color.closeRe=new RegExp(n(r.color.close),"g");for(const e of Object.keys(r.color.ansi))h.has(e)||(p[e]={get(){const t=this.level;return function(){const n={open:r.color[c[t]][e].apply(null,arguments),close:r.color.close,closeRe:r.color.closeRe};return y.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});r.bgColor.closeRe=new RegExp(n(r.bgColor.close),"g");for(const e of Object.keys(r.bgColor.ansi))h.has(e)||(p["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const n={open:r.bgColor[c[t]][e].apply(null,arguments),close:r.bgColor.close,closeRe:r.bgColor.closeRe};return y.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});var g=Object.defineProperties(()=>{},p);function y(e,t,n){const r=function(){return v.apply(r,arguments)};r._styles=e,r._empty=t;const i=this;return Object.defineProperty(r,"level",{enumerable:!0,get:()=>i.level,set(e){i.level=e}}),Object.defineProperty(r,"enabled",{enumerable:!0,get:()=>i.enabled,set(e){i.enabled=e}}),r.hasGrey=this.hasGrey||"gray"===n||"grey"===n,r.__proto__=g,r}function v(){const e=arguments,t=e.length;let n=String(arguments[0]);if(0===t)return"";if(t>1)for(let r=1;r<t;r++)n+=" "+e[r];if(!this.enabled||this.level<=0||!n)return this._empty?"":n;const i=r.dim.open;o&&this.hasGrey&&(r.dim.open="");for(const e of this._styles.slice().reverse())n=e.open+n.replace(e.closeRe,e.open)+e.close,n=n.replace(/\r?\n/g,`${e.close}$&${e.open}`);return r.dim.open=i,n}function b(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const n=[].slice.call(arguments,2),r=[t.raw[0]];for(let e=1;e<t.length;e++)r.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(t.raw[e]));return s(e,r.join(""))}Object.defineProperties(m.prototype,p),t.exports=m(),t.exports.supportsColor=i,t.exports.default=t.exports}}),p=(0,s.f1)(o()),f=(0,s.f1)(h()),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},w=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},k=function(){function e(t){g(this,e),this.selfOptions=t||{},this.pipes={}}return y(e,[{key:"options",value:function(e){return e&&(this.selfOptions=e),this.selfOptions}},{key:"pipe",value:function(e,t){var n=t;if("string"==typeof e){if(void 0===n)return this.pipes[e];this.pipes[e]=n}if(e&&e.name){if((n=e).processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(e,t){var n=e;n.options=this.options();for(var r=t||e.pipe||"default",i=void 0,s=void 0;r;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof r&&(r=this.pipe(r)),r.process(n),s=n,i=r,r=null,n&&n.next&&(n=n.next,r=s.nextPipe||n.pipe||i);return n.hasResult?n.result:void 0}}]),e}(),T=function(){function e(t){g(this,e),this.name=t,this.filters=[]}return y(e,[{key:"process",value:function(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var t=this.debug,n=this.filters.length,r=e,i=0;i<n;i++){var s=this.filters[i];if(t&&this.log("filter: "+s.filterName),s(r),"object"===(void 0===r?"undefined":m(r))&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)}},{key:"log",value:function(e){console.log("[jsondiffpatch] "+this.name+" pipe, "+e)}},{key:"append",value:function(){var e;return(e=this.filters).push.apply(e,arguments),this}},{key:"prepend",value:function(){var e;return(e=this.filters).unshift.apply(e,arguments),this}},{key:"indexOf",value:function(e){if(!e)throw new Error("a filter name is required");for(var t=0;t<this.filters.length;t++)if(this.filters[t].filterName===e)return t;throw new Error("filter not found: "+e)}},{key:"list",value:function(){return this.filters.map(function(e){return e.filterName})}},{key:"after",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(e){var t=this.indexOf(e),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(t,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(e){var t=this.indexOf(e);return this.filters.splice(t,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(e){if(!1!==e){if(!this.resultCheck){var t=this;return this.resultCheck=function(e){if(!e.hasResult){console.log(e);var n=new Error(t.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),e}(),x=function(){function e(){g(this,e)}return y(e,[{key:"setResult",value:function(e){return this.result=e,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(e,t){return"string"==typeof e||e instanceof T?this.nextPipe=e:(this.next=e,t&&(this.nextPipe=t)),this}},{key:"push",value:function(e,t){return e.parent=this,void 0!==t&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(this.children[this.children.length-1].next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}}]),e}(),E="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array};function C(e){if("object"!==(void 0===e?"undefined":m(e)))return e;if(null===e)return null;if(E(e))return e.map(C);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return t=/^\/(.*)\/([gimyu]*)$/.exec(e.toString()),new RegExp(t[1],t[2]);var t,n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=C(e[r]));return n}var A=function(e){function t(e,n){g(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.left=e,r.right=n,r.pipe="diff",r}return b(t,e),y(t,[{key:"setResult",value:function(e){if(this.options.cloneDiffValues&&"object"===(void 0===e?"undefined":m(e))){var t="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:C;"object"===m(e[0])&&(e[0]=t(e[0])),"object"===m(e[1])&&(e[1]=t(e[1]))}return x.prototype.setResult.apply(this,arguments)}}]),t}(x),O=function(e){function t(e,n){g(this,t);var r=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.left=e,r.delta=n,r.pipe="patch",r}return b(t,e),t}(x),M=function(e){function t(e){g(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.delta=e,n.pipe="reverse",n}return b(t,e),t}(x),I="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},D=function(e){if(e.left!==e.right)if(void 0!==e.left)if(void 0!==e.right){if("function"==typeof e.left||"function"==typeof e.right)throw new Error("functions are not supported");e.leftType=null===e.left?"null":m(e.left),e.rightType=null===e.right?"null":m(e.right),e.leftType===e.rightType&&"boolean"!==e.leftType&&"number"!==e.leftType?("object"===e.leftType&&(e.leftIsArray=I(e.left)),"object"===e.rightType&&(e.rightIsArray=I(e.right)),e.leftIsArray===e.rightIsArray?e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()):e.setResult([e.left,e.right]).exit()}else e.setResult([e.left,0,0]).exit();else{if("function"==typeof e.right)throw new Error("functions are not supported");e.setResult([e.right]).exit()}else e.setResult(void 0).exit()};D.filterName="trivial";var j=function(e){if(void 0!==e.delta){if(e.nested=!I(e.delta),!e.nested)if(1!==e.delta.length)if(2!==e.delta.length)3===e.delta.length&&0===e.delta[2]&&e.setResult(void 0).exit();else{if(e.left instanceof RegExp){var t=/^\/(.*)\/([gimyu]+)$/.exec(e.delta[1]);if(t)return void e.setResult(new RegExp(t[1],t[2])).exit()}e.setResult(e.delta[1]).exit()}else e.setResult(e.delta[0]).exit()}else e.setResult(e.left).exit()};j.filterName="trivial";var P=function(e){void 0!==e.delta?(e.nested=!I(e.delta),e.nested||(1!==e.delta.length?2!==e.delta.length?3===e.delta.length&&0===e.delta[2]&&e.setResult([e.delta[0]]).exit():e.setResult([e.delta[1],e.delta[0]]).exit():e.setResult([e.delta[0],0,0]).exit())):e.setResult(e.delta).exit()};function L(e){if(e&&e.children){for(var t=e.children.length,n=void 0,r=e.result,i=0;i<t;i++)void 0!==(n=e.children[i]).result&&((r=r||{})[n.childName]=n.result);r&&e.leftIsArray&&(r._t="a"),e.setResult(r).exit()}}function N(e){if(!e.leftIsArray&&"object"===e.leftType){var t=void 0,n=void 0,r=e.options.propertyFilter;for(t in e.left)Object.prototype.hasOwnProperty.call(e.left,t)&&(r&&!r(t,e)||(n=new A(e.left[t],e.right[t]),e.push(n,t)));for(t in e.right)Object.prototype.hasOwnProperty.call(e.right,t)&&(r&&!r(t,e)||void 0===e.left[t]&&(n=new A(void 0,e.right[t]),e.push(n,t)));e.children&&0!==e.children.length?e.exit():e.setResult(void 0).exit()}}P.filterName="trivial",L.filterName="collectChildren",N.filterName="objects";var R=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new O(e.left[t],e.delta[t]),e.push(n,t);e.exit()}};R.filterName="objects";var U=function(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,r=0;r<t;r++)n=e.children[r],Object.prototype.hasOwnProperty.call(e.left,n.childName)&&void 0===n.result?delete e.left[n.childName]:e.left[n.childName]!==n.result&&(e.left[n.childName]=n.result);e.setResult(e.left).exit()}};U.filterName="collectChildren";var B=function(e){if(e.nested&&!e.delta._t){var t=void 0,n=void 0;for(t in e.delta)n=new M(e.delta[t]),e.push(n,t);e.exit()}};function F(e){if(e&&e.children&&!e.delta._t){for(var t=e.children.length,n=void 0,r={},i=0;i<t;i++)r[(n=e.children[i]).childName]!==n.result&&(r[n.childName]=n.result);e.setResult(r).exit()}}B.filterName="objects",F.filterName="collectChildren";var z=function(e,t,n,r){return e[n]===t[r]},$="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},q="function"==typeof Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r]===t)return r;return-1};function H(e,t,n,r,i){var s=e[n],o=t[r];if(s===o)return!0;if("object"!==(void 0===s?"undefined":m(s))||"object"!==(void 0===o?"undefined":m(o)))return!1;var a=i.objectHash;if(!a)return i.matchByPosition&&n===r;var l=void 0,c=void 0;return"number"==typeof n?(i.hashCache1=i.hashCache1||[],void 0===(l=i.hashCache1[n])&&(i.hashCache1[n]=l=a(s,n))):l=a(s),void 0!==l&&("number"==typeof r?(i.hashCache2=i.hashCache2||[],void 0===(c=i.hashCache2[r])&&(i.hashCache2[r]=c=a(o,r))):c=a(o),void 0!==c&&l===c)}var V=function(e){if(e.leftIsArray){var t={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},n=0,r=0,i=void 0,s=void 0,o=void 0,a=e.left,l=e.right,c=a.length,u=l.length,d=void 0;for(c>0&&u>0&&!t.objectHash&&"boolean"!=typeof t.matchByPosition&&(t.matchByPosition=!function(e,t,n,r){for(var i=0;i<n;i++)for(var s=e[i],o=0;o<r;o++){var a=t[o];if(i!==o&&s===a)return!0}}(a,l,c,u));n<c&&n<u&&H(a,l,n,n,t);)i=n,d=new A(e.left[i],e.right[i]),e.push(d,i),n++;for(;r+n<c&&r+n<u&&H(a,l,c-1-r,u-1-r,t);)s=c-1-r,o=u-1-r,d=new A(e.left[s],e.right[o]),e.push(d,o),r++;var h=void 0;if(n+r!==c)if(n+r!==u){delete t.hashCache1,delete t.hashCache2;var p=a.slice(n,c-r),f=l.slice(n,u-r),m=function(e,t,n,r){var i=r||{},s=function(e,t,n,r){var i=e.length,s=t.length,o=void 0,a=void 0,l=[i+1];for(o=0;o<i+1;o++)for(l[o]=[s+1],a=0;a<s+1;a++)l[o][a]=0;for(l.match=n,o=1;o<i+1;o++)for(a=1;a<s+1;a++)n(e,t,o-1,a-1,r)?l[o][a]=l[o-1][a-1]+1:l[o][a]=Math.max(l[o-1][a],l[o][a-1]);return l}(e,t,n||z,i),o=function(e,t,n,r){for(var i=t.length,s=n.length,o={sequence:[],indices1:[],indices2:[]};0!==i&&0!==s;)e.match(t,n,i-1,s-1,r)?(o.sequence.unshift(t[i-1]),o.indices1.unshift(i-1),o.indices2.unshift(s-1),--i,--s):e[i][s-1]>e[i-1][s]?--s:--i;return o}(s,e,t,i);return"string"==typeof e&&"string"==typeof t&&(o.sequence=o.sequence.join("")),o}(p,f,H,t),g=[];for(h=h||{_t:"a"},i=n;i<c-r;i++)q(m.indices1,i-n)<0&&(h["_"+i]=[a[i],0,0],g.push(i));var y=!0;e.options&&e.options.arrays&&!1===e.options.arrays.detectMove&&(y=!1);var v=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(v=!0);var b=g.length;for(i=n;i<u-r;i++){var _=q(m.indices2,i-n);if(_<0){var w=!1;if(y&&b>0)for(var S=0;S<b;S++)if(H(p,f,(s=g[S])-n,i-n,t)){h["_"+s].splice(1,2,i,3),v||(h["_"+s][0]=""),o=i,d=new A(e.left[s],e.right[o]),e.push(d,o),g.splice(S,1),w=!0;break}w||(h[i]=[l[i]])}else s=m.indices1[_]+n,o=m.indices2[_]+n,d=new A(e.left[s],e.right[o]),e.push(d,o)}e.setResult(h).exit()}else{for(h=h||{_t:"a"},i=n;i<c-r;i++)h["_"+i]=[a[i],0,0];e.setResult(h).exit()}else{if(c===u)return void e.setResult(void 0).exit();for(h=h||{_t:"a"},i=n;i<u-r;i++)h[i]=[l[i]];e.setResult(h).exit()}}};V.filterName="arrays";var W=function(e,t){return e-t},G=function(e){if(e.nested&&"a"===e.delta._t){var t=void 0,n=void 0,r=e.delta,i=e.left,s=[],o=[],a=[];for(t in r)if("_t"!==t)if("_"===t[0]){if(0!==r[t][2]&&3!==r[t][2])throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+r[t][2]);s.push(parseInt(t.slice(1),10))}else 1===r[t].length?o.push({index:parseInt(t,10),value:r[t][0]}):a.push({index:parseInt(t,10),delta:r[t]});for(t=(s=s.sort(W)).length-1;t>=0;t--){var l=r["_"+(n=s[t])],c=i.splice(n,1)[0];3===l[2]&&o.push({index:l[1],value:c})}var u=(o=o.sort((m="index",function(e,t){return e[m]-t[m]}))).length;for(t=0;t<u;t++){var d=o[t];i.splice(d.index,0,d.value)}var h=a.length,p=void 0;if(h>0)for(t=0;t<h;t++){var f=a[t];p=new O(e.left[f.index],f.delta),e.push(p,f.index)}e.children?e.exit():e.setResult(e.left).exit()}var m};G.filterName="arrays";var K=function(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,r=0;r<t;r++)n=e.children[r],e.left[n.childName]=n.result;e.setResult(e.left).exit()}};K.filterName="arraysCollectChildren";var J=function(e){if(e.nested){if("a"===e.delta._t){var t=void 0,n=void 0;for(t in e.delta)"_t"!==t&&(n=new M(e.delta[t]),e.push(n,t));e.exit()}}else 3===e.delta[2]&&(e.newName="_"+e.delta[1],e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),3]).exit())};J.filterName="arrays";var X=function(e,t,n){if("string"==typeof t&&"_"===t[0])return parseInt(t.substr(1),10);if($(n)&&0===n[2])return"_"+t;var r=+t;for(var i in e){var s=e[i];if($(s))if(3===s[2]){var o=parseInt(i.substr(1),10),a=s[1];if(a===+t)return o;o<=r&&a>r?r++:o>=r&&a<r&&r--}else 0===s[2]?parseInt(i.substr(1),10)<=r&&r++:1===s.length&&i<=r&&r--}return r};function Y(e){if(e&&e.children&&"a"===e.delta._t){for(var t=e.children.length,n=void 0,r={_t:"a"},i=0;i<t;i++){var s=(n=e.children[i]).newName;void 0===s&&(s=X(e.delta,n.childName,n.result)),r[s]!==n.result&&(r[s]=n.result)}e.setResult(r).exit()}}Y.filterName="arraysCollectChildren";var Q=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};Q.filterName="dates";var Z=null,ee=function(e){if(!Z){var t=void 0;if("undefined"!=typeof diff_match_patch)t="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(p.default)try{t=p.default&&new p.default}catch(e){t=null}if(!t){if(!e)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}Z={diff:function(e,n){return t.patch_toText(t.patch_make(e,n))},patch:function(e,n){for(var r=t.patch_apply(t.patch_fromText(n),e),i=0;i<r[1].length;i++)r[1][i]||(new Error("text patch failed").textPatchFailed=!0);return r[0]}}}return Z},te=function(e){if("string"===e.leftType){var t=e.options&&e.options.textDiff&&e.options.textDiff.minLength||60;if(e.left.length<t||e.right.length<t)e.setResult([e.left,e.right]).exit();else{var n=ee();if(n){var r=n.diff;e.setResult([r(e.left,e.right),0,2]).exit()}else e.setResult([e.left,e.right]).exit()}}};te.filterName="texts";var ne=function(e){if(!e.nested&&2===e.delta[2]){var t=ee(!0).patch;e.setResult(t(e.left,e.delta[0])).exit()}};ne.filterName="texts";var re=function(e){var t,n=void 0,r=void 0,i=void 0,s=void 0,o=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(n=0,t=(r=e.split("\n")).length;n<t;n++){var l=(i=r[n]).slice(0,1);"@"===l?(o=a.exec(i),r[n]="@@ -"+o[3]+","+o[4]+" +"+o[1]+","+o[2]+" @@"):"+"===l?(r[n]="-"+r[n].slice(1),"+"===r[n-1].slice(0,1)&&(s=r[n],r[n]=r[n-1],r[n-1]=s)):"-"===l&&(r[n]="+"+r[n].slice(1))}return r.join("\n")},ie=function(e){e.nested||2===e.delta[2]&&e.setResult([re(e.delta[0]),0,2]).exit()};ie.filterName="texts";var se=function(){function e(t){g(this,e),this.processor=new k(t),this.processor.pipe(new T("diff").append(L,D,Q,te,N,V).shouldHaveResult()),this.processor.pipe(new T("patch").append(U,K,j,ne,R,G).shouldHaveResult()),this.processor.pipe(new T("reverse").append(F,Y,P,ie,B,J).shouldHaveResult())}return y(e,[{key:"options",value:function(){var e;return(e=this.processor).options.apply(e,arguments)}},{key:"diff",value:function(e,t){return this.processor.process(new A(e,t))}},{key:"patch",value:function(e,t){return this.processor.process(new O(e,t))}},{key:"reverse",value:function(e){return this.processor.process(new M(e))}},{key:"unpatch",value:function(e,t){return this.patch(e,this.reverse(t))}},{key:"clone",value:function(e){return C(e)}}]),e}(),oe="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},ae="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},le=function(e){return"_"===e.substr(0,1)?e.slice(1):e},ce=function(e){return"_t"===e?-1:"_"===e.substr(0,1)?parseInt(e.slice(1),10):parseInt(e,10)+.1},ue=function(e,t){return ce(e)-ce(t)},de=function(){function e(){g(this,e)}return y(e,[{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),this.finalize(n)}},{key:"prepareContext",value:function(e){e.buffer=[],e.out=function(){var e;(e=this.buffer).push.apply(e,arguments)}}},{key:"typeFormattterNotFound",value:function(e,t){throw new Error("cannot format delta type: "+t)}},{key:"typeFormattterErrorFormatter",value:function(e,t){return t.toString()}},{key:"finalize",value:function(e){var t=e.buffer;if(oe(t))return t.join("")}},{key:"recurse",value:function(e,t,n,r,i,s,o){var a=t&&s?s.value:n;if(void 0!==t||void 0!==r){var l=this.getDeltaType(t,s),c="node"===l?"a"===t._t?"array":"object":"";void 0!==r?this.nodeBegin(e,r,i,l,c,o):this.rootBegin(e,l,c);try{(this["format_"+l]||this.typeFormattterNotFound(e,l)).call(this,e,t,a,r,i,s)}catch(n){this.typeFormattterErrorFormatter(e,n,t,a,r,i,s),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==r?this.nodeEnd(e,r,i,l,c,o):this.rootEnd(e,l,c)}}},{key:"formatDeltaChildren",value:function(e,t,n){var r=this;this.forEachDeltaKey(t,n,function(i,s,o,a){r.recurse(e,t[i],n?n[s]:void 0,i,s,o,a)})}},{key:"forEachDeltaKey",value:function(e,t,n){var r=ae(e),i="a"===e._t,s={},o=void 0;if(void 0!==t)for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(void 0!==e[o]||i&&void 0!==e["_"+o]||r.push(o));for(o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=e[o];oe(a)&&3===a[2]&&(s[a[1].toString()]={key:o,value:t&&t[parseInt(o.substr(1))]},!1!==this.includeMoveDestinations&&void 0===t&&void 0===e[a[1]]&&r.push(a[1].toString()))}i?r.sort(ue):r.sort();for(var l=0,c=r.length;l<c;l++){var u=r[l];if(!i||"_t"!==u){var d=i?"number"==typeof u?u:parseInt(le(u),10):u,h=l===c-1;n(u,d,s[d],h)}}}},{key:"getDeltaType",value:function(e,t){if(void 0===e)return void 0!==t?"movedestination":"unchanged";if(oe(e)){if(1===e.length)return"added";if(2===e.length)return"modified";if(3===e.length&&0===e[2])return"deleted";if(3===e.length&&2===e[2])return"textdiff";if(3===e.length&&3===e[2])return"moved"}else if("object"===(void 0===e?"undefined":m(e)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(e){for(var t=[],n=e.split("\n@@ "),r=0,i=n.length;r<i;r++){var s=n[r],o={pieces:[]},a=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(s).slice(1);o.location={line:a[0],chr:a[1]};for(var l=s.split("\n").slice(1),c=0,u=l.length;c<u;c++){var d=l[c];if(d.length){var h={type:"context"};"+"===d.substr(0,1)?h.type="added":"-"===d.substr(0,1)&&(h.type="deleted"),h.text=d.slice(1),o.pieces.push(h)}}t.push(o)}return t}}]),e}(),he=Object.freeze({default:de}),pe=function(e){function t(){return g(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),y(t,[{key:"typeFormattterErrorFormatter",value:function(e,t){e.out('<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatValue",value:function(e,t){e.out("<pre>"+fe(JSON.stringify(t,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var r=0,i=n.length;r<i;r++){var s=n[r];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+s.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+s.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var o=s.pieces,a=0,l=o.length;a<l;a++){var c=o[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+fe(decodeURI(c.text))+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){var r="jsondiffpatch-"+t+(n?" jsondiffpatch-child-node-type-"+n:"");e.out('<div class="jsondiffpatch-delta '+r+'">')}},{key:"rootEnd",value:function(e){e.out("</div>"+(e.hasArrows?'<script type="text/javascript">setTimeout('+me.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(e,t,n,r,i){var s="jsondiffpatch-"+r+(i?" jsondiffpatch-child-node-type-"+i:"");e.out('<li class="'+s+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(e){e.out("</li>")}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&(e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,n),e.out("</div>"))}},{key:"format_node",value:function(e,t,n){var r="a"===t._t?"array":"object";e.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+r+'">'),this.formatDeltaChildren(e,t,n),e.out("</ul>")}},{key:"format_added",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_modified",value:function(e,t){e.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(e,t[1]),e.out("</div>")}},{key:"format_deleted",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out("</div>")}},{key:"format_moved",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatValue(e,t[0]),e.out('</div><div class="jsondiffpatch-moved-destination">'+t[1]+"</div>"),e.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),e.hasArrows=!0}},{key:"format_textdiff",value:function(e,t){e.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(e,t[0]),e.out("</div>")}}]),t}(de);function fe(e){for(var t=e,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],r=0;r<n.length;r++)t=t.replace(n[r][0],n[r][1]);return t}var me=function(e){!function(e,t,n){for(var r=e.querySelectorAll(".jsondiffpatch-arrow"),i=0,s=r.length;i<s;i++)n(r[i])}(e||document,0,function(e){var t=e.parentNode,n=e.children,r=e.style,i=t,s=n[0],o=s.children[1];s.style.display="none";var a,l,c,u=(l=(a=i.querySelector(".jsondiffpatch-moved-destination")).textContent,c=a.innerText,l||c),d=i.parentNode,h=void 0;if(function(e,t){for(var n=e.children,r=0,i=n.length;r<i;r++)t(n[r])}(d,function(e){e.getAttribute("data-key")===u&&(h=e)}),h)try{var p=h.offsetTop-i.offsetTop;s.setAttribute("height",Math.abs(p)+6),r.top=-8+(p>0?0:p)+"px";var f=p>0?"M30,0 Q-10,"+Math.round(p/2)+" 26,"+(p-4):"M30,"+-p+" Q-10,"+Math.round(-p/2)+" 26,4";o.setAttribute("d",f),s.style.display=""}catch(e){}})},ge=function(e,t,n){var r=t||document.body,i="jsondiffpatch-unchanged-",s={showing:i+"showing",hiding:i+"hiding",visible:i+"visible",hidden:i+"hidden"},o=r.classList;if(o){if(!n)return o.remove(s.showing),o.remove(s.hiding),o.remove(s.visible),o.remove(s.hidden),void(!1===e&&o.add(s.hidden));!1===e?(o.remove(s.showing),o.add(s.visible),setTimeout(function(){o.add(s.hiding)},10)):(o.remove(s.hiding),o.add(s.showing),o.remove(s.hidden));var a=setInterval(function(){me(r)},100);setTimeout(function(){o.remove(s.showing),o.remove(s.hiding),!1===e?(o.add(s.hidden),o.remove(s.visible)):(o.add(s.visible),o.remove(s.hidden)),setTimeout(function(){o.remove(s.visible),clearInterval(a)},n+400)},n)}},ye=void 0,ve=Object.freeze({showUnchanged:ge,hideUnchanged:function(e,t){return ge(!1,e,t)},default:pe,format:function(e,t){return ye||(ye=new pe),ye.format(e,t)}}),be=function(e){function t(){g(this,t);var e=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return b(t,e),y(t,[{key:"prepareContext",value:function(e){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},e.row=function(t,n){e.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),e.out(e.indentPad),e.out('</pre><pre style="display: inline-block">'),e.out(t),e.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),e.out(n),e.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.row("",'<pre class="jsondiffpatch-error">'+t+"</pre>")}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.out('<ul class="jsondiffpatch-textdiff">');for(var r=0,i=n.length;r<i;r++){var s=n[r];e.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+s.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+s.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var o=s.pieces,a=0,l=o.length;a<l;a++){var c=o[a];e.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}e.out("</div></li>")}e.out("</ul>")}},{key:"rootBegin",value:function(e,t,n){e.out('<table class="jsondiffpatch-annotated-delta">'),"node"===t&&(e.row("{"),e.indent()),"array"===n&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(e,t){"node"===t&&(e.indent(-1),e.row("}")),e.out("</table>")}},{key:"nodeBegin",value:function(e,t,n,r,i){e.row("&quot;"+t+"&quot;: {"),"node"===r&&e.indent(),"array"===i&&e.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(e,t,n,r,i,s){"node"===r&&e.indent(-1),e.row("}"+(s?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}}]),t}(de),_e=function(e){return'<pre style="display:inline-block">&quot;'+e+"&quot;</pre>"},we={added:function(e,t,n,r){var i=" <pre>([newValue])</pre>";return void 0===r?"new value"+i:"number"==typeof r?"insert at index "+r+i:"add property "+_e(r)+i},modified:function(e,t,n,r){var i=" <pre>([previousValue, newValue])</pre>";return void 0===r?"modify value"+i:"number"==typeof r?"modify at index "+r+i:"modify property "+_e(r)+i},deleted:function(e,t,n,r){var i=" <pre>([previousValue, 0, 0])</pre>";return void 0===r?"delete value"+i:"number"==typeof r?"remove index "+r+i:"delete property "+_e(r)+i},moved:function(e,t,n,r){return'move from <span title="(position to remove at original state)">index '+r+'</span> to <span title="(position to insert at final state)">index '+e[1]+"</span>"},textdiff:function(e,t,n,r){return"text diff"+(void 0===r?"":"number"==typeof r?" at index "+r:" at property "+_e(r))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},Se=function(e,t){var n=this.getDeltaType(t),r=we[n],i=r&&r.apply(r,Array.prototype.slice.call(arguments,1)),s=JSON.stringify(t,null,2);"textdiff"===n&&(s=s.split("\\n").join('\\n"+\n   "')),e.indent(),e.row(s,i),e.indent(-1)};be.prototype.format_added=Se,be.prototype.format_modified=Se,be.prototype.format_deleted=Se,be.prototype.format_moved=Se,be.prototype.format_textdiff=Se;var ke=void 0,Te=Object.freeze({default:be,format:function(e,t){return ke||(ke=new be),ke.format(e,t)}}),xe=function(e){function t(){g(this,t);var e=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!0,e}return b(t,e),y(t,[{key:"prepareContext",value:function(e){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.result=[],e.path=[],e.pushCurrentOp=function(e){var t=e.op,n=e.value,r={op:t,path:this.currentPath()};void 0!==n&&(r.value=n),this.result.push(r)},e.pushMoveOp=function(e){var t=this.currentPath();this.result.push({op:"move",from:t,path:this.toPath(e)})},e.currentPath=function(){return"/"+this.path.join("/")},e.toPath=function(e){var t=this.path.slice();return t[t.length-1]=e,"/"+t.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.out("[ERROR] "+t)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(e,t,n){e.path.push(n)}},{key:"nodeEnd",value:function(e){e.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){e.pushCurrentOp({op:"add",value:t[0]})}},{key:"format_modified",value:function(e,t){e.pushCurrentOp({op:"replace",value:t[1]})}},{key:"format_deleted",value:function(e){e.pushCurrentOp({op:"remove"})}},{key:"format_moved",value:function(e,t){var n=t[1];e.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(e,t){var n={};return this.prepareContext(n),this.recurse(n,e,t),n.result}}]),t}(de),Ee=function(e){return e[e.length-1]},Ce=function(e,t){var n=Array(t.length+1).fill().map(function(){return[]});return e.map(function(e){var n=t.map(function(t){return t(e)}).indexOf(!0);return n<0&&(n=t.length),{item:e,position:n}}).reduce(function(e,t){return e[t.position].push(t.item),e},n)},Ae=function(e){return"move"===e.op},Oe=function(e){return"remove"===e.op},Me=void 0,Ie=function(e,t){return Me||(Me=new xe),i=Me.format(e,t),s=Ce(i,[Ae,Oe]),a=(o=w(s,3))[0],l=o[1],c=o[2],r=function(e,t){var n,r,i,s,o=e.path.split("/"),a=t.path.split("/");return o.length!==a.length?o.length-a.length:(n=Ee(o),r=Ee(a),i=parseInt(n,10),s=parseInt(r,10),isNaN(i)||isNaN(s)?0:s-i)},(n=l).sort(r),[].concat(S(n),S(a),S(c));var n,r,i,s,o,a,l,c},De=Object.freeze({default:xe,partitionOps:Ce,format:Ie,log:function(e,t){console.log(Ie(e,t))}});function je(e){return f.default&&f.default[e]||function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}}var Pe={added:je("green"),deleted:je("red"),movedestination:je("gray"),moved:je("yellow"),unchanged:je("gray"),error:je("white.bgRed"),textDiffLine:je("gray")},Le=function(e){function t(){g(this,t);var e=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.includeMoveDestinations=!1,e}return b(t,e),y(t,[{key:"prepareContext",value:function(e){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prepareContext",this).call(this,e),e.indent=function(e){this.indentLevel=(this.indentLevel||0)+(void 0===e?1:e),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},e.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},e.out=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t.length;r<i;r++){var s=t[r].split("\n").join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(s=this.color[0](s)),this.buffer.push(s)}},e.pushColor=function(e){this.color=this.color||[],this.color.unshift(e)},e.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(e,t){e.pushColor(Pe.error),e.out("[ERROR]"+t),e.popColor()}},{key:"formatValue",value:function(e,t){e.out(JSON.stringify(t,null,2))}},{key:"formatTextDiffString",value:function(e,t){var n=this.parseTextDiff(t);e.indent();for(var r=0,i=n.length;r<i;r++){var s=n[r];e.pushColor(Pe.textDiffLine),e.out(s.location.line+","+s.location.chr+" "),e.popColor();for(var o=s.pieces,a=0,l=o.length;a<l;a++){var c=o[a];e.pushColor(Pe[c.type]),e.out(c.text),e.popColor()}r<i-1&&e.outLine()}e.indent(-1)}},{key:"rootBegin",value:function(e,t,n){e.pushColor(Pe[t]),"node"===t&&(e.out("array"===n?"[":"{"),e.indent())}},{key:"rootEnd",value:function(e,t,n){"node"===t&&(e.indent(-1),e.out("array"===n?"]":"}")),e.popColor()}},{key:"nodeBegin",value:function(e,t,n,r,i){e.pushColor(Pe[r]),e.out(n+": "),"node"===r&&(e.out("array"===i?"[":"{"),e.indent())}},{key:"nodeEnd",value:function(e,t,n,r,i,s){"node"===r&&(e.indent(-1),e.out("array"===i?"]":"}"+(s?"":","))),s||e.outLine(),e.popColor()}},{key:"format_unchanged",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_movedestination",value:function(e,t,n){void 0!==n&&this.formatValue(e,n)}},{key:"format_node",value:function(e,t,n){this.formatDeltaChildren(e,t,n)}},{key:"format_added",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_modified",value:function(e,t){e.pushColor(Pe.deleted),this.formatValue(e,t[0]),e.popColor(),e.out(" => "),e.pushColor(Pe.added),this.formatValue(e,t[1]),e.popColor()}},{key:"format_deleted",value:function(e,t){this.formatValue(e,t[0])}},{key:"format_moved",value:function(e,t){e.out("==> "+t[1])}},{key:"format_textdiff",value:function(e,t){this.formatTextDiffString(e,t[0])}}]),t}(de),Ne=void 0,Re=function(e,t){return Ne||(Ne=new Le),Ne.format(e,t)},Ue=Object.freeze({default:Le,format:Re,log:function(e,t){console.log(Re(e,t))}});function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(){Fe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new x(i||[]);return r(o,"_invoke",{value:w(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function p(){}function f(){}var m={};l(m,s,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(E([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Be(d)&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,o,a)},function(e){i("throw",e,o,a)}):t.resolve(d).then(function(e){c.value=e,o(c)},function(e){return i("throw",e,o,a)})}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=l(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(_.prototype),l(_.prototype,o,function(){return this}),e.AsyncIterator=_,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new _(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(v),l(v,a,"Generator"),l(v,s,function(){return this}),l(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function ze(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.freeze({base:he,html:ve,annotated:Te,jsonpatch:De,console:Ue});var He=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qe(this,"diffPatcher",new se({arrays:{detectMove:!1,includeValueOnMove:!1},textDiff:{minLength:1}})),qe(this,"scheduler",new r.Y)}var t,n,i,s;return t=e,n=[{key:"diff",value:(i=Fe().mark(function e(t){return Fe().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scheduler.request();case 2:return e.abrupt("return",{id:t.id,delta:this.diffPatcher.diff(t.a,t.b)});case 3:case"end":return e.stop()}},e,this)}),s=function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(e){ze(s,n,r,o,a,"next",e)}function a(e){ze(s,n,r,o,a,"throw",e)}o(void 0)})},function(e){return s.apply(this,arguments)})}],n&&$e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},4373:e=>{e.exports=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},4417:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},4422:(e,t,n)=>{"use strict";n.r(t),n.d(t,{applyDevTools:()=>Du,default:()=>ju});var r=n(5534),i=n(6317),s=n(4617),o=(0,s.P$)({"../../node_modules/.pnpm/react@19.1.0/node_modules/react/cjs/react.production.js"(e){var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,f(b,g.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function k(e,n,r,i,s,o){return r=o.ref,{$$typeof:t,type:e,key:n,ref:void 0!==r?r:null,props:o}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var x=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function C(){}function A(e,r,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case t:case n:u=!0;break;case d:return A((u=e._init)(e._payload),r,i,s,o)}}if(u)return o=o(e),u=""===s?"."+E(e,0):s,_(o)?(i="",null!=u&&(i=u.replace(x,"$&/")+"/"),A(o,r,i,"",function(e){return e})):null!=o&&(T(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+u,o=k(l.type,c,void 0,0,0,l.props)),r.push(o)),1;u=0;var p,f=""===s?".":s+":";if(_(e))for(var m=0;m<e.length;m++)u+=A(s=e[m],r,i,a=f+E(s,m),o);else if("function"==typeof(m=null===(p=e)||"object"!=typeof p?null:"function"==typeof(p=h&&p[h]||p["@@iterator"])?p:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=A(s=s.value,r,i,a=f+E(s,m++),o);else if("object"===a){if("function"==typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(C,C):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),r,i,s,o);throw r=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return u}function O(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}e.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},e.Component=g,e.Fragment=r,e.Profiler=s,e.PureComponent=v,e.StrictMode=i,e.Suspense=c,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key;if(null!=t)for(s in t.ref,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return k(e.type,i,void 0,0,0,r)},e.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return k(e,s,void 0,0,0,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:l,render:e}},e.isValidElement=T,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(D,I)}catch(e){I(e)}finally{w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t,n){var r=w.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version="19.1.0"}}),a=((0,s.P$)({"../../node_modules/.pnpm/react@19.1.0/node_modules/react/cjs/react.development.js"(e,t){}}),(0,s.P$)({"../../node_modules/.pnpm/react@19.1.0/node_modules/react/index.js"(e,t){t.exports=o()}})),l=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/classCallCheck.js"(e,t){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}}),c=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/typeof.js"(e,t){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}),u=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/toPrimitive.js"(e,t){var n=c().default;t.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports}}),d=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/toPropertyKey.js"(e,t){var n=c().default,r=u();t.exports=function(e){var t=r(e,"string");return"symbol"==n(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports}}),h=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/createClass.js"(e,t){var n=d();function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}t.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports}}),p=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/assertThisInitialized.js"(e,t){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports}}),f=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/setPrototypeOf.js"(e,t){function n(e,r){return t.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}),m=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/inherits.js"(e,t){var n=f();t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports}}),g=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"(e,t){var n=c().default,r=p();t.exports=function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},t.exports.__esModule=!0,t.exports.default=t.exports}}),y=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/getPrototypeOf.js"(e,t){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}),v=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/defineProperty.js"(e,t){var n=d();t.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},t.exports.__esModule=!0,t.exports.default=t.exports}}),b=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/arrayLikeToArray.js"(e,t){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports}}),_=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"(e,t){var n=b();t.exports=function(e){if(Array.isArray(e))return n(e)},t.exports.__esModule=!0,t.exports.default=t.exports}}),w=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/iterableToArray.js"(e,t){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports}}),S=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"(e,t){var n=b();t.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}}),k=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/nonIterableSpread.js"(e,t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}}),T=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/toConsumableArray.js"(e,t){var n=_(),r=w(),i=S(),s=k();t.exports=function(e){return n(e)||r(e)||i(e)||s()},t.exports.__esModule=!0,t.exports.default=t.exports}}),x=(0,s.P$)({"../../node_modules/.pnpm/react-is@16.13.1/node_modules/react-is/cjs/react-is.production.min.js"(e){var t="function"==typeof Symbol&&Symbol.for,n=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,f=t?Symbol.for("react.memo"):60115,m=t?Symbol.for("react.lazy"):60116,g=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,v=t?Symbol.for("react.responder"):60118,b=t?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case i:case o:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case f:case a:return e;default:return t}}case r:return t}}}function w(e){return _(e)===u}e.AsyncMode=c,e.ConcurrentMode=u,e.ContextConsumer=l,e.ContextProvider=a,e.Element=n,e.ForwardRef=d,e.Fragment=i,e.Lazy=m,e.Memo=f,e.Portal=r,e.Profiler=o,e.StrictMode=s,e.Suspense=h,e.isAsyncMode=function(e){return w(e)||_(e)===c},e.isConcurrentMode=w,e.isContextConsumer=function(e){return _(e)===l},e.isContextProvider=function(e){return _(e)===a},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},e.isForwardRef=function(e){return _(e)===d},e.isFragment=function(e){return _(e)===i},e.isLazy=function(e){return _(e)===m},e.isMemo=function(e){return _(e)===f},e.isPortal=function(e){return _(e)===r},e.isProfiler=function(e){return _(e)===o},e.isStrictMode=function(e){return _(e)===s},e.isSuspense=function(e){return _(e)===h},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===u||e===o||e===s||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===a||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===v||e.$$typeof===b||e.$$typeof===g)},e.typeOf=_}}),E=((0,s.P$)({"../../node_modules/.pnpm/react-is@16.13.1/node_modules/react-is/cjs/react-is.development.js"(e){}}),(0,s.P$)({"../../node_modules/.pnpm/react-is@16.13.1/node_modules/react-is/index.js"(e,t){t.exports=x()}})),C=(0,s.P$)({"../../node_modules/.pnpm/object-assign@4.1.1/node_modules/object-assign/index.js"(e,t){var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var s,o,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))r.call(s,c)&&(a[c]=s[c]);if(n){o=n(s);for(var u=0;u<o.length;u++)i.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}}}),A=(0,s.P$)({"../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/lib/ReactPropTypesSecret.js"(e,t){t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}),O=(0,s.P$)({"../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/lib/has.js"(e,t){t.exports=Function.call.bind(Object.prototype.hasOwnProperty)}}),M=(0,s.P$)({"../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/checkPropTypes.js"(e,t){function n(e,t,n,r,i){}n.resetWarningCache=function(){},t.exports=n}}),I=((0,s.P$)({"../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/factoryWithTypeCheckers.js"(e,t){var n=E(),r=C(),i=A(),s=O(),o=M(),a=function(){};function l(){return null}t.exports=function(e,t){var c="function"==typeof Symbol&&Symbol.iterator,u="<<anonymous>>",d={array:m("array"),bigint:m("bigint"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:f(l),arrayOf:function(e){return f(function(t,n,r,s,o){if("function"!=typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a))return new p("Invalid "+s+" `"+o+"` of type `"+v(a)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<a.length;l++){var c=e(a,l,r,s,o+"["+l+"]",i);if(c instanceof Error)return c}return null})},element:f(function(t,n,r,i,s){var o=t[n];return e(o)?null:new p("Invalid "+i+" `"+s+"` of type `"+v(o)+"` supplied to `"+r+"`, expected a single ReactElement.")}),elementType:f(function(e,t,r,i,s){var o=e[t];return n.isValidElementType(o)?null:new p("Invalid "+i+" `"+s+"` of type `"+v(o)+"` supplied to `"+r+"`, expected a single ReactElement type.")}),instanceOf:function(e){return f(function(t,n,r,i,s){if(!(t[n]instanceof e)){var o=e.name||u;return new p("Invalid "+i+" `"+s+"` of type `"+((a=t[n]).constructor&&a.constructor.name?a.constructor.name:u)+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}var a;return null})},node:f(function(e,t,n,r,i){return y(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return f(function(t,n,r,o,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var l=t[n],c=v(l);if("object"!==c)return new p("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in l)if(s(l,u)){var d=e(l,u,r,o,a+"."+u,i);if(d instanceof Error)return d}return null})},oneOf:function(e){return Array.isArray(e)?f(function(t,n,r,i,s){for(var o=t[n],a=0;a<e.length;a++)if(h(o,e[a]))return null;var l=JSON.stringify(e,function(e,t){return"symbol"===b(t)?String(t):t});return new p("Invalid "+i+" `"+s+"` of value `"+String(o)+"` supplied to `"+r+"`, expected one of "+l+".")}):l},oneOfType:function(e){if(!Array.isArray(e))return l;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return a(_(n)),l}return f(function(t,n,r,o,a){for(var l=[],c=0;c<e.length;c++){var u=(0,e[c])(t,n,r,o,a,i);if(null==u)return null;u.data&&s(u.data,"expectedType")&&l.push(u.data.expectedType)}return new p("Invalid "+o+" `"+a+"` supplied to `"+r+"`"+(l.length>0?", expected one of type ["+l.join(", ")+"]":"")+".")})},shape:function(e){return f(function(t,n,r,s,o){var a=t[n],l=v(a);if("object"!==l)return new p("Invalid "+s+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if("function"!=typeof u)return g(r,s,o,c,b(u));var d=u(a,c,r,s,o+"."+c,i);if(d)return d}return null})},exact:function(e){return f(function(t,n,o,a,l){var c=t[n],u=v(c);if("object"!==u)return new p("Invalid "+a+" `"+l+"` of type `"+u+"` supplied to `"+o+"`, expected `object`.");var d=r({},t[n],e);for(var h in d){var f=e[h];if(s(e,h)&&"function"!=typeof f)return g(o,a,l,h,b(f));if(!f)return new p("Invalid "+a+" `"+l+"` key `"+h+"` supplied to `"+o+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=f(c,h,o,a,l+"."+h,i);if(m)return m}return null})}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function f(e){function n(n,r,s,o,a,l,c){if(o=o||u,l=l||s,c!==i&&t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}return null==r[s]?n?null===r[s]?new p("The "+a+" `"+l+"` is marked as required in `"+o+"`, but its value is `null`."):new p("The "+a+" `"+l+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:e(r,s,o,a,l)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function m(e){return f(function(t,n,r,i,s,o){var a=t[n];return v(a)!==e?new p("Invalid "+i+" `"+s+"` of type `"+b(a)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null})}function g(e,t,n,r,i){return new p((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var n=function(e){var t=e&&(c&&e[c]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var r,i=n.call(t);if(n!==t.entries){for(;!(r=i.next()).done;)if(!y(r.value))return!1}else for(;!(r=i.next()).done;){var s=r.value;if(s&&!y(s[1]))return!1}return!0;default:return!1}}function v(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function b(e){if(null==e)return""+e;var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function _(e){var t=b(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,d.checkPropTypes=o,d.resetWarningCache=o.resetWarningCache,d.PropTypes=d,d}}}),(0,s.P$)({"../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/factoryWithThrowingShims.js"(e,t){var n=A();function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function e(e,t,r,i,s,o){if(o!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return s.PropTypes=s,s}}})),D=(0,s.P$)({"../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/index.js"(e,t){t.exports=I()()}}),j=(0,s.P$)({"../../node_modules/.pnpm/lodash.debounce@4.0.8/node_modules/lodash.debounce/index.js"(e,t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,a="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,c=a||l||Function("return this")(),u=Object.prototype.toString,d=Math.max,h=Math.min,p=function(){return c.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=i.test(e);return a||s.test(e)?o(e.slice(2),a?2:8):r.test(e)?NaN:+e}t.exports=function(e,t,n){var r,i,s,o,a,l,c=0,u=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,s=i;return r=i=void 0,c=t,o=e.apply(s,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||g&&e-c>=s}function _(){var e=p();if(b(e))return w(e);a=setTimeout(_,function(e){var n=t-(e-l);return g?h(n,s-(e-c)):n}(e))}function w(e){return a=void 0,y&&r?v(e):(r=i=void 0,o)}function S(){var e=p(),n=b(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(_,t),u?v(e):o}(l);if(g)return a=setTimeout(_,t),v(l)}return void 0===a&&(a=setTimeout(_,t)),o}return t=m(t)||0,f(n)&&(u=!!n.leading,s=(g="maxWait"in n)?d(m(n.maxWait)||0,t):s,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},S.flush=function(){return void 0===a?o:w(p())},S}}}),P=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/extends.js"(e,t){function n(){return t.exports=n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.exports.__esModule=!0,t.exports.default=t.exports,n.apply(null,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}}),L=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"(e,t){t.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n},t.exports.__esModule=!0,t.exports.default=t.exports}}),N=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"(e,t){var n=L();t.exports=function(e,t){if(null==e)return{};var r,i,s=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s},t.exports.__esModule=!0,t.exports.default=t.exports}}),R=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/arrayWithHoles.js"(e,t){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports}}),U=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"(e,t){t.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports}}),B=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/nonIterableRest.js"(e,t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}}),F=(0,s.P$)({"../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/slicedToArray.js"(e,t){var n=R(),r=U(),i=S(),s=B();t.exports=function(e,t){return n(e)||r(e,t)||i(e,t)||s()},t.exports.__esModule=!0,t.exports.default=t.exports}}),z=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/threezerotwofour.js"(e,t){e.__esModule=!0,e.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},t.exports=e.default}}),$=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/apathy.js"(e,t){e.__esModule=!0,e.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},t.exports=e.default}}),q=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/ashes.js"(e,t){e.__esModule=!0,e.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},t.exports=e.default}}),H=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/atelier-dune.js"(e,t){e.__esModule=!0,e.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},t.exports=e.default}}),V=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/atelier-forest.js"(e,t){e.__esModule=!0,e.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},t.exports=e.default}}),W=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/atelier-heath.js"(e,t){e.__esModule=!0,e.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},t.exports=e.default}}),G=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/atelier-lakeside.js"(e,t){e.__esModule=!0,e.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},t.exports=e.default}}),K=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/atelier-seaside.js"(e,t){e.__esModule=!0,e.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},t.exports=e.default}}),J=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/bespin.js"(e,t){e.__esModule=!0,e.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},t.exports=e.default}}),X=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/brewer.js"(e,t){e.__esModule=!0,e.default={scheme:"brewer",author:"timothe poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},t.exports=e.default}}),Y=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/bright.js"(e,t){e.__esModule=!0,e.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},t.exports=e.default}}),Q=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/chalk.js"(e,t){e.__esModule=!0,e.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},t.exports=e.default}}),Z=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/codeschool.js"(e,t){e.__esModule=!0,e.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},t.exports=e.default}}),ee=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/colors.js"(e,t){e.__esModule=!0,e.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},t.exports=e.default}}),te=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/default.js"(e,t){e.__esModule=!0,e.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},t.exports=e.default}}),ne=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/eighties.js"(e,t){e.__esModule=!0,e.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},t.exports=e.default}}),re=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/embers.js"(e,t){e.__esModule=!0,e.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},t.exports=e.default}}),ie=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/flat.js"(e,t){e.__esModule=!0,e.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},t.exports=e.default}}),se=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/google.js"(e,t){e.__esModule=!0,e.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},t.exports=e.default}}),oe=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/grayscale.js"(e,t){e.__esModule=!0,e.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},t.exports=e.default}}),ae=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/greenscreen.js"(e,t){e.__esModule=!0,e.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},t.exports=e.default}}),le=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/harmonic.js"(e,t){e.__esModule=!0,e.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},t.exports=e.default}}),ce=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/hopscotch.js"(e,t){e.__esModule=!0,e.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},t.exports=e.default}}),ue=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/isotope.js"(e,t){e.__esModule=!0,e.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},t.exports=e.default}}),de=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/marrakesh.js"(e,t){e.__esModule=!0,e.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},t.exports=e.default}}),he=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/mocha.js"(e,t){e.__esModule=!0,e.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},t.exports=e.default}}),pe=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/monokai.js"(e,t){e.__esModule=!0,e.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},t.exports=e.default}}),fe=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/ocean.js"(e,t){e.__esModule=!0,e.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},t.exports=e.default}}),me=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/paraiso.js"(e,t){e.__esModule=!0,e.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},t.exports=e.default}}),ge=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/pop.js"(e,t){e.__esModule=!0,e.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},t.exports=e.default}}),ye=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/railscasts.js"(e,t){e.__esModule=!0,e.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},t.exports=e.default}}),ve=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/shapeshifter.js"(e,t){e.__esModule=!0,e.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},t.exports=e.default}}),be=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/solarized.js"(e,t){e.__esModule=!0,e.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},t.exports=e.default}}),_e=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/summerfruit.js"(e,t){e.__esModule=!0,e.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},t.exports=e.default}}),we=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/tomorrow.js"(e,t){e.__esModule=!0,e.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},t.exports=e.default}}),Se=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/tube.js"(e,t){e.__esModule=!0,e.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},t.exports=e.default}}),ke=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/twilight.js"(e,t){e.__esModule=!0,e.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},t.exports=e.default}}),Te=(0,s.P$)({"../../node_modules/.pnpm/base16@1.0.0/node_modules/base16/lib/index.js"(e){function t(e){return e&&e.__esModule?e.default:e}e.__esModule=!0;var n=z();e.threezerotwofour=t(n);var r=$();e.apathy=t(r);var i=q();e.ashes=t(i);var s=H();e.atelierDune=t(s);var o=V();e.atelierForest=t(o);var a=W();e.atelierHeath=t(a);var l=G();e.atelierLakeside=t(l);var c=K();e.atelierSeaside=t(c);var u=J();e.bespin=t(u);var d=X();e.brewer=t(d);var h=Y();e.bright=t(h);var p=Q();e.chalk=t(p);var f=Z();e.codeschool=t(f);var m=ee();e.colors=t(m);var g=te();e.default=t(g);var y=ne();e.eighties=t(y);var v=re();e.embers=t(v);var b=ie();e.flat=t(b);var _=se();e.google=t(_);var w=oe();e.grayscale=t(w);var S=ae();e.greenscreen=t(S);var k=le();e.harmonic=t(k);var T=ce();e.hopscotch=t(T);var x=ue();e.isotope=t(x);var E=de();e.marrakesh=t(E);var C=he();e.mocha=t(C);var A=pe();e.monokai=t(A);var O=fe();e.ocean=t(O);var M=me();e.paraiso=t(M);var I=ge();e.pop=t(I);var D=ye();e.railscasts=t(D);var j=ve();e.shapeshifter=t(j);var P=be();e.solarized=t(P);var L=_e();e.summerfruit=t(L);var N=we();e.tomorrow=t(N);var R=Se();e.tube=t(R);var U=ke();e.twilight=t(U)}}),xe=(0,s.P$)({"../../node_modules/.pnpm/color-name@1.1.4/node_modules/color-name/index.js"(e,t){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}}),Ee=(0,s.P$)({"../../node_modules/.pnpm/is-arrayish@0.3.2/node_modules/is-arrayish/index.js"(e,t){t.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}}}),Ce=(0,s.P$)({"../../node_modules/.pnpm/simple-swizzle@0.2.2/node_modules/simple-swizzle/index.js"(e,t){var n=Ee(),r=Array.prototype.concat,i=Array.prototype.slice,s=t.exports=function(e){for(var t=[],s=0,o=e.length;s<o;s++){var a=e[s];n(a)?t=r.call(t,i.call(a)):t.push(a)}return t};s.wrap=function(e){return function(){return e(s(arguments))}}}}),Ae=(0,s.P$)({"../../node_modules/.pnpm/color-string@1.9.1/node_modules/color-string/index.js"(e,t){var n,r=xe(),i=Ce(),s=Object.hasOwnProperty,o=Object.create(null);for(n in r)s.call(r,n)&&(o[r[n]]=n);var a=t.exports={to:{},get:{}};function l(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}a.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=a.get.hsl(e),n="hsl";break;case"hwb":t=a.get.hwb(e),n="hwb";break;default:t=a.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},a.get.rgb=function(e){if(!e)return null;var t,n,i,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=t[2],t=t[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(t.slice(a,a+2),16)}i&&(o[3]=parseInt(i,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(i=(t=t[1])[3],n=0;n<3;n++)o[n]=parseInt(t[n]+t[n],16);i&&(o[3]=parseInt(i+i,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(t[n+1],0);t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:s.call(r,t[1])?((o=r[t[1]])[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}for(n=0;n<3;n++)o[n]=l(o[n],0,255);return o[3]=l(o[3],0,1),o},a.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},a.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},a.to.hex=function(){var e=i(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},a.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},a.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},a.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},a.to.hwb=function(){var e=i(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},a.to.keyword=function(e){return o[e.slice(0,3)]}}}),Oe=(0,s.P$)({"../../node_modules/.pnpm/color@3.2.1/node_modules/color/index.js"(e,t){var n=Ae(),r=(0,i.C)(),s=[].slice,o=["keyword","gray","hex"],a={};Object.keys(r).forEach(function(e){a[s.call(r[e].labels).sort().join("")]=e});var l={};function c(e,t){if(!(this instanceof c))return new c(e,t);if(t&&t in o&&(t=null),t&&!(t in r))throw new Error("Unknown model: "+t);var i,u;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof c)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var d=n.get(e);if(null===d)throw new Error("Unable to parse color from string: "+e);this.model=d.model,u=r[this.model].channels,this.color=d.value.slice(0,u),this.valpha="number"==typeof d.value[u]?d.value[u]:1}else if(e.length){this.model=t||"rgb",u=r[this.model].channels;var p=s.call(e,0,u);this.color=h(p,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var f=Object.keys(e);"alpha"in e&&(f.splice(f.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var m=f.sort().join("");if(!(m in a))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=a[m];var g=r[this.model].labels,y=[];for(i=0;i<g.length;i++)y.push(e[g[i]]);this.color=h(y)}if(l[this.model])for(u=r[this.model].channels,i=0;i<u;i++){var v=l[this.model][i];v&&(this.color[i]=v(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach(function(e){(l[e]||(l[e]=[]))[t]=n}),e=e[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[e]()).color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function d(e){return function(t){return Math.max(0,Math.min(e,t))}}function h(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}c.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in n.to?this:this.rgb(),r=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return n.to[t.model](r)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:t.color.concat(this.valpha);return n.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=r[this.model].channels,n=r[this.model].labels,i=0;i<t;i++)e[n[i]]=this.color[i];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new c(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new c(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,d(255)),green:u("rgb",1,d(255)),blue:u("rgb",2,d(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:u("hsl",1,d(100)),lightness:u("hsl",2,d(100)),saturationv:u("hsv",1,d(100)),value:u("hsv",2,d(100)),chroma:u("hcg",1,d(100)),gray:u("hcg",2,d(100)),white:u("hwb",1,d(100)),wblack:u("hwb",2,d(100)),cyan:u("cmyk",0,d(100)),magenta:u("cmyk",1,d(100)),yellow:u("cmyk",2,d(100)),black:u("cmyk",3,d(100)),x:u("xyz",0,d(100)),y:u("xyz",1,d(100)),z:u("xyz",2,d(100)),l:u("lab",0,d(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new c(e):r[this.model].keyword(this.color)},hex:function(e){return arguments.length?new c(e):n.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return c.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),i=void 0===t?.5:t,s=2*i-1,o=n.alpha()-r.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return c.rgb(a*n.red()+l*r.red(),a*n.green()+l*r.green(),a*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(r).forEach(function(e){if(-1===o.indexOf(e)){var t=r[e].channels;c.prototype[e]=function(){if(this.model===e)return new c(this);if(arguments.length)return new c(arguments,e);var n,i="number"==typeof arguments[t]?t:this.valpha;return new c((n=r[this.model][e].raw(this.color),Array.isArray(n)?n:[n]).concat(i),e)},c[e]=function(n){return"number"==typeof n&&(n=h(s.call(arguments),t)),new c(n,e)}}}),t.exports=c}}),Me=(0,s.P$)({"../../node_modules/.pnpm/lodash.curry@4.1.1/node_modules/lodash.curry/index.js"(e,t){var n="__lodash_placeholder__",r=1/0,i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s=/^\s+|\s+$/g,o=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,a=/\{\n\/\* \[wrapped with (.+)\] \*/,l=/,? & /,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^\[object .+?Constructor\]$/,h=/^0o[0-7]+$/i,p=/^(?:0|[1-9]\d*)$/,f=parseInt,m="object"==typeof global&&global&&global.Object===Object&&global,g="object"==typeof self&&self&&self.Object===Object&&self,y=m||g||Function("return this")();function v(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function b(e){return e!=e}function _(e,t){for(var r=-1,i=e.length,s=0,o=[];++r<i;){var a=e[r];a!==t&&a!==n||(e[r]=n,o[s++]=r)}return o}var w,S,k,T=Function.prototype,x=Object.prototype,E=y["__core-js_shared__"],C=(w=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",A=T.toString,O=x.hasOwnProperty,M=x.toString,I=RegExp("^"+A.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=Object.create,j=Math.max,P=Math.min,L=(S=F(Object,"defineProperty"),(k=F.name)&&k.length>2?S:void 0);function N(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n,r=G(n=e.prototype)?D(n):{},i=e.apply(r,t);return G(i)?i:r}}function R(e,t,n,r,i,s,o,a,l,c){var u=128&t,d=1&t,h=2&t,p=24&t,f=512&t,m=h?void 0:N(e);return function g(){for(var v=arguments.length,b=Array(v),w=v;w--;)b[w]=arguments[w];if(p)var S=B(g),k=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}(b,S);if(r&&(b=function(e,t,n,r){for(var i=-1,s=e.length,o=n.length,a=-1,l=t.length,c=j(s-o,0),u=Array(l+c),d=!r;++a<l;)u[a]=t[a];for(;++i<o;)(d||i<s)&&(u[n[i]]=e[i]);for(;c--;)u[a++]=e[i++];return u}(b,r,i,p)),s&&(b=function(e,t,n,r){for(var i=-1,s=e.length,o=-1,a=n.length,l=-1,c=t.length,u=j(s-a,0),d=Array(u+c),h=!r;++i<u;)d[i]=e[i];for(var p=i;++l<c;)d[p+l]=t[l];for(;++o<a;)(h||i<s)&&(d[p+n[o]]=e[i++]);return d}(b,s,o,p)),v-=k,p&&v<c){var T=_(b,S);return U(e,t,R,g.placeholder,n,b,T,a,l,c-v)}var x=d?n:this,E=h?x[e]:e;return v=b.length,a?b=function(e,t){for(var n=e.length,r=P(t.length,n),i=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e);r--;){var s=t[r];e[r]=q(s,n)?i[s]:void 0}return e}(b,a):f&&v>1&&b.reverse(),u&&l<v&&(b.length=l),this&&this!==y&&this instanceof g&&(E=m||N(E)),E.apply(x,b)}}function U(e,t,n,r,i,s,o,a,l,c){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var d=n(e,t,i,u?s:void 0,u?o:void 0,u?void 0:s,u?void 0:o,a,l,c);return d.placeholder=r,H(d,e,t)}function B(e){return e.placeholder}function F(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!G(e)||function(e){return!!C&&C in e}(e))return!1;var t=function(e){var t=G(e)?M.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?I:d;return t.test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function z(e){var t=e.match(a);return t?t[1].split(l):[]}function $(e,t){var n=t.length,r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(o,"{\n/* [wrapped with "+t+"] */\n")}function q(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||p.test(e))&&e>-1&&e%1==0&&e<t}var H=L?function(e,t,n){var r,i=t+"";return L(e,"toString",{configurable:!0,enumerable:!1,value:(r=$(i,V(z(i),n)),function(){return r})})}:function(e){return e};function V(e,t){return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n]););}(i,function(n){var r="_."+n[0];t&n[1]&&!function(e,t){return!(!e||!e.length)&&function(e,t){if(t!=t)return function(e,t){for(var n=e.length,r=-1;++r<n;)if(t(e[r],r,e))return r;return-1}(e,b);for(var n=-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}(e,t)>-1}(e,r)&&e.push(r)}),e.sort()}function W(e,t,n){var r=function(e,t,n,r,i,s,o,a){var l=2&t;if(!l&&"function"!=typeof e)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(t&=-97,r=i=void 0),o=void 0===o?o:j(K(o),0),a=void 0===a?a:K(a),c-=i?i.length:0,64&t){var u=r,d=i;r=i=void 0}var h=[e,t,n,r,i,u,d,s,o,a];if(e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],!(a=h[9]=null==h[9]?l?0:e.length:j(h[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?function(e,t,n){var r=N(e);return function i(){for(var s=arguments.length,o=Array(s),a=s,l=B(i);a--;)o[a]=arguments[a];var c=s<3&&o[0]!==l&&o[s-1]!==l?[]:_(o,l);return(s-=c.length)<n?U(e,t,R,i.placeholder,void 0,o,c,void 0,void 0,n-s):v(this&&this!==y&&this instanceof i?r:e,this,o)}}(e,t,a):32!=t&&33!=t||i.length?R.apply(void 0,h):function(e,t,n,r){var i=1&t,s=N(e);return function t(){for(var o=-1,a=arguments.length,l=-1,c=r.length,u=Array(c+a),d=this&&this!==y&&this instanceof t?s:e;++l<c;)u[l]=r[l];for(;a--;)u[l++]=arguments[++o];return v(d,i?n:this,u)}}(e,t,n,r);else var p=function(e,t,n){var r=1&t,i=N(e);return function t(){return(this&&this!==y&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return H(p,e,t)}(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=W.placeholder,r}function G(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function K(e){var t=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==M.call(e)}(e))return NaN;if(G(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=G(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||h.test(e)?f(e.slice(2),n?2:8):c.test(e)?NaN:+e}(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}W.placeholder={},t.exports=W}}),Ie=(0,s.P$)({"../../node_modules/.pnpm/html@1.0.0/node_modules/html/lib/html.js"(e,t){t.exports={prettyPrint:function(e,t){var n,r,i,s,o,a;for(r=(t=t||{}).indent_size||4,i=t.indent_char||" ",o=t.brace_style||"collapse",s=0==t.max_char?1/0:t.max_char||70,a=t.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],n=new function(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.get_content=function(){for(var e="",t=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(e,this.Utils.whitespace))t.length&&(n=!0),this.line_char_count--;else{if(n){if(this.line_char_count>=this.max_char){t.push("\n");for(var r=0;r<this.indent_level;r++)t.push(this.indent_string);this.line_char_count=0}else t.push(" "),this.line_char_count++;n=!1}t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input),i=r?r.index:this.input.length;return this.pos<i&&(t=this.input.substring(this.pos,i),this.pos=i),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.get_tag=function(){var e,t,n="",r=[],i=!1;do{if(this.pos>=this.input.length)return r.length?r.join(""):["","TK_EOF"];n=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(n,this.Utils.whitespace)?(i=!0,this.line_char_count--):("'"!==n&&'"'!==n||r[1]&&"!"===r[1]||(n+=this.get_unformatted(n),i=!0),"="===n&&(i=!1),r.length&&"="!==r[r.length-1]&&">"!==n&&i&&(this.line_char_count>=this.max_char?(this.print_newline(!1,r),this.line_char_count=0):(r.push(" "),this.line_char_count++),i=!1),"<"===n&&(e=this.pos-1),r.push(n))}while(">"!==n);var s,o=r.join("");s=-1!=o.indexOf(" ")?o.indexOf(" "):o.indexOf(">");var l=o.substring(1,s).toLowerCase();if("/"===o.charAt(o.length-2)||this.Utils.in_array(l,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===l)this.record_tag(l),this.tag_type="SCRIPT";else if("style"===l)this.record_tag(l),this.tag_type="STYLE";else if(this.Utils.in_array(l,a)){var c=this.get_unformatted("</"+l+">",o);r.push(c),e>0&&this.Utils.in_array(this.input.charAt(e-1),this.Utils.whitespace)&&r.splice(0,0,this.input.charAt(e-1)),t=this.pos-1,this.Utils.in_array(this.input.charAt(t+1),this.Utils.whitespace)&&r.push(this.input.charAt(t+1)),this.tag_type="SINGLE"}else"!"===l.charAt(0)?-1!=l.indexOf("[if")?(-1!=o.indexOf("!IE")&&(c=this.get_unformatted("--\x3e",o),r.push(c)),this.tag_type="START"):-1!=l.indexOf("[endif")?(this.tag_type="END",this.unindent()):-1!=l.indexOf("[cdata[")?(c=this.get_unformatted("]]>",o),r.push(c),this.tag_type="SINGLE"):(c=this.get_unformatted("--\x3e",o),r.push(c),this.tag_type="SINGLE"):("/"===l.charAt(0)?(this.retrieve_tag(l.substring(1)),this.tag_type="END"):(this.record_tag(l),this.tag_type="START"),this.Utils.in_array(l,this.Utils.extra_liners)&&this.print_newline(!0,this.output));return r.join("")},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var n="",r="",i=!0;do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!i){this.line_char_count--;continue}if("\n"===n||"\r"===n){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,i=!0}while(-1==r.toLowerCase().indexOf(e));return r},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);return"string"!=typeof(e=this.get_contents_to(t))?e:[e,"TK_"+t]}return"CONTENT"===this.current_mode?"string"!=typeof(e=this.get_content())?e:[e,"TK_CONTENT"]:"TAG"===this.current_mode?"string"!=typeof(e=this.get_tag())?e:[e,"TK_TAG_"+this.tag_type]:void 0},this.get_full_indent=function(e){return(e=this.indent_level+e||0)<1?"":Array(e+1).join(this.indent_string)},this.printer=function(e,t,n,r,i){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=i,this.indent_level=0,this.max_char=r,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){if(this.line_char_count=0,t&&t.length){if(!e)for(;this.Utils.in_array(t[t.length-1],this.Utils.whitespace);)t.pop();t.push("\n");for(var n=0;n<this.indent_level;n++)t.push(this.indent_string)}},this.print_token=function(e){this.output.push(e)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this},n.printer(e,i,r,s,o);;){var l=n.get_token();if(n.token_text=l[0],n.token_type=l[1],"TK_EOF"===n.token_type)break;switch(n.token_type){case"TK_TAG_START":n.print_newline(!1,n.output),n.print_token(n.token_text),n.indent(),n.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===n.last_token&&""===n.last_text){var c=n.token_text.match(/\w+/)[0],u=n.output[n.output.length-1].match(/<\s*(\w+)/);null!==u&&u[1]===c||n.print_newline(!0,n.output)}n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var d=n.token_text.match(/^\s*<([a-z]+)/i);d&&n.Utils.in_array(d[1],a)||n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_CONTENT":""!==n.token_text&&n.print_token(n.token_text),n.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==n.token_text){n.output.push("\n");var h=n.token_text;if("TK_SCRIPT"==n.token_type)var p="function"==typeof js_beautify&&js_beautify;else"TK_STYLE"==n.token_type&&(p="function"==typeof css_beautify&&css_beautify);if("keep"==t.indent_scripts)var f=0;else f="separate"==t.indent_scripts?-n.indent_level:1;var m=n.get_full_indent(f);if(p)h=p(h.replace(/^\s*/,m),t);else{var g=h.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(n.indent_string).length-1,y=n.get_full_indent(f-g);h=h.replace(/^\s*/,m).replace(/\r\n|\r|\n/g,"\n"+y).replace(/\s*$/,"")}h&&(n.print_token(h),n.print_newline(!0,n.output))}n.current_mode="TAG"}n.last_token=n.token_type,n.last_text=n.token_text}return n.output.join("")}}}}),De=(0,s.P$)({"../../node_modules/.pnpm/scheduler@0.26.0/node_modules/scheduler/cjs/scheduler.production.js"(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var s,o,a;e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now?(s=performance,e.unstable_now=function(){return s.now()}):(o=Date,a=o.now(),e.unstable_now=function(){return o.now()-a});var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function w(e){if(m=!1,_(e),!f)if(null!==n(l))f=!0,x||(x=!0,S());else{var t=n(c);null!==t&&I(w,t.startTime-e)}}var S,k,T,x=!1,E=-1,C=5,A=-1;function O(){return!(!g&&e.unstable_now()-A<C)}function M(){if(g=!1,x){var t=e.unstable_now();A=t;var i=!0;try{e:{f=!1,m&&(m=!1,v(E),E=-1),p=!0;var s=h;try{t:{for(_(t),d=n(l);null!==d&&!(d.expirationTime>t&&O());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var a=o(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof a){d.callback=a,_(t),i=!0;break t}d===n(l)&&r(l),_(t)}else r(l);d=n(l)}if(null!==d)i=!0;else{var u=n(c);null!==u&&I(w,u.startTime-t),i=!1}}break e}finally{d=null,h=s,p=!1}i=void 0}}finally{i?S():x=!1}}}function I(t,n){E=y(function(){t(e.unstable_now())},n)}"function"==typeof b?S=function(){b(M)}:"undefined"!=typeof MessageChannel?(k=new MessageChannel,T=k.port2,k.port1.onmessage=M,S=function(){T.postMessage(null)}):S=function(){y(M,0)},e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var o=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(v(E),E=-1):m=!0,I(w,s-o))):(r.sortIndex=a,t(l,r),f||p||(f=!0,x||(x=!0,S()))),r},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}}),je=((0,s.P$)({"../../node_modules/.pnpm/scheduler@0.26.0/node_modules/scheduler/cjs/scheduler.development.js"(e){}}),(0,s.P$)({"../../node_modules/.pnpm/scheduler@0.26.0/node_modules/scheduler/index.js"(e,t){t.exports=De()}})),Pe=(0,s.P$)({"../../node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom.production.js"(e){var t=a();function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal"),o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,r)},e.flushSync=function(e){var t=o.T,n=i.p;try{if(o.T=null,i.p=2,e)return e()}finally{o.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,i.d.C(e,t))},e.prefetchDNS=function(e){"string"==typeof e&&i.d.D(e)},e.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=l(n,t.crossOrigin),s="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:o}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},e.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},e.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=l(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},e.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=l(t.as,t.crossOrigin);i.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},e.useFormStatus=function(){return o.H.useHostTransitionStatus()},e.version="19.1.0"}}),Le=((0,s.P$)({"../../node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom.development.js"(e){}}),(0,s.P$)({"../../node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/index.js"(e,t){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),t.exports=Pe()}})),Ne=(0,s.P$)({"../../node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.production.js"(e){var t=je(),n=a(),r=Le();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function O(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case E:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case f:return"Portal";case _:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return I(e(t))}catch(e){}}return null}var D=Array.isArray,j=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},N=[],R=-1;function U(e){return{current:e}}function B(e){0>R||(e.current=N[R],N[R]=null,R--)}function F(e,t){R++,N[R]=e.current,e.current=t}var z=U(null),$=U(null),q=U(null),H=U(null);function V(e,t){switch(F(q,t),F($,e),F(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(z),F(z,e)}function W(){B(z),B($),B(q)}function G(e){null!==e.memoizedState&&F(H,e);var t=z.current,n=od(t,e.type);t!==n&&(F($,e),F(z,n))}function K(e){$.current===e&&(B(z),B($)),H.current===e&&(B(H),Jd._currentValue=L)}var J=Object.prototype.hasOwnProperty,X=t.unstable_scheduleCallback,Y=t.unstable_cancelCallback,Q=t.unstable_shouldYield,Z=t.unstable_requestPaint,ee=t.unstable_now,te=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,re=t.unstable_UserBlockingPriority,ie=t.unstable_NormalPriority,se=t.unstable_LowPriority,oe=t.unstable_IdlePriority,ae=t.log,le=t.unstable_setDisableYieldValue,ce=null,ue=null;function de(e){if("function"==typeof ae&&le(e),ue&&"function"==typeof ue.setStrictMode)try{ue.setStrictMode(ce,e)}catch(e){}}var he=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2,me=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ye(r):0!==(o&=a)?i=ye(o):n||0!==(n=a&~e)&&(i=ye(n)):0!==(a=r&~s)?i=ye(a):0!==o?i=ye(o):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&4194048&n)?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=me;return!(4194048&(me<<=1))&&(me=256),e}function Se(){var e=ge;return!(62914560&(ge<<=1))&&(ge=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-he(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-he(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Oe(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Me=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Me,De="__reactProps$"+Me,Pe="__reactContainer$"+Me,Ne="__reactEvents$"+Me,Re="__reactListeners$"+Me,Ue="__reactHandles$"+Me,Be="__reactResources$"+Me,Fe="__reactMarker$"+Me;function ze(e){delete e[Ie],delete e[De],delete e[Ne],delete e[Re],delete e[Ue]}function $e(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[Ie]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=_d(e);null!==e;){if(n=e[Ie])return n;e=_d(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Ie]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ve(e){var t=e[Be];return t||(t=e[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Fe]=!0}var Ge=new Set,Ke={};function Je(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ye,Qe,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),et={},tt={};function nt(e,t,n){if(i=t,J.call(tt,i)||!J.call(et,i)&&(Ze.test(i)?tt[i]=!0:(et[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function rt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function it(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Ye)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Qe=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Qe}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function lt(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function ct(e){try{var t="";do{t+=lt(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function gt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ut(t)):null!=n?bt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.name=""+ut(a):e.removeAttribute("name")}function vt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o)}function bt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(D(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Tt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Tt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&xt(e,s,r)}else for(var o in t)t.hasOwnProperty(o)&&xt(e,o,t[o])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ot=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Ot.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,Pt=null;function Lt(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[De]||null;if(!s)throw Error(i(90));yt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Nt=!1;function Rt(e,t,n){if(Nt)return e(t,n);Nt=!0;try{return e(t)}finally{if(Nt=!1,(null!==jt||null!==Pt)&&($c(),jt&&(t=jt,e=Pt,Pt=jt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Bt,Ft=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),zt=!1;if(Ft)try{Bt={},Object.defineProperty(Bt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(e){zt=!1}var $t=null,qt=null,Ht=null;function Vt(){if(Ht)return Ht;var e,t,n=qt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Ht=i.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Kt(){return!1}function Jt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Kt,this.isPropagationStopped=Kt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Xt,Yt,Qt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},en=Jt(Zt),tn=d({},Zt,{view:0,detail:0}),nn=Jt(tn),rn=d({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Xt=e.screenX-Qt.screenX,Yt=e.screenY-Qt.screenY):Yt=Xt=0,Qt=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),sn=Jt(rn),on=Jt(d({},rn,{dataTransfer:0})),an=Jt(d({},tn,{relatedTarget:0})),ln=Jt(d({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),cn=Jt(d({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Jt(d({},Zt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function mn(){return fn}var gn=Jt(d({},tn,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Jt(d({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Jt(d({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),bn=Jt(d({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Jt(d({},rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Jt(d({},Zt,{newState:0,oldState:0})),Sn=[9,13,27,32],kn=Ft&&"CompositionEvent"in window,Tn=null;Ft&&"documentMode"in document&&(Tn=document.documentMode);var xn=Ft&&"TextEvent"in window&&!Tn,En=Ft&&(!kn||Tn&&8<Tn&&11>=Tn),Cn=String.fromCharCode(32),An=!1;function On(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1,Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Pn(e,t,n,r){jt?Pt?Pt.push(r):Pt=[r]:jt=r,0<(t=Vu(t,"onChange")).length&&(n=new en("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,Nn=null;function Rn(e){Ru(e,0)}function Un(e){if(pt(He(e)))return e}function Bn(e,t){if("change"===e)return t}var Fn,zn,$n,qn=!1;function Hn(){Ln&&(Ln.detachEvent("onpropertychange",Vn),Nn=Ln=null)}function Vn(e){if("value"===e.propertyName&&Un(Nn)){var t=[];Pn(t,Nn,e,Dt(e)),Rt(Rn,t)}}function Wn(e,t,n){"focusin"===e?(Hn(),Nn=n,(Ln=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Hn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Nn)}function Kn(e,t){if("click"===e)return Un(t)}function Jn(e,t){if("input"===e||"change"===e)return Un(t)}Ft&&(Ft?((zn="oninput"in document)||(($n=document.createElement("div")).setAttribute("oninput","return;"),zn="function"==typeof $n.oninput),Fn=zn):Fn=!1,qn=Fn&&(!document.documentMode||9<document.documentMode));var Xn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Yn(e,t){if(Xn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!J.call(t,i)||!Xn(e[i],t[i]))return!1}return!0}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=Qn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qn(r)}}function er(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?er(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rr=Ft&&"documentMode"in document&&11>=document.documentMode,ir=null,sr=null,or=null,ar=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==ir||ir!==ft(r)||(r="selectionStart"in(r=ir)&&nr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Yn(or,r)||(or=r,0<(r=Vu(sr,"onSelect")).length&&(t=new en("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},dr={},hr={};function pr(e){if(dr[e])return dr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return dr[e]=n[t];return e}Ft&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var fr=pr("animationend"),mr=pr("animationiteration"),gr=pr("animationstart"),yr=pr("transitionrun"),vr=pr("transitionstart"),br=pr("transitioncancel"),_r=pr("transitionend"),wr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),Je(t,[e])}Sr.push("scrollEnd");var Tr=new WeakMap;function xr(e,t){if("object"==typeof e&&null!==e){var n=Tr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ct(t)},Tr.set(e,t),t)}return{value:e,source:t,stack:ct(t)}}var Er=[],Cr=0,Ar=0;function Or(){for(var e=Cr,t=Ar=Cr=0;t<e;){var n=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var i=Er[t];Er[t++]=null;var s=Er[t];if(Er[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&jr(n,i,s)}}function Mr(e,t,n,r){Er[Cr++]=e,Er[Cr++]=t,Er[Cr++]=n,Er[Cr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return Mr(e,t,n,r),Pr(e)}function Dr(e,t){return Mr(e,null,null,t),Pr(e)}function jr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-he(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Pr(e){if(50<jc)throw jc=0,Pc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,n,r){return new Nr(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Rr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,s,o){var a=0;if(r=e,"function"==typeof e)Ur(e)&&(a=1);else if("string"==typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Rr(31,n,t,s)).elementType=E,e.lanes=o,e;case m:return $r(n.children,s,o,t);case g:a=8,s|=24;break;case y:return(e=Rr(12,n,t,2|s)).elementType=y,e.lanes=o,e;case S:return(e=Rr(13,n,t,s)).elementType=S,e.lanes=o,e;case k:return(e=Rr(19,n,t,s)).elementType=k,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case v:case _:a=10;break e;case b:a=9;break e;case w:a=11;break e;case T:a=14;break e;case x:a=16,r=null;break e}a=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Rr(a,n,t,s)).elementType=e,t.type=r,t.lanes=o,t}function $r(e,t,n,r){return(e=Rr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Rr(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Rr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Wr=0,Gr=null,Kr=0,Jr=[],Xr=0,Yr=null,Qr=1,Zr="";function ei(e,t){Vr[Wr++]=Kr,Vr[Wr++]=Gr,Gr=e,Kr=t}function ti(e,t,n){Jr[Xr++]=Qr,Jr[Xr++]=Zr,Jr[Xr++]=Yr,Yr=e;var r=Qr;e=Zr;var i=32-he(r)-1;r&=~(1<<i),n+=1;var s=32-he(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qr=1<<32-he(t)+i|n<<i|r,Zr=s+e}else Qr=1<<s|n<<i|r,Zr=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Gr;)Gr=Vr[--Wr],Vr[Wr]=null,Kr=Vr[--Wr],Vr[Wr]=null;for(;e===Yr;)Yr=Jr[--Xr],Jr[Xr]=null,Zr=Jr[--Xr],Jr[Xr]=null,Qr=Jr[--Xr],Jr[Xr]=null}var ii=null,si=null,oi=!1,ai=null,li=!1,ci=Error(i(519));function ui(e){throw gi(xr(Error(i(418,"")),e)),ci}function di(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[De]=r,n){case"dialog":Uu("cancel",t),Uu("close",t);break;case"iframe":case"object":case"embed":Uu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Uu(Lu[n],t);break;case"source":Uu("error",t);break;case"img":case"image":case"link":Uu("error",t),Uu("load",t);break;case"details":Uu("toggle",t);break;case"input":Uu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Uu("invalid",t);break;case"textarea":Uu("invalid",t),St(t,r.value,r.defaultValue,r.children),ht(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Uu("beforetoggle",t),Uu("toggle",t)),null!=r.onScroll&&Uu("scroll",t),null!=r.onScrollEnd&&Uu("scrollend",t),null!=r.onClick&&(t.onclick=Qu),t=!0):t=!1,t||ui(e)}function hi(e){for(ii=e.return;ii;)switch(ii.tag){case 5:case 13:return void(li=!1);case 27:case 3:return void(li=!0);default:ii=ii.return}}function pi(e){if(e!==ii)return!1;if(!oi)return hi(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&si&&ui(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){si=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}si=null}}else 27===n?(n=si,fd(e.type)?(e=bd,bd=null,si=e):si=n):si=ii?vd(e.stateNode.nextSibling):null;return!0}function fi(){si=ii=null,oi=!1}function mi(){var e=ai;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),ai=null),e}function gi(e){null===ai?ai=[e]:ai.push(e)}var yi=U(null),vi=null,bi=null;function _i(e,t,n){F(yi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=yi.current,B(yi)}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var o=s.dependencies;if(null!==o){var a=s.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Si(o.return,n,e),r||(a=null);break e}o=l.next}}else if(18===s.tag){if(null===(a=s.return))throw Error(i(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),Si(a,n,e),a=null}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}function Ti(e,t,n,r){e=null;for(var s=t,o=!1;null!==s;){if(!o)if(524288&s.flags)o=!0;else if(262144&s.flags)break;if(10===s.tag){var a=s.alternate;if(null===a)throw Error(i(387));if(null!==(a=a.memoizedProps)){var l=s.type;Xn(s.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(s===H.current){if(null===(a=s.alternate))throw Error(i(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Jd):e=[Jd])}s=s.return}null!==e&&ki(t,e,n,r),t.flags|=262144}function xi(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ei(e){vi=e,bi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Oi(vi,e)}function Ai(e,t){return null===vi&&Ei(e),Oi(e,t)}function Oi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bi){if(null===e)throw Error(i(308));bi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bi=bi.next=t;return n}var Mi="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ii=t.unstable_scheduleCallback,Di=t.unstable_NormalPriority,ji={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pi(){return{controller:new Mi,data:new Map,refCount:0}}function Li(e){e.refCount--,0===e.refCount&&Ii(Di,function(){e.controller.abort()})}var Ni=null,Ri=0,Ui=0,Bi=null;function Fi(){if(0===--Ri&&null!==Ni){null!==Bi&&(Bi.status="fulfilled");var e=Ni;Ni=null,Ui=0,Bi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zi=j.S;j.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Ni){var n=Ni=[];Ri=0,Ui=Du(),Bi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ri++,t.then(Fi,Fi)}(0,t),null!==zi&&zi(e,t)};var $i=U(null);function qi(){var e=$i.current;return null!==e?e:ic.pooledCache}function Hi(e,t){F($i,null===t?$i.current:t.pool)}function Vi(){var e=qi();return null===e?null:{parent:ji._currentValue,pool:e}}var Wi=Error(i(460)),Gi=Error(i(474)),Ki=Error(i(542)),Ji={then:function(){}};function Xi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function Qi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ts(e=t.reason),e;default:if("string"==typeof t.status)t.then(Yi,Yi);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ts(e=t.reason),e}throw Zi=t,Wi}}var Zi=null;function es(){if(null===Zi)throw Error(i(459));var e=Zi;return Zi=null,e}function ts(e){if(e===Wi||e===Ki)throw Error(i(483))}var ns=!1;function rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&rc){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Pr(e),jr(e,null,n),t}return Mr(e,r,t,n),Pr(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var cs=!1;function us(){if(cs&&null!==Bi)throw Bi}function ds(e,t,n,r){cs=!1;var i=e.updateQueue;ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var p=-536870913&a.lane,f=p!==a.lane;if(f?(oc&p)===p:(r&p)===p){0!==p&&p===Ui&&(cs=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;p=t;var y=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){h=m.call(y,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(y,h,p):m))break e;h=d({},h,p);break e;case 2:ns=!0}}null!==(p=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[p]:f.push(p))}else f={lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=p;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=o,e.lanes=o,e.memoizedState=h}}function hs(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function ps(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var fs=U(null),ms=U(0);function gs(e,t){F(ms,e=hc),F(fs,t),hc=e|t.baseLanes}function ys(){F(ms,hc),F(fs,fs.current)}function vs(){hc=ms.current,B(fs),B(ms)}var bs=0,_s=null,ws=null,Ss=null,ks=!1,Ts=!1,xs=!1,Es=0,Cs=0,As=null,Os=0;function Ms(){throw Error(i(321))}function Is(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function Ds(e,t,n,r,i,s){return bs=s,_s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=null===e||null===e.memoizedState?Go:Ko,xs=!1,s=n(r,i),xs=!1,Ts&&(s=Ps(t,n,r,i)),js(e),s}function js(e){j.H=Wo;var t=null!==ws&&null!==ws.next;if(bs=0,Ss=ws=_s=null,ks=!1,Cs=0,As=null,t)throw Error(i(300));null===e||Aa||null!==(e=e.dependencies)&&xi(e)&&(Aa=!0)}function Ps(e,t,n,r){_s=e;var s=0;do{if(Ts&&(As=null),Cs=0,Ts=!1,25<=s)throw Error(i(301));if(s+=1,Ss=ws=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}j.H=Jo,o=t(n,r)}while(Ts);return o}function Ls(){var e=j.H,t=e.useState()[0];return t="function"==typeof t.then?zs(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(_s.flags|=1024),t}function Ns(){var e=0!==Es;return Es=0,e}function Rs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Us(e){if(ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ks=!1}bs=0,Ss=ws=_s=null,Ts=!1,Cs=Es=0,As=null}function Bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ss?_s.memoizedState=Ss=e:Ss=Ss.next=e,Ss}function Fs(){if(null===ws){var e=_s.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===Ss?_s.memoizedState:Ss.next;if(null!==t)Ss=t,ws=e;else{if(null===e){if(null===_s.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===Ss?_s.memoizedState=Ss=e:Ss=Ss.next=e}return Ss}function zs(e){var t=Cs;return Cs+=1,null===As&&(As=[]),e=Qi(As,e,t),t=_s,null===(null===Ss?t.memoizedState:Ss.next)&&(t=t.alternate,j.H=null===t||null===t.memoizedState?Go:Ko),e}function $s(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return zs(e);if(e.$$typeof===_)return Ci(e)}throw Error(i(438,String(e)))}function qs(e){var t=null,n=_s.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=_s.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Hs(e,t){return"function"==typeof t?t(e):t}function Vs(e){return Ws(Fs(),ws,e)}function Ws(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var s=e.baseQueue,o=r.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}t.baseQueue=s=o,r.pending=null}if(o=e.baseState,null===s)e.memoizedState=o;else{var l=a=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(bs&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ui&&(d=!0);else{if((bs&p)===p){u=u.next,p===Ui&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=o):c=c.next=h,_s.lanes|=p,fc|=p}h=u.action,xs&&n(o,h),o=u.hasEagerState?u.eagerState:n(o,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,a=o):c=c.next=p,_s.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=o:c.next=l,!Xn(o,e.memoizedState)&&(Aa=!0,d&&null!==(n=Bi)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=c,r.lastRenderedState=o}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Gs(e){var t=Fs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);Xn(o,t.memoizedState)||(Aa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ks(e,t,n){var r=_s,s=Fs(),o=oi;if(o){if(void 0===n)throw Error(i(407));n=n()}else n=t();var a=!Xn((ws||s).memoizedState,n);if(a&&(s.memoizedState=n,Aa=!0),s=s.queue,vo(2048,8,Ys.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||null!==Ss&&1&Ss.memoizedState.tag){if(r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Xs.bind(null,r,s,n,t),null),null===ic)throw Error(i(349));o||124&bs||Js(r,t,n)}return n}function Js(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_s.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xs(e,t,n,r){t.value=n,t.getSnapshot=r,Qs(t)&&Zs(e)}function Ys(e,t,n){return n(function(){Qs(t)&&Zs(e)})}function Qs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(e){return!0}}function Zs(e){var t=Dr(e,2);null!==t&&Rc(t,0,2)}function eo(e){var t=Bs();if("function"==typeof e){var n=e;if(e=n(),xs){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function to(e,t,n,r){return e.baseState=n,Ws(e,ws,"function"==typeof r?r:Hs)}function no(e,t,n,r,s){if(qo(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==j.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ro(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ro(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=j.T,o={};j.T=o;try{var a=n(i,r),l=j.S;null!==l&&l(o,a),io(e,t,a)}catch(n){oo(e,t,n)}finally{j.T=s}}else try{io(e,t,s=n(i,r))}catch(n){oo(e,t,n)}}function io(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){so(e,t,n)},function(n){return oo(e,t,n)}):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,ao(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ro(e,n)))}function oo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ao(t),t=t.next}while(t!==r)}e.action=null}function ao(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lo(e,t){return t}function co(e,t){if(oi){var n=ic.formState;if(null!==n){e:{var r=_s;if(oi){if(si){t:{for(var i=si,s=li;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){si=vd(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=Bs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},n.queue=r,n=Fo.bind(null,_s,r),r.dispatch=n,r=eo(!1),s=$o.bind(null,_s,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Bs()).queue=i,n=no.bind(null,_s,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function uo(e){return ho(Fs(),ws,e)}function ho(e,t,n){if(t=Ws(e,t,lo)[0],e=Vs(Hs)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=zs(t)}catch(e){if(e===Wi)throw Ki;throw e}else r=t;var i=(t=Fs()).queue,s=i.dispatch;return n!==t.memoizedState&&(_s.flags|=2048,mo(9,{destroy:void 0,resource:void 0},po.bind(null,i,n),null)),[r,s,e]}function po(e,t){e.action=t}function fo(e){var t=Fs(),n=ws;if(null!==n)return ho(t,n,e);Fs(),t=t.memoizedState;var r=(n=Fs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function mo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=_s.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return Fs().memoizedState}function yo(e,t,n,r){var i=Bs();r=void 0===r?null:r,_s.flags|=e,i.memoizedState=mo(1|t,{destroy:void 0,resource:void 0},n,r)}function vo(e,t,n,r){var i=Fs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ws&&null!==r&&Is(r,ws.memoizedState.deps)?i.memoizedState=mo(t,s,n,r):(_s.flags|=e,i.memoizedState=mo(1|t,s,n,r))}function bo(e,t){yo(8390656,8,e,t)}function _o(e,t){vo(2048,8,e,t)}function wo(e,t){return vo(4,2,e,t)}function So(e,t){return vo(4,4,e,t)}function ko(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function To(e,t,n){n=null!=n?n.concat([e]):null,vo(4,4,ko.bind(null,t,e),n)}function xo(){}function Eo(e,t){var n=Fs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Is(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Fs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Is(t,r[1]))return r[0];if(r=e(),xs){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Ao(e,t,n){return void 0===n||1073741824&bs?e.memoizedState=t:(e.memoizedState=n,e=Nc(),_s.lanes|=e,fc|=e,n)}function Oo(e,t,n,r){return Xn(n,t)?n:null!==fs.current?(e=Ao(e,n,r),Xn(e,t)||(Aa=!0),e):42&bs?(e=Nc(),_s.lanes|=e,fc|=e,t):(Aa=!0,e.memoizedState=n)}function Mo(e,t,n,r,i){var s=P.p;P.p=0!==s&&8>s?s:8;var o,a,l,c=j.T,u={};j.T=u,$o(e,!1,t,n);try{var d=i(),h=j.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var p=(o=r,a=[],l={status:"pending",value:null,reason:null,then:function(e){a.push(e)}},d.then(function(){l.status="fulfilled",l.value=o;for(var e=0;e<a.length;e++)(0,a[e])(o)},function(e){for(l.status="rejected",l.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),l);zo(e,t,p,Lc())}else zo(e,t,r,Lc())}catch(n){zo(e,t,{then:function(){},status:"rejected",reason:n},Lc())}finally{P.p=s,j.T=c}}function Io(){}function Do(e,t,n,r){if(5!==e.tag)throw Error(i(476));var s=jo(e).queue;Mo(e,s,t,L,null===n?Io:function(){return Po(e),n(r)})}function jo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Po(e){zo(e,jo(e).next.queue,{},Lc())}function Lo(){return Ci(Jd)}function No(){return Fs().memoizedState}function Ro(){return Fs().memoizedState}function Uo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=os(t,e=ss(n),n);return null!==r&&(Rc(r,0,n),as(r,t,n)),t={cache:Pi()},void(e.payload=t)}t=t.return}}function Bo(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qo(e)?Ho(t,n):null!==(n=Ir(e,t,n,r))&&(Rc(n,0,r),Vo(n,t,r))}function Fo(e,t,n){zo(e,t,n,Lc())}function zo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qo(e))Ho(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xn(a,o))return Mr(e,t,i,0),null===ic&&Or(),!1}catch(e){}if(null!==(n=Ir(e,t,i,r)))return Rc(n,0,r),Vo(n,t,r),!0}return!1}function $o(e,t,n,r){if(r={lane:2,revertLane:Du(),action:r,hasEagerState:!1,eagerState:null,next:null},qo(e)){if(t)throw Error(i(479))}else null!==(t=Ir(e,n,r,2))&&Rc(t,0,2)}function qo(e){var t=e.alternate;return e===_s||null!==t&&t===_s}function Ho(e,t){Ts=ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vo(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Wo={readContext:Ci,use:$s,useCallback:Ms,useContext:Ms,useEffect:Ms,useImperativeHandle:Ms,useLayoutEffect:Ms,useInsertionEffect:Ms,useMemo:Ms,useReducer:Ms,useRef:Ms,useState:Ms,useDebugValue:Ms,useDeferredValue:Ms,useTransition:Ms,useSyncExternalStore:Ms,useId:Ms,useHostTransitionStatus:Ms,useFormState:Ms,useActionState:Ms,useOptimistic:Ms,useMemoCache:Ms,useCacheRefresh:Ms},Go={readContext:Ci,use:$s,useCallback:function(e,t){return Bs().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:bo,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,yo(4194308,4,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var n=Bs();t=void 0===t?null:t;var r=e();if(xs){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bs();if(void 0!==n){var i=n(t);if(xs){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Bo.bind(null,_s,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Bs().memoizedState=e},useState:function(e){var t=(e=eo(e)).queue,n=Fo.bind(null,_s,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:xo,useDeferredValue:function(e,t){return Ao(Bs(),e,t)},useTransition:function(){var e=eo(!1);return e=Mo.bind(null,_s,e.queue,!0,!1),Bs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=_s,s=Bs();if(oi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===ic)throw Error(i(349));124&oc||Js(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,bo(Ys.bind(null,r,o,e),[e]),r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Xs.bind(null,r,o,n,t),null),n},useId:function(){var e=Bs(),t=ic.identifierPrefix;if(oi){var n=Zr;t=""+t+"R"+(n=(Qr&~(1<<32-he(Qr)-1)).toString(32)+n),0<(n=Es++)&&(t+="H"+n.toString(32)),t+=""}else t=""+t+"r"+(n=Os++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Lo,useFormState:co,useActionState:co,useOptimistic:function(e){var t=Bs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=$o.bind(null,_s,!0,n),n.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return Bs().memoizedState=Uo.bind(null,_s)}},Ko={readContext:Ci,use:$s,useCallback:Eo,useContext:Ci,useEffect:_o,useImperativeHandle:To,useInsertionEffect:wo,useLayoutEffect:So,useMemo:Co,useReducer:Vs,useRef:go,useState:function(){return Vs(Hs)},useDebugValue:xo,useDeferredValue:function(e,t){return Oo(Fs(),ws.memoizedState,e,t)},useTransition:function(){var e=Vs(Hs)[0],t=Fs().memoizedState;return["boolean"==typeof e?e:zs(e),t]},useSyncExternalStore:Ks,useId:No,useHostTransitionStatus:Lo,useFormState:uo,useActionState:uo,useOptimistic:function(e,t){return to(Fs(),0,e,t)},useMemoCache:qs,useCacheRefresh:Ro},Jo={readContext:Ci,use:$s,useCallback:Eo,useContext:Ci,useEffect:_o,useImperativeHandle:To,useInsertionEffect:wo,useLayoutEffect:So,useMemo:Co,useReducer:Gs,useRef:go,useState:function(){return Gs(Hs)},useDebugValue:xo,useDeferredValue:function(e,t){var n=Fs();return null===ws?Ao(n,e,t):Oo(n,ws.memoizedState,e,t)},useTransition:function(){var e=Gs(Hs)[0],t=Fs().memoizedState;return["boolean"==typeof e?e:zs(e),t]},useSyncExternalStore:Ks,useId:No,useHostTransitionStatus:Lo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=Fs();return null!==ws?to(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qs,useCacheRefresh:Ro},Xo=null,Yo=0;function Qo(e){var t=Yo;return Yo+=1,null===Xo&&(Xo=[]),Qi(Xo,e,t)}function Zo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ea(e,t){if(t.$$typeof===h)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ta(e){return(0,e._init)(e._payload)}function na(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===x&&ta(i)===t.type)?(Zo(t=s(t,n.props),n),t.return=e,t):(Zo(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=$r(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return Zo(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Hr(t,e.mode,n)).return=e,t;case x:return h(e,t=(0,t._init)(t._payload),n)}if(D(t)||O(t))return(t=$r(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return h(e,Qo(t),n);if(t.$$typeof===_)return h(e,Ai(e,t),n);ea(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case f:return n.key===i?u(e,t,n,r):null;case x:return g(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||O(n))return null!==i?null:d(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,Qo(n),r);if(n.$$typeof===_)return g(e,t,Ai(e,n),r);ea(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case f:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return y(e,t,n,Qo(r),i);if(r.$$typeof===_)return y(e,t,n,Ai(t,r),i);ea(t,r)}return null}function v(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===m){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===x&&ta(b)===c.type){n(l,c.sibling),Zo(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===m?((d=$r(u.props.children,l.mode,d,u.key)).return=l,l=d):(Zo(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case f:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Hr(u,l.mode,d)).return=l,l=d}return a(l);case x:return v(l,c,u=(b=u._init)(u._payload),d)}if(D(u))return function(i,s,a,l){for(var c=null,u=null,d=s,p=s=0,f=null;null!==d&&p<a.length;p++){d.index>p?(f=d,d=null):f=d.sibling;var m=g(i,d,a[p],l);if(null===m){null===d&&(d=f);break}e&&d&&null===m.alternate&&t(i,d),s=o(m,s,p),null===u?c=m:u.sibling=m,u=m,d=f}if(p===a.length)return n(i,d),oi&&ei(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(s=o(d,s,p),null===u?c=d:u.sibling=d,u=d);return oi&&ei(i,p),c}for(d=r(d);p<a.length;p++)null!==(f=y(d,i,p,a[p],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?p:f.key),s=o(f,s,p),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach(function(e){return t(i,e)}),oi&&ei(i,p),c}(l,c,u,d);if(O(u)){if("function"!=typeof(b=O(u)))throw Error(i(150));return function(s,a,l,c){if(null==l)throw Error(i(151));for(var u=null,d=null,p=a,f=a=0,m=null,v=l.next();null!==p&&!v.done;f++,v=l.next()){p.index>f?(m=p,p=null):m=p.sibling;var b=g(s,p,v.value,c);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(s,p),a=o(b,a,f),null===d?u=b:d.sibling=b,d=b,p=m}if(v.done)return n(s,p),oi&&ei(s,f),u;if(null===p){for(;!v.done;f++,v=l.next())null!==(v=h(s,v.value,c))&&(a=o(v,a,f),null===d?u=v:d.sibling=v,d=v);return oi&&ei(s,f),u}for(p=r(p);!v.done;f++,v=l.next())null!==(v=y(p,s,f,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?f:v.key),a=o(v,a,f),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),oi&&ei(s,f),u}(l,c,u=b.call(u),d)}if("function"==typeof u.then)return v(l,c,Qo(u),d);if(u.$$typeof===_)return v(l,c,Ai(l,u),d);ea(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=qr(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{Yo=0;var i=v(e,t,n,r);return Xo=null,i}catch(t){if(t===Wi||t===Ki)throw t;var s=Rr(29,t,null,e.mode);return s.lanes=r,s.return=e,s}}}var ra=na(!0),ia=na(!1),sa=U(null),oa=null;function aa(e){var t=e.alternate;F(da,1&da.current),F(sa,e),null===oa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(oa=e)}function la(e){if(22===e.tag){if(F(da,da.current),F(sa,e),null===oa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(oa=e)}}else ca()}function ca(){F(da,da.current),F(sa,sa.current)}function ua(e){B(sa),oa===e&&(oa=null),B(da)}var da=U(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function pa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=ss(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=os(e,i,r))&&(Rc(t,0,r),as(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=ss(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=os(e,i,r))&&(Rc(t,0,r),as(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=ss(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=os(e,r,n))&&(Rc(t,0,n),as(t,e,n))}};function ma(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&Yn(n,r)&&Yn(i,s))}function ga(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ya(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var va="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ba(e){va(e)}function _a(e){console.error(e)}function wa(e){va(e)}function Sa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Ta(e,t,n){return(n=ss(n)).tag=3,n.payload={element:null},n.callback=function(){Sa(e,t)},n}function xa(e){return(e=ss(e)).tag=3,e}function Ea(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){ka(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,r),"function"!=typeof i&&(null===xc?xc=new Set([this]):xc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(i(461)),Aa=!1;function Oa(e,t,n,r){t.child=null===e?ia(t,null,n,r):ra(t,e.child,n,r)}function Ma(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ei(t),r=Ds(e,t,n,o,s,i),a=Ns(),null===e||Aa?(oi&&a&&ni(t),t.flags|=1,Oa(e,t,r,i),t.child):(Rs(e,t,i),Xa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Ur(s)||void 0!==s.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Da(e,t,s,r,i))}if(s=e.child,!Ya(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(o,r)&&e.ref===t.ref)return Xa(e,t,i)}return t.flags|=1,(e=Br(s,r)).ref=t.ref,e.return=t,t.child=e}function Da(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Yn(s,r)&&e.ref===t.ref){if(Aa=!1,t.pendingProps=r=s,!Ya(e,i))return t.lanes=e.lanes,Xa(e,t,i);131072&e.flags&&(Aa=!0)}}return Na(e,t,n,r,i)}function ja(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Pa(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Pa(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hi(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ys(),la(t)}else null!==s?(Hi(0,s.cachePool),gs(t,s),ca(),t.memoizedState=null):(null!==e&&Hi(0,null),ys(),ca());return Oa(e,t,i,n),t.child}function Pa(e,t,n,r){var i=qi();return i=null===i?null:{parent:ji._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Hi(0,null),ys(),la(t),null!==e&&Ti(e,t,r,!0),null}function La(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Na(e,t,n,r,i){return Ei(t),n=Ds(e,t,n,r,void 0,i),r=Ns(),null===e||Aa?(oi&&r&&ni(t),t.flags|=1,Oa(e,t,n,i),t.child):(Rs(e,t,i),Xa(e,t,i))}function Ra(e,t,n,r,i,s){return Ei(t),t.updateQueue=null,n=Ps(t,r,n,i),js(e),r=Ns(),null===e||Aa?(oi&&r&&ni(t),t.flags|=1,Oa(e,t,n,s),t.child):(Rs(e,t,s),Xa(e,t,s))}function Ua(e,t,n,r,i){if(Ei(t),null===t.stateNode){var s=Lr,o=n.contextType;"object"==typeof o&&null!==o&&(s=Ci(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},rs(t),o=n.contextType,s.context="object"==typeof o&&null!==o?Ci(o):Lr,s.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(pa(t,n,o,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(o=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),ds(t,r,s,i),us(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ya(n,a);s.props=l;var c=s.context,u=n.contextType;o=Lr,"object"==typeof u&&null!==u&&(o=Ci(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a||c!==o)&&ga(t,s,r,o),ns=!1;var h=t.memoizedState;s.state=h,ds(t,r,s,i),us(),c=t.memoizedState,a||h!==c||ns?("function"==typeof d&&(pa(t,n,d,r),c=t.memoizedState),(l=ns||ma(t,n,l,r,h,c,o))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,is(e,t),u=ya(n,o=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Lr,"object"==typeof c&&null!==c&&(l=Ci(c)),(c="function"==typeof(a=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ga(t,s,r,l),ns=!1,h=t.memoizedState,s.state=h,ds(t,r,s,i),us();var p=t.memoizedState;o!==d||h!==p||ns||null!==e&&null!==e.dependencies&&xi(e.dependencies)?("function"==typeof a&&(pa(t,n,a,r),p=t.memoizedState),(u=ns||ma(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&xi(e.dependencies))?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,La(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ra(t,e.child,null,i),t.child=ra(t,null,n,i)):Oa(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Xa(e,t,i),e}function Ba(e,t,n,r){return fi(),t.flags|=256,Oa(e,t,n,r),t.child}var Fa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function za(e){return{baseLanes:e,cachePool:Vi()}}function $a(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yc),e}function qa(e,t,n){var r,s=t.pendingProps,o=!1,a=!!(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&!!(2&da.current)),r&&(o=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?aa(t):ca(),oi){var l,c=si;if(l=c){e:{for(l=c,c=li;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Qr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},(l=Rr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ii=t,si=null,l=!0):l=!1}l||ui(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yd(c)?t.lanes=32:t.lanes=536870912,null;ua(t)}return c=s.children,s=s.fallback,o?(ca(),c=Va({mode:"hidden",children:c},o=t.mode),s=$r(s,o,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(o=t.child).memoizedState=za(n),o.childLanes=$a(e,r,n),t.memoizedState=Fa,s):(aa(t),Ha(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(aa(t),t.flags&=-257,t=Wa(e,t,n)):null!==t.memoizedState?(ca(),t.child=e.child,t.flags|=128,t=null):(ca(),o=s.fallback,c=t.mode,s=Va({mode:"visible",children:s.children},c),(o=$r(o,c,n,null)).flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,ra(t,e.child,null,n),(s=t.child).memoizedState=za(n),s.childLanes=$a(e,r,n),t.memoizedState=Fa,t=o);else if(aa(t),yd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(i(419))).stack="",s.digest=r,gi({value:s,source:null,stack:null}),t=Wa(e,t,n)}else if(Aa||Ti(e,t,n,!1),r=0!==(n&e.childLanes),Aa||r){if(null!==(r=ic)&&0!==(s=0!==((s=42&(s=n&-n)?1:Ce(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane)throw l.retryLane=s,Dr(e,s),Rc(r,0,s),Ca;"$?"===c.data||Kc(),t=Wa(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,si=vd(c.nextSibling),ii=t,oi=!0,ai=null,li=!1,null!==e&&(Jr[Xr++]=Qr,Jr[Xr++]=Zr,Jr[Xr++]=Yr,Qr=e.id,Zr=e.overflow,Yr=t),(t=Ha(t,s.children)).flags|=4096);return t}return o?(ca(),o=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Br(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Br(u,o):(o=$r(o,c,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,null===(c=e.child.memoizedState)?c=za(n):(null!==(l=c.cachePool)?(u=ji._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Vi(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=$a(e,r,n),t.memoizedState=Fa,s):(aa(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ha(e,t){return(t=Va({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Va(e,t){return(e=Rr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wa(e,t,n){return ra(t,e.child,null,n),(e=Ha(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Ka(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ja(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Oa(e,t,r.children,n),2&(r=da.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(F(da,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,s);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ti(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!xi(e))}function Qa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Aa=!0;else{if(!(Ya(e,n)||128&t.flags))return Aa=!1,function(e,t,n){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),_i(0,ji,e.memoizedState.cache),fi();break;case 27:case 5:G(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:_i(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(aa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qa(e,t,n):(aa(t),null!==(e=Xa(e,t,n))?e.sibling:null);aa(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Ti(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ja(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),F(da,da.current),r)break;return null;case 22:case 23:return t.lanes=0,ja(e,t,n);case 24:_i(0,ji,e.memoizedState.cache)}return Xa(e,t,n)}(e,t,n);Aa=!!(131072&e.flags)}else Aa=!1,oi&&1048576&t.flags&&ti(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((s=r.$$typeof)===w){t.tag=11,t=Ma(null,t,r,e,n);break e}if(s===T){t.tag=14,t=Ia(null,t,r,e,n);break e}}throw t=I(r)||r,Error(i(306,t,""))}Ur(r)?(e=ya(r,e),t.tag=1,t=Ua(null,t,r,e,n)):(t.tag=0,t=Na(null,t,r,e,n))}return t;case 0:return Na(e,t,t.type,t.pendingProps,n);case 1:return Ua(e,t,r=t.type,s=ya(r,t.pendingProps),n);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;s=o.element,is(e,t),ds(t,r,null,n);var a=t.memoizedState;if(r=a.cache,_i(0,ji,r),r!==o.cache&&ki(t,[ji],n,!0),us(),r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ba(e,t,r,n);break e}if(r!==s){gi(s=xr(Error(i(424)),t)),t=Ba(e,t,r,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,si=vd(e.firstChild),ii=t,oi=!0,ai=null,li=!0,n=ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Xa(e,t,n);break e}Oa(e,t,r,n)}t=t.child}return t;case 26:return La(e,t),null===e?(n=Od(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=id(q.current).createElement(n))[Ie]=t,r[De]=e,td(r,n,e),We(r),t.stateNode=r):t.memoizedState=Od(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&oi&&(r=t.stateNode=wd(t.type,t.pendingProps,q.current),ii=t,li=!0,s=si,fd(t.type)?(bd=s,si=vd(r.firstChild)):si=s),Oa(e,t,t.pendingProps.children,n),La(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((s=r=si)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,li))?(t.stateNode=r,ii=t,si=vd(r.firstChild),li=!1,s=!0):s=!1),s||ui(t)),G(t),s=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,ad(s,o)?r=null:null!==a&&ad(s,a)&&(t.flags|=32),null!==t.memoizedState&&(s=Ds(e,t,Ls,null,null,n),Jd._currentValue=s),La(e,t),Oa(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=si)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,li))?(t.stateNode=n,ii=t,si=null,e=!0):e=!1),e||ui(t)),null;case 13:return qa(e,t,n);case 4:return V(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ra(t,null,r,n):Oa(e,t,r,n),t.child;case 11:return Ma(e,t,t.type,t.pendingProps,n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_i(0,t.type,r.value),Oa(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ei(t),r=r(s=Ci(s)),t.flags|=1,Oa(e,t,r,n),t.child;case 14:return Ia(e,t,t.type,t.pendingProps,n);case 15:return Da(e,t,t.type,t.pendingProps,n);case 19:return Ja(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Va(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Br(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ja(e,t,n);case 24:return Ei(t),r=Ci(ji),null===e?(null===(s=qi())&&(s=ic,o=Pi(),s.pooledCache=o,o.refCount++,null!==o&&(s.pooledCacheLanes|=n),s=o),t.memoizedState={parent:r,cache:s},rs(t),_i(0,ji,s)):(0!==(e.lanes&n)&&(is(e,t),ds(t,null,null,n),us()),s=e.memoizedState,o=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),_i(0,ji,r)):(r=o.cache,_i(0,ji,r),r!==s.cache&&ki(t,[ji],n,!0))),Oa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Za(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!$d(t)){if(null!==(t=sa.current)&&((4194048&oc)===oc?null!==oa:(62914560&oc)!==oc&&!(536870912&oc)||t!==oa))throw Zi=Ji,Gi;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,vc|=t)}function nl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(ji),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(pi(t)?Za(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,mi())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Za(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Za(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Za(t),rl(t),t.flags&=-16777217),null;case 27:K(t),n=q.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return rl(t),null}e=z.current,pi(t)?di(t):(e=wd(s,r,n),t.stateNode=e,Za(t))}return rl(t),null;case 5:if(K(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return rl(t),null}if(e=z.current,pi(t))di(t);else{switch(s=id(q.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Ie]=t,e[De]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Za(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=q.current,pi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=ii))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||ui(t)}else(e=id(e).createTextNode(r))[Ie]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=pi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[Ie]=t}else fi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),s=!1}else s=mi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(ua(t),t):(ua(t),null)}if(ua(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return W(),null===e&&zu(t.stateNode.containerInfo),rl(t),null;case 10:return wi(t.type),rl(t),null;case 19:if(B(da),null===(s=t.memoizedState))return rl(t),null;if(r=!!(128&t.flags),null===(o=s.rendering))if(r)nl(s,!1);else{if(0!==pc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=ha(e))){for(t.flags|=128,nl(s,!1),e=o.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return F(da,1&da.current|2),t.child}e=e.sibling}null!==s.tail&&ee()>kc&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!oi)return rl(t),null}else 2*ee()-s.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=s.last)?e.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ee(),t.sibling=null,e=da.current,F(da,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return ua(t),vs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B($i),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(ji),rl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function sl(e,t){switch(ri(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(ji),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 13:if(ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(da),null;case 4:return W(),null;case 10:return wi(t.type),null;case 22:case 23:return ua(t),vs(),null!==e&&B($i),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(ji),null;default:return null}}function ol(e,t){switch(ri(t),t.tag){case 3:wi(ji),W();break;case 26:case 27:case 5:K(t);break;case 4:W();break;case 13:ua(t);break;case 19:B(da);break;case 10:wi(t.type);break;case 22:case 23:ua(t),vs(),null!==e&&B($i);break;case 24:wi(ji)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){du(t,t.return,e)}}function ll(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(e){du(i,l,e)}}}r=r.next}while(r!==s)}}catch(e){du(t,t.return,e)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ps(t,n)}catch(t){du(e,e.return,t)}}}function ul(e,t,n){n.props=ya(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){du(e,t,n)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){du(e,t,n)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){du(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){du(e,t,n)}else n.current=null}function pl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){du(e,e.return,t)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,o=null,a=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||Zu(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":o=f;break;case"name":s=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":a=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:f!==h&&Zu(e,t,p,f,r,h)}}return void yt(e,a,l,c,u,d,o,s);case"select":for(o in f=a=l=p=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(o)||Zu(e,t,o,null,r,c)}for(s in r)if(o=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=o||null!=c))switch(s){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==c&&Zu(e,t,s,o,r,c)}return t=l,n=a,r=f,void(null!=p?_t(e,!!n,p,!1):!!r!=!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,s)}for(a in r)if(s=r[a],o=n[a],r.hasOwnProperty(a)&&(null!=s||null!=o))switch(a){case"value":p=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:s!==o&&Zu(e,t,a,s,r,o)}return void wt(e,p,f);case"option":for(var m in n)p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m)&&("selected"===m?e.selected=!1:Zu(e,t,m,null,r,p));for(c in r)p=r[c],f=n[c],!r.hasOwnProperty(c)||p===f||null==p&&null==f||("selected"===c?e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p:Zu(e,t,c,p,r,f));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Zu(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:Zu(e,t,u,p,r,f)}return;default:if(Ct(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&ed(e,t,y,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||ed(e,t,d,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&Zu(e,t,v,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||Zu(e,t,h,p,r,f)}(r,e.type,n,t),r[De]=t}catch(t){du(e,e.return,t)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Qu));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);td(t,r,n),t[Ie]=e,t[De]=n}catch(t){du(e,e.return,t)}}var _l=!1,wl=!1,Sl=!1,kl="function"==typeof WeakSet?WeakSet:Set,Tl=null;function xl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ul(e,n),4&r&&al(5,n);break;case 1:if(Ul(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){du(n,n.return,e)}else{var i=ya(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){du(n,n.return,e)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Ul(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ps(e,t)}catch(e){du(n,n.return,e)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Ul(e,n),null===t&&4&r&&pl(n),512&r&&dl(n,n.return);break;case 12:Ul(e,n);break;case 13:Ul(e,n),4&r&&Il(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||wl,i=_l;var s=wl;_l=r,(wl=t)&&!s?Fl(e,n,!!(8772&n.subtreeFlags)):Ul(e,n),_l=i,wl=s}break;case 30:break;default:Ul(e,n)}}function El(e){var t=e.alternate;null!==t&&(e.alternate=null,El(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&ze(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Al=!1;function Ol(e,t,n){for(n=n.child;null!==n;)Ml(e,t,n),n=n.sibling}function Ml(e,t,n){if(ue&&"function"==typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(ce,n)}catch(e){}switch(n.tag){case 26:wl||hl(n,t),Ol(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||hl(n,t);var r=Cl,i=Al;fd(n.type)&&(Cl=n.stateNode,Al=!1),Ol(e,t,n),Sd(n.stateNode),Cl=r,Al=i;break;case 5:wl||hl(n,t);case 6:if(r=Cl,i=Al,Cl=null,Ol(e,t,n),Al=i,null!==(Cl=r))if(Al)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(e){du(n,t,e)}else try{Cl.removeChild(n.stateNode)}catch(e){du(n,t,e)}break;case 18:null!==Cl&&(Al?(md(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ah(e)):md(Cl,n.stateNode));break;case 4:r=Cl,i=Al,Cl=n.stateNode.containerInfo,Al=!0,Ol(e,t,n),Cl=r,Al=i;break;case 0:case 11:case 14:case 15:wl||ll(2,n,t),wl||ll(4,n,t),Ol(e,t,n);break;case 1:wl||(hl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Ol(e,t,n);break;case 21:Ol(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Ol(e,t,n),wl=r;break;default:Ol(e,t,n)}}function Il(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Ah(e)}catch(e){du(t,t.return,e)}}function Dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function jl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Cl=l.stateNode,Al=!1;break e}break;case 5:Cl=l.stateNode,Al=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===Cl)throw Error(i(160));Ml(o,a,s),Cl=null,Al=!1,null!==(o=s.alternate)&&(o.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Pl=null;function Ll(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jl(t,e),Nl(e),4&r&&(ll(3,e,e.return),al(3,e),ll(5,e,e.return));break;case 1:jl(t,e),Nl(e),512&r&&(wl||null===n||hl(n,n.return)),64&r&&_l&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var s=Pl;if(jl(t,e),Nl(e),512&r&&(wl||null===n||hl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(o=s.getElementsByTagName("title")[0])||o[Fe]||o[Ie]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=s.createElement(r),s.head.insertBefore(o,s.querySelector("head > title"))),td(o,r,n),o[Ie]=e,We(o),r=o;break e;case"link":var a=Fd("link","href",s).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}td(o=s.createElement(r),r,n),s.head.appendChild(o);break;case"meta":if(a=Fd("meta","content",s).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}td(o=s.createElement(r),r,n),s.head.appendChild(o);break;default:throw Error(i(468,r))}o[Ie]=e,We(o),r=o}e.stateNode=r}else zd(s,e.type,e.stateNode);else e.stateNode=Ld(s,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?zd(s,e.type,e.stateNode):Ld(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:jl(t,e),Nl(e),512&r&&(wl||null===n||hl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(jl(t,e),Nl(e),512&r&&(wl||null===n||hl(n,n.return)),32&e.flags){s=e.stateNode;try{kt(s,"")}catch(t){du(e,e.return,t)}}4&r&&null!=e.stateNode&&fl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(Sl=!0);break;case 6:if(jl(t,e),Nl(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){du(e,e.return,t)}}break;case 3:if(Bd=null,s=Pl,Pl=xd(t.containerInfo),jl(t,e),Pl=s,Nl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ah(t.containerInfo)}catch(t){du(e,e.return,t)}Sl&&(Sl=!1,Rl(e));break;case 4:r=Pl,Pl=xd(e.stateNode.containerInfo),jl(t,e),Nl(e),Pl=r;break;case 12:default:jl(t,e),Nl(e);break;case 13:jl(t,e),Nl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Sc=ee()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,Dl(e,r));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,d=wl;if(_l=u||s,wl=d||c,jl(t,e),wl=d,_l=u,Nl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||_l||wl||Bl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,s)"function"==typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(e){du(c,c.return,e)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(e){du(c,c.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,Dl(e,n));break;case 19:jl(t,e),Nl(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,Dl(e,r));case 30:case 21:}}function Nl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var s=n.stateNode;vl(e,gl(e),s);break;case 5:var o=n.stateNode;32&n.flags&&(kt(o,""),n.flags&=-33),vl(e,gl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(i(161))}}catch(t){du(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Rl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Rl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ul(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)xl(e,t.alternate,t),t=t.sibling}function Bl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Bl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&ul(t,t.return,n),Bl(t);break;case 27:Sd(t.stateNode);case 26:case 5:hl(t,t.return),Bl(t);break;case 22:null===t.memoizedState&&Bl(t);break;default:Bl(t)}e=e.sibling}}function Fl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Fl(i,s,n),al(4,s);break;case 1:if(Fl(i,s,n),"function"==typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){du(r,r.return,e)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],a)}catch(e){du(r,r.return,e)}}n&&64&o&&cl(s),dl(s,s.return);break;case 27:bl(s);case 26:case 5:Fl(i,s,n),n&&null===r&&4&o&&pl(s),dl(s,s.return);break;case 12:Fl(i,s,n);break;case 13:Fl(i,s,n),n&&4&o&&Il(i,s);break;case 22:null===s.memoizedState&&Fl(i,s,n),dl(s,s.return);break;case 30:break;default:Fl(i,s,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Li(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"==typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){du(t,t.return,e)}}else ql(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,n,r):Wl(e,t):2&s._visibility?ql(e,t,n,r):(s._visibility|=2,Vl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&i&&zl(o,t);break;case 24:ql(e,t,n,r),2048&i&&$l(t.alternate,t)}}function Vl(e,t,n,r,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Vl(s,o,a,l,i),al(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Vl(s,o,a,l,i):Wl(s,o):(u._visibility|=2,Vl(s,o,a,l,i)),i&&2048&c&&zl(o.alternate,o);break;case 24:Vl(s,o,a,l,i),i&&2048&c&&$l(o.alternate,o);break;default:Vl(s,o,a,l,i)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Wl(n,r),2048&i&&zl(r.alternate,r);break;case 24:Wl(n,r),2048&i&&$l(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Gl=8192;function Kl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 26:Kl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(i(475));var r=qd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var s=Md(n.href),o=e.querySelector(Id(s));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=Vd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void We(o);o=e.ownerDocument||e,n=Dd(n),(s=kd.get(s))&&Rd(n,s),We(o=o.createElement("link"));var a=o;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=Vd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Pl,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Pl;Pl=xd(e.stateNode.containerInfo),Kl(e),Pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Kl(e),Gl=t):Kl(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Tl=r,ec(r,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Yl(e)}}function Zl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Tl=r,ec(r,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==Tl;){var n=Tl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Li(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Tl=r;else e:for(n=e;null!==Tl;){var i=(r=Tl).sibling,s=r.return;if(El(r),r===n){Tl=null;break e}if(null!==i){i.return=s,Tl=i;break e}Tl=s}}}var tc={getCacheForType:function(e){var t=Ci(ji),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"==typeof WeakMap?WeakMap:Map,rc=0,ic=null,sc=null,oc=0,ac=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,pc=0,fc=0,mc=0,gc=0,yc=0,vc=0,bc=null,_c=null,wc=!1,Sc=0,kc=1/0,Tc=null,xc=null,Ec=0,Cc=null,Ac=null,Oc=0,Mc=0,Ic=null,Dc=null,jc=0,Pc=null;function Lc(){return 2&rc&&0!==oc?oc&-oc:null!==j.T?0!==Ui?Ui:Du():Oe()}function Nc(){0===yc&&(yc=536870912&oc&&!oi?536870912:we());var e=sa.current;return null!==e&&(e.flags|=32),yc}function Rc(e,t,n){(e!==ic||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,oc,yc,!1)),Te(e,n),2&rc&&e===ic||(e===ic&&(!(2&rc)&&(mc|=n),4===pc&&zc(e,oc,yc,!1)),xu(e))}function Uc(e,t,n){if(6&rc)throw Error(i(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||be(e,t),s=r?function(e,t){var n=rc;rc|=2;var r=Wc(),s=Gc();ic!==e||oc!==t?(Tc=null,kc=ee()+500,Hc(e,t)):uc=be(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var o=lc;t:switch(ac){case 1:ac=0,lc=null,eu(e,t,o,1);break;case 2:case 9:if(Xi(o)){ac=0,lc=null,Zc(t);break}t=function(){2!==ac&&9!==ac||ic!==e||(ac=7),xu(e)},o.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Xi(o)?(ac=0,lc=null,Zc(t)):(ac=0,lc=null,eu(e,t,o,7));break;case 5:var a=null;switch(sc.tag){case 26:a=sc.memoizedState;case 5:case 27:var l=sc;if(!a||$d(a)){ac=0,lc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,tu(u)):sc=null}break t}}ac=0,lc=null,eu(e,t,o,5);break;case 6:ac=0,lc=null,eu(e,t,o,6);break;case 8:qc(),pc=6;break e;default:throw Error(i(462))}}Yc();break}catch(t){Vc(e,t)}return bi=vi=null,j.H=r,j.A=s,rc=n,null!==sc?0:(ic=null,oc=0,Or(),pc)}(e,t):Jc(e,t,!0),o=r;;){if(0===s){uc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!o||Fc(n)){if(2===s){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!=(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;s=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,a).flags|=256),2!==(a=Jc(l,a,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=o,mc|=o,s=4;break e}o=_c,_c=s,null!==o&&(null===_c?_c=o:_c.push.apply(_c,o))}s=a}if(o=!1,2!==s)continue}}if(1===s){Hc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,o=s){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,yc,!cc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(s=Sc+300-ee())){if(zc(r,t,yc,!cc),0!==ve(r,0,!0))break e;r.timeoutHandle=cd(Bc.bind(null,r,n,_c,Tc,wc,t,yc,mc,vc,cc,o,2,-0,0),s)}else Bc(r,n,_c,Tc,wc,t,yc,mc,vc,cc,o,0,-0,0)}break}s=Jc(e,t,!1),o=!1}xu(e)}function Bc(e,t,n,r,s,o,a,l,c,u,d,h,p,f){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&(qd={stylesheets:null,count:0,unsuspend:Hd},Jl(t),null!==(h=function(){if(null===qd)throw Error(i(475));var e=qd;return e.stylesheets&&0===e.count&&Gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,o,n,r,s,a,l,c,d,1,p,f)),void zc(e,o,a,!u);ru(e,t,o,n,r,s,a,l,c)}function Fc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-he(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&xe(e,n,t)}function $c(){return!!(6&rc)||(Eu(0,!1),!1)}function qc(){if(null!==sc){if(0===ac)var e=sc.return;else bi=vi=null,Us(e=sc),Xo=null,Yo=0,e=sc;for(;null!==e;)ol(e.alternate,e),e=e.return;sc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),ic=e,sc=n=Br(e.current,null),oc=t,ac=0,lc=null,cc=!1,uc=be(e,t),dc=!1,vc=yc=gc=mc=fc=pc=0,_c=bc=null,wc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-he(r),s=1<<i;t|=e[i],r&=~s}return hc=t,Or(),n}function Vc(e,t){_s=null,j.H=Wo,t===Wi||t===Ki?(t=es(),ac=3):t===Gi?(t=es(),ac=4):ac=t===Ca?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,lc=t,null===sc&&(pc=1,Sa(e,xr(t,e.current)))}function Wc(){var e=j.H;return j.H=Wo,null===e?Wo:e}function Gc(){var e=j.A;return j.A=tc,e}function Kc(){pc=4,cc||(4194048&oc)!==oc&&null!==sa.current||(uc=!0),!(134217727&fc)&&!(134217727&mc)||null===ic||zc(ic,oc,yc,!1)}function Jc(e,t,n){var r=rc;rc|=2;var i=Wc(),s=Gc();ic===e&&oc===t||(Tc=null,Hc(e,t)),t=!1;var o=pc;e:for(;;)try{if(0!==ac&&null!==sc){var a=sc,l=lc;switch(ac){case 8:qc(),o=6;break e;case 3:case 2:case 9:case 6:null===sa.current&&(t=!0);var c=ac;if(ac=0,lc=null,eu(e,a,l,c),n&&uc){o=0;break e}break;default:c=ac,ac=0,lc=null,eu(e,a,l,c)}}Xc(),o=pc;break}catch(t){Vc(e,t)}return t&&e.shellSuspendCounter++,bi=vi=null,rc=r,j.H=i,j.A=s,null===sc&&(ic=null,oc=0,Or()),o}function Xc(){for(;null!==sc;)Qc(sc)}function Yc(){for(;null!==sc&&!Q();)Qc(sc)}function Qc(e){var t=Qa(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ra(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Ra(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Us(t);default:ol(n,t),t=Qa(n,t=sc=Fr(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function eu(e,t,n,r){bi=vi=null,Us(t),Xo=null,Yo=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Ti(t,n,s,!0),null!==(n=sa.current)){switch(n.tag){case 13:return null===oa?Kc():null===n.alternate&&0===pc&&(pc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Ji?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,s)),!1;case 22:return n.flags|=65536,r===Ji?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,s)),!1}throw Error(i(435,n.tag))}return hu(e,r,s),Kc(),!1}if(oi)return null!==(t=sa.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ci&&gi(xr(e=Error(i(422),{cause:r}),n))):(r!==ci&&gi(xr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=xr(r,n),ls(e,s=Ta(e.stateNode,r,s)),4!==pc&&(pc=2)),!1;var o=Error(i(520),{cause:r});if(o=xr(o,n),null===bc?bc=[o]:bc.push(o),4!==pc&&(pc=2),null===t)return!0;r=xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ls(n,e=Ta(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==xc&&xc.has(o))))return n.flags|=65536,s&=-s,n.lanes|=s,Ea(s=xa(s),e,n,r),ls(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,oc))return pc=1,Sa(e,xr(n,e.current)),void(sc=null)}catch(t){if(null!==s)throw sc=s,t;return pc=1,Sa(e,xr(n,e.current)),void(sc=null)}32768&t.flags?(oi||1===r?e=!0:uc||536870912&oc?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&null!==(r=sa.current)&&13===r.tag&&(r.flags|=16384)),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(32768&t.flags)return void nu(t,cc);e=t.return;var n=il(t.alternate,t,hc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===pc&&(pc=5)}function nu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);pc=6,sc=null}function ru(e,t,n,r,s,o,a,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==Ec);if(6&rc)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-he(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&xe(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,o|=Ar,a,l,c),e===ic&&(sc=ic=null,oc=0),Ac=t,Cc=e,Oc=n,Mc=o,Ic=s,Dc=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,X(ie,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=j.T,j.T=null,s=P.p,P.p=2,a=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,nr(e=tr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=a+s),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=a),p===o&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,Tl=t;null!==Tl;)if(e=(t=Tl).child,1024&t.subtreeFlags&&null!==e)e.return=t,Tl=e;else for(;null!==Tl;){switch(o=(t=Tl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,n=t,s=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=ya(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){du(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Tl=e;break}Tl=t.return}}(e,t)}finally{rc=a,P.p=s,j.T=r}}Ec=1,iu(),su(),ou()}}function iu(){if(1===Ec){Ec=0;var e=Cc,t=Ac,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=j.T,j.T=null;var r=P.p;P.p=2;var i=rc;rc|=4;try{Ll(t,e);var s=rd,o=tr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&er(a.ownerDocument.documentElement,a)){if(null!==l&&nr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=a.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var y=Zn(a,m),v=Zn(a,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=a;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof a.focus&&a.focus(),a=0;a<d.length;a++){var _=d[a];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}rh=!!nd,rd=nd=null}finally{rc=i,P.p=r,j.T=n}}e.current=t,Ec=2}}function su(){if(2===Ec){Ec=0;var e=Cc,t=Ac,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=j.T,j.T=null;var r=P.p;P.p=2;var i=rc;rc|=4;try{xl(e,t.alternate,t)}finally{rc=i,P.p=r,j.T=n}}Ec=3}}function ou(){if(4===Ec||3===Ec){Ec=0,Z();var e=Cc,t=Ac,n=Oc,r=Dc;10256&t.subtreeFlags||10256&t.flags?Ec=5:(Ec=0,Ac=Cc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(xc=null),Ae(n),t=t.stateNode,ue&&"function"==typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=j.T,i=P.p,P.p=2,j.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{j.T=t,P.p=i}}3&Oc&&lu(),xu(e),i=e.pendingLanes,4194090&n&&42&i?e===Pc?jc++:(jc=0,Pc=e):jc=0,Eu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Li(t))}function lu(e){return iu(),su(),ou(),cu()}function cu(){if(5!==Ec)return!1;var e=Cc,t=Mc;Mc=0;var n=Ae(Oc),r=j.T,s=P.p;try{P.p=32>n?32:n,j.T=null,n=Ic,Ic=null;var o=Cc,a=Oc;if(Ec=0,Ac=Cc=null,Oc=0,6&rc)throw Error(i(331));var l=rc;if(rc|=4,Ql(o.current),Hl(o,o.current,a,n),rc=l,Eu(0,!1),ue&&"function"==typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(ce,o)}catch(e){}return!0}finally{P.p=s,j.T=r,au(e,t)}}function uu(e,t,n){t=xr(n,t),null!==(e=os(e,t=Ta(e.stateNode,t,2),2))&&(Te(e,2),xu(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===xc||!xc.has(r))){e=xr(n,e),null!==(r=os(t,n=xa(2),2))&&(Ea(n,r,t,e),Te(r,2),xu(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(dc=!0,i.add(n),e=pu.bind(null,e,t,n),t.then(e,e))}function pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(oc&n)===n&&(4===pc||3===pc&&(62914560&oc)===oc&&300>ee()-Sc?!(2&rc)&&Hc(e,0):gc|=n,vc===oc&&(vc=0)),xu(e)}function fu(e,t){0===t&&(t=Se()),null!==(e=Dr(e,t))&&(Te(e,t),xu(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),fu(e,n)}var yu,vu,bu=null,_u=null,wu=!1,Su=!1,ku=!1,Tu=0;function xu(e){e!==_u&&null===e.next&&(null===_u?bu=_u=e:_u=_u.next=e),Su=!0,wu||(wu=!0,hd(function(){6&rc?X(ne,Cu):Au()}))}function Eu(e,t){if(!ku&&Su){ku=!0;do{for(var n=!1,r=bu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-he(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Iu(r,s))}else s=oc,!(3&(s=ve(r,r===ic?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,s)||(n=!0,Iu(r,s));r=r.next}}while(n);ku=!1}}function Cu(){Au()}function Au(){Su=wu=!1;var e,t=0;0!==Tu&&(((e=window.event)&&"popstate"===e.type?e!==ld&&(ld=e,!0):(ld=null,!1))&&(t=Tu),Tu=0);for(var n=ee(),r=null,i=bu;null!==i;){var s=i.next,o=Ou(i,n);0===o?(i.next=null,null===r?bu=s:r.next=s,null===s&&(_u=r)):(r=i,(0!==t||3&o)&&(Su=!0)),i=s}Eu(t,!1)}function Ou(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-he(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=_e(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=oc,n=ve(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Y(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Y(r),Ae(n)){case 2:case 8:n=re;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=Mu.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Y(r),e.callbackPriority=2,e.callbackNode=null,2}function Mu(e,t){if(0!==Ec&&5!==Ec)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=ve(e,e===ic?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Uc(e,r,t),Ou(e,ee()),null!=e.callbackNode&&e.callbackNode===n?Mu.bind(null,e):null)}function Iu(e,t){if(lu())return null;Uc(e,t,!0)}function Du(){return 0===Tu&&(Tu=we()),Tu}function ju(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Mt(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(vu=0;vu<Sr.length;vu++)kr((yu=Sr[vu]).toLowerCase(),"on"+(yu[0].toUpperCase()+yu.slice(1)));kr(fr,"onAnimationEnd"),kr(mr,"onAnimationIteration"),kr(gr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(yr,"onTransitionRun"),kr(vr,"onTransitionStart"),kr(br,"onTransitionCancel"),kr(_r,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),Je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Je("onBeforeInput",["compositionend","keypress","textInput","paste"]),Je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Ru(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(e){va(e)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(e){va(e)}i.currentTarget=null,s=l}}}}function Uu(e,t){var n=t[Ne];void 0===n&&(n=t[Ne]=new Set);var r=e+"__bubble";n.has(r)||($u(t,e,2,!1),n.add(r))}function Bu(e,t,n){var r=0;t&&(r|=4),$u(n,e,r,t)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Fu]){e[Fu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Nu.has(t)||Bu(t,!1,e),Bu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fu]||(t[Fu]=!0,Bu("selectionchange",!1,t))}}function $u(e,t,n,r){switch(uh(t)){case 2:var i=ih;break;case 8:i=sh;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qu(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var l=r.stateNode.containerInfo;if(l===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==l;){if(null===(a=$e(l)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}l=l.parentNode}}r=r.return}Rt(function(){var r=s,i=Dt(n),a=[];e:{var l=wr.get(e);if(void 0!==l){var c=en,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fr:case mr:case gr:c=ln;break;case _r:c=bn;break;case"scroll":case"scrollend":c=nn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=wn}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Ut(m,p))&&d.push(Hu(m,g,f)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,i),a.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Pe])&&(c||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(h=o(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=sn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?l:He(c),f=null==u?l:He(u),(l=new d(g,m+"leave",c,n,i)).target=h,l.relatedTarget=f,g=null,$e(i)===r&&((d=new d(p,m+"enter",u,n,i)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(p=u,m=0,f=d=c;f;f=Wu(f))m++;for(f=0,g=p;g;g=Wu(g))f++;for(;0<m-f;)d=Wu(d),m--;for(;0<f-m;)p=Wu(p),f--;for(;m--;){if(d===p||null!==p&&d===p.alternate)break e;d=Wu(d),p=Wu(p)}d=null}else d=null;null!==c&&Gu(a,l,c,d,!1),null!==u&&null!==h&&Gu(a,h,u,d,!0)}if("select"===(c=(l=r?He(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=Bn;else if(jn(l))if(qn)y=Jn;else{y=Gn;var v=Wn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Ct(r.elementType)&&(y=Bn):y=Kn;switch(y&&(y=y(e,r))?Pn(a,y,n,i):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&bt(l,"number",l.value)),v=r?He(r):window,e){case"focusin":(jn(v)||"true"===v.contentEditable)&&(ir=v,sr=r,or=null);break;case"focusout":or=sr=ir=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,lr(a,n,i);break;case"selectionchange":if(rr)break;case"keydown":case"keyup":lr(a,n,i)}var b;if(kn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else In?On(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(En&&"ko"!==n.locale&&(In||"onCompositionStart"!==_?"onCompositionEnd"===_&&In&&(b=Vt()):(qt="value"in($t=i)?$t.value:$t.textContent,In=!0)),0<(v=Vu(r,_)).length&&(_=new un(_,e,null,n,i),a.push({event:_,listeners:v}),(b||null!==(b=Mn(n)))&&(_.data=b))),(b=xn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(An=!0,Cn);case"textInput":return(e=t.data)===Cn&&An?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!kn&&On(e,t)?(e=Vt(),Ht=qt=$t=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(_=Vu(r,"onBeforeInput")).length&&(v=new un("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:_}),v.data=b),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=ju((i[De]||null).action),o=r.submitter;o&&null!==(t=(t=o[De]||null)?ju(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new en("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Tu){var e=o?Pu(i,o):new FormData(i);Do(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"==typeof s&&(a.preventDefault(),e=o?Pu(i,o):new FormData(i),Do(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Ru(a,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ut(e,n))&&r.unshift(Hu(e,i,s)),null!=(i=Ut(e,t))&&r.push(Hu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Ut(n,s))&&o.unshift(Hu(n,c,l)):i||null!=(c=Ut(n,s))&&o.push(Hu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Ku=/\r\n?/g,Ju=/\u0000|\uFFFD/g;function Xu(e){return("string"==typeof e?e:""+e).replace(Ku,"\n").replace(Ju,"")}function Yu(e,t){return t=Xu(t),Xu(e)===t}function Qu(){}function Zu(e,t,n,r,s,o){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":rt(e,"class",r);break;case"tabIndex":rt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,n,r);break;case"style":Et(e,r,o);break;case"data":if("object"!==t){rt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===n?("input"!==t&&Zu(e,t,"name",s.name,s,null),Zu(e,t,"formEncType",s.formEncType,s,null),Zu(e,t,"formMethod",s.formMethod,s,null),Zu(e,t,"formTarget",s.formTarget,s,null)):(Zu(e,t,"encType",s.encType,s,null),Zu(e,t,"method",s.method,s,null),Zu(e,t,"target",s.target,s,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Qu);break;case"onScroll":null!=r&&Uu("scroll",e);break;case"onScrollEnd":null!=r&&Uu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Mt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Uu("beforetoggle",e),Uu("toggle",e),nt(e,"popover",r);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":nt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&nt(e,n=At.get(n)||n,r)}}function ed(e,t,n,r,s,o){switch(n){case"style":Et(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"==typeof r?kt(e,r):("number"==typeof r||"bigint"==typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Uu("scroll",e);break;case"onScrollEnd":null!=r&&Uu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"==typeof(o=null!=(o=e[De]||null)?o[n]:null)&&e.removeEventListener(t,o,s),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):nt(e,n,r):("function"!=typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Uu("error",e),Uu("load",e);var r,s=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zu(e,t,r,a,n,null)}}return o&&Zu(e,t,"srcSet",n.srcSet,n,null),void(s&&Zu(e,t,"src",n.src,n,null));case"input":Uu("invalid",e);var l=r=a=o=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":o=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:Zu(e,t,s,d,n,null)}}return vt(e,r,l,c,u,a,o,!1),void ht(e);case"select":for(o in Uu("invalid",e),s=a=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Zu(e,t,o,l,n,null)}return t=r,n=a,e.multiple=!!s,void(null!=t?_t(e,!!s,t,!1):null!=n&&_t(e,!!s,n,!0));case"textarea":for(a in Uu("invalid",e),r=o=s=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":s=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:Zu(e,t,a,l,n,null)}return St(e,s,o,r),void ht(e);case"option":for(c in n)n.hasOwnProperty(c)&&null!=(s=n[c])&&("selected"===c?e.selected=s&&"function"!=typeof s&&"symbol"!=typeof s:Zu(e,t,c,s,n,null));return;case"dialog":Uu("beforetoggle",e),Uu("toggle",e),Uu("cancel",e),Uu("close",e);break;case"iframe":case"object":Uu("load",e);break;case"video":case"audio":for(s=0;s<Lu.length;s++)Uu(Lu[s],e);break;case"image":Uu("error",e),Uu("load",e);break;case"details":Uu("toggle",e);break;case"embed":case"source":case"link":Uu("error",e),Uu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zu(e,t,u,s,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(s=n[d])&&ed(e,t,d,s,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(s=n[l])&&Zu(e,t,l,s,n,null)}var nd=null,rd=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null,cd="function"==typeof setTimeout?setTimeout:void 0,ud="function"==typeof clearTimeout?clearTimeout:void 0,dd="function"==typeof Promise?Promise:void 0,hd="function"==typeof queueMicrotask?queueMicrotask:void 0!==dd?function(e){return dd.resolve(null).then(e).catch(pd)}:cd;function pd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Sd(o.documentElement),2&n&&Sd(o.body),4&n)for(Sd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Fe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Ah(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Ah(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function _d(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=id(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var kd=new Map,Td=new Set;function xd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ed=P.d;P.d={f:function(){var e=Ed.f(),t=$c();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Po(t):Ed.r(e)},D:function(e){Ed.D(e),Ad("dns-prefetch",e,null)},C:function(e,t){Ed.C(e,t),Ad("preconnect",e,t)},L:function(e,t,n){Ed.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var s=i;switch(t){case"style":s=Md(e);break;case"script":s=jd(e)}kd.has(s)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Id(s))||"script"===t&&r.querySelector(Pd(s))||(td(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Ed.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=jd(e)}if(!kd.has(s)&&(e=d({rel:"modulepreload",href:e},t),kd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pd(s)))return}td(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Ed.X(e,t);var n=Cd;if(n&&e){var r=Ve(n).hoistableScripts,i=jd(e),s=r.get(i);s||((s=n.querySelector(Pd(i)))||(e=d({src:e,async:!0},t),(t=kd.get(i))&&Ud(e,t),We(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Ed.S(e,t,n);var r=Cd;if(r&&e){var i=Ve(r).hoistableStyles,s=Md(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Id(s)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(s))&&Rd(e,n);var l=o=r.createElement("link");We(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Nd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Ed.M(e,t);var n=Cd;if(n&&e){var r=Ve(n).hoistableScripts,i=jd(e),s=r.get(i);s||((s=n.querySelector(Pd(i)))||(e=d({src:e,async:!0,type:"module"},t),(t=kd.get(i))&&Ud(e,t),We(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Cd="undefined"==typeof document?null:document;function Ad(e,t,n){var r=Cd;if(r&&"string"==typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),Td.has(i)||(Td.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(td(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Od(e,t,n,r){var s,o,a,l,c=(c=q.current)?xd(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Md(n.href),(r=(n=Ve(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Md(n.href);var u=Ve(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Id(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(s=c,o=e,a=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=s.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),td(o,"link",a),We(o),s.head.appendChild(o))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=jd(n),(r=(n=Ve(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Md(e){return'href="'+gt(e)+'"'}function Id(e){return'link[rel="stylesheet"]['+e+"]"}function Dd(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function jd(e){return'[src="'+gt(e)+'"]'}function Pd(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var s=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),td(r,"style",s),Nd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Md(n.href);var o=e.querySelector(Id(s));if(o)return t.state.loading|=4,t.instance=o,We(o),o;r=Dd(n),(s=kd.get(s))&&Rd(r,s),We(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(o,"link",r),t.state.loading|=4,Nd(o,n.precedence,e),t.instance=o;case"script":return o=jd(n.src),(s=e.querySelector(Pd(o)))?(t.instance=s,We(s),s):(r=n,(s=kd.get(o))&&Ud(r=d({},n),s),We(s=(e=e.ownerDocument||e).createElement("script")),td(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Nd(r,n.precedence,e));return t.instance}function Nd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Rd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ud(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Bd=null;function Fd(e,t,n){if(null===Bd){var r=new Map,i=Bd=new Map;i.set(n,r)}else(r=(i=Bd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Fe]||s[Ie]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function $d(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var qd=null;function Hd(){}function Vd(){if(this.count--,0===this.count)if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function Gd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Kd,e),Wd=null,Vd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Vd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Jd={$$typeof:_,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Xd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yd(e,t,n,r,i,s,o,a,l,c,u,d){return e=new Xd(e,t,n,o,a,l,c,d),t=1,!0===s&&(t|=24),s=Rr(3,null,null,t),e.current=s,s.stateNode=e,(t=Pi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},rs(s),e}function Qd(e){return e?e=Lr:Lr}function Zd(e,t,n,r,i,s){i=Qd(i),null===r.context?r.context=i:r.pendingContext=i,(r=ss(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=os(e,r,t))&&(Rc(n,0,t),as(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Dr(e,67108864);null!==t&&Rc(t,0,67108864),th(e,67108864)}}var rh=!0;function ih(e,t,n,r){var i=j.T;j.T=null;var s=P.p;try{P.p=2,oh(e,t,n,r)}finally{P.p=s,j.T=i}}function sh(e,t,n,r){var i=j.T;j.T=null;var s=P.p;try{P.p=8,oh(e,t,n,r)}finally{P.p=s,j.T=i}}function oh(e,t,n,r){if(rh){var i=ah(r);if(null===i)qu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hh=_h(hh,e,t,n,r,i),!0;case"dragenter":return ph=_h(ph,e,t,n,r,i),!0;case"mouseover":return fh=_h(fh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return mh.set(s,_h(mh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gh.set(s,_h(gh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==i;){var s=qe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ye(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-he(o);a.entanglements[1]|=l,o&=~l}xu(s),!(6&rc)&&(kc=ee()+500,Eu(0,!1))}}break;case 13:null!==(a=Dr(s,2))&&Rc(a,0,2),$c(),th(s,2)}if(null===(s=ah(r))&&qu(e,t,r,lh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qu(e,t,r,null,n)}}function ah(e){return ch(e=Dt(e))}var lh=null;function ch(e){if(lh=null,null!==(e=$e(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case ne:return 2;case re:return 8;case ie:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,ph=null,fh=null,mh=new Map,gh=new Map,yh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":ph=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function _h(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=qe(t))&&nh(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wh(e){var t=$e(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void function(e){var t=P.p;try{return P.p=e,function(){if(13===n.tag){var e=Lc();e=Ce(e);var t=Dr(n,e);null!==t&&Rc(t,0,e),th(n,e)}}()}finally{P.p=t}}(e.priority)}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function kh(e,t,n){Sh(e)&&n.delete(t)}function Th(){dh=!1,null!==hh&&Sh(hh)&&(hh=null),null!==ph&&Sh(ph)&&(ph=null),null!==fh&&Sh(fh)&&(fh=null),mh.forEach(kh),gh.forEach(kh)}function xh(e,n){e.blockedOn===n&&(e.blockedOn=null,dh||(dh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Th)))}var Eh=null;function Ch(e){Eh!==e&&(Eh=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Eh===e&&(Eh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===ch(r||n))continue;break}var s=qe(n);null!==s&&(e.splice(t,3),t-=3,Do(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ah(e){function t(t){return xh(t,e)}null!==hh&&xh(hh,e),null!==ph&&xh(ph,e),null!==fh&&xh(fh,e),mh.forEach(t),gh.forEach(t);for(var n=0;n<yh.length;n++){var r=yh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yh.length&&null===(n=yh[0]).blockedOn;)wh(n),null===n.blockedOn&&yh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[De]||null;if("function"==typeof s)o||Ch(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[De]||null)a=o.formAction;else if(null!==ch(i))continue}else a=o.action;"function"==typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ch(n)}}}function Oh(e){this._internalRoot=e}function Mh(e){this._internalRoot=e}Mh.prototype.render=Oh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Zd(t.current,Lc(),e,t,null,null)},Mh.prototype.unmount=Oh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),$c(),t[Pe]=null}},Mh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yh.length&&0!==t&&t<yh[n].priority;n++);yh.splice(n,0,e),0===n&&wh(e)}};var Ih=n.version;if("19.1.0"!==Ih)throw Error(i(527,Ih,"19.1.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return c(s),e;if(a===r)return c(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var l=!1,u=s.child;u;){if(u===n){l=!0,n=s,r=a;break}if(u===r){l=!0,r=s,n=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===n){l=!0,n=a,r=s;break}if(u===r){l=!0,r=a,n=s;break}u=u.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),null===(e=null!==e?u(e):null)?null:e.stateNode};var Dh,jh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&!(Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__).isDisabled&&Dh.supportsFiber)try{ce=Dh.inject(jh),ue=Dh}catch(e){}e.createRoot=function(e,t){if(!s(e))throw Error(i(299));var n=!1,r="",o=ba,a=_a,l=wa;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,o,a,l,0,null),e[Pe]=t.current,zu(e),new Oh(t)},e.hydrateRoot=function(e,t,n){if(!s(e))throw Error(i(299));var r=!1,o="",a=ba,l=_a,c=wa,u=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yd(e,1,!0,t,0,r,o,a,l,c,0,u)).context=Qd(null),n=t.current,(o=ss(r=Ce(r=Lc()))).callback=null,os(n,o,r),n=r,t.current.lanes=n,Te(t,n),xu(t),e[Pe]=t.current,zu(e),new Mh(t)},e.version="19.1.0"}}),Re=((0,s.P$)({"../../node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/cjs/react-dom-client.development.js"(e){}}),(0,s.P$)({"../../node_modules/.pnpm/react-dom@19.1.0_react@19.1.0/node_modules/react-dom/client.js"(e,t){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),t.exports=Ne()}})),Ue=(0,s.f1)(a()),Be=(0,s.f1)(a()),Fe=(0,s.f1)(a(),1),ze=0,$e={},qe=Symbol(),He=e=>!!e[qe],Ve=e=>!e[qe].c,We=e=>{var t;const{b:n,c:r}=e[qe];r&&(r(),null==(t=Je.get(n))||t())},Ge=(e,t)=>{const n=e[qe].o,r=t[qe].o;return n===r||e===r||He(n)&&Ge(n,t)},Ke=(e,t)=>{const n={b:e,o:t,c:null},r=new Promise(e=>{n.c=()=>{n.c=null,e()},t.finally(n.c)});return r[qe]=n,r},Je=new WeakMap,Xe=e=>"init"in e,Ye="r",Qe="w",Ze="c",et="s",tt="h",nt="n",rt="l",it="a",st="m",ot=e=>{const t=new WeakMap,n=new WeakMap,r=new Map;let i,s;if("production"!==($e.env&&$e.env.MODE)&&(i=new Set,s=new Set),e)for(const[n,r]of e){const e={v:r,r:0,y:!0,d:new Map};"production"!==($e.env&&$e.env.MODE)&&(Object.freeze(e),Xe(n)||console.warn("Found initial value for derived atom which can cause unexpected behavior",n)),t.set(n,e)}const o=new WeakMap,a=new WeakMap,l=e=>{let t=a.get(e);return t||(t=new Map,a.set(e,t)),t},c=(e,n)=>{if(e){const t=l(e);let r=t.get(n);return r||(r=c(e.p,n),r&&"p"in r&&Ve(r.p)&&(r=void 0),r&&t.set(n,r)),r}return t.get(n)},u=(e,n,i)=>{if("production"!==($e.env&&$e.env.MODE)&&Object.freeze(i),e)l(e).set(n,i);else{const e=t.get(n);t.set(n,i),r.has(n)||r.set(n,e)}},d=(e,t=new Map,n)=>{if(!n)return t;const r=new Map;let i=!1;return n.forEach(n=>{var s;const o=(null==(s=c(e,n))?void 0:s.r)||0;r.set(n,o),t.get(n)!==o&&(i=!0)}),t.size!==r.size||i?r:t},h=(e,t,n,r,i)=>{const s=c(e,t);if(s){if(i&&(!("p"in s)||!Ge(s.p,i)))return s;"p"in s&&We(s.p)}const o={v:n,r:(null==s?void 0:s.r)||0,y:!0,d:d(e,null==s?void 0:s.d,r)};let a=!(null==s?void 0:s.y);return s&&"v"in s&&Object.is(s.v,n)?o.d===s.d||o.d.size===s.d.size&&Array.from(o.d.keys()).every(e=>s.d.has(e))||(a=!0,Promise.resolve().then(()=>{x(e)})):(a=!0,++o.r,o.d.has(t)&&(o.d=new Map(o.d).set(t,o.r))),s&&!a?s:(u(e,t,o),o)},p=(e,t,n,r,i)=>{const s=c(e,t);if(s){if(i&&(!("p"in s)||!Ge(s.p,i)))return s;"p"in s&&We(s.p)}const o={e:n,r:((null==s?void 0:s.r)||0)+1,y:!0,d:d(e,null==s?void 0:s.d,r)};return u(e,t,o),o},f=(e,t,n,r)=>{const i=c(e,t);if(i&&"p"in i){if(Ge(i.p,n)&&!Ve(i.p))return i.y?i:{...i,y:!0};We(i.p)}((e,t,n)=>{let r=o.get(t);r||(r=new Map,o.set(t,r)),n.then(()=>{r.get(e)===n&&(r.delete(e),r.size||o.delete(t))}),r.set(e,n)})(e,t,n);const s={p:n,r:((null==i?void 0:i.r)||0)+1,y:!0,d:d(e,null==i?void 0:i.d,r)};return u(e,t,s),s},m=(e,t,n,r)=>{if(n instanceof Promise){const i=Ke(n,n.then(n=>{h(e,t,n,r,i)}).catch(n=>{if(n instanceof Promise)return He(n)?n.then(()=>{g(e,t,!0)}):n;p(e,t,n,r,i)}));return f(e,t,i,r)}return h(e,t,n,r)},g=(e,t,r)=>{if(!r){const r=c(e,t);if(r){if(r.y&&"p"in r&&!Ve(r.p))return r;if(r.d.forEach((r,i)=>{if(i!==t)if(n.has(i)){const t=c(e,i);t&&!t.y&&g(e,i)}else g(e,i)}),Array.from(r.d).every(([t,n])=>{const r=c(e,t);return r&&!("p"in r)&&r.r===n}))return r.y?r:{...r,y:!0}}}const i=new Set;try{const n=t.read(n=>{i.add(n);const r=n===t?c(e,n):g(e,n);if(r){if("e"in r)throw r.e;if("p"in r)throw r.p;return r.v}if(Xe(n))return n.init;throw new Error("no atom init")});return m(e,t,n,i)}catch(n){if(n instanceof Promise){const r=He(n)&&Ve(n)?(e=>Ke(e[qe].b,e[qe].o))(n):Ke(n,n);return f(e,t,r,i)}return p(e,t,n,i)}},y=(e,t)=>g(t,e),v=(e,t)=>!t.l.size&&(!t.t.size||1===t.t.size&&t.t.has(e)),b=(e,t)=>{const r=n.get(t);null==r||r.t.forEach(n=>{n!==t&&(((e,t)=>{const n=c(e,t);if(n){const r={...n,y:!1};u(e,t,r)}else"production"!==($e.env&&$e.env.MODE)&&console.warn("[Bug] could not invalidate non existing atom",t)})(e,n),b(e,n))})},_=(e,t,n)=>{let r=!0;const i=(t,n)=>{const r=g(e,t);if("e"in r)throw r.e;if("p"in r){if(null==n?void 0:n.unstable_promise)return r.p.then(()=>{const s=c(e,t);return s&&"p"in s&&s.p===r.p?new Promise(e=>setTimeout(e)).then(()=>i(t,n)):i(t,n)});throw"production"!==($e.env&&$e.env.MODE)&&console.info("Reading pending atom state in write operation. We throw a promise for now.",t),r.p}if("v"in r)return r.v;throw"production"!==($e.env&&$e.env.MODE)&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",t),new Error("no value found")},s=t.write(i,(n,i)=>{let s;if(n===t){if(!Xe(n))throw new Error("atom not writable");const t=(e=>{const t=new Set,n=o.get(e);return n&&(o.delete(e),n.forEach((e,n)=>{We(e),t.add(n)})),t})(n);t.forEach(t=>{t!==e&&m(t,n,i)}),c(e,n)!==m(e,n,i)&&b(e,n)}else s=_(e,n,i);return r||x(e),s},n);return r=!1,s},w=(e,t,n)=>{const r=_(n,e,t);return x(n),r},S=(e,t,r)=>{const i={t:new Set(r&&[r]),l:new Set};if(n.set(t,i),"production"!==($e.env&&$e.env.MODE)&&s.add(t),g(void 0,t).d.forEach((r,i)=>{const s=n.get(i);s?s.t.add(t):i!==t&&S(e,i,t)}),(e=>!!e.write)(t)&&t.onMount){const n=n=>w(t,n,e),r=t.onMount(n);e=void 0,r&&(i.u=r)}return i},k=(e,t)=>{var r;const i=null==(r=n.get(t))?void 0:r.u;i&&i(),n.delete(t),"production"!==($e.env&&$e.env.MODE)&&s.delete(t);const o=c(e,t);o?("p"in o&&We(o.p),o.d.forEach((r,i)=>{if(i!==t){const r=n.get(i);r&&(r.t.delete(t),v(i,r)&&k(e,i))}})):"production"!==($e.env&&$e.env.MODE)&&console.warn("[Bug] could not find atom state to unmount",t)},T=(e,t,r,i)=>{const s=new Set(r.d.keys());null==i||i.forEach((r,i)=>{if(s.has(i))return void s.delete(i);const o=n.get(i);o&&(o.t.delete(t),v(i,o)&&k(e,i))}),s.forEach(r=>{const i=n.get(r);i?i.t.add(t):n.has(t)&&S(e,r,t)})},x=e=>{if(e)l(e).forEach((r,i)=>{if(r!==t.get(i)){const t=n.get(i);null==t||t.l.forEach(t=>t(e))}});else{for(;r.size;){const e=Array.from(r);r.clear(),e.forEach(([e,t])=>{const r=c(void 0,e);if(r&&r.d!==(null==t?void 0:t.d)&&T(void 0,e,r,null==t?void 0:t.d),t&&!t.y&&(null==r?void 0:r.y))return;const i=n.get(e);null==i||i.l.forEach(e=>e())})}"production"!==($e.env&&$e.env.MODE)&&i.forEach(e=>e())}},E=(e,n)=>{n&&(e=>{l(e).forEach((n,r)=>{const i=t.get(r);(!i||n.r>i.r||n.y!==i.y||n.r===i.r&&n.d!==i.d)&&(t.set(r,n),n.d!==(null==i?void 0:i.d)&&T(e,r,n,null==i?void 0:i.d))})})(n),x(void 0)},C=(e,t,r)=>{const i=((e,t)=>{let r=n.get(t);return r||(r=S(e,t)),r})(r,e),s=i.l;return s.add(t),()=>{s.delete(t),((e,t)=>{const r=n.get(t);r&&v(t,r)&&k(e,t)})(r,e)}},A=(e,t)=>{for(const[n,r]of e)Xe(n)&&(m(t,n,r),b(t,n));x(t)};return"production"!==($e.env&&$e.env.MODE)?{[Ye]:y,[Qe]:w,[Ze]:E,[et]:C,[tt]:A,[nt]:e=>(i.add(e),()=>{i.delete(e)}),[rt]:()=>s.values(),[it]:e=>t.get(e),[st]:e=>n.get(e)}:{[Ye]:y,[Qe]:w,[Ze]:E,[et]:C,[tt]:A}},at=new Map,lt=e=>{var t;return at.has(e)||at.set(e,(0,Fe.createContext)({s:ot(t)})),at.get(e)};function ct(e,t){return function(e,t){const n="atom"+ ++ze,r={toString:()=>n};return"function"==typeof e?r.read=e:(r.init=e,r.read=e=>e(r),r.write=(e,t,n)=>t(r,"function"==typeof n?n(e(r)):n)),t&&(r.write=t),r}(e,t)}function ut(e,t){const n=lt(t),r=(0,Fe.useContext)(n),{s:i,v:s}=r,o=t=>{const n=i[Ye](e,t);if("production"!==($e.env&&$e.env.MODE)&&!n.y)throw new Error("should not be invalidated");if("e"in n)throw n.e;if("p"in n)throw n.p;if("v"in n)return n.v;throw new Error("no atom value")},[[a,l,c],u]=(0,Fe.useReducer)((t,n)=>{const r=o(n);return Object.is(t[1],r)&&t[2]===e?t:[n,r,e]},s,t=>[t,o(t),e]);let d=l;return c!==e&&(u(a),d=o(a)),(0,Fe.useEffect)(()=>{const{v:t}=r;t&&i[Ze](e,t);const n=i[et](e,u,t);return u(t),n},[i,e,r]),(0,Fe.useEffect)(()=>{i[Ze](e,a)}),(0,Fe.useDebugValue)(d),d}function dt(e,t){const n=lt(t),{s:r,w:i}=(0,Fe.useContext)(n);return(0,Fe.useCallback)(t=>{if("production"!==($e.env&&$e.env.MODE)&&!("write"in e))throw new Error("not writable atom");const n=n=>r[Qe](e,t,n);return i?i(n):n()},[r,i,e])}function ht(e,t){return"scope"in e&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),t=e.scope),[ut(e,t),dt(e,t)]}var pt=ct(!1),ft=ct(.5),mt=ct("state"),gt=(0,s.f1)(a()),yt=function(){return"undefined"==typeof window||"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node||!("nodejs"!==window.name&&!(null===navigator||void 0===navigator?void 0:navigator.userAgent.includes("Node.js"))&&!(null===navigator||void 0===navigator?void 0:navigator.userAgent.includes("jsdom")))},vt=["","l","v","w","f","i","h","a","m"],bt={},_t={k:"l",ited:"v","us-within":"w",us:"f","us-visible":"i",er:"h",ive:"a"},wt=function(e){return 64===e.charCodeAt(0)?"m":58===e.charCodeAt(10)&&_t[e.slice(14,e.indexOf("{"))]||""};function St(e,t){var n=function(e,t){if(!bt[e]){for(var n=vt.indexOf(e)+1,r=null;n<vt.length;n++){var i=bt[vt[n]];if(i){r=i;break}}var s=document.createElement("style");t.nonce&&s.setAttribute("nonce",t.nonce),s.appendChild(document.createTextNode("")),document.head.insertBefore(s,r),bt[e]=s}return bt[e]}(wt(e),t),r=n.sheet;try{r.insertRule(e,r.cssRules.length)}catch(e){}}var kt,Tt,xt=(0,s.f1)(a()),Et=(0,s.f1)(a()),Ct=yt()?(0,Et.createContext)(null):{};if(!yt())for(kt=document.querySelectorAll("style[data-cmpld]"),Tt=0;Tt<kt.length;Tt++)document.head.appendChild(kt[Tt]);var At=function(){return yt()?(0,Et.useContext)(Ct)||{}:Ct},Ot=function(e){if(yt()){var t=At();return xt.createElement(Ct.Provider,{value:t},e.children)}return e.children};function Mt(e){var t=At();if(e.children.length){if(yt()){for(var n={},r=!1,i=0;i<e.children.length;i++)if(!t[o=e.children[i]]){t[o]=!0,r=!0;var s=wt(o);n[s]=(n[s]||"")+o}return r?gt.default.createElement("style",{"data-cmpld":!0,nonce:e.nonce,dangerouslySetInnerHTML:{__html:vt.map(function(e){return n[e]}).join("")}}):null}for(i=0;i<e.children.length;i++){var o;t[o=e.children[i]]||(t[o]=!0,St(o,e))}}return null}var It=95,Dt=5;function jt(e){if(e.length<=1&&(!e[0]||-1===e[0].indexOf(" ")))return e[0]||void 0;for(var t={},n=0;n<e.length;n++){var r=e[n];if(r)for(var i=r.split(" "),s=0;s<i.length;s++){var o=i[s];t[o.slice(0,o.charCodeAt(0)===It?Dt:void 0)]=o}}var a="";for(var l in t)a+=t[l]+" ";return a.slice(0,-1)}function Pt(e,t,n){return null!=e?t?n?n+e+t:e+t:e:"var(--c-, )"}var Lt=(0,s.f1)(a()),Nt={scheme:"monokai",base00:"#1E1E2E",base01:"#45475A",base02:"#313244",base03:"#B4BEFE",base04:"#F2CDCD",base05:"#CDD6F4",base06:"#CDD6F4",base07:"#CDD6F4",base08:"#F38BA8",base09:"#FAB387",base0A:"#F9E2AF",base0B:"#A6E3A1",base0C:"#94E2D5",base0D:"#89DCEB",base0E:"#CBA6F7",base0F:"#FAB387"},Rt={main:"#CBA6F7",main20:"rgba(203, 166, 247, .2)",main40:"rgba(203, 166, 247, .4)",main60:"rgba(203, 166, 247, .6)",main80:"rgba(203, 166, 247, .8)",main90:"rgba(203, 166, 247, .9)",mainBg:"#1E1E2E",softerMain:"#B4BEFE",white:"#fff",text:"#CDD6F4",white05:"rgba(205, 214, 244, .05)",white10:"rgba(205, 214, 244, .1)",white20:"rgba(205, 214, 244, .2)",white60:"rgba(205, 214, 244, .6)",white80:"rgba(205, 214, 244, .8)",black30:"#11111B",lightYellow:"rgba(205, 214, 244, .2)",lightPink:"#F38BA8",darkGreen:"#A6E3A1",syntax:Nt},Ut="._1qh112gs svg{bottom:-2px}",Bt="._11wmh2mm svg{position:relative}",Ft="._17521u1b svg{height:34px}",zt="._w8l51u1b svg{width:34px}",$t="._d0altlke:hover{cursor:pointer}",qt="._16l415iw:hover{opacity:.7}",Ht="._1pbyhac1{z-index:99999}",Vt="._19itglyw{border:none}",Wt="._v564g17y{transition:opacity .3s}",Gt="._19bvi2wt{padding-left:6px}",Kt="._n3td1y44{padding-bottom:4px}",Jt="._u5f3i2wt{padding-right:6px}",Xt="._ca0q1y44{padding-top:4px}",Yt="._2rko1ssb{border-radius:50%}",Qt="._16qspg5n{box-shadow:var(--_nq33mp)}",Zt="._bfhk2l5j{background-color:#1e1e2e}",en="._1xi27vkz{right:1pc}",tn="._94n57vkz{bottom:1pc}",nn="._kqsw1n9t{position:fixed}",rn="._r06hglyw{-webkit-appearance:none;-moz-appearance:none;appearance:none}";function sn(e){return Lt.default.createElement(Ot,null,Lt.default.createElement(Mt,null,[rn,nn,tn,en,Zt,Qt,Yt,Xt,Jt,Kt,Gt,Wt,Vt,Ht,qt,$t,zt,Ft,Bt,Ut]),Lt.default.createElement("button",{"data-test-id":"__prosemirror_devtools_collapsed_button__",onClick:e.onClick,className:jt(["_r06hglyw _kqsw1n9t _94n57vkz _1xi27vkz _bfhk2l5j _16qspg5n _2rko1ssb _ca0q1y44 _u5f3i2wt _n3td1y44 _19bvi2wt _v564g17y _19itglyw _1pbyhac1 _16l415iw _d0altlke _w8l51u1b _17521u1b _11wmh2mm _1qh112gs"]),style:{"--_nq33mp":Pt("0 0 30px ".concat(Rt.black30))}},Lt.default.createElement("svg",{width:"530",height:"530",viewBox:"0 0 530 530",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},Lt.default.createElement("title",null,"prosemirror"),Lt.default.createElement("desc",null,"Created using Figma"),Lt.default.createElement("use",{xlinkHref:"#a",transform:"matrix(2 0 0 2 118 116)",fill:"#FFF"}),Lt.default.createElement("use",{xlinkHref:"#b",transform:"rotate(16 59.054 420.192) scale(2)",fill:"#FFF"}),Lt.default.createElement("use",{xlinkHref:"#c",transform:"matrix(2 0 0 2 154.024 141.58)",fill:"#363755"}),Lt.default.createElement("use",{xlinkHref:"#d",transform:"matrix(2 0 0 2 220 334.8)",fill:"#FFF"}),Lt.default.createElement("use",{xlinkHref:"#e",transform:"matrix(2 0 0 2 218.826 262.052)",fill:"#363755"}),Lt.default.createElement("use",{xlinkHref:"#f",transform:"matrix(2 0 0 2 197.108 184.998)",fill:"#FFF"}),Lt.default.createElement("use",{xlinkHref:"#g",transform:"matrix(2 0 0 2 221.8 216)",fill:"#363755"}),Lt.default.createElement("defs",null,Lt.default.createElement("path",{id:"a",d:"M73.5 0C32.859 0 0 32.859 0 73.5S32.859 147 73.5 147 147 114.141 147 73.5 114.069 0 73.5 0z"}),Lt.default.createElement("path",{id:"b",d:"M193.601 107.116c0-13.376 8.238-23.91 20.619-31.153-2.244-7.447-5.19-14.6-8.824-21.32-13.886 3.633-25.12-1.799-34.568-11.26-9.449-9.437-12.344-20.672-8.709-34.571A111.362 111.362 0 0 0 140.799 0c-7.243 12.37-20.339 20.594-33.689 20.594-13.363 0-26.446-8.225-33.701-20.594A110.888 110.888 0 0 0 52.1 8.812c3.634 13.9.753 25.134-8.721 34.57-9.436 9.462-20.67 14.894-34.569 11.26A112.178 112.178 0 0 0 0 75.963c12.369 7.243 20.593 17.777 20.593 31.153 0 13.352-8.224 26.448-20.593 33.704a113.338 113.338 0 0 0 8.811 21.321c13.899-3.634 25.133-.752 34.569 8.697 9.448 9.462 12.355 20.696 8.721 34.57a112.653 112.653 0 0 0 21.32 8.837c7.243-12.407 20.338-20.619 33.702-20.619 13.35 0 26.446 8.225 33.701 20.619a114.22 114.22 0 0 0 21.32-8.837c-3.634-13.874-.752-25.108 8.709-34.57 9.449-9.437 20.683-14.869 34.569-11.26a112.343 112.343 0 0 0 8.823-21.321c-12.406-7.256-20.644-17.789-20.644-31.141zm-86.491 46.57c-25.732 0-46.58-20.849-46.58-46.57 0-25.733 20.86-46.595 46.58-46.595 25.732 0 46.567 20.875 46.567 46.595 0 25.734-20.835 46.57-46.567 46.57z"}),Lt.default.createElement("path",{id:"c",d:"M98.088 49.91c-6.9 83.9 10.8 103.401 10.8 103.401s-55.1 5.499-82.7-13.401c-30.5-20.9-26-67.5-25.9-94.6.1-28.4 25.6-45.8 49.9-45.3 29.1.5 50.2 21.6 47.9 49.9z"}),Lt.default.createElement("path",{id:"d",d:"M.1.1c12.2 33.3 22.5 42.7 40 55.2 25.3 18 36.6 17.5 76.3 41C78.1 60.3 30.8 45.7 0 0l.1.1z"}),Lt.default.createElement("path",{id:"e",d:"M.687 36.474c3 13.3 17.9 29.9 30.4 41.6 24.8 23.2 42 22.4 86 54.7-18.2-51.8-18.8-62-43.5-106.1-24.7-44-67.6-20.3-67.6-20.3s-8.4 16.6-5.3 29.9v.2z"}),Lt.default.createElement("path",{id:"f",d:"M38.346 11.5s-4-11.6-18-11.5c-30 .2-28.8 52.1 16.9 52 39.6-.1 39.2-49.4 16.1-49.6-10.2-.2-15 9.1-15 9.1z"}),Lt.default.createElement("path",{id:"g",d:"M26.5 15c10.8 0 2 14.9-.6 20.9-1.8-8.4-10.2-20.9.6-20.9zM10.2.1C4.6.1 0 4.6 0 10.3c0 5.6 4.5 10.2 10.2 10.2 5.6 0 10.2-4.5 10.2-10.2C20.4 4.7 15.9.1 10.2.1zM40.7 0c-4.8 0-8.8 4.5-8.8 10.2 0 5.6 3.9 10.2 8.8 10.2 4.8 0 8.8-4.5 8.8-10.2C49.5 4.6 45.6 0 40.7 0z"})))))}var on=(0,s.f1)(a()),an=(0,s.f1)(l()),ln=(0,s.f1)(h()),cn=(0,s.f1)(p()),un=(0,s.f1)(m()),dn=(0,s.f1)(g()),hn=(0,s.f1)(y()),pn=(0,s.f1)(v()),fn=(0,s.f1)(T()),mn=(0,s.f1)(a()),gn=(0,s.f1)(D()),yn=(0,s.f1)(j()),vn=(0,s.f1)(v());function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach(function(t){(0,vn.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var wn=["animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","appearance","backfaceVisibility","backgroundClip","borderImage","borderImageSlice","boxSizing","boxShadow","contentColumns","transform","transformOrigin","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","perspective","perspectiveOrigin","userSelect"],Sn=["Moz","Webkit","ms","O"];function kn(e){return Object.keys(e).reduce(function(t,n){return-1!==wn.indexOf(n)?_n(_n({},t),function(e,t){return Sn.reduce(function(n,r){return n[r+e[0].toUpperCase()+e.substr(1)]=t,n},{})}(n,e[n])):t},e)}function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach(function(t){(0,pn.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var En,Cn=(En={wrapper:{position:"fixed",width:0,height:0,top:0,left:0},dim:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:0,background:"rgba(0, 0, 0, 0.2)",opacity:1},dimAppear:{opacity:0},dimTransparent:{pointerEvents:"none"},dimHidden:{opacity:0},dock:{position:"fixed",zIndex:1,boxShadow:"0 0 4px rgba(0, 0, 0, 0.3)",background:"white",left:0,top:0,width:"100%",height:"100%"},dockHidden:{opacity:0},dockResizing:{transition:"none"},dockContent:{width:"100%",height:"100%",overflow:"auto"},resizer:{position:"absolute",zIndex:2,opacity:0}},Object.keys(En).reduce(function(e,t){return e[t]=kn(En[t]),e},{}));function An(e,t,n){return"left"===e||"right"===e?t:n}var On=function(e){(0,un.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,hn.default)(t);if(n){var i=(0,hn.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,dn.default)(this,e)});function i(){var e;(0,an.default)(this,i);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),(0,pn.default)((0,cn.default)(e),"state",{isControlled:void 0!==e.props.size,size:e.props.size||e.props.defaultSize,isDimHidden:!e.props.isVisible,fullWidth:window.innerWidth,fullHeight:window.innerHeight,isTransitionStarted:!1,isWindowResizing:!1}),(0,pn.default)((0,cn.default)(e),"transitionEnd",function(){e.setState({isTransitionStarted:!1})}),(0,pn.default)((0,cn.default)(e),"hideDim",function(){e.props.isVisible||e.setState({isDimHidden:!0})}),(0,pn.default)((0,cn.default)(e),"handleDimClick",function(){"opaque"===e.props.dimMode&&e.props.onVisibleChange&&e.props.onVisibleChange(!1)}),(0,pn.default)((0,cn.default)(e),"handleResize",function(){window.requestAnimationFrame?window.requestAnimationFrame(e.updateWindowSize.bind((0,cn.default)(e),!0)):e.updateWindowSize(!0)}),(0,pn.default)((0,cn.default)(e),"updateWindowSize",function(t){var n={fullWidth:window.innerWidth,fullHeight:window.innerHeight};t?(e.setState(xn(xn({},n),{},{isResizing:!0,isWindowResizing:t})),e.debouncedUpdateWindowSizeEnd()):e.setState(n)}),(0,pn.default)((0,cn.default)(e),"updateWindowSizeEnd",function(){e.setState({isResizing:!1,isWindowResizing:!1})}),(0,pn.default)((0,cn.default)(e),"debouncedUpdateWindowSizeEnd",(0,yn.default)(e.updateWindowSizeEnd,30)),(0,pn.default)((0,cn.default)(e),"handleWrapperLeave",function(){e.setState({isResizing:!1})}),(0,pn.default)((0,cn.default)(e),"handleMouseDown",function(){e.setState({isResizing:!0})}),(0,pn.default)((0,cn.default)(e),"handleMouseUp",function(){e.setState({isResizing:!1})}),(0,pn.default)((0,cn.default)(e),"handleMouseMove",function(t){if(e.state.isResizing&&!e.state.isWindowResizing){t.touches||t.preventDefault();var n,r=e.props,i=r.position,s=r.fluid,o=e.state,a=o.fullWidth,l=o.fullHeight,c=o.isControlled,u=t,d=u.clientX,h=u.clientY;switch(t.touches&&(d=t.touches[0].clientX,h=t.touches[0].clientY),i){case"left":n=s?d/a:d;break;case"right":n=s?(a-d)/a:a-d;break;case"top":n=s?h/l:h;break;case"bottom":n=s?(l-h)/l:l-h}e.props.onSizeChange&&e.props.onSizeChange(n),c||e.setState({size:n})}}),e}return(0,ln.default)(i,[{key:"componentDidMount",value:function(){window.addEventListener("touchend",this.handleMouseUp),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("touchmove",this.handleMouseMove),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("resize",this.handleResize),this.updateWindowSize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchend",this.handleMouseUp),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("touchmove",this.handleMouseMove),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=void 0!==e.size;this.setState({isControlled:t}),t&&e.size&&this.props.size!==e.size?this.setState({size:e.size}):this.props.fluid!==e.fluid&&this.updateSize(e),this.props.isVisible!==e.isVisible&&this.setState({isTransitionStarted:!0})}},{key:"updateSize",value:function(e){var t=this.state,n=t.fullWidth,r=t.fullHeight;this.setState({size:e.fluid?this.state.size/An(e.position,n,r):An(e.position,n,r)*this.state.size})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.isVisible!==e.isVisible&&(this.props.isVisible?this.setState({isDimHidden:!1}):window.setTimeout(function(){return t.hideDim()},this.props.duration),window.setTimeout(function(){return t.setState({isTransitionStarted:!1})},0))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.zIndex,r=e.dimMode,i=e.position,s=e.isVisible,o=this.state,a=o.isResizing,l=o.size,c=o.isDimHidden,u=Object.assign.apply(Object,[{}].concat((0,fn.default)(function(e,t){var n=e.dimMode,r=e.dimStyle,i=e.duration,s=e.isVisible,o=t.isTransitionStarted;return[Cn.dim,kn({transition:"opacity ".concat(i/1e3,"s ease-out")}),r,"transparent"===n&&Cn.dimTransparent,!s&&Cn.dimHidden,o&&s&&Cn.dimAppear,o&&!s&&Cn.dimDisappear]}(this.props,this.state)))),d=Object.assign.apply(Object,[{}].concat((0,fn.default)(function(e,t){var n,r=e.fluid,i=e.dockStyle,s=e.dockHiddenStyle,o=e.duration,a=e.position,l=e.isVisible,c=t.size,u=t.isResizing,d=t.fullWidth,h=t.fullHeight,p=r?"".concat(100*c,"%"):"".concat(c,"px");function f(e){return r?"".concat(100-100*c,"%"):"".concat(e-c,"px")}switch(a){case"left":n={width:p,left:l?0:"-"+p};break;case"right":n={left:l?f(d):d,width:p};break;case"top":n={top:l?0:"-"+p,height:p};break;case"bottom":n={top:l?f(h):h,height:p}}var m=function(e){return["left","top","width","height"].map(function(t){return"".concat(t," ").concat(e/1e3,"s ease-out")})}(o);return[Cn.dock,kn({transition:[].concat((0,fn.default)(m),[!l&&"opacity 0.01s linear ".concat(o/1e3,"s")]).filter(function(e){return e}).join(",")}),i,kn(n),u&&Cn.dockResizing,!l&&Cn.dockHidden,!l&&s]}(this.props,this.state)))),h=Object.assign.apply(Object,[{}].concat((0,fn.default)(function(e){var t;switch(e){case"left":t={right:-5,width:10,top:0,height:"100%",cursor:"col-resize"};break;case"right":t={left:-5,width:10,top:0,height:"100%",cursor:"col-resize"};break;case"top":t={bottom:-5,height:10,left:0,width:"100%",cursor:"row-resize"};break;case"bottom":t={top:-5,height:10,left:0,width:"100%",cursor:"row-resize"}}return[Cn.resizer,kn(t)]}(i))));return mn.default.createElement("div",{style:Object.assign({},Cn.wrapper,{zIndex:n})},"none"!==r&&!c&&mn.default.createElement("div",{style:u,onClick:this.handleDimClick}),mn.default.createElement("div",{style:d},mn.default.createElement("div",{style:h,onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown}),mn.default.createElement("div",{style:Cn.dockContent},"function"==typeof t?t({position:i,isResizing:a,size:l,isVisible:s}):t)))}}]),i}(mn.Component);(0,pn.default)(On,"propTypes",{position:gn.default.oneOf(["left","right","top","bottom"]),zIndex:gn.default.number,fluid:gn.default.bool,size:gn.default.number,defaultSize:gn.default.number,dimMode:gn.default.oneOf(["none","transparent","opaque"]),isVisible:gn.default.bool,onVisibleChange:gn.default.func,onSizeChange:gn.default.func,dimStyle:gn.default.object,dockStyle:gn.default.object,duration:gn.default.number}),(0,pn.default)(On,"defaultProps",{position:"left",zIndex:99999999,fluid:!0,defaultSize:.3,dimMode:"opaque",duration:200});var Mn=(0,s.f1)(a()),In="._4t3it4lq{height:calc(100% - 3pc)}",Dn="._vchhusvi{box-sizing:border-box}",jn="._1bsb1osq{width:100%}",Pn=Mn.default.createContext({selectedIndex:"state",onSelect:function(e){}}),Ln=function(e){var t=e.children;return Mn.default.createElement(Ot,null,Mn.default.createElement(Mt,null,["._1e0c1txw{display:flex}","._qtt8glyw{list-style:none}","._n7zl14jc{border-bottom:1px solid rgba(203,166,247,.2)}"]),Mn.default.createElement("div",{"data-test-id":"__prosemirror_devtools_tabs_buttons_container__",className:jt(["_1e0c1txw _qtt8glyw _n7zl14jc"])},t))},Nn=function(e){var t=e.children;return Mn.default.createElement(Ot,null,Mn.default.createElement(Mt,null,["._4t3i1osq{height:100%}",jn]),Mn.default.createElement("div",{"data-test-id":"__prosemirror_devtools_tabs_container__",className:jt(["_4t3i1osq _1bsb1osq"])},t))},Rn=function(e){var t=e.children,n=e.isSelected,r=e.onClick;return Mn.default.createElement(Ot,null,Mn.default.createElement(Mt,null,["._syaz5y2n{color:#cdd6f4}","._1p1dangw{text-transform:uppercase}","._1wybw1gv{font-size:13px}","._ca0q7vkz{padding-top:1pc}","._u5f31tcg{padding-right:24px}","._n3tddlk8{padding-bottom:14px}","._19bv1tcg{padding-left:24px}",Dn,"._uiztglyw{-webkit-user-select:none;-moz-user-select:none;user-select:none}","._n7zl13lm{border-bottom:var(--_1deexx)}","._d0altlke:hover{cursor:pointer}","._irr33ch5:hover{background-color:rgba(205,214,244,.05)}","._nt751r31:focus{outline-color:currentColor}","._49pcglyw:focus{outline-style:none}","._1hvw1o36:focus{outline-width:medium}"]),Mn.default.createElement("div",{onClick:r,className:jt(["_syaz5y2n _1p1dangw _1wybw1gv _ca0q7vkz _u5f31tcg _n3tddlk8 _19bv1tcg _vchhusvi _uiztglyw _n7zl13lm _d0altlke _irr33ch5 _nt751r31 _49pcglyw _1hvw1o36"]),style:{"--_1deexx":Pt(n?"2px solid ".concat(Rt.main):"none")}},t))};function Un(e){var t=e.index,n=e.children,r=(0,Mn.useContext)(Pn);return Mn.default.createElement(Rn,{isSelected:t===r.selectedIndex,onClick:function(){return r.onSelect(t)}},n)}function Bn(e){var t=(0,Mn.useContext)(Pn);return Mn.default.createElement(Ot,null,Mn.default.createElement(Mt,null,[jn,In,Dn]),Mn.default.createElement("div",{className:jt(["_1bsb1osq _4t3it4lq _vchhusvi"])},e.children({index:t.selectedIndex})))}function Fn(e){return Mn.default.createElement(Pn.Provider,{value:{onSelect:e.onSelect,selectedIndex:e.selectedIndex}},Mn.default.createElement(Nn,null,e.children))}var zn=(0,s.f1)(a()),$n=["jsonID","empty","anchor","from","head","to","$anchor","$head","$cursor","$to","$from"],qn={$from:["nodeAfter","nodeBefore","parent","textOffset","depth","pos"],$to:["nodeAfter","nodeBefore","parent","textOffset","depth","pos"]},Hn=["nodeAfter","nodeBefore","parent"];function Vn(e,t,n){return t.reduce(function(t,r){return n&&n[r]?t[r]=n[r].reduce(function(t,n){return t[n]=-1!==Hn.indexOf(n)&&e[r][n]?e[r][n].toJSON():e[r][n],t},{}):t["jsonID"===r?"type":r]=e[r],t},{})}function Wn(e){return Vn(e,$n.slice(0,6))}var Gn=(0,s.f1)(a()),Kn="._4t3i1osq{height:100%}",Jn=function(e){var t=e.children,n=e.testId;return Gn.default.createElement(Ot,null,Gn.default.createElement(Mt,null,["._1e0c1txw{display:flex}",Kn]),Gn.default.createElement("div",{"data-test-id":n,className:jt(["_1e0c1txw _4t3i1osq"])},t))},Xn=function(e){var t=e.children,n=e.sep,r=e.grow,i=e.noPaddings,s=e.minWidth,o=e.maxWidth;return Gn.default.createElement(Ot,null,Gn.default.createElement(Mt,null,["._vchhusvi{box-sizing:border-box}",Kn,"._1reo15zi{overflow-x:scroll}","._18m915zi{overflow-y:scroll}","._1kl7glyw{border-left:none}","._ca0q7vkz{padding-top:1pc}","._u5f3f6fq{padding-right:18px}","._n3tdf6fq{padding-bottom:18px}","._19bvf6fq{padding-left:18px}","._1kl79cqg{border-left:var(--_7sctaf)}","._16jlkb7n{flex-grow:1}","._ca0qidpf{padding-top:0}","._u5f3idpf{padding-right:0}","._n3tdidpf{padding-bottom:0}","._19bvidpf{padding-left:0}","._1ul9fx7m{min-width:var(--_74ww00)}","._p12f1mu9{max-width:var(--_1p7w3p2)}"]),Gn.default.createElement("div",{className:jt(["_vchhusvi _4t3i1osq _1reo15zi _18m915zi _1kl7glyw _ca0q7vkz _u5f3f6fq _n3tdf6fq _19bvf6fq",n&&"_1kl79cqg",r&&"_16jlkb7n",i&&"_ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf","_1ul9fx7m _p12f1mu9"]),style:{"--_7sctaf":Pt("1px solid "+Rt.main20),"--_74ww00":Pt(s?"".concat(s,"px"):"none"),"--_1p7w3p2":Pt(o?"".concat(o,"px"):"none")}},t))},Yn=(0,s.f1)(a()),Qn=(0,s.f1)(P()),Zn=(0,s.f1)(N()),er=(0,s.f1)(l()),tr=(0,s.f1)(h()),nr=(0,s.f1)(m()),rr=(0,s.f1)(g()),ir=(0,s.f1)(y()),sr=(0,s.f1)(v()),or=(0,s.f1)(F()),ar=(0,s.f1)(a()),lr=(0,s.f1)(D()),cr=(0,s.f1)(P()),ur=(0,s.f1)(v()),dr=(0,s.f1)(N()),hr=(0,s.f1)(a()),pr=(0,s.f1)(D()),fr=(0,s.f1)(P()),mr=(0,s.f1)(N()),gr=(0,s.f1)(a()),yr=(0,s.f1)(D()),vr=(0,s.f1)(l()),br=(0,s.f1)(h()),_r=(0,s.f1)(p()),wr=(0,s.f1)(m()),Sr=(0,s.f1)(g()),kr=(0,s.f1)(y()),Tr=(0,s.f1)(v()),xr=(0,s.f1)(T()),Er=(0,s.f1)(P()),Cr=(0,s.f1)(a()),Ar=(0,s.f1)(D()),Or=(0,s.f1)(P()),Mr=(0,s.f1)(a()),Ir=(0,s.f1)(D()),Dr=function(e){var t=e.styling,n=e.arrowStyle,r=e.expanded,i=e.nodeType,s=e.onClick;return Mr.default.createElement("div",(0,Or.default)({},t("arrowContainer",n),{onClick:s}),Mr.default.createElement("div",t(["arrow","arrowSign"],i,r,n),"","double"===n&&Mr.default.createElement("div",t(["arrowSign","arrowSignInner"]),"")))};Dr.propTypes={styling:Ir.default.func.isRequired,arrowStyle:Ir.default.oneOf(["single","double"]),expanded:Ir.default.bool.isRequired,nodeType:Ir.default.string.isRequired,onClick:Ir.default.func.isRequired},Dr.defaultProps={arrowStyle:"single"};var jr=Dr,Pr=(0,s.f1)(T());function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nr(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if("Object"===e){var o=Object.getOwnPropertyNames(t);n&&o.sort(!0===n?void 0:n),r={entries:(o=o.slice(i,s+1)).map(function(e){return{key:e,value:t[e]}})}}else if("Array"===e)r={entries:t.slice(i,s+1).map(function(e,t){return{key:t+i,value:e}})};else{var a,l=0,c=[],u=!0,d=function(e){return"function"==typeof e.set}(t),h=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(t);try{for(h.s();!(a=h.n()).done;){var p=a.value;if(l>s){u=!1;break}i<=l&&(d&&Array.isArray(p)?"string"==typeof p[0]||"number"==typeof p[0]?c.push({key:p[0],value:p[1]}):c.push({key:"[entry ".concat(l,"]"),value:{"[key]":p[0],"[value]":p[1]}}):c.push({key:l,value:p})),l++}}catch(e){h.e(e)}finally{h.f()}r={hasMore:!u,entries:c}}return r}function Rr(e,t,n){for(var r=[];t-e>n*n;)n*=n;for(var i=e;i<=t;i+=n)r.push({from:i,to:Math.min(t,i+n-1)});return r}var Ur=(0,s.f1)(P()),Br=(0,s.f1)(l()),Fr=(0,s.f1)(h()),zr=(0,s.f1)(p()),$r=(0,s.f1)(m()),qr=(0,s.f1)(g()),Hr=(0,s.f1)(y()),Vr=(0,s.f1)(v()),Wr=(0,s.f1)(a()),Gr=(0,s.f1)(D());var Kr=function(e){(0,$r.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,Hr.default)(t);if(n){var i=(0,Hr.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,qr.default)(this,e)});function i(e){var t;return(0,Br.default)(this,i),t=r.call(this,e),(0,Vr.default)((0,zr.default)(t),"handleClick",function(){t.setState({expanded:!t.state.expanded})}),t.state={expanded:!1},t}return(0,Fr.default)(i,[{key:"render",value:function(){var e=this.props,t=e.styling,n=e.from,r=e.to,i=e.renderChildNodes,s=e.nodeType;return this.state.expanded?Wr.default.createElement("div",t("itemRange",this.state.expanded),i(this.props,n,r)):Wr.default.createElement("div",(0,Ur.default)({},t("itemRange",this.state.expanded),{onClick:this.handleClick}),Wr.default.createElement(jr,{nodeType:s,styling:t,expanded:!1,onClick:this.handleClick,arrowStyle:"double"}),"".concat(n," ... ").concat(r))}}]),i}(Wr.default.Component);function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach(function(t){(0,Tr.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yr(e,t,n){var r=e.nodeType,i=e.data,s=e.collectionLimit,o=e.circularCache,a=e.keyPath,l=e.postprocessValue,c=e.sortObjectKeys,u=[];return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,o=Nr.bind(null,e,t,n);if(!r)return o().entries;var a,l=s<1/0,c=Math.min(s-i,function(e,t){return"Object"===e?Object.keys(t).length:"Array"===e?t.length:1/0}(e,t));if("Iterable"!==e){if(c<=r||r<7)return o(i,s).entries}else if(c<=r&&!l)return o(i,s).entries;if("Iterable"===e){var u=o(i,i+r-1),d=u.hasMore,h=u.entries;a=d?[].concat((0,Pr.default)(h),(0,Pr.default)(Rr(i+r,i+2*r-1,r))):h}else a=l?Rr(i,s,r):[].concat((0,Pr.default)(o(0,r-5).entries),(0,Pr.default)(Rr(r-4,c-5,r)),(0,Pr.default)(o(c-4,c-1).entries));return a}(r,i,c,s,t,n).forEach(function(t){if(void 0!==t.to)u.push(Cr.default.createElement(Kr,(0,Er.default)({},e,{key:"ItemRange--".concat(t.from,"-").concat(t.to),from:t.from,to:t.to,renderChildNodes:Yr})));else{var n=t.key,r=t.value,i=-1!==o.indexOf(r);u.push(Cr.default.createElement(Ei,(0,Er.default)({},e,{postprocessValue:l,collectionLimit:s,key:"Node--".concat(n),keyPath:[n].concat((0,xr.default)(a)),value:l(r),circularCache:[].concat((0,xr.default)(o),[r]),isCircular:i,hideRoot:!1})))}}),u}function Qr(e){return{expanded:!e.isCircular&&e.shouldExpandNode(e.keyPath,e.data,e.level)}}(0,Vr.default)(Kr,"propTypes",{styling:Gr.default.func.isRequired,from:Gr.default.number.isRequired,to:Gr.default.number.isRequired,renderChildNodes:Gr.default.func.isRequired,nodeType:Gr.default.string.isRequired});var Zr=function(e){(0,wr.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,kr.default)(t);if(n){var i=(0,kr.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,Sr.default)(this,e)});function i(e){var t;return(0,vr.default)(this,i),t=r.call(this,e),(0,Tr.default)((0,_r.default)(t),"handleClick",function(){t.props.expandable&&t.setState({expanded:!t.state.expanded})}),t.state=Qr(e),t}return(0,br.default)(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Qr(e);Qr(this.props).expanded!==t.expanded&&this.setState(t)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this;return!!Object.keys(e).find(function(t){return"circularCache"!==t&&("keyPath"===t?e[t].join("/")!==n.props[t].join("/"):e[t]!==n.props[t])})||t.expanded!==this.state.expanded}},{key:"render",value:function(){var e=this.props,t=e.getItemString,n=e.nodeTypeIndicator,r=e.nodeType,i=e.data,s=e.hideRoot,o=e.createItemString,a=e.styling,l=e.collectionLimit,c=e.keyPath,u=e.labelRenderer,d=e.expandable,h=this.state.expanded,p=h||s&&0===this.props.level?Yr(Xr(Xr({},this.props),{},{level:this.props.level+1})):null,f=t(r,i,Cr.default.createElement("span",a("nestedNodeItemType",h),n),o(i,l),c),m=[c,r,h,d];return s?Cr.default.createElement("li",a.apply(void 0,["rootNode"].concat(m)),Cr.default.createElement("ul",a.apply(void 0,["rootNodeChildren"].concat(m)),p)):Cr.default.createElement("li",a.apply(void 0,["nestedNode"].concat(m)),d&&Cr.default.createElement(jr,{styling:a,nodeType:r,expanded:h,onClick:this.handleClick}),Cr.default.createElement("label",(0,Er.default)({},a.apply(void 0,[["label","nestedNodeLabel"]].concat(m)),{onClick:this.handleClick}),u.apply(void 0,m)),Cr.default.createElement("span",(0,Er.default)({},a.apply(void 0,["nestedNodeItemString"].concat(m)),{onClick:this.handleClick}),f),Cr.default.createElement("ul",a.apply(void 0,["nestedNodeChildren"].concat(m)),p))}}]),i}(Cr.default.Component);(0,Tr.default)(Zr,"propTypes",{getItemString:Ar.default.func.isRequired,nodeTypeIndicator:Ar.default.any,nodeType:Ar.default.string.isRequired,data:Ar.default.any,hideRoot:Ar.default.bool.isRequired,createItemString:Ar.default.func.isRequired,styling:Ar.default.func.isRequired,collectionLimit:Ar.default.number,keyPath:Ar.default.arrayOf(Ar.default.oneOfType([Ar.default.string,Ar.default.number])).isRequired,labelRenderer:Ar.default.func.isRequired,shouldExpandNode:Ar.default.func,level:Ar.default.number.isRequired,sortObjectKeys:Ar.default.oneOfType([Ar.default.func,Ar.default.bool]),isCircular:Ar.default.bool,expandable:Ar.default.bool}),(0,Tr.default)(Zr,"defaultProps",{data:[],circularCache:[],level:0,expandable:!0});var ei=["data"];function ti(e){var t=Object.getOwnPropertyNames(e).length;return"".concat(t," ").concat(1!==t?"keys":"key")}var ni=function(e){var t=e.data,n=(0,mr.default)(e,ei);return gr.default.createElement(Zr,(0,fr.default)({},n,{data:t,nodeType:"Object",nodeTypeIndicator:"Error"===n.nodeType?"Error()":"{}",createItemString:ti,expandable:Object.getOwnPropertyNames(t).length>0}))};ni.propTypes={data:yr.default.object,nodeType:yr.default.string.isRequired};var ri=ni,ii=(0,s.f1)(P()),si=(0,s.f1)(N()),oi=(0,s.f1)(a()),ai=(0,s.f1)(D()),li=["data"];function ci(e){return"".concat(e.length," ").concat(1!==e.length?"items":"item")}var ui=function(e){var t=e.data,n=(0,si.default)(e,li);return oi.default.createElement(Zr,(0,ii.default)({},n,{data:t,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:ci,expandable:t.length>0}))};ui.propTypes={data:ai.default.array};var di=ui,hi=(0,s.f1)(P()),pi=(0,s.f1)(a());function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mi(e,t){var n=0,r=!1;if(Number.isSafeInteger(e.size))n=e.size;else{var i,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(e);try{for(s.s();!(i=s.n()).done;){if(i.value,t&&n+1>t){r=!0;break}n+=1}}catch(e){s.e(e)}finally{s.f()}}return"".concat(r?">":"").concat(n," ").concat(1!==n?"entries":"entry")}var gi=function(e){var t=(0,hi.default)({},e);return pi.default.createElement(Zr,(0,hi.default)({},t,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:mi}))},yi=(0,s.f1)(T()),vi=(0,s.f1)(a()),bi=(0,s.f1)(D()),_i=function(e){var t=e.nodeType,n=e.styling,r=e.labelRenderer,i=e.keyPath,s=e.valueRenderer,o=e.value,a=e.valueGetter,l=void 0===a?function(e){return e}:a;return vi.default.createElement("li",n("value",t,i),vi.default.createElement("label",n(["label","valueLabel"],t,i),r(i,t,!1,!1)),vi.default.createElement("span",n("valueText",t,i),s.apply(void 0,[l(o),o].concat((0,yi.default)(i)))))};_i.propTypes={nodeType:bi.default.string.isRequired,styling:bi.default.func.isRequired,labelRenderer:bi.default.func.isRequired,keyPath:bi.default.arrayOf(bi.default.oneOfType([bi.default.string,bi.default.number]).isRequired).isRequired,valueRenderer:bi.default.func.isRequired,value:bi.default.any,valueGetter:bi.default.func};var wi=_i,Si=["getItemString","keyPath","labelRenderer","styling","value","valueRenderer","isCustomNode"];function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach(function(t){(0,ur.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xi=function(e){var t,n,r=e.getItemString,i=e.keyPath,s=e.labelRenderer,o=e.styling,a=e.value,l=e.valueRenderer,c=e.isCustomNode,u=(0,dr.default)(e,Si),d=c(a)?"Custom":(t=a,"Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&"function"==typeof t[Symbol.iterator]?"Iterable":"Custom"===n&&t.constructor!==Object&&t instanceof Object?"Object":n),h={getItemString:r,key:i[0],keyPath:i,labelRenderer:s,nodeType:d,styling:o,value:a,valueRenderer:l},p=Ti(Ti(Ti({},u),h),{},{data:a,isCustomNode:c});switch(d){case"Object":case"Error":case"WeakMap":case"WeakSet":return hr.default.createElement(ri,p);case"Array":return hr.default.createElement(di,p);case"Iterable":case"Map":case"Set":return hr.default.createElement(gi,p);case"String":return hr.default.createElement(wi,(0,cr.default)({},h,{valueGetter:function(e){return'"'.concat(e,'"')}}));case"Number":case"Custom":return hr.default.createElement(wi,h);case"Boolean":return hr.default.createElement(wi,(0,cr.default)({},h,{valueGetter:function(e){return e?"true":"false"}}));case"Date":return hr.default.createElement(wi,(0,cr.default)({},h,{valueGetter:function(e){return e.toISOString()}}));case"Null":return hr.default.createElement(wi,(0,cr.default)({},h,{valueGetter:function(){return"null"}}));case"Undefined":return hr.default.createElement(wi,(0,cr.default)({},h,{valueGetter:function(){return"undefined"}}));case"Function":case"Symbol":return hr.default.createElement(wi,(0,cr.default)({},h,{valueGetter:function(e){return e.toString()}}));default:return hr.default.createElement(wi,(0,cr.default)({},h,{valueGetter:function(){return"<".concat(d,">")}}))}};xi.propTypes={getItemString:pr.default.func.isRequired,keyPath:pr.default.arrayOf(pr.default.oneOfType([pr.default.string,pr.default.number]).isRequired).isRequired,labelRenderer:pr.default.func.isRequired,styling:pr.default.func.isRequired,value:pr.default.any,valueRenderer:pr.default.func.isRequired,isCustomNode:pr.default.func.isRequired};var Ei=xi,Ci=(0,s.f1)(v()),Ai=(0,s.f1)(c()),Oi=(0,s.f1)(v()),Mi=(0,s.f1)(F()),Ii=(0,s.f1)(Te()),Di=(0,s.f1)(Oe()),ji=(0,s.f1)(Me());function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach(function(t){(0,Oi.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ni=Ii.default,Ri=Object.keys(Ni),Ui=function(e){return function(t){return{className:[t.className,e.className].filter(Boolean).join(" "),style:Li(Li({},t.style||{}),e.style||{})}}},Bi=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(null===t)return e;Array.isArray(t)||(t=[t]);var s=t.map(function(t){return e[t]}).filter(Boolean).reduce(function(e,t){return"string"==typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===(0,Ai.default)(t)?e.style=Li(Li({},e.style),t):"function"==typeof t&&(e=Li(Li({},e),t.apply(void 0,[e].concat(r)))),e},{className:"",style:{}});return s.className||delete s.className,0===Object.keys(s.style).length&&delete s.style,s},Fi=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=/^base/.test(n)?(r=e[n],s=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[.299*t+.587*n+.114*r,-.14713*t+-.28886*n+.436*r,.615*t+-.51499*n+-.10001*r]}((0,Di.default)(r).array()),o=(0,Mi.default)(s,3),l=[(i=o[0],i<.25?1:i<.5?.9-i:1.1-i),o[1],o[2]],h=l[0],p=l[1],f=l[2],c=1*h+0*p+1.13983*f,u=1*h+-.39465*p+-.5806*f,d=1*h+2.02311*p+0*f,a=[255*(c=Math.min(Math.max(0,c),1)),255*(u=Math.min(Math.max(0,u),1)),255*(d=Math.min(Math.max(0,d),1))],Di.default.rgb(a).hex()):"scheme"===n?e[n]+":inverted":e[n],t;var r,i,s,o,a,l,c,u,d,h,p,f},{})},zi=(0,ji.default)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.defaultBase16,i=void 0===r?Ni:r,s=t.base16Themes,o=qi(n,void 0===s?null:s);o&&(n=Li(Li({},o),n));for(var a=Ri.reduce(function(e,t){return e[t]=n[t]||i[t],e},{}),l=function(e,t){var n=Object.keys(t);for(var r in e)-1===n.indexOf(r)&&n.push(r);return n.reduce(function(n,r){return n[r]=function(e,t){if(void 0===e)return t;if(void 0===t)return e;var n=(0,Ai.default)(e),r=(0,Ai.default)(t);switch(n){case"string":switch(r){case"string":return[t,e].filter(Boolean).join(" ");case"object":return Ui({className:e,style:t});case"function":return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return Ui({className:e})(t.apply(void 0,[n].concat(i)))}}break;case"object":switch(r){case"string":return Ui({className:t,style:e});case"object":return Li(Li({},t),e);case"function":return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return Ui({style:e})(t.apply(void 0,[n].concat(i)))}}break;case"function":switch(r){case"string":return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return e.apply(void 0,[Ui(n)({className:t})].concat(i))};case"object":return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return e.apply(void 0,[Ui(n)({style:t})].concat(i))};case"function":return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return e.apply(void 0,[t.apply(void 0,[n].concat(i))].concat(i))}}}}(e[r],t[r]),n},{})}(Object.keys(n).reduce(function(e,t){return-1===Ri.indexOf(t)?(e[t]=n[t],e):e},{}),e(a)),c=arguments.length,u=new Array(c>3?c-3:0),d=3;d<c;d++)u[d-3]=arguments[d];return(0,ji.default)(Bi,2).apply(void 0,[l].concat(u))},3),$i=function(e){return!!e.extend},qi=function(e,t){if(e&&$i(e)&&e.extend&&(e=e.extend),"string"==typeof e){var n=e.split(":"),r=(0,Mi.default)(n,2),i=r[0],s=r[1];e=t?t[i]:Ii[i],"inverted"===s&&(e=Fi(e))}return e&&Object.prototype.hasOwnProperty.call(e,"base00")?e:void 0};function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach(function(t){(0,Ci.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Wi=function(e){return{String:e.STRING_COLOR,Date:e.DATE_COLOR,Number:e.NUMBER_COLOR,Boolean:e.BOOLEAN_COLOR,Null:e.NULL_COLOR,Undefined:e.UNDEFINED_COLOR,Function:e.FUNCTION_COLOR,Symbol:e.SYMBOL_COLOR}},Gi=zi(function(e){var t=function(e){return{BACKGROUND_COLOR:e.base00,TEXT_COLOR:e.base07,STRING_COLOR:e.base0B,DATE_COLOR:e.base0B,NUMBER_COLOR:e.base09,BOOLEAN_COLOR:e.base09,NULL_COLOR:e.base08,UNDEFINED_COLOR:e.base08,FUNCTION_COLOR:e.base08,SYMBOL_COLOR:e.base08,LABEL_COLOR:e.base0D,ARROW_COLOR:e.base0D,ITEM_STRING_COLOR:e.base0B,ITEM_STRING_EXPANDED_COLOR:e.base03}}(e);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:t.BACKGROUND_COLOR},value:function(e,t,n){return{style:Vi(Vi({},e.style),{},{paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:n.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"})}},label:{display:"inline-block",color:t.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:function(e,n){return{style:Vi(Vi({},e.style),{},{color:Wi(t)[n]})}},itemRange:function(e,n){return{style:{paddingTop:n?0:"0.25em",cursor:"pointer",color:t.LABEL_COLOR}}},arrow:function(e,t,n){return{style:Vi(Vi({},e.style),{},{marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:n?"rotateZ(90deg)":"rotateZ(0deg)",transform:n?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"})}},arrowContainer:function(e,t){return{style:Vi(Vi({},e.style),{},{display:"inline-block",paddingRight:"0.5em",paddingLeft:"double"===t?"1em":0,cursor:"pointer"})}},arrowSign:{color:t.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:function(e,t,n,r,i){return{style:Vi(Vi({},e.style),{},{position:"relative",paddingTop:"0.25em",marginLeft:t.length>1?"0.875em":0,paddingLeft:i?0:"1.125em"})}},rootNode:{padding:0,margin:0},nestedNodeLabel:function(e,t,n,r,i){return{style:Vi(Vi({},e.style),{},{margin:0,padding:0,WebkitUserSelect:i?"inherit":"text",MozUserSelect:i?"inherit":"text",cursor:i?"pointer":"default"})}},nestedNodeItemString:function(e,n,r,i){return{style:Vi(Vi({},e.style),{},{paddingLeft:"0.5em",cursor:"default",color:i?t.ITEM_STRING_EXPANDED_COLOR:t.ITEM_STRING_COLOR})}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:function(e,t,n){return{style:Vi(Vi({},e.style),{},{padding:0,margin:0,listStyle:"none",display:n?"block":"none"})}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}},{defaultBase16:{scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"}}),Ki=["data","keyPath","postprocessValue","hideRoot","theme","invertTheme"];function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach(function(t){(0,sr.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Yi=function(e){return e};function Qi(e){var t=function(e,t){var n={getArrowStyle:"arrow",getListStyle:"nestedNodeChildren",getItemStringStyle:"nestedNodeItemString",getLabelStyle:"label",getValueStyle:"valueText"},r=Object.keys(n).filter(function(e){return t[e]});return r.length>0&&(e="string"==typeof e?{extend:e}:Xi({},e),r.forEach(function(r){console.error('Styling method "'.concat(r,'" is deprecated, use "theme" property instead')),e[n[r]]=function(e){for(var n=e.style,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return{style:Xi(Xi({},n),t[r].apply(t,s))}}})),e}(e.theme,e);return e.invertTheme&&(t=function(e){return"string"==typeof e?"".concat(e,":inverted"):e&&$i(e)&&e.extend?"string"==typeof e.extend?Li(Li({},e),{},{extend:"".concat(e.extend,":inverted")}):Li(Li({},e),{},{extend:Fi(e.extend)}):e?Fi(e):e}(t)),{styling:Gi(t)}}var Zi=function(e){(0,nr.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,ir.default)(t);if(n){var i=(0,ir.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,rr.default)(this,e)});function i(e){var t;return(0,er.default)(this,i),(t=r.call(this,e)).state=Qi(e),t}return(0,tr.default)(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;["theme","invertTheme"].find(function(n){return e[n]!==t.props[n]})&&this.setState(Qi(e))}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!!Object.keys(e).find(function(n){return"keyPath"===n?e[n].join("/")!==t.props[n].join("/"):e[n]!==t.props[n]})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.keyPath,r=e.postprocessValue,i=e.hideRoot,s=(e.theme,e.invertTheme,(0,Zn.default)(e,Ki)),o=this.state.styling;return ar.default.createElement("ul",o("tree"),ar.default.createElement(Ei,(0,Qn.default)({},Xi({postprocessValue:r,hideRoot:i,styling:o},s),{keyPath:i?[]:n,value:r(t)})))}}]),i}(ar.default.Component);function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},es.apply(this,arguments)}function ts(e){return Yn.default.createElement(Zi,es({invertTheme:!1,theme:Nt,hideRoot:!0},e))}(0,sr.default)(Zi,"propTypes",{data:lr.default.any,hideRoot:lr.default.bool,theme:lr.default.oneOfType([lr.default.object,lr.default.string]),invertTheme:lr.default.bool,keyPath:lr.default.arrayOf(lr.default.oneOfType([lr.default.string,lr.default.number])),postprocessValue:lr.default.func,sortObjectKeys:lr.default.oneOfType([lr.default.func,lr.default.bool])}),(0,sr.default)(Zi,"defaultProps",{shouldExpandNode:function(e,t,n){return 0===n},hideRoot:!1,keyPath:["root"],getItemString:function(e,t,n,r){return ar.default.createElement("span",null,n," ",r)},labelRenderer:function(e){var t=(0,or.default)(e,1)[0];return ar.default.createElement("span",null,t,":")},valueRenderer:Yi,postprocessValue:Yi,isCustomNode:function(){return!1},collectionLimit:50,invertTheme:!0});var ns=(0,s.f1)(a()),rs="._1p1dangw{text-transform:uppercase}",is="._1dyzt94y{letter-spacing:1px}",ss="._k48p1nn1{font-weight:400}",os="._otyridpf{margin-bottom:0}",as=function(e){var t=e.children;return ns.default.createElement(Ot,null,ns.default.createElement(Mt,null,["._syaz1ds0{color:#b4befe}","._ca0qidpf{padding-top:0}","._u5f3idpf{padding-right:0}","._n3tdidpf{padding-bottom:0}","._19bvidpf{padding-left:0}","._19pkidpf{margin-top:0}","._2hwxidpf{margin-right:0}",os,"._18u0idpf{margin-left:0}",ss,is,"._1wybw1gv{font-size:13px}",rs,"._16jlkb7n{flex-grow:1}"]),ns.default.createElement("h2",{className:jt(["_syaz1ds0 _ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _19pkidpf _2hwxidpf _otyridpf _18u0idpf _k48p1nn1 _1dyzt94y _1wybw1gv _1p1dangw _16jlkb7n"])},t))},ls=function(e){var t=e.children;return ns.default.createElement(Ot,null,ns.default.createElement(Mt,null,["._1e0c1txw{display:flex}"]),ns.default.createElement("div",{className:jt(["_1e0c1txw"])},t))},cs=function(e){var t=e.children,n=e.onClick;return ns.default.createElement(Ot,null,ns.default.createElement(Mt,null,["._ca0qi2wt{padding-top:6px}","._u5f319bv{padding-right:10px}","._n3tdi2wt{padding-bottom:6px}","._19bv19bv{padding-left:10px}","._19pkyjp0{margin-top:-6px}","._2hwx14id{margin-right:-10px}",os,"._18u0ftgi{margin-left:8px}",ss,is,"._1wyb1skh{font-size:11px}","._syazryvq{color:rgba(205,214,244,.8)}",rs,"._v564111k{transition:background .3s,color .3s}","._2rkoyh40{border-radius:2px}","._19itglyw{border:none}","._11q71j28{background:transparent}","._irr31wye:hover{background-color:rgba(203,166,247,.4)}","._30l35y2n:hover{color:#cdd6f4}","._d0altlke:hover{cursor:pointer}","._nt751r31:focus{outline-color:currentColor}","._49pcglyw:focus{outline-style:none}","._1hvw1o36:focus{outline-width:medium}","._1di61emw:active{background-color:rgba(203,166,247,.6)}"]),ns.default.createElement("button",{onClick:n,className:jt(["_ca0qi2wt _u5f319bv _n3tdi2wt _19bv19bv _19pkyjp0 _2hwx14id _otyridpf _18u0ftgi _k48p1nn1 _1dyzt94y _1wyb1skh _syazryvq _1p1dangw _v564111k _2rkoyh40 _19itglyw _11q71j28 _irr31wye _30l35y2n _d0altlke _nt751r31 _49pcglyw _1hvw1o36 _1di61emw"])},t))},us=ct(null),ds=ct(function(e){var t=e(us);return t?function(e){var t=e.selection,n=[];return t.empty?n=t.$from.marks():e.doc.nodesBetween(t.from,t.to,function(e){n=n.concat(e.marks)}),n.reduce(function(e,t){return-1===e.indexOf(t)&&e.push(t),e},[]).map(function(e){return e.toJSON()})}(t):[]}),hs=ct([]);function ps(e){return function(e){if(Array.isArray(e))return fs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fs(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ms(e,t,n){if(n===t)return e;var r=t.content;if(!r||!r.content)return null;var i=r.content.map(function(t,r){return ms([].concat(ps(e),["content",r]),t,n)}).filter(function(e){return Array.isArray(e)&&e.length})[0];return i}function gs(e,t){var n=ms([],e,t);if(n)return n.reduce(function(e,t){return"content"===t&&"content"===e[e.length-1]||e.push(t),e},[])}function ys(e,t,n){if(n===t)return e;if(!t.content)return[];if(t.content===n)return e.concat("content");var r=t.content.map(function(t,r){return ys([].concat(ps(e),["content",r]),t,n)}).filter(function(e){return Array.isArray(e)&&e.length})[0];return r}function vs(e){for(var t,n=e;!t&&n;)n.pmViewDesc&&(t=n),n=n.parentNode;return t}var bs=function(e){return function(t){var n=t.doc,r=t.node,i=e.doc,s=ys([],n,r);s?console.log(s.reduce(function(e,t){return e[t]},i.toJSON())):console.log(r)}};function _s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ws=function(e){var t=e.children;return zn.default.createElement(Ot,null,zn.default.createElement(Mt,null,["._ca0qidpf{padding-top:0}","._u5f3idpf{padding-right:0}","._n3tdrdoj{padding-bottom:9px}","._19bvidpf{padding-left:0}","._1reo15vq{overflow-x:hidden}","._18m915vq{overflow-y:hidden}"]),zn.default.createElement("div",{className:jt(["_ca0qidpf _u5f3idpf _n3tdrdoj _19bvidpf _1reo15vq _18m915vq"])},t))},Ss=function(e){var t=e.children;return zn.default.createElement(Ot,null,zn.default.createElement(Mt,null,["._1ul9mgvx{min-width:180px}","._vchhusvi{box-sizing:border-box}","._129lrdoj+._129lrdoj{padding-top:9px}"]),zn.default.createElement("div",{className:jt(["_1ul9mgvx _vchhusvi _129lrdoj"])},t))},ks=function(e){var t=e.children;return zn.default.createElement(Ot,null,zn.default.createElement(Mt,null,["._19pkhage{margin-top:.5em}","._2hwxidpf{margin-right:0}","._otyrhage{margin-bottom:.5em}","._18u01x4e{margin-left:1em}"]),zn.default.createElement("div",{className:jt(["_19pkhage _2hwxidpf _otyrhage _18u01x4e"])},t))},Ts=function(e){var t=e.children;return zn.default.createElement(Ot,null,zn.default.createElement(Mt,null,["._ca0qpd1z{padding-top:.25em}"]),zn.default.createElement("div",{className:jt(["_ca0qpd1z"])},t))},xs=function(e){var t=e.children;return zn.default.createElement(Ot,null,zn.default.createElement(Mt,null,["._1e0c1o8l{display:inline-block}","._syazx4b6{color:#89dceb}","._19pkidpf{margin-top:0}","._2hwxhage{margin-right:.5em}","._otyridpf{margin-bottom:0}","._18u0idpf{margin-left:0}"]),zn.default.createElement("div",{className:jt(["_1e0c1o8l _syazx4b6 _19pkidpf _2hwxhage _otyridpf _18u0idpf"])},t))},Es=function(e){var t=e.children;return zn.default.createElement(Ot,null,zn.default.createElement(Mt,null,["._syazonp9{color:#fab387}"]),zn.default.createElement("div",{className:jt(["_syazonp9"])},t))},Cs=function(e){var t=e.children,n=e.onClick;return zn.default.createElement(Ot,null,zn.default.createElement(Mt,null,["._syaz4yqd{color:rgba(205,214,244,.6)}","._11q7glyw{background:none}","._19itglyw{border:none}","._v564111k{transition:background .3s,color .3s}","._2rko1l7b{border-radius:3px}","._d0altlke:hover{cursor:pointer}","._irr31wye:hover{background-color:rgba(203,166,247,.4)}","._30l35y2n:hover{color:#cdd6f4}","._nt751r31:focus{outline-color:currentColor}","._49pcglyw:focus{outline-style:none}","._1hvw1o36:focus{outline-width:medium}"]),zn.default.createElement("button",{"data-test-id":"__prosemirror_devtools_log_node_button__",onClick:n,className:jt(["_syaz4yqd _11q7glyw _19itglyw _v564111k _2rko1l7b _d0altlke _irr31wye _30l35y2n _nt751r31 _49pcglyw _1hvw1o36"])},t))};function As(e,t){return function(n,r,i,s){var o=zn.default.createElement(Cs,{onClick:function(n){n.preventDefault(),n.stopPropagation(),t({doc:e,node:r})}},"log");return"Object"===n&&r.type?zn.default.createElement("span",null,"{} ",r.type," ",o):zn.default.createElement("span",null,zn.default.createElement(zn.default.Fragment,null,i," ",s," ",o))}}function Os(e,t,n,r){return"Object"===e&&t.type?zn.default.createElement("span",null,"{} ",t.type):zn.default.createElement("span",null,zn.default.createElement(zn.default.Fragment,null,n," ",r))}var Ms=ct(!1);function Is(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ht(Ms),2),t=e[0],n=e[1],r=ut(ds),i=ut(hs),s=ut(us),o=null==s?void 0:s.doc.toJSON();if(!s)return null;var a,l=bs(s);return zn.default.createElement(Jn,{testId:"__prosemirror_devtools_tabs_state__"},zn.default.createElement(Xn,{grow:!0},zn.default.createElement(ls,null,zn.default.createElement(as,null,"Current Doc"),zn.default.createElement(cs,{onClick:function(){return console.log(s)}},"Log State")),zn.default.createElement(ts,{data:o,hideRoot:!0,getItemString:As(o,l),shouldExpandNode:function(e){return function(e,t){var n=[].concat(t).reverse();return!(!e||n.length>e.length||n.join(".")!==e.join(".")&&!n.every(function(t,n){return t===e[n]}))}(i,e)}})),zn.default.createElement(Xn,{sep:!0,minWidth:220},zn.default.createElement(Ss,null,zn.default.createElement(ls,null,zn.default.createElement(as,null,"Selection"),zn.default.createElement(cs,{onClick:function(){return n(!t)}},t?"":"")),zn.default.createElement(ws,null,zn.default.createElement(ts,{data:t?(a=s.selection,Vn(a,$n,qn)):Wn(s.selection),hideRoot:!0}))),zn.default.createElement(Ss,null,zn.default.createElement(as,null,"Active Marks"),zn.default.createElement(ws,null,r.length?zn.default.createElement(ts,{data:r,hideRoot:!0,getItemString:Os}):zn.default.createElement(ks,null,zn.default.createElement(Ts,null,zn.default.createElement(xs,null,"no active marks"))))),zn.default.createElement(Ss,null,zn.default.createElement(as,null,"Document Stats"),zn.default.createElement(ks,null,zn.default.createElement(Ts,null,zn.default.createElement(xs,null,"nodeSize:"),zn.default.createElement(Es,null,s.doc.nodeSize)),zn.default.createElement(Ts,null,zn.default.createElement(xs,null,"childCount:"),zn.default.createElement(Es,null,s.doc.childCount))))))}var Ds=(0,s.f1)(a()),js=(0,s.f1)(a()),Ps=function(e){var t=e.children;return js.default.createElement(Ot,null,js.default.createElement(Mt,null,["._kqswh2mm{position:relative}","._154i1ssb{top:50%}","._t9ec1i34{transform:translateY(-50%)}","._y3gn1h6o{text-align:center}","._syaz1u6e{color:#cba6f7}","._1wybdlk8{font-size:14px}"]),js.default.createElement("div",{className:jt(["_kqswh2mm _154i1ssb _t9ec1i34 _y3gn1h6o _syaz1u6e _1wybdlk8"])},t))},Ls=(0,s.f1)(a());function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ns.apply(this,arguments)}var Rs="._1e0crqpp{display:var(--_1a5yx7a)}";function Us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bs=function(){},Fs=function(e){var t=e.background?e.background(e):e.isSelected?Rt.main40:"transparent";return Ls.default.createElement(Ot,null,Ls.default.createElement(Mt,null,["._11q7izeb{background:var(--_1k9t07z)}","._19itglyw{border:none}","._vchhusvi{box-sizing:border-box}","._syazryvq{color:rgba(205,214,244,.8)}","._1e0c1txw{display:flex}","._ect4k7ds{font-family:monospace}","._1wyb1skh{font-size:11px}","._k48p1nn1{font-weight:400}","._1dyzt94y{letter-spacing:1px}","._19pkidpf{margin-top:0}","._2hwxidpf{margin-right:0}","._otyridpf{margin-bottom:0}","._18u0idpf{margin-left:0}","._1ul913i4{min-width:190px}","._tzy4139p{opacity:var(--_yl51qy)}","._ca0qi2wt{padding-top:6px}","._u5f3f6fq{padding-right:18px}","._n3tdi2wt{padding-bottom:6px}","._19bvf6fq{padding-left:18px}","._19bvnm8a{padding-left:var(--_1hdy39e)}","._y3gn1e5h{text-align:left}","._1p1dangw{text-transform:uppercase}","._v5641y8x{transition:background .3s}","._1bsb1osq{width:100%}","._w41414jc+._w41414jc{border-top:1px solid rgba(203,166,247,.2)}","._irr31wye:hover{background-color:rgba(203,166,247,.4)}","._30l35y2n:hover{color:#cdd6f4}","._d0altlke:hover{cursor:pointer}","._nt751r31:focus{outline-color:currentColor}","._49pcglyw:focus{outline-style:none}","._1hvw1o36:focus{outline-width:medium}","._1di61emw:active{background-color:rgba(203,166,247,.6)}"]),Ls.default.createElement("div",{"data-test-id":"__prosemirror_devtools_list_item".concat(e.isDimmed?"_inactive":"","__"),onClick:e.onClick,onDoubleClick:e.onDoubleClick,className:jt(["_11q7izeb _19itglyw _vchhusvi _syazryvq _1e0c1txw _ect4k7ds _1wyb1skh _k48p1nn1 _1dyzt94y _19pkidpf _2hwxidpf _otyridpf _18u0idpf _1ul913i4 _tzy4139p _ca0qi2wt _u5f3f6fq _n3tdi2wt _19bvf6fq _19bvnm8a _y3gn1e5h _1p1dangw _v5641y8x _1bsb1osq _w41414jc _irr31wye _30l35y2n _d0altlke _nt751r31 _49pcglyw _1hvw1o36 _1di61emw"]),style:{"--_1k9t07z":Pt(t),"--_yl51qy":Pt(e.isDimmed?.3:1),"--_1hdy39e":Pt(e.nested?"36px":"18px")}},e.children))};function zs(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Us(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Ls.default.useState(!1),2),n=t[0],r=t[1],i=e.items,s=e.groupTitle,o=void 0===s?Bs:s,a=e.title,l=e.isSelected,c=void 0===l?Bs:l,u=e.isPrevious,d=void 0===u?Bs:u,h=e.isDimmed,p=void 0===h?Bs:h,f=e.getKey,m=void 0===f?Bs:f,g=e.onListItemClick,y=void 0===g?Bs:g,v=e.onListItemDoubleClick,b=void 0===v?Bs:v,_=e.customItemBackground;return Ls.default.createElement("div",null,Ls.default.createElement(Fs,{key:m(i[0]),onClick:function(){return r(!n)},isSelected:i.some(c)&&n,isPrevious:d(i[0],0)&&n,isDimmed:i.every(p),background:_},Ls.default.createElement("div",{style:{flexGrow:1}},o(i,0)),Ls.default.createElement("div",null,n?"":"")),Ls.default.createElement(Ot,null,Ls.default.createElement(Mt,null,[Rs]),Ls.default.createElement("div",{className:jt(["_1e0crqpp"]),style:{"--_1a5yx7a":Pt(n?"none":"block")}},(i||[]).map(function(e,t){return Ls.default.createElement(Fs,{key:m(e),nested:!0,isSelected:c(e,t),isPrevious:d(e,t),isDimmed:p(e,t),background:_,onClick:function(){return y(e,t)},onDoubleClick:function(){return b(e,t)}},a(e,t))}))))}function $s(e){var t=e.isSelected,n=void 0===t?Bs:t,r=e.isPrevious,i=void 0===r?Bs:r,s=e.isDimmed,o=void 0===s?Bs:s,a=e.getKey,l=void 0===a?Bs:a,c=e.onListItemClick,u=void 0===c?Bs:c,d=e.onListItemDoubleClick,h=void 0===d?Bs:d;return Ls.default.createElement("div",null,(e.items||[]).map(function(t,r){return Array.isArray(t)?Ls.default.createElement(zs,Ns({},e,{items:t,key:t[0].timestamp}),(e.groupTitle||Bs)(t,r)):Ls.default.createElement(Fs,{key:l(t),isSelected:n(t,r),isPrevious:i(t,r),isDimmed:o(t,r),background:e.customItemBackground,onClick:function(){return u(t,r)},onDoubleClick:function(){return h(t,r)}},e.title(t,r))}))}var qs=(0,s.f1)(a()),Hs="._1tke1ar4{min-height:1ex}",Vs="._azhwidpf{text-indent:0}",Ws="._19bv1l7b{padding-left:3px}",Gs="._n3tdyh40{padding-bottom:2px}",Ks="._u5f31l7b{padding-right:3px}",Js="._ca0qt94y{padding-top:1px}",Xs="._bfhk7woi{background-color:rgba(205,214,244,.2)}",Ys="._1e0c1o8l{display:inline-block}",Qs=function(e){var t=e.children;return qs.default.createElement(Ot,null,qs.default.createElement(Mt,null,["._syaz1u6e{color:#cba6f7}"]),qs.default.createElement("span",{className:jt(["_syaz1u6e"])},t))},Zs=function(e){var t=e.children;return qs.default.createElement(Ot,null,qs.default.createElement(Mt,null,["._syaz5y2n{color:#cdd6f4}"]),qs.default.createElement("span",{className:jt(["_syaz5y2n"])},t))},eo=function(e){var t=e.children;return qs.default.createElement(Ot,null,qs.default.createElement(Mt,null,[Ys,Xs,"._syaz7i12{color:#f38ba8}",Js,Ks,Gs,Ws,Vs,"._4bfu1r31{text-decoration-color:currentColor}","._1hms1911{text-decoration-line:line-through}","._ajmmnqa1{text-decoration-style:solid}",Hs]),qs.default.createElement("span",{className:jt(["_1e0c1o8l _bfhk7woi _syaz7i12 _ca0qt94y _u5f31l7b _n3tdyh40 _19bv1l7b _azhwidpf _4bfu1r31 _1hms1911 _ajmmnqa1 _1tke1ar4"])},t))},to=function(e){var t=e.children;return qs.default.createElement(Ot,null,qs.default.createElement(Mt,null,[Ys,Xs,"._syazqv97{color:#a6e3a1}",Js,Ks,Gs,Ws,Vs,Hs]),qs.default.createElement("span",{className:jt(["_1e0c1o8l _bfhk7woi _syazqv97 _ca0qt94y _u5f31l7b _n3tdyh40 _19bv1l7b _azhwidpf _1tke1ar4"])},t))};function no(e){if(e&&"a"===e._t){var t={};for(var n in e)"_t"!==n&&("_"!==n[0]||e[n.substring(1)]?e["_"+n]?t[n]=[e["_"+n][0],e[n][0]]:e["_"+n]||"_"===n[0]||(t[n]=e[n]):t[n.substring(1)]=e[n]);return t}return e}function ro(e){return e[0]}function io(e){return"string"==typeof e?e:function(e){if(null===e)return"null";var t=JSON.stringify(e);return void 0===t?"undefined":t.length>22?"".concat(t.substr(0,15),"").concat(t.substr(-5)):t}(e)}function so(e){if(Array.isArray(e)){if(1===e.length)return qs.default.createElement(to,null,io(e[0]));if(2===e.length)return qs.default.createElement(Qs,null,qs.default.createElement(eo,null,io(e[0]))," =>"," ",qs.default.createElement(to,null,io(e[1])));if(3===e.length&&0===e[1]&&0===e[2])return qs.default.createElement(eo,null,io(e[0]));if(3===e.length&&2===e[2])return qs.default.createElement(Qs,null,'"',(t=e[0],t.split(/\n/gm).slice(1).map(function(e){return t={},n=e.startsWith("-")?"delete":e.startsWith("+")?"add":"raw",r=e.substr(1).replace(/\s/gm,""),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t;var t,n,r})).map(function(e){return e.delete?qs.default.createElement(eo,{key:e.delete+"delete"},e.delete):e.add?qs.default.createElement(to,{key:e.add+"add"},e.add):qs.default.createElement(Zs,{key:e.raw+"raw"},e.raw)}),'"')}var t;return""+e}function oo(e,t,n,r){return"Object"===e?qs.default.createElement("span",null,"{}"):qs.default.createElement("span",null,qs.default.createElement(qs.default.Fragment,null,n," ",r))}function ao(e){return e.delta?qs.default.createElement(ts,{data:e.delta,hideRoot:!0,postprocessValue:no,labelRenderer:ro,valueRenderer:so,isCustomNode:Array.isArray,getItemString:oo,shouldExpandNode:function(){return!0}}):null}var lo=(0,s.f1)(a()),co=function(e){var t=e.children,n=e.__html;return lo.default.createElement(Ot,null,lo.default.createElement(Mt,null,["._ca0q1vy9{padding-top:9px!important}","._u5f3grf3{padding-right:0!important}","._n3td1o4j{padding-bottom:18px!important}","._19bvgrf3{padding-left:0!important}","._19pkidpf{margin-top:0}","._2hwxidpf{margin-right:0}","._otyridpf{margin-bottom:0}","._18u0idpf{margin-left:0}","._syazryvq{color:rgba(205,214,244,.8)}","._key71u6e .prosemirror-dev-tools-highlighter-tag{color:#cba6f7}"]),lo.default.createElement("pre",{dangerouslySetInnerHTML:{__html:n},className:jt(["_ca0q1vy9 _u5f3grf3 _n3td1o4j _19bvgrf3 _19pkidpf _2hwxidpf _otyridpf _18u0idpf _syazryvq _key71u6e"])},t))},uo=/(&lt;\/?[\w\d\s="']+&gt;)/gim,ho=function(e){return e.children?lo.default.createElement(co,{__html:(t=e.children,t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(uo,"<span class='prosemirror-dev-tools-highlighter-tag'>$&</span>"))}):null;var t},po=(0,s.f1)(Ie());function fo(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let e=0;i.text[e]==s.text[e];e++)n++;return n}if(i.content.size||s.content.size){let e=fo(i.content,s.content,n+1);if(null!=e)return e}n+=i.nodeSize}else n+=i.nodeSize}}function mo(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(0==i||0==s)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let e=0,t=Math.min(o.text.length,a.text.length);for(;e<t&&o.text[o.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let e=mo(o.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}var go=class e{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,i){for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;if(l>e&&!1!==n(a,r+o,i||null,s)&&a.content.size){let i=o+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}o=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",s=!0;return this.nodesBetween(e,t,(o,a)=>{let l=o.isText?o.text.slice(Math.max(e,a)-a,t-a):o.isLeaf?r?"function"==typeof r?r(o):r:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&n&&(s?s=!1:i+=n),i+=l},0),i}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new e(i,this.size+t.size)}cut(t,n=this.size){if(0==t&&n==this.size)return this;let r=[],i=0;if(n>t)for(let e=0,s=0;s<n;e++){let o=this.content[e],a=s+o.nodeSize;a>t&&((s<t||a>n)&&(o=o.isText?o.cut(Math.max(0,t-s),Math.min(o.text.length,n-s)):o.cut(Math.max(0,t-s-1),Math.min(o.content.size,n-s-1))),r.push(o),i+=o.nodeSize),s=a}return new e(r,i)}cutByIndex(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new e(i,s)}addToStart(t){return new e([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new e(this.content.concat(t),this.size+t.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return fo(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return mo(this,e,t,n)}findIndex(e,t=-1){if(0==e)return vo(0,e);if(e==this.size)return vo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e)return i==e||t>0?vo(n+1,i):vo(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return e.empty;let n,r=0;for(let e=0;e<t.length;e++){let i=t[e];r+=i.nodeSize,e&&i.isText&&t[e-1].sameMarkup(i)?(n||(n=t.slice(0,e)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new e(n||t,r)}static from(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};go.empty=new go([],0);var yo={index:0,offset:0};function vo(e,t){return yo.index=e,yo.offset=t,yo}function bo(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!bo(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!bo(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}var _o=class e{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&bo(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];let n=t.slice();return n.sort((e,t)=>e.type.rank-t.type.rank),n}};_o.none=[];var wo=class extends Error{},So=class e{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=To(this.content,t+this.openStart,n);return r&&new e(r,this.openStart,this.openEnd)}removeBetween(t,n){return new e(ko(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(t,n){if(!n)return e.empty;let r=n.openStart||0,i=n.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new e(go.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let e=t.firstChild;e&&!e.isLeaf&&(n||!e.type.spec.isolating);e=e.firstChild)r++;for(let e=t.lastChild;e&&!e.isLeaf&&(n||!e.type.spec.isolating);e=e.lastChild)i++;return new e(t,r,i)}};function ko(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(ko(s.content,t-i-1,n-i-1)))}function To(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=To(o.content,t-s-1,n);return a&&e.replaceChild(i,o.copy(a))}function xo(e,t,n){if(n.openStart>e.depth)throw new wo("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new wo("Inconsistent open depths");return Eo(e,t,n,0)}function Eo(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=Eo(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:o}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(go.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return Io(s,Do(e,i,o,t,r))}{let r=e.parent,i=r.content;return Io(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}return Io(s,jo(e,t,r))}function Co(e,t){if(!t.type.compatibleContent(e.type))throw new wo("Cannot join "+t.type.name+" onto "+e.type.name)}function Ao(e,t,n){let r=e.node(n);return Co(r,t.node(n)),r}function Oo(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Mo(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Oo(e.nodeAfter,r),s++));for(let e=s;e<o;e++)Oo(i.child(e),r);t&&t.depth==n&&t.textOffset&&Oo(t.nodeBefore,r)}function Io(e,t){return e.type.checkContent(t),e.copy(t)}function Do(e,t,n,r,i){let s=e.depth>i&&Ao(e,t,i+1),o=r.depth>i&&Ao(n,r,i+1),a=[];return Mo(null,e,i,a),s&&o&&t.index(i)==n.index(i)?(Co(s,o),Oo(Io(s,Do(e,t,n,r,i+1)),a)):(s&&Oo(Io(s,jo(e,t,i+1)),a),Mo(t,n,i,a),o&&Oo(Io(o,jo(n,r,i+1)),a)),Mo(r,null,i,a),new go(a)}function jo(e,t,n){let r=[];return Mo(null,e,n,r),e.depth>n&&Oo(Io(Ao(e,t,n+1),jo(e,t,n+1)),r),Mo(t,null,n,r),new go(r)}So.empty=new So(go.empty,0,0);var Po=class e{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return _o.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Uo(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let e=t;;){let{index:t,offset:n}=e.content.findIndex(s),o=s-n;if(r.push(e,t,i+n),!o)break;if(e=e.child(t),e.isText)break;s=o-1,i+=n+1}return new e(n,r,s)}static resolveCached(t,n){let r=Ro.get(t);if(r)for(let e=0;e<r.elts.length;e++){let t=r.elts[e];if(t.pos==n)return t}else Ro.set(t,r=new Lo);let i=r.elts[r.i]=e.resolve(t,n);return r.i=(r.i+1)%No,i}},Lo=class{constructor(){this.elts=[],this.i=0}},No=12,Ro=new WeakMap,Uo=class{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},Bo=Object.create(null),Fo=class e{constructor(e,t,n,r=_o.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||go.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&bo(this.attrs,t||e.defaultAttrs||Bo)&&_o.sameSet(this.marks,n||_o.none)}copy(t=null){return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return So.empty;let r=this.resolve(e),i=this.resolve(t),s=n?0:r.sharedDepth(t),o=r.start(s),a=r.node(s).content.cut(r.pos-o,i.pos-o);return new So(a,r.depth-s,i.depth-s)}replace(e,t,n){return xo(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return Po.resolveCached(this,e)}resolveNoCache(e){return Po.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),function(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=go.empty,r=0,i=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,r,i),o=s&&s.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let e=r;e<i;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),s=i&&i.matchFragment(this.content,t);return!!s&&s.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=_o.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!_o.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=go.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}};Fo.prototype.text=void 0;var zo=class e{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new $o(t,n);if(null==r.next)return e.empty;let i=qo(r);r.next&&r.err("Unexpected trailing text");let s=function(e){let t=Object.create(null);return function n(r){let i=[];r.forEach(t=>{e[t].forEach(({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<i.length;e++)i[e][0]==t&&(r=i[e][1]);Jo(e,n).forEach(e=>{r||i.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)})})});let s=t[r.join(",")]=new zo(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(Ko);s.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return s}(Jo(e,0))}(function(e){let t=[[]];return i(function e(t,s){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,s)),[]);if("seq"!=t.type){if("star"==t.type){let o=n();return r(s,o),i(e(t.expr,o),o),[r(o)]}if("plus"==t.type){let o=n();return i(e(t.expr,s),o),i(e(t.expr,o),o),[r(o)]}if("opt"==t.type)return[r(s)].concat(e(t.expr,s));if("range"==t.type){let o=s;for(let r=0;r<t.min;r++){let r=n();i(e(t.expr,o),r),o=r}if(-1==t.max)i(e(t.expr,o),o);else for(let s=t.min;s<t.max;s++){let s=n();r(o,s),i(e(t.expr,o),s),o=s}return[r(o)]}if("name"==t.type)return[r(s,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let o=e(t.exprs[r],s);if(r==t.exprs.length-1)return o;i(o,s=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(i));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,s=[];for(let t=0;t<e.next.length;t++){let{type:n,next:o}=e.next[t];s.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(o)&&r.push(o)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function i(s,o){let a=s.matchFragment(e,n);if(a&&(!t||a.validEnd))return go.from(o.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:n}=s.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=i(n,o.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:s,next:o}=i.next[e];s.isLeaf||s.hasRequiredAttrs()||s.name in t||r.type&&!o.validEnd||(n.push({match:s.contentMatch,type:s,via:r}),t[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}};zo.empty=new zo(!0);var $o=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function qo(e){let t=[];do{t.push(Ho(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Ho(e){let t=[];do{t.push(Vo(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Vo(e){let t=function(e){if(e.eat("(")){let t=qo(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Go(e,t)}return t}function Wo(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Go(e,t){let n=Wo(e),r=n;return e.eat(",")&&(r="}"!=e.next?Wo(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Ko(e,t){return t-e}function Jo(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:s}=i[e];r||-1!=n.indexOf(s)||t(s)}}(t),n.sort(Ko)}var Xo=class{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}},Yo=class e{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=function(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new Xo(e,r,t[r]);return n}(e,r.attrs),this.excluded=null;let i=function(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}(this.attrs);this.instance=i?new _o(this,i):null}create(e=null){return!e&&this.instance?this.instance:new _o(this,function(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=t.default}n[r]=i}return n}(this.attrs,e))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((t,s)=>r[t]=new e(t,i++,n,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){!function(e,t){for(let n in t)if(!(n in e))throw new RangeError(`Unsupported attribute ${n} for mark of type ${n}`);for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}(this.attrs,e,0,this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},Qo=class e{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=ea(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,s=0;for(;n<i.length&&s<e.marks.length;){let t=e.marks[s];if(this.marks[t.type.name]){if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,s++}else s++}for(;n<i.length;)r=i.pop()[1];for(;s<e.marks.length;){let n=e.marks[s++],o=this.serializeMark(n,e.isInline,t);o&&(i.push([n,r]),r.appendChild(o.dom),r=o.contentDOM||o.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=na(ea(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&na(ea(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return na(e,t,n,r)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(e){let t=Zo(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Zo(e.marks)}};function Zo(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ea(e){return e.document||window.document}var ta=new WeakMap;function na(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,s=t[0];if("string"!=typeof s)throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=function(e){let t=ta.get(e);return void 0===t&&ta.set(e,t=function(e){let t=null;return function e(n){if(n&&"object"==typeof n)if(Array.isArray(n))if("string"==typeof n[0])t||(t=[]),t.push(n);else for(let t=0;t<n.length;t++)e(n[t]);else for(let t in n)e(n[t])}(e),t}(e)),t}(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o,a=s.indexOf(" ");a>0&&(n=s.slice(0,a),s=s.slice(a+1));let l=n?e.createElementNS(n,s):e.createElement(s),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):l.setAttribute(e,c[e])}}for(let i=u;i<t.length;i++){let s=t[i];if(0===s){if(i<t.length-1||i>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:i}=na(e,s,n,r);if(l.appendChild(t),i){if(o)throw new RangeError("Multiple content holes");o=i}}}return{dom:l,contentDOM:o}}function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(){ia=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new x(i||[]);return r(o,"_invoke",{value:w(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function p(){}function f(){}var m={};l(m,s,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(E([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==ra(d)&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,o,a)},function(e){i("throw",e,o,a)}):t.resolve(d).then(function(e){c.value=e,o(c)},function(e){return i("throw",e,o,a)})}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=S(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=l(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(_.prototype),l(_.prototype,o,function(){return this}),e.AsyncIterator=_,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new _(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(v),l(v,a,"Generator"),l(v,s,function(){return this}),l(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach(function(t){aa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function la(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||ua(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e){return function(e){if(Array.isArray(e))return da(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ua(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){if(e){if("string"==typeof e)return da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?da(e,t):void 0}}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ha(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}var pa=ct([]),fa=ct(null),ma=ct({}),ga=ct(null,function(){var e,t=(e=ia().mark(function e(t,n,i){var s,o,a,l,c,u,d,h,p,f,m,g,y,v,b,_,w;return ia().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("reset"!==i.type){e.next=5;break}return n(pa,[{id:(0,r.A)(),state:i.payload.state,timestamp:Date.now(),diffPending:!1,diff:null,selectionContent:[]}]),n(fa,null),n(ma,{}),e.abrupt("return");case 5:if("update"!==i.type){e.next=28;break}if(s=t(fa),(o=t(pa))[0].state!==i.payload.newState){e.next=10;break}return e.abrupt("return");case 10:if(a=i.payload,l=a.oldState,c=a.newState,u=a.tr,d=va(ca(o),s,u,c)){e.next=14;break}return e.abrupt("return");case 14:return n(pa,d),null!==s&&(h=t(ma),n(fa,null),p=d.reduce(function(e,t){return e[t.id]=h[t.id],e},{}),n(ma,p)),f=t(ma),m=la(d,1),g=m[0].id,e.next=20,i.payload.diffWorker;case 20:return y=e.sent,e.next=23,Promise.all([y.diff({a:l.doc.toJSON(),b:c.doc.toJSON(),id:g}),y.diff({a:ya(l.selection),b:ya(c.selection),id:g})]);case 23:v=e.sent,b=la(v,2),_=b[0].delta,w=b[1].delta,n(ma,oa(oa({},f),{},aa({},g,{diff:_,selection:w})));case 28:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(e){ha(s,r,i,o,a,"next",e)}function a(e){ha(s,r,i,o,a,"throw",e)}o(void 0)})});return function(e,n,r){return t.apply(this,arguments)}}());function ya(e){return{empty:e.empty,anchor:e.anchor,head:e.head,from:e.from,to:e.to}}function va(e,t,n,i){if(!n.getMeta("_skip-dev-tools-history_")){var s=function(e,t){var n=null!==t?t:0;return e.slice(n,200)}(e,t);return s.unshift(function(e){var t=Qo.fromSchema(e.schema),n=e.selection,i=t.serializeFragment(n.content().content),s=[];if(i)for(var o=i.firstChild;o;)s.push(o.outerHTML),o=o.nextSibling;return{id:(0,r.A)(),state:e,timestamp:Date.now(),diffPending:!0,diff:void 0,selection:void 0,selectionContent:(0,po.prettyPrint)(s.join("\n"),{max_char:60,indent_size:2})}}(i)),s}}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _a=function(e){var t=e.children;return Ds.default.createElement(Ot,null,Ds.default.createElement(Mt,null,["._1ul9mgvx{min-width:180px}","._vchhusvi{box-sizing:border-box}","._129lrdoj+._129lrdoj{padding-top:9px}"]),Ds.default.createElement("div",{className:jt(["_1ul9mgvx _vchhusvi _129lrdoj"])},t))};function wa(e){return("00"+e).slice(-2)}var Sa=function(e){var t,n=new Date(e);return[wa(n.getHours()),wa(n.getMinutes()),wa(n.getSeconds()),(t=n.getMilliseconds(),("000"+t).slice(-3))].join(":")};function ka(e){if(!e.selectionContent)return null;var t=Array.isArray(e.selectionContent)?e.selectionContent.join("\n"):e.selectionContent;return Ds.default.createElement(_a,null,Ds.default.createElement(as,null,"Selection Content"),Ds.default.createElement(ho,null,t))}function Ta(e){return e.diff?Ds.default.createElement(_a,null,Ds.default.createElement(as,null,"Doc diff"),Ds.default.createElement(ao,{delta:e.diff})):null}function xa(e){return e.selection?Ds.default.createElement(_a,null,Ds.default.createElement(as,null,"Selection diff"),Ds.default.createElement(ao,{delta:e.selection})):null}var Ea=ct(0);function Ca(e){var t,n=e.rollbackHistory,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ba(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ht(Ea),2),i=r[0],s=r[1],o=ut(fa),a=ut(pa),l=ut(ma),c=a[i+1],u=null!==(t=a[i])&&void 0!==t?t:a[0],d=l[u.id],h=null!==o?a[o]:null,p=a.reduce(function(e,t,n){var r,i=e[e.length-1];return t.index=n,null!==(r=l[t.id])&&void 0!==r&&r.diff?e.push(t):i&&Array.isArray(i)?i.push(t):e.push([t]),e},[]).reduce(function(e,t){return Array.isArray(t)&&1===t.length?e.push(t[0]):e.push(t),e},[]);return Ds.default.createElement(Jn,{testId:"__prosemirror_devtools_tabs_history__"},Ds.default.createElement(Xn,{noPaddings:!0,minWidth:190},Ds.default.createElement($s,{items:p,getKey:function(e){return Array.isArray(e)?""+e[0].timestamp:""+e.timestamp},title:function(e){return Array.isArray(e)?Sa(e[0].timestamp):Sa(e.timestamp)},groupTitle:function(e){return Array.isArray(e)?Sa(e[0].timestamp)+" [".concat(e.length,"]"):Sa(e.timestamp)},isSelected:function(e){return!Array.isArray(e)&&e.timestamp===u.timestamp},isPrevious:function(e){return!Array.isArray(e)&&c&&e.timestamp===c.timestamp},isDimmed:function(e){return!Array.isArray(e)&&!!h&&e.timestamp>h.timestamp},customItemBackground:function(e){return e.isSelected?Rt.main40:e.isPrevious?Rt.main20:"transparent"},onListItemClick:function(e){Array.isArray(e)||s(e.index)},onListItemDoubleClick:function(e){Array.isArray(e)||n(e,e.index)}})),Ds.default.createElement(Xn,{grow:!0,sep:!0},Ds.default.createElement(Ta,{diff:d}),Ds.default.createElement(xa,{selection:u.selection}),Ds.default.createElement(ka,{selectionContent:u.selectionContent}),!d&&!u.selectionContent&&Ds.default.createElement(Ps,null,"Docs are equal.")))}var Aa=(0,s.f1)(a()),Oa=ct(function(e){var t=e(us);return t?t.schema:null}),Ma=["schema","contentExpr","schema","parseDOM","toDOM"];function Ia(e,t){return t&&"[object Object]"===Object.prototype.toString.call(t)?Object.keys(t).filter(function(t){return-1===e.indexOf(t)}).reduce(function(e,n){return e[n]=t[n],e},{}):t}function Da(){var e=ut(Oa);return e?Aa.default.createElement(Jn,{testId:"__prosemirror_devtools_tabs_schema__"},Aa.default.createElement(Xn,{grow:!0},Aa.default.createElement(as,null,"Nodes"),Aa.default.createElement(ts,{data:e.nodes,postprocessValue:Ia.bind(null,Ma)})),Aa.default.createElement(Xn,{grow:!0,sep:!0},Aa.default.createElement(as,null,"Marks"),Aa.default.createElement(ts,{data:e.marks,postprocessValue:Ia.bind(null,Ma)}))):null}var ja=(0,s.f1)(a()),Pa=(0,s.f1)(a()),La="._syaz1ds0{color:#b4befe}",Na="._11q71j28{background:transparent}";function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ua=function(e){var t=e.onSearch,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ra(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,Pa.useState)(""),2),r=n[0],i=n[1],s=(0,Pa.useCallback)(function(e){i(e.target.value),t(e.target.value)},[t]),o=(0,Pa.useCallback)(function(){t(r)},[r,t]);return Pa.default.createElement(Ot,null,Pa.default.createElement(Mt,null,["._1e0c1txw{display:flex}","._zulp1y44{gap:4px}","._19pk1y44{margin-top:4px}","._2hwx1y44{margin-right:4px}","._otyr1y44{margin-bottom:4px}","._18u01y44{margin-left:4px}"]),Pa.default.createElement("div",{className:jt(["_1e0c1txw _zulp1y44 _19pk1y44 _2hwx1y44 _otyr1y44 _18u01y44"])},Pa.default.createElement(Ot,null,Pa.default.createElement(Mt,null,[Na,"._19it1jxw{border:var(--_rsy7xm)}","._12ji1r31{outline-color:currentColor}","._1qu2glyw{outline-style:none}","._12y31o36{outline-width:medium}",La,"._1idr7woi::-moz-placeholder{color:rgba(205,214,244,.2)}","._1idr7woi::placeholder{color:rgba(205,214,244,.2)}"]),Pa.default.createElement("input",{type:"text",placeholder:"Search here",value:r,onChange:s,className:jt(["_11q71j28 _19it1jxw _12ji1r31 _1qu2glyw _12y31o36 _syaz1ds0 _1idr7woi"]),style:{"--_rsy7xm":Pt("1px solid "+Rt.softerMain)}})),Pa.default.createElement(Ot,null,Pa.default.createElement(Mt,null,[La,"._ca0qi2wt{padding-top:6px}","._u5f3i2wt{padding-right:6px}","._n3tdi2wt{padding-bottom:6px}","._19bvi2wt{padding-left:6px}","._k48p1nn1{font-weight:400}","._1wyb1crf{font-size:9pt}",Na,"._19itglyw{border:none}","._irr31ojv:hover{background-color:rgba(205,214,244,.1)}"]),Pa.default.createElement("button",{onClick:o,className:jt(["_syaz1ds0 _ca0qi2wt _u5f3i2wt _n3tdi2wt _19bvi2wt _k48p1nn1 _1wyb1crf _11q71j28 _19itglyw _irr31ojv"])},"SEARCH"))))},Ba=(0,s.f1)(a()),Fa=function(e){var t=e.onClick,n=e.children;return Ba.default.createElement(Ot,null,Ba.default.createElement(Mt,null,["._syaz1ds0{color:#b4befe}","._19pk1y44{margin-top:4px}","._otyr1y44{margin-bottom:4px}","._k48p1nn1{font-weight:400}","._1wyb1crf{font-size:9pt}","._11q71j28{background:transparent}","._19itglyw{border:none}","._irr31ojv:hover{background-color:rgba(205,214,244,.1)}"]),Ba.default.createElement("button",{onClick:t,className:jt(["_syaz1ds0 _19pk1y44 _otyr1y44 _k48p1nn1 _1wyb1crf _11q71j28 _19itglyw _irr31ojv"])},n))};function za(e){return function(e){if(Array.isArray(e))return Ha(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||qa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){if(e){if("string"==typeof e)return Ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ha(e,t):void 0}}function Ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Va(e){return"function"==typeof(arguments.length<=1?void 0:arguments[1])?"func":e}function Wa(e){return ja.default.createElement("div",null,ja.default.createElement(as,null,"Plugin State"),ja.default.createElement(ts,{data:e.pluginState,valueRenderer:Va,sortObjectKeys:!0}))}function Ga(){var e=ut(us);if(!e)return null;var t,n=$a((0,ja.useState)(e.plugins[0]),2),r=n[0],i=n[1],s=$a((0,ja.useState)(e.plugins),2),o=s[0],a=s[1],l=$a((0,ja.useState)(!0),2),c=l[0],u=l[1],d=ja.default.useCallback(function(e){return i(e)},[]),h=r.getState(e),p=(0,ja.useCallback)(function(t){var n=e.plugins.filter(function(e){return e.key.toLowerCase().includes(t.toLowerCase())});a(n)},[e.plugins]);return ja.default.createElement(Jn,{testId:"__prosemirror_devtools_tabs_plugins__"},ja.default.createElement(Xn,{noPaddings:!0},ja.default.createElement("div",{style:{display:"flex",marginLeft:6,marginRight:6,marginBottom:3,marginTop:3}},ja.default.createElement(Ua,{onSearch:p}),ja.default.createElement(Fa,{onClick:function(){u(!c)}},"SORT ",c?"DES":"ASC")),ja.default.createElement($s,{items:c?(t=o,za(t).sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0})):function(e){return za(e).sort(function(e,t){return e.key<t.key?1:e.key>t.key?-1:0})}(o),getKey:function(e){return e.key},title:function(e){return e.key},isDimmed:function(t){return!t.getState(e)},onListItemClick:d})),ja.default.createElement(Xn,{grow:!0,sep:!0},h?ja.default.createElement(Wa,{pluginState:h}):ja.default.createElement(Ps,null,"Plugin doesn't have any state")))}var Ka=(0,s.f1)(a()),Ja=ct(function(e){var t,n=e(us);return n?(t=n.schema,Object.keys(t.nodes).reduce(function(e,t,n){var r=n>=Xa.length?function(e,t){var n=e/t;return Math.round(t*(n-Math.floor(n)))}(n,Xa.length):n;return e[t]=Xa[r],e},{})):{}}),Xa=["#F38BA8","#74C7EC","#A6E3A1","#CA9EDB","#DCDC5D","#B9CC7C","#FAB387","#89B4FA","#F36E98","#E45F44","#DD97D8","#A6A4AE","#F9E2AF","#FFC129","#EBA0AC","#89DCEB","#B4BEFE"];function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qa="._16jlkb7n{flex-grow:1}",Za="._o572qvpr{white-space:pre}",el="._19bvi2wt{padding-left:6px}",tl="._n3td1l7b{padding-bottom:3px}",nl="._u5f3i2wt{padding-right:6px}",rl="._ca0q1l7b{padding-top:3px}",il="._d0altlke:hover{cursor:pointer}",sl="._11q71iim{background:var(--_1d6dlof)}",ol="._otyr1l7b{margin-bottom:3px}",al="._1bsb1osq{width:100%}",ll="._1e0c1txw{display:flex}",cl="._1s7z104w{border-right:1px solid rgba(205,214,244,.2)}",ul="._1kl7104w{border-left:1px solid rgba(205,214,244,.2)}",dl="._vchhusvi{box-sizing:border-box}",hl="._19bv1crf{padding-left:9pt}",pl="._n3tdidpf{padding-bottom:0}",fl="._u5f31crf{padding-right:9pt}",ml="._ca0qidpf{padding-top:0}",gl=function(e){var t=e.children;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,["._19pk1crf{margin-top:9pt}"]),Ka.default.createElement("div",{className:jt(["_19pk1crf"])},t))},yl=function(e){var t=e.children;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[ml,fl,pl,hl,dl,ul,cl]),Ka.default.createElement("div",{className:jt(["_ca0qidpf _u5f31crf _n3tdidpf _19bv1crf _vchhusvi _1kl7104w _1s7z104w"])},t))},vl=function(e){var t=e.children;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[ml,fl,pl,hl,ll,al,dl,ul,cl,"._1n261g80{flex-wrap:wrap}"]),Ka.default.createElement("div",{className:jt(["_ca0qidpf _u5f31crf _n3tdidpf _19bv1crf _1e0c1txw _1bsb1osq _vchhusvi _1kl7104w _1s7z104w _1n261g80"])},t))},bl=function(e){var t=e.children,n=e.bg,r=e.onClick;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[al,ol,dl,ll,sl,il]),Ka.default.createElement("div",{onClick:r,className:jt(["_1bsb1osq _otyr1l7b _vchhusvi _1e0c1txw _11q71iim _d0altlke"]),style:{"--_1d6dlof":Pt(n)}},t))},_l=function(e){var t=e.tooltip,n=e.children;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[rl,nl,tl,el,"._bfhk1kix{background-color:hsla(0,0%,100%,.3)}"]),Ka.default.createElement("div",{title:t,className:jt(["_ca0q1l7b _u5f3i2wt _n3td1l7b _19bvi2wt _bfhk1kix"])},n))},wl=function(e){var t=e.children;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[rl,nl,tl,el,Za]),Ka.default.createElement("div",{className:jt(["_ca0q1l7b _u5f3i2wt _n3td1l7b _19bvi2wt _o572qvpr"])},t))},Sl=function(e){var t=e.children;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[Qa]),Ka.default.createElement("div",{className:jt(["_16jlkb7n"])},t))},kl=function(e){var t=e.children;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[Qa,rl,"._u5f3rdoj{padding-right:9px}",tl,"._19bvrdoj{padding-left:9px}",Za]),Ka.default.createElement("div",{className:jt(["_16jlkb7n _ca0q1l7b _u5f3rdoj _n3td1l7b _19bvrdoj _o572qvpr"])},t))},Tl=function(e){var t=e.children,n=e.bg,r=e.onClick;return Ka.default.createElement(Ot,null,Ka.default.createElement(Mt,null,[Qa,ol,ll,dl,sl,il]),Ka.default.createElement("div",{onClick:r,className:jt(["_16jlkb7n _otyr1l7b _1e0c1txw _vchhusvi _11q71iim _d0altlke"]),style:{"--_1d6dlof":Pt(n)}},t))};function xl(e){var t=e.content;if(!t||!t.content||!t.content.length)return null;var n=t.content;if(n[0].isBlock){var r=e.startPos+1;return Ka.default.createElement(yl,null,n.map(function(t,n){var i=r;return r+=t.nodeSize,Ka.default.createElement(El,{key:n,node:t,colors:e.colors,onNodeSelected:e.onNodeSelected,startPos:i})}))}var i=e.startPos;return Ka.default.createElement(vl,null,n.map(function(t,n){var r=i;return i+=t.nodeSize,Ka.default.createElement(Cl,{key:n,index:n,node:t,bg:e.colors[t.type.name],onNodeSelected:e.onNodeSelected,startPos:r})}))}function El(e){var t=e.colors,n=e.node,r=e.startPos,i=t[n.type.name],s=Ml(n);return Ka.default.createElement("div",null,Ka.default.createElement(bl,{bg:i,onClick:function(){return e.onNodeSelected({node:n})}},r>0&&Ka.default.createElement(_l,{tooltip:"Pos: ".concat(r-1," (before ").concat(n.type.name," opening tag)")},r-1),Ka.default.createElement(wl,null,n.type.name," ",s),Ka.default.createElement(_l,{tooltip:"Pos: ".concat(r," (after ").concat(n.type.name," opening tag)")},r),Ka.default.createElement(Sl,null),Ka.default.createElement(_l,{tooltip:"Pos: ".concat(r+n.nodeSize-1," (after ").concat(n.type.name," closing tag)")},r+n.nodeSize-1)),Ka.default.createElement(xl,{content:n.content,colors:t,onNodeSelected:e.onNodeSelected,startPos:r}))}function Cl(e){var t=e.node,n=e.bg,r=e.startPos,i=e.index,s=Ml(t);return Ka.default.createElement(Tl,{onClick:function(){return e.onNodeSelected({node:t})},bg:n},0===i?Ka.default.createElement(_l,{tooltip:"Pos: ".concat(r," (before ").concat(t.type.name," opening tag)")},r):null,Ka.default.createElement(kl,null,t.type.name," ",s),Ka.default.createElement(Sl,null),Ka.default.createElement(_l,{tooltip:"Pos: ".concat(r+t.nodeSize," (before ").concat(t.type.name," closing tag)")},r+t.nodeSize))}var Al=ct(null);function Ol(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ya(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ht(Al),2),t=e[0],n=e[1],r=Ka.default.useCallback(function(e){var t=e.node;return n(t)},[]),i=ut(Ja),s=ut(us);if(!s)return null;var o=t||s.doc;return Ka.default.createElement(Jn,{testId:"__prosemirror_devtools_tabs_structure__"},Ka.default.createElement(Xn,{grow:!0},Ka.default.createElement(as,null,"Current Doc"),Ka.default.createElement(gl,null,Ka.default.createElement(El,{colors:i,node:s.doc,startPos:0,onNodeSelected:r}))),Ka.default.createElement(Xn,{sep:!0,minWidth:200,maxWidth:300},Ka.default.createElement(ls,null,Ka.default.createElement(as,null,"Node Info"),Ka.default.createElement(cs,{onClick:function(){return console.log(o)}},"Log Node")),Ka.default.createElement(ts,{data:o.toJSON(),hideRoot:!0,shouldExpandNode:function(){return"doc"!==o.type.name}})))}function Ml(e){return 1===e.marks.length?" - [".concat(e.marks[0].type.name,"]"):e.marks.length>1?" - [".concat(e.marks.length," marks]"):""}var Il=(0,s.f1)(a()),Dl=Symbol(),jl=Symbol();!function(e){let t,n;const r={getItem:r=>{var i,s;const o=e=>{if(t!==(e=e||"")){try{n=JSON.parse(e)}catch{return jl}t=e}return n},a=null!=(s=null==(i=e())?void 0:i.getItem(r))?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(t,n)=>{var r;return null==(r=e())?void 0:r.setItem(t,JSON.stringify(n))},removeItem:t=>{var n;return null==(n=e())?void 0:n.removeItem(t)}};"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(r.subscribe=(e,t)=>{const n=n=>{n.key===e&&n.newValue&&t(JSON.parse(n.newValue))};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}})}(()=>"undefined"!=typeof window?window.localStorage:void 0);var Pl=(0,s.f1)(a(),1),Ll=()=>{const e=new WeakMap;return(t,n)=>{const r=((e,t)=>{do{const[n,...r]=t,i=e.get(n);if(!i)return;if(!r.length)return i[1];e=i[0],t=r}while(t.length)})(e,n);if(r)return r;const i=t();return((e,t,n)=>{do{const[r,...i]=t;let s=e.get(r);if(s||(s=[new WeakMap],e.set(r,s)),!i.length)return void(s[1]=n);e=s[0],t=i}while(t.length)})(e,n,i),i}};Ll(),Ll(),Ll(),Ll(),ct(()=>[]);var Nl=function(e){let t,n;const r={getItem:r=>{var i,s;const o=e=>{if(t!==(e=e||"")){try{n=JSON.parse(e)}catch{return jl}t=e}return n},a=null!=(s=null==(i=e())?void 0:i.getItem(r))?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(t,n)=>{var r;return null==(r=e())?void 0:r.setItem(t,JSON.stringify(n))},removeItem:t=>{var n;return null==(n=e())?void 0:n.removeItem(t)}};return"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(r.subscribe=(e,t)=>{const n=n=>{n.key===e&&n.newValue&&t(JSON.parse(n.newValue))};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}}),r}(()=>"undefined"!=typeof window?window.localStorage:void 0);Ll();var Rl=function(e,t,n=Nl){const r=()=>{const r=n.getItem(e);return r instanceof Promise?r.then(e=>e===jl?t:e):r===jl?t:r},i=ct(n.delayInit?t:r());return i.onMount=t=>{let i;if(n.subscribe&&(i=n.subscribe(e,t),t(r())),n.delayInit){const e=r();e instanceof Promise?e.then(t):t(e)}return i},ct(e=>e(i),(r,s,o)=>{const a="function"==typeof o?o(r(i)):o;return a===Dl?(s(i,t),n.removeItem(e)):(s(i,a),n.setItem(e,a))})}("prosemirror-dev-tools-snapshots",[]);function Ul(e,t){return"save"===t.type?[t.payload.snapshot].concat(e):"delete"===t.type?e.filter(function(e){return e!==t.payload.snapshot}):e}function Bl(){return function(e,t){const[n,r]=ht(e,void 0);return[n,(0,Pl.useCallback)(e=>{r(n=>t(n,e))},[r,t])]}(Rl,Ul)}var Fl=Math.pow(2,16);function zl(e,t){return e+t*Fl}function $l(e){return 65535&e}var ql=class{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}},Hl=class e{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}recover(e){let t=0,n=$l(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Fl}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[o+i],c=this.ranges[o+s],u=a+l;if(e<=u){let i=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return i;let s=e==(t<0?a:u)?null:zl(o/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new ql(i,d,s)}r+=c-l}return n?e+r:new ql(e+r,0,null)}touches(e,t){let n=0,r=$l(t),i=this.inverted?2:1,s=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let o=this.ranges[t]-(this.inverted?n:0);if(o>e)break;let a=this.ranges[t+i];if(e<=o+a&&t==3*r)return!0;n+=this.ranges[t+s]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let s=this.ranges[r],o=s-(this.inverted?i:0),a=s+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(o,o+l,a,a+c),i+=c-l}}invert(){return new e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}};Hl.empty=new Hl([]);var Vl=class e{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(t=0,n=this.maps.length){return new e(this.maps,this.mirror,t,n)}copy(){return new e(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let t=new e;return t.appendMappingInverted(this),t}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this.maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this.maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new ql(e,r,null)}},Wl=Object.create(null),Gl=class{getMap(){return Hl.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Wl[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Wl)throw new RangeError("Duplicate use of step JSON ID "+e);return Wl[e]=t,t.prototype.jsonID=e,t}},Kl=class e{constructor(e,t){this.doc=e,this.failed=t}static ok(t){return new e(t,null)}static fail(t){return new e(null,t)}static fromReplace(t,n,r,i){try{return e.ok(t.replace(n,r,i))}catch(t){if(t instanceof wo)return e.fail(t.message);throw t}}};function Jl(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(Jl(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return go.fromArray(r)}var Xl=class e extends Gl{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new So(Jl(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return Kl.fromReplace(e,this.from,this.to,i)}invert(){return new Yl(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};Gl.jsonID("addMark",Xl);var Yl=class e extends Gl{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new So(Jl(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return Kl.fromReplace(e,this.from,this.to,n)}invert(){return new Xl(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};Gl.jsonID("removeMark",Yl);var Ql=class e extends Gl{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kl.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Kl.fromReplace(e,this.pos,this.pos+1,new So(go.from(n),0,t.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let t=this.mark.addToSet(n.marks);if(t.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(t))return new e(this.pos,n.marks[r]);return new e(this.pos,this.mark)}}return new Zl(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};Gl.jsonID("addNodeMark",Ql);var Zl=class e extends Gl{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kl.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Kl.fromReplace(e,this.pos,this.pos+1,new So(go.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new Ql(this.pos,this.mark):this}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};Gl.jsonID("removeNodeMark",Zl);var ec=class e extends Gl{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&nc(e,this.from,this.to)?Kl.fail("Structure replace would overwrite content"):Kl.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Hl([this.from,this.to-this.from,this.slice.size])}invert(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let n=this.slice.size+t.slice.size==0?So.empty:new So(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}}{let n=this.slice.size+t.slice.size==0?So.empty:new So(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,So.fromJSON(t,n.slice),!!n.structure)}};Gl.jsonID("replace",ec);var tc=class e extends Gl{constructor(e,t,n,r,i,s,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=s,this.structure=o}apply(e){if(this.structure&&(nc(e,this.from,this.gapFrom)||nc(e,this.gapTo,this.to)))return Kl.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Kl.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Kl.fromReplace(e,this.from,this.to,n):Kl.fail("Content does not fit in gap")}getMap(){return new Hl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new e(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,So.fromJSON(t,n.slice),n.insert,!!n.structure)}};function nc(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let e=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function rc(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let t=0;t<s.childCount;t++){let l=s.child(t),c=a+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new Yl(a,c,l.marks[t]));if(i&&l.isText&&"pre"!=n.whitespace){let e,t,r=/\r?\n|\r/g;for(;e=r.exec(l.text);)t||(t=new So(go.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),o.push(new ec(a+e.index,a+e.index+e[0].length,t))}}else o.push(new ec(a,c,So.empty));a=c}if(!r.validEnd){let t=r.fillBefore(go.empty,!0);e.replace(a,a,new So(t,0,0))}for(let t=o.length-1;t>=0;t--)e.step(o[t])}function ic(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let i=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function sc(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+s);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function oc(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Gl.jsonID("replaceAround",tc);var ac=class{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=go.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=go.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,s=n.depth,o=r.depth;for(;s&&o&&1==i.childCount;)i=i.firstChild.content,s--,o--;let a=new So(i,s,o);return e>-1?new tc(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new ec(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=uc(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let i=e.firstChild;for(let e=this.depth;e>=0;e--){let s,{type:o,match:a}=this.frontier[e],l=null;if(1==t&&(i?a.matchType(i.type)||(l=a.fillBefore(go.from(i),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:e,parent:r,inject:l};if(2==t&&i&&(s=a.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:r,wrap:s};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=uc(e,t);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new So(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),0))}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=uc(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new So(lc(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new So(lc(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let s=this.unplaced,o=n?n.content:s.content,a=s.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=o.size+e-(s.content.size-s.openEnd);for(;l<o.childCount;){let e=o.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(u=t,c.push(dc(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==o.childCount?h:-1)))}let p=l==o.childCount;p||(h=-1),this.placed=cc(this.placed,t,go.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=o;e<h;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=p?0==e?So.empty:new So(lc(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new So(lc(s.content,e,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!hc(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=hc(e,t,r,n,i);if(s){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=hc(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=cc(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=cc(this.placed,this.depth,go.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(go.empty,!0);e.childCount&&(this.placed=cc(this.placed,this.frontier.length,e))}};function lc(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(lc(e.firstChild.content,t-1,n)))}function cc(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(cc(e.lastChild.content,t-1,n)))}function uc(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function dc(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,dc(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(go.empty,!0)))),e.copy(r)}function hc(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,s.content,o)?a:null}function pc(e){return e.spec.defining||e.spec.definingForContent}function fc(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(fc(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(go.empty,!0))}return e}function mc(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(i==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==i-1)&&n.push(r)}return n}var gc=class e extends Gl{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kl.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return Kl.fromReplace(e,this.pos,this.pos+1,new So(go.from(r),0,t.isLeaf?0:1))}getMap(){return Hl.empty}invert(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(n.pos,n.attr,n.value)}};Gl.jsonID("attr",gc);var yc=class e extends Gl{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return Kl.ok(n)}getMap(){return Hl.empty}invert(t){return new e(this.attr,t.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e(n.attr,n.value)}};Gl.jsonID("docAttr",yc);var vc=Error;((vc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype)).constructor=vc,vc.prototype.name="TransformError";var bc=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new vc(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=So.empty){let r=function(e,t,n=t,r=So.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return oc(i,s,r)?new ec(t,n,r):new ac(i,s,r).fit()}(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new So(go.from(n),0,0))}delete(e,t){return this.replace(e,t,So.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(oc(i,s,r))return e.step(new ec(t,n,r));let o=mc(i,e.doc.resolve(n));0==o[o.length-1]&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;o.indexOf(e)>-1?a=e:i.before(e)==t&&o.splice(1,0,-e)}let l=o.indexOf(a),c=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){let t=c[e],n=pc(t.type);if(n&&!t.sameMarkup(i.node(Math.abs(a)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let a=(t+u+1)%(r.openStart+1),d=c[a];if(d)for(let t=0;t<o.length;t++){let c=o[(t+l)%o.length],u=!0;c<0&&(u=!1,c=-c);let h=i.node(c-1),p=i.index(c-1);if(h.canReplaceWith(p,p,d.type,d.marks))return e.replace(i.before(c),u?s.after(c):n,new So(fc(r.content,0,r.openStart,a),a,r.openEnd))}}let d=e.steps.length;for(let a=o.length-1;a>=0&&(e.replace(t,n,r),!(e.steps.length>d));a--){let e=o[a];e<0||(t=i.before(e),n=s.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)return null}return null}(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new So(go.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=mc(r,i);for(let t=0;t<s.length;t++){let n=s[t],o=t==s.length-1;if(o&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(o||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return e.delete(r.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=go.empty,d=0;for(let e=s,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=go.from(r.node(e).copy(u)),d++):l--;let h=go.empty,p=0;for(let e=s,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,h=go.from(i.node(e).copy(h)),p++):c++;e.step(new tc(l,c,o,a,new So(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let e="pre"==o.whitespace,t=!!o.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);sc(e,r.node(),r.before(),a)}o.inlineContent&&rc(e,t+n-1,o,s.node().contentMatchAt(s.index()),null==r);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new ec(c,l.map(t+n,-1),So.empty,!0)),!0===r){let t=e.doc.resolve(c);ic(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=go.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=go.from(n[e].type.create(n[e].attrs,r))}let i=t.start,s=t.end;e.step(new tc(i,s,i,s,new So(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let o="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,o)&&function(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(e.doc,e.mapping.slice(s).map(n),r)){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&sc(e,t,n,s),rc(e,e.mapping.slice(s).map(n,1),r,void 0,null===i);let a=e.mapping.slice(s),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new tc(l,c,l+1,c-1,new So(go.from(r.create(o,null,t.marks)),0,0),1,!0)),!0===i&&ic(e,t,n,s),!1}})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new tc(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new So(go.from(o),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new gc(e,t,n)),this}setDocAttribute(e,t){return this.step(new yc(e,t)),this}addNodeMark(e,t){return this.step(new Ql(e,t)),this}removeNodeMark(e,t){if(!(t instanceof _o)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new Zl(e,t)),this}split(e,t=1,n){return function(e,t,n=1,r){let i=e.doc.resolve(t),s=go.empty,o=go.empty;for(let e=i.depth,t=i.depth-n,a=n-1;e>t;e--,a--){s=go.from(i.node(e).copy(s));let t=r&&r[a];o=go.from(t?t.type.create(t.attrs,o):i.node(e).copy(o))}e.step(new ec(t,t,new So(s.append(o),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let i,s,o=[],a=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:o.push(i=new Yl(c,d,u[e])));s&&s.to==c?s.to=d:a.push(s=new Xl(c,d,r))}}),o.forEach(t=>e.step(t)),a.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(e,o)=>{if(!e.isInline)return;s++;let a=null;if(r instanceof Yo){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(o+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==s-1&&l.eq(i[e].style)&&(n=t)}n?(n.to=r,n.step=s):i.push({style:l,from:Math.max(o,t),to:r,step:s})}}}),i.forEach(t=>e.step(new Yl(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return rc(this,e,t,n),this}},_c=Object.create(null),wc=class{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Sc(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=So.empty){let n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let i=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:l}=s[o],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),o?So.empty:t),0==o&&Dc(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:s,$to:o}=r[i],a=e.mapping.slice(n),l=a.map(s.pos),c=a.map(o.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),Dc(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new xc(e):Ic(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?Ic(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):Ic(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Oc(e.node(0))}static atStart(e){return Ic(e,e,0,0,1)||new Oc(e)}static atEnd(e){return Ic(e,e,e.content.size,e.childCount,-1)||new Oc(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=_c[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in _c)throw new RangeError("Duplicate use of selection JSON ID "+e);return _c[e]=t,t.prototype.jsonID=e,t}getBookmark(){return xc.between(this.$anchor,this.$head).getBookmark()}};wc.prototype.visible=!0;var Sc=class{constructor(e,t){this.$from=e,this.$to=t}},kc=!1;function Tc(e){kc||e.parent.inlineContent||(kc=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var xc=class e extends wc{constructor(e,t=e){Tc(e),Tc(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return wc.near(r);let i=t.resolve(n.map(this.anchor));return new e(i.parent.inlineContent?i:r,r)}replace(e,t=So.empty){if(super.replace(e,t),t==So.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Ec(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(t,n,r){let i=t.pos-n.pos;if(r&&!i||(r=i>=0?1:-1),!n.parent.inlineContent){let e=wc.findFrom(n,r,!0)||wc.findFrom(n,-r,!0);if(!e)return wc.near(n,r);n=e.$head}return t.parent.inlineContent||(0==i||(t=(wc.findFrom(t,-r,!0)||wc.findFrom(t,r,!0)).$anchor).pos<n.pos!=i<0)&&(t=n),new e(t,n)}};wc.jsonID("text",xc);var Ec=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){return xc.between(e.resolve(this.anchor),e.resolve(this.head))}},Cc=class e extends wc{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?wc.near(s):new e(s)}content(){return new So(go.from(this.node),0,0)}eq(t){return t instanceof e&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ac(this.anchor)}static fromJSON(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))}static create(t,n){return new e(t.resolve(n))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}};Cc.prototype.visible=!1,wc.jsonID("node",Cc);var Ac=class e{constructor(e){this.anchor=e}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Ec(r,r):new e(r)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Cc.isSelectable(n)?new Cc(t):wc.near(t)}},Oc=class e extends wc{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=So.empty){if(t==So.empty){e.delete(0,e.doc.content.size);let t=wc.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(t){return new e(t)}map(t){return new e(t)}eq(t){return t instanceof e}getBookmark(){return Mc}};wc.jsonID("all",Oc);var Mc={map(){return this},resolve:e=>new Oc(e)};function Ic(e,t,n,r,i,s=!1){if(t.inlineContent)return xc.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let r=t.child(o);if(r.isAtom){if(!s&&Cc.isSelectable(r))return Cc.create(e,n-(i<0?r.nodeSize:0))}else{let t=Ic(e,r,n+i,i<0?r.childCount:0,i,s);if(t)return t}n+=r.nodeSize*i}return null}function Dc(e,t,n){let r=e.steps.length-1;if(r<t)return;let i,s=e.steps[r];(s instanceof ec||s instanceof tc)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==i&&(i=r)}),e.setSelection(wc.near(e.doc.resolve(i),n)))}var jc=class extends bc{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return _o.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||_o.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(wc.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}};function Pc(e,t){return t&&e?e.bind(t):e}var Lc=class{constructor(e,t,n){this.name=e,this.init=Pc(t.init,n),this.apply=Pc(t.apply,n)}},Nc=[new Lc("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new Lc("selection",{init:(e,t)=>e.selection||wc.atStart(t.doc),apply:e=>e.selection}),new Lc("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new Lc("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})],Rc=class{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Nc.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new Lc(e.key,e.spec.state,e))})}},Uc=class e{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let a=r?r[s].n:0,l=r?r[s].state:this,c=a<t.length&&o.spec.appendTransaction.call(o,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<s?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[s]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new e(this.config),r=this.config.fields;for(let e=0;e<r.length;e++){let i=r[e];n[i.name]=i.apply(t,this[i.name],this,n)}return n}get tr(){return new jc(this)}static create(t){let n=new Rc(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n);for(let e=0;e<n.fields.length;e++)r[n.fields[e].name]=n.fields[e].init(t,r);return r}reconfigure(t){let n=new Rc(this.schema,t.plugins),r=n.fields,i=new e(n);for(let e=0;e<r.length;e++){let n=r[e].name;i[n]=this.hasOwnProperty(n)?this[n]:r[e].init(t,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Rc(t.schema,t.plugins),s=new e(i);return i.fields.forEach(e=>{if("doc"==e.name)s.doc=Fo.fromJSON(t.schema,n.doc);else if("selection"==e.name)s.selection=wc.fromJSON(s.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let i in r){let o=r[i],a=o.spec.state;if(o.key==e.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(n,i))return void(s[e.name]=a.fromJSON.call(o,t,n[i],s))}s[e.name]=e.init(t,s)}}),s}};function Bc(){return Uc}var Fc=ct(null);function zc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qc=function(e){var t=e.children,n=e.onClick;return Il.default.createElement(Ot,null,Il.default.createElement(Mt,null,["._ca0qi2wt{padding-top:6px}","._u5f319bv{padding-right:10px}","._n3tdi2wt{padding-bottom:6px}","._19bv19bv{padding-left:10px}","._k48p1nn1{font-weight:400}","._1dyzt94y{letter-spacing:1px}","._1wyb1skh{font-size:11px}","._syazryvq{color:rgba(205,214,244,.8)}","._bfhk1ojv{background-color:rgba(205,214,244,.1)}","._1p1dangw{text-transform:uppercase}","._v564111k{transition:background .3s,color .3s}","._2rkoyh40{border-radius:2px}","._19itglyw{border:none}","._1h5m1y44+._1h5m1y44{margin-left:4px}","._irr31wye:hover{background-color:rgba(203,166,247,.4)}","._30l35y2n:hover{color:#cdd6f4}","._d0altlke:hover{cursor:pointer}","._nt751r31:focus{outline-color:currentColor}","._49pcglyw:focus{outline-style:none}","._1hvw1o36:focus{outline-width:medium}","._1di61emw:active{background-color:rgba(203,166,247,.6)}"]),Il.default.createElement("button",{onClick:n,className:jt(["_ca0qi2wt _u5f319bv _n3tdi2wt _19bv19bv _k48p1nn1 _1dyzt94y _1wyb1skh _syazryvq _bfhk1ojv _1p1dangw _v564111k _2rkoyh40 _19itglyw _1h5m1y44 _irr31wye _30l35y2n _d0altlke _nt751r31 _49pcglyw _1hvw1o36 _1di61emw"])},t))},Hc=function(e){var t=e.children;return Il.default.createElement(Ot,null,Il.default.createElement(Mt,null,["._4t3i1tcg{height:24px}","._vwz41tcg{line-height:24px}","._1e0c1txw{display:flex}","._1bsb1osq{width:100%}"]),Il.default.createElement("div",{className:jt(["_4t3i1tcg _vwz41tcg _1e0c1txw _1bsb1osq"])},t))},Vc=function(e){var t=e.children;return Il.default.createElement(Ot,null,Il.default.createElement(Mt,null,["._16jlkb7n{flex-grow:1}"]),Il.default.createElement("div",{className:jt(["_16jlkb7n"])},t))};function Wc(e){var t=e.snapshots,n=e.deleteSnapshot,r=e.loadSnapshot;return Il.default.createElement($s,{getKey:function(e){return e.name+e.timestamp},items:t,title:function(e){return Il.default.createElement(Hc,null,Il.default.createElement(Vc,null,e.name),Il.default.createElement("div",null,Il.default.createElement(qc,{onClick:function(){return n(e)}},"delete"),Il.default.createElement(qc,{onClick:function(){return r(e)}},"restore")))}})}function Gc(){var e=zc(Bl(),2),t=e[0],n=e[1],r=ut(Fc),i=zc(ht(us),2),s=i[0],o=i[1],a=dt(ga),l=Il.default.useCallback(function(e){var t=Bc();if(s&&r){var n=t.create({schema:s.schema,plugins:s.plugins,doc:s.schema.nodeFromJSON(e.snapshot)});r.updateState(n),o(n),a({type:"reset",payload:{state:r.state}})}},[r,s]),c=Il.default.useCallback(function(e){n({type:"delete",payload:{snapshot:e}})},[n]);return Il.default.createElement(Jn,{testId:"__prosemirror_devtools_tabs_snapshots__"},Il.default.createElement(Xn,{noPaddings:!0,grow:!0},t.length?Il.default.createElement(Wc,{snapshots:t,loadSnapshot:l,deleteSnapshot:c}):Il.default.createElement(Ps,null,'No saved snapshots yet. Press "Save Snapshot" button to add one.')))}var Kc=(0,s.f1)(a()),Jc=function(e){var t=e.children;return Kc.default.createElement(Ot,null,Kc.default.createElement(Mt,null,["._1wyb1osq{font-size:100%}","._vwz4kb7n{line-height:1}","._17hvidpf li+li{margin-top:0}","._1mwnidpf li+li{margin-right:0}","._eld4idpf li+li{margin-bottom:0}","._1k0gidpf li+li{margin-left:0}"]),Kc.default.createElement("div",{className:jt(["_1wyb1osq _vwz4kb7n _17hvidpf _1mwnidpf _eld4idpf _1k0gidpf"])},t))},Xc=(0,s.f1)(a());function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach(function(t){Zc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Zc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tu={top:0,left:0,width:0,height:0,active:!1},nu=ct(tu);function ru(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ht(nu),2),t=e[0],n=e[1],r=ut(us),i=dt(hs),s={activate:function(){n(Qc(Qc({},tu),{},{active:!0}))},deactivate:function(){n(tu)},select:function(e){if(r){var t=vs(e);if(t){var n=gs(r.doc,r.doc.nodeAt(t.pmViewDesc.posAtStart));if(!n)return;i([]),i(n),s.deactivate()}}},updatePosition:function(e){var t=vs(e);if(t&&(t.pmViewDesc.node&&"doc"!==t.pmViewDesc.node.type.name||t.pmViewDesc.mark)){var r=t.getBoundingClientRect(),i=r.top,o=r.left,a=r.width,l=r.height;n({top:i+window.scrollY,left:o,width:a,height:l,active:!0})}else s.activate()}};return[t,s]}function iu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var su="._kqswstnw{position:absolute}",ou=function(e){var t=e.visible,n=e.width,r=e.height,i=e.left,s=e.top;return Xc.default.createElement(Ot,null,Xc.default.createElement(Mt,null,[su,"._lcxvglyw{pointer-events:none}","._154iidpf{top:0}","._1ltvidpf{left:0}","._bfhk1ghd{background-color:rgba(0,0,255,.3)}","._1pbyhac1{z-index:99999}","._80omtlke{cursor:pointer}","._t9ecwcso{transform:translateX(var(--_1e5hqsa)) translateY(var(--_jp4btk))}","._1e0c1ss5{display:var(--_1oddjb5)}","._1bsb9tg7{width:var(--_1ea5ebz)}","._4t3imry4{height:var(--_roksyz)}"]),Xc.default.createElement("div",{className:jt(["_kqswstnw _lcxvglyw _154iidpf _1ltvidpf _bfhk1ghd _1pbyhac1 _80omtlke _t9ecwcso _1e0c1ss5 _1bsb9tg7 _4t3imry4"]),style:{"--_1e5hqsa":Pt(i,"px"),"--_jp4btk":Pt(s,"px"),"--_1oddjb5":Pt(t?"block":"none"),"--_1ea5ebz":Pt(n,"px"),"--_roksyz":Pt(r,"px")}}))};function au(){var e=dt(mt),t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ru(),2),n=t[0],r=t[1],i=Xc.default.useCallback(function(e){r.updatePosition(e.target)},[r]),s=Xc.default.useCallback(function(t){t.preventDefault(),r.select(t.target),e("state")},[r]);return Xc.default.useEffect(function(){if(n.active)return document.addEventListener("mousemove",i),document.addEventListener("click",s),document.addEventListener("keydown",r.deactivate),function(){document.removeEventListener("mousemove",i),document.removeEventListener("click",s),document.removeEventListener("keydown",r.deactivate)}},[i,s,r,n.active]),Xc.default.createElement(ou,{top:n.top,left:n.left,visible:Boolean(n.top&&n.left),width:n.width,height:n.height})}var lu=function(e){var t=e.children,n=e.isActive,r=e.onClick;return Xc.default.createElement(Ot,null,Xc.default.createElement(Mt,null,["._r06hglyw{-webkit-appearance:none;-moz-appearance:none;appearance:none}",su,"._1xi21y44{right:4px}","._154ismyl{top:-28px}","._1bsb1tcg{width:24px}","._4t3i1tcg{height:24px}","._19itglyw{border:none}","._2rko1l7b{border-radius:3px}",'._11q71d4i{background:var(--_1rzmv8e) url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAQAAAACNCElAAAAxklEQVRIx+2Vuw3DMAxEXWUD9VrKvTYJRzAygWpPkSVcBlDtJS6Fg8AQqQ+lAEECXU08iid+pmnoTwWDKzbU6IEbLnkYQaMlD9uA6iqAUArQwDBgX4T1Z+uF4Q4PB/sZmH/1e1BCRZiLhqgWKsJsYjJLUPkDEJKjvmPWwnwCtcKoW4O5VnpTFmaVb8o3LXONOiZAcI3aYe5UIFXiUmv77doOc7oUpDoozLU5iiPFqYtcW4W01LJP3FEiwzXBLG9SUBNq6Ef0BJ8IApq+rItIAAAAAElFTkSuQmCC")}',"._1lrwmp9v{background-size:20px 20px}","._12veglyw{background-repeat:none}","._ouxl1qre{background-position:50% 50%}","._irr34135:hover{background-color:rgba(203,166,247,.8)}","._d0altlke:hover{cursor:pointer}"]),Xc.default.createElement("button",{onClick:r,className:jt(["_r06hglyw _kqswstnw _1xi21y44 _154ismyl _1bsb1tcg _4t3i1tcg _19itglyw _2rko1l7b _11q71d4i _1lrwmp9v _12veglyw _ouxl1qre _irr34135 _d0altlke"]),style:{"--_1rzmv8e":Pt(n?Rt.main:Rt.main60)}},t))},cu=(0,s.f1)(a());function uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var du=function(e){var t=e.children,n=e.onClick;return cu.default.createElement(Ot,null,cu.default.createElement(Mt,null,["._r06hglyw{-webkit-appearance:none;-moz-appearance:none;appearance:none}","._kqswstnw{position:absolute}","._1xi2zwfg{right:2pc}","._154ismyl{top:-28px}","._syazu67f{color:#fff}","._bfhk1emw{background-color:rgba(203,166,247,.6)}","._1wyb1crf{font-size:9pt}","._vwz410yn{line-height:25px}","._ca0qidpf{padding-top:0}","._u5f3i2wt{padding-right:6px}","._n3tdidpf{padding-bottom:0}","._19bvi2wt{padding-left:6px}","._4t3i1tcg{height:24px}","._1lrwmp9v{background-size:20px 20px}","._12veglyw{background-repeat:none}","._ouxl1qre{background-position:50% 50%}","._2rko1l7b{border-radius:3px}","._19itglyw{border:none}","._irr34135:hover{background-color:rgba(203,166,247,.8)}","._d0altlke:hover{cursor:pointer}"]),cu.default.createElement("button",{onClick:n,className:jt(["_r06hglyw _kqswstnw _1xi2zwfg _154ismyl _syazu67f _bfhk1emw _1wyb1crf _vwz410yn _ca0qidpf _u5f3i2wt _n3tdidpf _19bvi2wt _4t3i1tcg _1lrwmp9v _12veglyw _ouxl1qre _2rko1l7b _19itglyw _irr34135 _d0altlke"])},t))};function hu(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Bl(),2)[1],t=ut(us),n=cu.default.useCallback(function(){var n=prompt("Enter snapshot name",""+Date.now());if(n&&t){var r={name:n,timestamp:Date.now(),snapshot:t.doc.toJSON()};e({type:"save",payload:{snapshot:r}})}},[t]);return cu.default.createElement(du,{onClick:n},"Save snapshots")}var pu="._1wybw1gv{font-size:13px}",fu="._ect4ixyu{font-family:Helvetica Neue,Calibri Light,Roboto,sans-serif}",mu="._bfhk2l5j{background-color:#1e1e2e}",gu="._18m915vq{overflow-y:hidden}",yu="._1reo15vq{overflow-x:hidden}",vu="._4t3i1osq{height:100%}",bu="._1bsb1osq{width:100%}";function _u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Su=function(e){var t=e.children,n=e.onClick;return on.default.createElement(Ot,null,on.default.createElement(Mt,null,["._11q7glyw{background:none}","._19itglyw{border:none}","._kqswstnw{position:absolute}","._1xi2idpf{right:0}","._syaz4yqd{color:rgba(205,214,244,.6)}","._1wybf6fq{font-size:18px}","._d0altlke:hover{cursor:pointer}","._irr33ch5:hover{background-color:rgba(205,214,244,.05)}","._30l35y2n:hover{color:#cdd6f4}","._nt751r31:focus{outline-color:currentColor}","._49pcglyw:focus{outline-style:none}","._1hvw1o36:focus{outline-width:medium}"]),on.default.createElement("button",{"data-test-id":"__prosemirror_devtools_close_button__",onClick:n,className:jt(["_11q7glyw _19itglyw _kqswstnw _1xi2idpf _syaz4yqd _1wybf6fq _d0altlke _irr33ch5 _30l35y2n _nt751r31 _49pcglyw _1hvw1o36"])},t))};function ku(e){var t=e.rollbackHistory,n=_u(ht(pt),2),r=n[0],i=n[1],s=ut(ft),o=_u(ht(mt),2),a=o[0],l=o[1],c=on.default.useCallback(function(e){var t=e*window.innerHeight;document.querySelector("html").style.marginBottom="".concat(t,"px")},[]),u=_u(ru(),2),d=u[0],h=u[1],p=on.default.useCallback(function(){i(!r)},[r]),f=on.default.useCallback(function(e){switch(e.index){case"state":default:return on.default.createElement(Is,null);case"history":return on.default.createElement(Ca,{rollbackHistory:t});case"plugins":return on.default.createElement(Ga,null);case"schema":return on.default.createElement(Da,null);case"structure":return on.default.createElement(Ol,null);case"snapshots":return on.default.createElement(Gc,null)}},[t]),m=on.default.useCallback(function(){return on.default.createElement(Ot,null,on.default.createElement(Mt,null,[bu,vu,yu,gu,mu,fu,pu]),on.default.createElement("div",{"data-test-id":"__prosemirror_devtools_container__",className:jt(["_1bsb1osq _4t3i1osq _1reo15vq _18m915vq _bfhk2l5j _ect4ixyu _1wybw1gv"])},on.default.createElement(Su,{onClick:p},""),on.default.createElement(lu,{onClick:h.activate,isActive:d.active}),on.default.createElement(hu,null),on.default.createElement(Fn,{onSelect:l,selectedIndex:a},on.default.createElement(Ln,null,on.default.createElement(Un,{index:"state"},"State"),on.default.createElement(Un,{index:"history"},"History"),on.default.createElement(Un,{index:"plugins"},"Plugins"),on.default.createElement(Un,{index:"schema"},"Schema"),on.default.createElement(Un,{index:"structure"},"Structure"),on.default.createElement(Un,{index:"snapshots"},"Snapshots")),on.default.createElement(Bn,null,f))))},[d,h,a,r,f]);return on.default.createElement(Jc,null,on.default.createElement(au,null),on.default.createElement(On,{position:"bottom",dimMode:"none",isVisible:!0,defaultSize:s,onSizeChange:c,zIndex:1,fluid:!0,duration:0},m))}var Tu=(0,s.f1)(a()),xu=(0,s.f1)(a()),Eu=(0,s.f1)(a());function Cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Au(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ht(pt),2),r=t[0],i=t[1],s=ut(ft),o=e.editorView,a=Be.default.useCallback(function(){return i(!r)},[r]);!function(e,t){Tu.default.useEffect(function(){if(e){var n=t*window.innerHeight;document.querySelector("html").style.marginBottom="".concat(n,"px")}else document.querySelector("html").style.marginBottom=""},[t,e])}(r,s),function(e,t){var r=dt(Fc),i=dt(ga),s=dt(us),o=t?Promise.resolve().then(n.bind(n,7687)).then(function(e){return new(0,e.JsonDiffWorker)(t)}):Promise.resolve().then(n.bind(n,4226)).then(function(e){return new(0,e.JsonDiffMain)});xu.default.useEffect(function(){s(e.state),r(e),i({type:"reset",payload:{state:e.state}}),function(e){var t=(e._props.dispatchTransaction||e.dispatch).bind(e),n=function(n){var r=e.state;t(n),function(e,t,n){s(n),i({type:"update",payload:{oldState:t,newState:n,tr:e,diffWorker:o}})}(n,r,e.state)};e._props.dispatchTransaction?e._props.dispatchTransaction=n:e.dispatch=n}(e)},[e,o])}(o,e.diffWorker);var l=function(e){var t=dt(fa),n=dt(us);return Eu.default.useCallback(function(r,i){var s=Bc(),o=r.state,a=s.create({schema:o.schema,plugins:o.plugins,doc:o.schema.nodeFromJSON(o.doc.toJSON())});e.updateState(a),e.dom.focus();var l=wc.fromJSON(e.state.doc,o.selection.toJSON()),c=e.state.tr.setSelection(l).setMeta("addToHistory",!1).setMeta("_skip-dev-tools-history_",!0);e.dispatch(c),n(e.state),t(i)},[e])}(o);return r?Be.default.createElement(ku,{rollbackHistory:l}):Be.default.createElement(sn,{onClick:a})}var Ou,Mu=(0,s.f1)(Re()),Iu="__prosemirror-dev-tools__";function Du(e,t){var n=function(){var e=document.querySelector(".".concat(Iu));return e?(Ou.unmount(),e.innerHTML=""):((e=document.createElement("div")).className=Iu,document.body.appendChild(e)),e}();return(Ou=(0,Mu.createRoot)(n)).render(Ue.default.createElement(Au,{editorView:e,diffWorker:null==t?void 0:t.diffWorker})),function(){Ou.unmount()}}var ju=Du},4466:(e,t,n)=>{var r=n(4582).NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+i.source+s.source+"*(?::"+i.source+s.source+"*)?$");function a(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,a)}function l(){}function c(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function u(e,t,n,i,s,o){function a(e,t,r){n.attributeNames.hasOwnProperty(e)&&o.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),r)}for(var l,c=++t,u=0;;){var d=e.charAt(c);switch(d){case"=":if(1===u)l=e.slice(t,c),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(o.warning('attribute value must after "="'),l=e.slice(t,c)),t=c+1,!((c=e.indexOf(d,t))>0))throw new Error("attribute value no end '"+d+"' match");a(l,h=e.slice(t,c),t-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');a(l,h=e.slice(t,c),t),o.warning('attribute "'+l+'" missed start quot('+d+")!!"),t=c+1,u=5}break;case"/":switch(u){case 0:n.setTagName(e.slice(t,c));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:break;case 2:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==u&&n.setTagName(e.slice(t,c)),c;case">":switch(u){case 0:n.setTagName(e.slice(t,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=e.slice(t,c)).slice(-1)&&(n.closed=!0,h=h.slice(0,-1));case 2:2===u&&(h=l),4==u?(o.warning('attribute "'+h+'" missed quot(")!'),a(l,h,t)):(r.isHTML(i[""])&&h.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),a(h,h,t));break;case 3:throw new Error("attribute value missed!!")}return c;case"":d=" ";default:if(d<=" ")switch(u){case 0:n.setTagName(e.slice(t,c)),u=6;break;case 1:l=e.slice(t,c),u=2;break;case 4:var h=e.slice(t,c);o.warning('attribute "'+h+'" missed quot(")!!'),a(l,h,t);case 5:u=6}else switch(u){case 2:n.tagName,r.isHTML(i[""])&&l.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),a(l,l,t),t=c,u=1;break;case 5:o.warning('attribute space is required"'+l+'"!!');case 6:u=1,t=c;break;case 3:u=4,t=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function d(e,t,n){for(var i=e.tagName,s=null,o=e.length;o--;){var a=e[o],l=a.qName,c=a.value;if((p=l.indexOf(":"))>0)var u=a.prefix=l.slice(0,p),d=l.slice(p+1),h="xmlns"===u&&d;else d=l,u=null,h="xmlns"===l&&"";a.localName=d,!1!==h&&(null==s&&(s={},f(n,n={})),n[h]=s[h]=c,a.uri=r.XMLNS,t.startPrefixMapping(h,c))}for(o=e.length;o--;)(u=(a=e[o]).prefix)&&("xml"===u&&(a.uri=r.XML),"xmlns"!==u&&(a.uri=n[u||""]));var p;(p=i.indexOf(":"))>0?(u=e.prefix=i.slice(0,p),d=e.localName=i.slice(p+1)):(u=null,d=e.localName=i);var m=e.uri=n[u||""];if(t.startElement(m,d,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=s,!0;if(t.endElement(m,d,i),s)for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&t.endPrefixMapping(u)}function h(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var s=e.indexOf("</"+n+">",t),o=e.substring(t+1,s);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,r),i.characters(o,0,o.length),s)}return t+1}function p(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function f(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function m(e,t,n,r){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var s=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var a=s[1][0],l=!1,c=!1;o>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],c=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(c=s[3][0]));var u=s[o-1];return n.startDTD(a,l,c),n.endDTD(),u.index+u[0].length}return-1}function g(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function y(){this.attributeNames={}}a.prototype=new Error,a.prototype.name=a.name,l.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),f(t,t={}),function(e,t,n,i,s){function o(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function l(t){if(t>T){var n=e.substring(T,t).replace(/&#?\w+;/g,o);w&&f(T),i.characters(n,0,t-T),T=t}}function f(t,n){for(;t>=b&&(n=_.exec(e));)v=n.index,b=v+n[0].length,w.lineNumber++;w.columnNumber=t-v+1}for(var v=0,b=0,_=/.*(?:\r\n?|\n)|.*$/g,w=i.locator,S=[{currentNSMap:t}],k={},T=0;;){try{var x=e.indexOf("<",T);if(x<0){if(!e.substr(T).match(/^\s*$/)){var E=i.doc,C=E.createTextNode(e.substr(T));E.appendChild(C),i.currentElement=C}return}switch(x>T&&l(x),e.charAt(x+1)){case"/":var A=e.indexOf(">",x+3),O=e.substring(x+2,A).replace(/[ \t\n\r]+$/g,""),M=S.pop();A<0?(O=e.substring(x+2).replace(/[\s<].*/,""),s.error("end tag name: "+O+" is not complete:"+M.tagName),A=x+1+O.length):O.match(/\s</)&&(O=O.replace(/[\s<].*/,""),s.error("end tag name: "+O+" maybe not complete"),A=x+1+O.length);var I=M.localNSMap,D=M.tagName==O;if(D||M.tagName&&M.tagName.toLowerCase()==O.toLowerCase()){if(i.endElement(M.uri,M.localName,O),I)for(var j in I)Object.prototype.hasOwnProperty.call(I,j)&&i.endPrefixMapping(j);D||s.fatalError("end tag name: "+O+" is not match the current start tagName:"+M.tagName)}else S.push(M);A++;break;case"?":w&&f(x),A=g(e,x,i);break;case"!":w&&f(x),A=m(e,x,i,s);break;default:w&&f(x);var P=new y,L=S[S.length-1].currentNSMap,N=(A=u(e,x,P,L,o,s),P.length);if(!P.closed&&p(e,A,P.tagName,k)&&(P.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),w&&N){for(var R=c(w,{}),U=0;U<N;U++){var B=P[U];f(B.offset),B.locator=c(w,{})}i.locator=R,d(P,i,L)&&S.push(P),i.locator=w}else d(P,i,L)&&S.push(P);r.isHTML(P.uri)&&!P.closed?A=h(e,A,P.tagName,o,i):A++}}catch(e){if(e instanceof a)throw e;s.error("element parse error: "+e),A=-1}A>T?T=A:l(Math.max(x,T)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},y.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=l,t.ParseError=a},4582:(e,t)=>{"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var r=n({HTML:"text/html",isHTML:function(e){return e===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var r=0;r<e.length;r++)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];if(t.call(void 0,i,r,e))return i}},t.freeze=n,t.MIME_TYPE=r,t.NAMESPACE=i},4617:(e,t,n)=>{"use strict";n.d(t,{P$:()=>u,VA:()=>d,f1:()=>h,ki:()=>c});var r=Object.create,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)(function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),u=(e,t)=>function(){return t||(0,e[o(e)[0]])((t={exports:{}}).exports,t),t.exports},d=(e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})},h=(e,t,n)=>(n=null!=e?r(a(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of o(t))l.call(e,n)||undefined===n||i(e,n,{get:()=>t[n],enumerable:!(r=s(t,n))||r.enumerable});return e})(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e))},4620:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);const r=n.default.getComponent("MenuButton"),i=n.default.getComponent("Menu"),s=n.default.getComponent("Component"),o=n.default.dom;class a extends r{constructor(e){super(e,{title:e.localize("Quality"),name:"QualityButton"})}createItems(){return[]}createMenu(){const e=new i(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=o.createEl("li",{className:"vjs-menu-title",innerHTML:(t=this.options_.title,"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)),tabIndex:-1}),r=new s(this.player_,{el:n});this.hideThreshold_+=1,e.addItem(r)}var t;if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}}const l=n.default.getComponent("MenuItem");class c extends l{constructor(e,t,n,r){super(e,{label:t.label,selectable:!0,selected:t.selected||!1}),this.item=t,this.qualityButton=n,this.plugin=r}handleClick(){for(let e=0;e<this.qualityButton.items.length;++e)this.qualityButton.items[e].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)}}const u=n.default.getPlugin("plugin"),d={};class h extends u{constructor(e,t){super(e),this.options=n.default.obj.merge(d,t),this.player.ready(()=>{this.player.qualityLevels&&(this.player.addClass("vjs-hls-quality-selector"),this.createQualityButton(),this.bindPlayerEvents())})}bindPlayerEvents(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))}createQualityButton(){const e=this.player;this._qualityButton=new a(e);const t=e.controlBar.children().length-2,n=e.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},this.options.placementIndex||t);if(n.addClass("vjs-quality-selector"),this.options.displayCurrentQuality)this.setButtonInnerText(e.localize("Auto"));else{const e=` ${this.options.vjsIconClass||"vjs-icon-hd"}`;n.menuButton_.$(".vjs-icon-placeholder").className+=e}n.removeClass("vjs-hidden")}setButtonInnerText(e){this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML=e}getQualityMenuItem(e){const t=this.player;return new c(t,e,this._qualityButton,this)}onAddQualityLevel(){const e=this.player.qualityLevels().levels_||[],t=[];for(let n=0;n<e.length;++n){const{width:r,height:i}=e[n],s=r>i?i:r;if(s&&!t.filter(e=>e.item&&e.item.value===s).length){const e=this.getQualityMenuItem.call(this,{label:s+"p",value:s});t.push(e)}}t.sort((e,t)=>"object"!=typeof e||"object"!=typeof t||e.item.value<t.item.value?-1:e.item.value>t.item.value?1:0),t.push(this.getQualityMenuItem.call(this,{label:this.player.localize("Auto"),value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=()=>t,this._qualityButton.update())}setQuality(e){const t=this.player.qualityLevels();this._currentQuality=e,this.options.displayCurrentQuality&&this.setButtonInnerText("auto"===e?this.player.localize("Auto"):`${e}p`);for(let n=0;n<t.length;++n){const{width:r,height:i}=t[n],s=r>i?i:r;t[n].enabled=s===e||"auto"===e}this._qualityButton.unpressButton()}getCurrentQuality(){return this._currentQuality||"auto"}}return h.VERSION="2.0.0",n.default.registerPlugin("hlsQualitySelector",h),h}(n(9879))},4633:(e,t,n)=>{var r=n(5172),i=n(6993),s=n(5869),o=n(887),a=n(1791),l=n(4373),c=n(579);function u(){"use strict";var t=i(),n=t.m(u),d=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function h(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))}var p={throw:1,return:2,break:3,continue:3};function f(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,p[e],t)},delegateYield:function(e,i,s){return t.resultName=i,n(r.d,c(e),s)},finish:function(e){return n(r.f,e)}},n=function(e,n,i){r.p=t.prev,r.n=t.next;try{return e(n,i)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=u=function(){return{wrap:function(e,n,r,i){return t.w(f(e),n,r,i&&i.reverse())},isGeneratorFunction:h,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:a,async:function(e,t,n,r,i){return(h(t)?o:s)(f(e),t,n,r,i)},keys:l,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4722:(e,t,n)=>{var r=n(4582),i=r.find,s=r.NAMESPACE;function o(e){return""!==e}function a(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function l(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(o):[]}(e);return Object.keys(t.reduce(a,{}))}function c(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function u(e,t){var n=e.prototype;if(!(n instanceof t)){function r(){}r.prototype=t.prototype,c(n,r=new r),e.prototype=n=r}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var d={},h=d.ELEMENT_NODE=1,p=d.ATTRIBUTE_NODE=2,f=d.TEXT_NODE=3,m=d.CDATA_SECTION_NODE=4,g=d.ENTITY_REFERENCE_NODE=5,y=d.ENTITY_NODE=6,v=d.PROCESSING_INSTRUCTION_NODE=7,b=d.COMMENT_NODE=8,_=d.DOCUMENT_NODE=9,w=d.DOCUMENT_TYPE_NODE=10,S=d.DOCUMENT_FRAGMENT_NODE=11,k=d.NOTATION_NODE=12,T={},x={},E=(T.INDEX_SIZE_ERR=(x[1]="Index size error",1),T.DOMSTRING_SIZE_ERR=(x[2]="DOMString size error",2),T.HIERARCHY_REQUEST_ERR=(x[3]="Hierarchy request error",3)),C=(T.WRONG_DOCUMENT_ERR=(x[4]="Wrong document",4),T.INVALID_CHARACTER_ERR=(x[5]="Invalid character",5),T.NO_DATA_ALLOWED_ERR=(x[6]="No data allowed",6),T.NO_MODIFICATION_ALLOWED_ERR=(x[7]="No modification allowed",7),T.NOT_FOUND_ERR=(x[8]="Not found",8)),A=(T.NOT_SUPPORTED_ERR=(x[9]="Not supported",9),T.INUSE_ATTRIBUTE_ERR=(x[10]="Attribute in use",10));function O(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,x[e]),this.message=x[e],Error.captureStackTrace&&Error.captureStackTrace(this,O);return n.code=e,t&&(this.message=this.message+": "+t),n}function M(){}function I(e,t){this._node=e,this._refresh=t,D(this)}function D(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var n=e._refresh(e._node);if(ve(e,"length",n.length),!e.$$length||n.length<e.$$length)for(var r=n.length;r in e;r++)Object.prototype.hasOwnProperty.call(e,r)&&delete e[r];c(n,e),e._inc=t}}function j(){}function P(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function L(e,t,n,r){if(r?t[P(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&$(i,e,r),function(e,t,n){e&&e._inc++,n.namespaceURI===s.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function N(e,t,n){var r=P(t,n);if(!(r>=0))throw new O(C,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var s=e.ownerDocument;s&&($(s,e,n),n.ownerElement=null)}}function R(){}function U(){}function B(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function F(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(F(e,t))return!0}while(e=e.nextSibling)}function z(){this.ownerDocument=this}function $(e,t,n,r){e&&e._inc++,n.namespaceURI===s.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function q(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,s=0;i;)r[s++]=i,i=i.nextSibling;r.length=s,delete r[r.length]}}}function H(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,q(e.ownerDocument,e),t}function V(e){return e&&e.nodeType===U.DOCUMENT_TYPE_NODE}function W(e){return e&&e.nodeType===U.ELEMENT_NODE}function G(e){return e&&e.nodeType===U.TEXT_NODE}function K(e,t){var n=e.childNodes||[];if(i(n,W)||V(t))return!1;var r=i(n,V);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function J(e,t){var n=e.childNodes||[];if(i(n,function(e){return W(e)&&e!==t}))return!1;var r=i(n,V);return!(t&&r&&n.indexOf(r)>n.indexOf(t))}function X(e,t,n){var r=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===U.DOCUMENT_FRAGMENT_NODE){var o=s.filter(W);if(o.length>1||i(s,G))throw new O(E,"More than one element or text in fragment");if(1===o.length&&!K(e,n))throw new O(E,"Element in fragment can not be inserted before doctype")}if(W(t)&&!K(e,n))throw new O(E,"Only one element can be added and only after doctype");if(V(t)){if(i(r,V))throw new O(E,"Only one doctype is allowed");var a=i(r,W);if(n&&r.indexOf(a)<r.indexOf(n))throw new O(E,"Doctype can only be inserted before an element");if(!n&&a)throw new O(E,"Doctype can not be appended since element is present")}}function Y(e,t,n){var r=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===U.DOCUMENT_FRAGMENT_NODE){var o=s.filter(W);if(o.length>1||i(s,G))throw new O(E,"More than one element or text in fragment");if(1===o.length&&!J(e,n))throw new O(E,"Element in fragment can not be inserted before doctype")}if(W(t)&&!J(e,n))throw new O(E,"Only one element can be added and only after doctype");if(V(t)){if(i(r,function(e){return V(e)&&e!==n}))throw new O(E,"Only one doctype is allowed");var a=i(r,W);if(n&&r.indexOf(a)<r.indexOf(n))throw new O(E,"Doctype can only be inserted before an element")}}function Q(e,t,n,r){(function(e,t,n){if(!function(e){return e&&(e.nodeType===U.DOCUMENT_NODE||e.nodeType===U.DOCUMENT_FRAGMENT_NODE||e.nodeType===U.ELEMENT_NODE)}(e))throw new O(E,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new O(C,"child not in parent");if(!function(e){return e&&(W(e)||G(e)||V(e)||e.nodeType===U.DOCUMENT_FRAGMENT_NODE||e.nodeType===U.COMMENT_NODE||e.nodeType===U.PROCESSING_INSTRUCTION_NODE)}(t)||V(t)&&e.nodeType!==U.DOCUMENT_NODE)throw new O(E,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)})(e,t,n),e.nodeType===U.DOCUMENT_NODE&&(r||X)(e,t,n);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===S){var s=t.firstChild;if(null==s)return t;var o=t.lastChild}else s=o=t;var a=n?n.previousSibling:e.lastChild;s.previousSibling=a,o.nextSibling=n,a?a.nextSibling=s:e.firstChild=s,null==n?e.lastChild=o:n.previousSibling=o;do{s.parentNode=e}while(s!==o&&(s=s.nextSibling));return q(e.ownerDocument||e,e),t.nodeType==S&&(t.firstChild=t.lastChild=null),t}function Z(){this._nsMap={}}function ee(){}function te(){}function ne(){}function re(){}function ie(){}function se(){}function oe(){}function ae(){}function le(){}function ce(){}function ue(){}function de(){}function he(e,t){var n=[],r=9==this.nodeType&&this.documentElement||this,i=r.prefix,s=r.namespaceURI;if(s&&null==i&&null==(i=r.lookupPrefix(s)))var o=[{namespace:s,prefix:null}];return me(this,n,e,t,o),n.join("")}function pe(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!i)return!1;if("xml"===r&&i===s.XML||i===s.XMLNS)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix===r)return a.namespace!==i}return!0}function fe(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,B),'"')}function me(e,t,n,r,i){if(i||(i=[]),r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case h:var o=e.attributes,a=o.length,l=e.firstChild,c=e.tagName,u=c;if(!(n=s.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var d,y=0;y<o.length;y++)if("xmlns"===o.item(y).name){d=o.item(y).value;break}if(!d)for(var k=i.length-1;k>=0;k--)if(""===(T=i[k]).prefix&&T.namespace===e.namespaceURI){d=T.namespace;break}if(d!==e.namespaceURI)for(k=i.length-1;k>=0;k--){var T;if((T=i[k]).namespace===e.namespaceURI){T.prefix&&(u=T.prefix+":"+c);break}}}t.push("<",u);for(var x=0;x<a;x++)"xmlns"==(E=o.item(x)).prefix?i.push({prefix:E.localName,namespace:E.value}):"xmlns"==E.nodeName&&i.push({prefix:"",namespace:E.value});for(x=0;x<a;x++){var E,C,A;pe(E=o.item(x),0,i)&&(fe(t,(C=E.prefix||"")?"xmlns:"+C:"xmlns",A=E.namespaceURI),i.push({prefix:C,namespace:A})),me(E,t,n,r,i)}if(c===u&&pe(e,0,i)&&(fe(t,(C=e.prefix||"")?"xmlns:"+C:"xmlns",A=e.namespaceURI),i.push({prefix:C,namespace:A})),l||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push(">"),n&&/^script$/i.test(c))for(;l;)l.data?t.push(l.data):me(l,t,n,r,i.slice()),l=l.nextSibling;else for(;l;)me(l,t,n,r,i.slice()),l=l.nextSibling;t.push("</",u,">")}else t.push("/>");return;case _:case S:for(l=e.firstChild;l;)me(l,t,n,r,i.slice()),l=l.nextSibling;return;case p:return fe(t,e.name,e.value);case f:return t.push(e.data.replace(/[<&>]/g,B));case m:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case w:var O=e.publicId,M=e.systemId;if(t.push("<!DOCTYPE ",e.name),O)t.push(" PUBLIC ",O),M&&"."!=M&&t.push(" ",M),t.push(">");else if(M&&"."!=M)t.push(" SYSTEM ",M,">");else{var I=e.internalSubset;I&&t.push(" [",I,"]"),t.push(">")}return;case v:return t.push("<?",e.target," ",e.data,"?>");case g:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ge(e,t,n){var r;switch(t.nodeType){case h:(r=t.cloneNode(!1)).ownerDocument=e;case S:break;case p:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(ge(e,i,n)),i=i.nextSibling;return r}function ye(e,t,n){var r=new t.constructor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];"object"!=typeof s&&s!=r[i]&&(r[i]=s)}switch(t.childNodes&&(r.childNodes=new M),r.ownerDocument=e,r.nodeType){case h:var o=t.attributes,a=r.attributes=new j,l=o.length;a._ownerElement=r;for(var c=0;c<l;c++)r.setAttributeNode(ye(e,o.item(c),!0));break;case p:n=!0}if(n)for(var u=t.firstChild;u;)r.appendChild(ye(e,u,n)),u=u.nextSibling;return r}function ve(e,t,n){e[t]=n}T.INVALID_STATE_ERR=(x[11]="Invalid state",11),T.SYNTAX_ERR=(x[12]="Syntax error",12),T.INVALID_MODIFICATION_ERR=(x[13]="Invalid modification",13),T.NAMESPACE_ERR=(x[14]="Invalid namespace",14),T.INVALID_ACCESS_ERR=(x[15]="Invalid access",15),O.prototype=Error.prototype,c(T,O),M.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)me(this[r],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},I.prototype.item=function(e){return D(this),this[e]||null},u(I,M),j.prototype={length:0,item:M.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new O(A);var n=this.getNamedItem(e.nodeName);return L(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new O(A);return t=this.getNamedItemNS(e.namespaceURI,e.localName),L(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return N(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return N(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},R.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var r=new z;if(r.implementation=this,r.childNodes=new M,r.doctype=n||null,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new se;return r.name=e,r.nodeName=e,r.publicId=t||"",r.systemId=n||"",r}},U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Q(this,e,t)},replaceChild:function(e,t){Q(this,e,t,Y),t&&this.removeChild(t)},removeChild:function(e){return H(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ye(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==f&&e.nodeType==f?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]===e)return r;t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==p?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},c(d,U),c(d,U.prototype),z.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==S){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return Q(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===h&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),H(this,e)},replaceChild:function(e,t){Q(this,e,t,Y),e.ownerDocument=this,t&&this.removeChild(t),W(e)&&(this.documentElement=e)},importNode:function(e,t){return ge(this,e,t)},getElementById:function(e){var t=null;return F(this.documentElement,function(n){if(n.nodeType==h&&n.getAttribute("id")==e)return t=n,!0}),t},getElementsByClassName:function(e){var t=l(e);return new I(this,function(n){var r=[];return t.length>0&&F(n.documentElement,function(i){if(i!==n&&i.nodeType===h){var s=i.getAttribute("class");if(s){var o=e===s;if(!o){var a=l(s);o=t.every((c=a,function(e){return c&&-1!==c.indexOf(e)}))}o&&r.push(i)}}var c}),r})},createElement:function(e){var t=new Z;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new M,(t.attributes=new j)._ownerElement=t,t},createDocumentFragment:function(){var e=new ce;return e.ownerDocument=this,e.childNodes=new M,e},createTextNode:function(e){var t=new ne;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ue;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new ee;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new le;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Z,r=t.split(":"),i=n.attributes=new j;return n.childNodes=new M,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new ee,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},u(z,U),Z.prototype={nodeType:h,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===S?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,q(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new I(this,function(t){var n=[];return F(t,function(r){r===t||r.nodeType!=h||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new I(this,function(n){var r=[];return F(n,function(i){i===n||i.nodeType!==h||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)}),r})}},z.prototype.getElementsByTagName=Z.prototype.getElementsByTagName,z.prototype.getElementsByTagNameNS=Z.prototype.getElementsByTagNameNS,u(Z,U),ee.prototype.nodeType=p,u(ee,U),te.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(x[E])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},u(te,U),ne.prototype={nodeName:"#text",nodeType:f,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},u(ne,te),re.prototype={nodeName:"#comment",nodeType:b},u(re,te),ie.prototype={nodeName:"#cdata-section",nodeType:m},u(ie,te),se.prototype.nodeType=w,u(se,U),oe.prototype.nodeType=k,u(oe,U),ae.prototype.nodeType=y,u(ae,U),le.prototype.nodeType=g,u(le,U),ce.prototype.nodeName="#document-fragment",ce.prototype.nodeType=S,u(ce,U),ue.prototype.nodeType=v,u(ue,U),de.prototype.serializeToString=function(e,t,n){return he.call(e,t,n)},U.prototype.toString=he;try{if(Object.defineProperty){function be(e){switch(e.nodeType){case h:case S:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(be(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(I.prototype,"length",{get:function(){return D(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return be(this)},set:function(e){switch(this.nodeType){case h:case S:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ve=function(e,t,n){e["$$"+t]=n}}}catch(_e){}t.DocumentType=se,t.DOMException=O,t.DOMImplementation=R,t.Element=Z,t.Node=U,t.NodeList=M,t.XMLSerializer=de},4756:(e,t,n)=>{var r=n(4633)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},4784:(e,t,n)=>{var r=n(9840),i=e.exports={WebVTT:n(6311),VTTCue:n(184),VTTRegion:n(5891)};r.vttjs=i,r.WebVTT=i.WebVTT;var s=i.VTTCue,o=i.VTTRegion,a=r.VTTCue,l=r.VTTRegion;i.shim=function(){r.VTTCue=s,r.VTTRegion=o},i.restore=function(){r.VTTCue=a,r.VTTRegion=l},r.VTTCue||i.shim()},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],u=s[c]||0,d="".concat(c," ").concat(u);s[c]=u+1;var h=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=i(p,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=r(e,i),c=0;c<s.length;c++){var u=n(s[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},5172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},5534:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r,i,s=n(447),o=(e=21)=>{var t;t=e|=0,!r||r.length<t?(r=Buffer.allocUnsafe(128*t),s.randomFillSync(r),i=0):i+t>r.length&&(s.randomFillSync(r),i=0);let n="";for(let s=(i+=t)-e;s<i;s++)n+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[s]];return n}},5546:e=>{function t(n,r,i,s){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}e.exports=t=function(e,n,r,i){if(n)o?o(e,n,{value:r,enumerable:!i,configurable:!i,writable:!i}):e[n]=r;else{var s=function(n,r){t(e,n,function(e){return this._invoke(n,r,e)})};s("next",0),s("throw",1),s("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r,i,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5752:(e,t,n)=>{var r=n(4582),i=n(4722),s=n(6559),o=n(4466),a=i.DOMImplementation,l=r.NAMESPACE,c=o.ParseError,u=o.XMLReader;function d(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function h(e){this.options=e||{locator:{}}}function p(){this.cdata=!1}function f(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function m(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function g(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function y(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}h.prototype.parseFromString=function(e,t){var n=this.options,r=new u,i=n.domBuilder||new p,o=n.errorHandler,a=n.locator,c=n.xmlns||{},h=/\/x?html?$/.test(t),f=h?s.HTML_ENTITIES:s.XML_ENTITIES;a&&i.setDocumentLocator(a),r.errorHandler=function(e,t,n){if(!e){if(t instanceof p)return t;e=t}var r={},i=e instanceof Function;function s(t){var s=e[t];!s&&i&&(s=2==e.length?function(n){e(t,n)}:e),r[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+m(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(o,i,a),r.domBuilder=n.domBuilder||i,h&&(c[""]=l.HTML),c.xml=c.xml||l.XML;var g=n.normalizeLineEndings||d;return e&&"string"==typeof e?r.parse(g(e),c,f):r.errorHandler.error("invalid doc source"),i.doc},p.prototype={startDocument:function(){this.doc=(new a).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,s=i.createElementNS(e,n||t),o=r.length;y(this,s),this.currentElement=s,this.locator&&f(this.locator,s);for(var a=0;a<o;a++){e=r.getURI(a);var l=r.getValue(a),c=(n=r.getQName(a),i.createAttributeNS(e,n));this.locator&&f(r.getLocator(a),c),c.value=c.nodeValue=l,s.setAttributeNode(c)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&f(this.locator,n),y(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=g.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&f(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=g.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&f(this.locator,r),y(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&f(this.locator,i),y(this,i),this.doc.doctype=i}},warning:function(e){console.warn("[xmldom warning]\t"+e,m(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,m(this.locator))},fatalError:function(e){throw new c(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){p.prototype[e]=function(){return null}}),t.DOMParser=h},5869:(e,t,n)=>{var r=n(887);e.exports=function(e,t,n,i,s){var o=r(e,t,n,i,s);return o.next().then(function(e){return e.done?e.value:o.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},5891:e=>{var t={"":!0,up:!0};function n(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,r=3,i=0,s=100,o=0,a=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");r=e}},regionAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");s=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return l},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):l=n}}})}},6162:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n=function(){function e(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var n=e.prototype;return n.getIsEnabled=function(){return this.enabled_},n.enable=function(){this.enabled_=!0},n.disable=function(){this.enabled_=!1},n.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},n.addInterceptor=function(e,t){this.typeToInterceptorsMap_.has(e)||this.typeToInterceptorsMap_.set(e,new Set);var n=this.typeToInterceptorsMap_.get(e);return!n.has(t)&&(n.add(t),!0)},n.removeInterceptor=function(e,t){var n=this.typeToInterceptorsMap_.get(e);return!(!n||!n.has(t)||(n.delete(t),0))},n.clearInterceptorsByType=function(e){return!!this.typeToInterceptorsMap_.get(e)&&(this.typeToInterceptorsMap_.delete(e),this.typeToInterceptorsMap_.set(e,new Set),!0)},n.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},n.getForType=function(e){return this.typeToInterceptorsMap_.get(e)||new Set},n.execute=function(e,n){for(var r,i=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.getForType(e));!(r=i()).done;){var s=r.value;try{n=s(n)}catch(e){}}return n},e}();e.exports=n},6311:(e,t,n)=>{var r=n(9697),i=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function s(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function a(){this.values=i(null)}function l(e,t,n,r){var i=r?e.split(r):[e];for(var s in i)if("string"==typeof i[s]){var o=i[s].split(n);2===o.length&&t(o[0].trim(),o[1].trim())}}function c(e,t,n){var r=e;function i(){var t=o(e);if(null===t)throw new s(s.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=i(),c(),"--\x3e"!==e.substr(0,3))throw new s(s.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),c(),t.endTime=i(),c(),function(e,t){var r=new a;l(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),o=s[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===s.length&&r.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=t.split(","),r.percent(e,s[0]),2===s.length&&r.alt("positionAlign",s[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}s.prototype=i(Error.prototype),s.prototype.constructor=s,s.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var u=r.createElement&&r.createElement("textarea"),d={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function m(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e){return u.innerHTML=e,e=u.textContent,u.textContent="",e}function i(e,t){return!f[t.localName]||f[t.localName]===e.localName}function s(t,n){var r=d[t];if(!r)return null;var i=e.document.createElement(r),s=p[t];return s&&n&&(i[s]=n.trim()),i}for(var a,l=e.document.createElement("div"),c=l,m=[];null!==(a=n());)if("<"!==a[0])c.appendChild(e.document.createTextNode(r(a)));else{if("/"===a[1]){m.length&&m[m.length-1]===a.substr(2).replace(">","")&&(m.pop(),c=c.parentNode);continue}var g,y=o(a.substr(1,a.length-2));if(y){g=e.document.createProcessingInstruction("timestamp",y),c.appendChild(g);continue}var v=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(!(g=s(v[1],v[3])))continue;if(!i(c,g))continue;if(v[2]){var b=v[2].split(".");b.forEach(function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(h.hasOwnProperty(n)){var r=t?"background-color":"color",i=h[n];g.style[r]=i}}),g.className=b.join(" ")}m.push(v[1]),c.appendChild(g),c=g}return l}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(e){for(var t=0;t<g.length;t++){var n=g[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function v(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var s=n.match(/^.*(\n|\r)/);return s?(e.length=0,s[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var s=0;s<n.length;s++)if(y(n.charCodeAt(s)))return"rtl";return"ltr"}function b(){}function _(e,t,n){b.call(this),this.cue=t,this.cueDiv=m(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:v(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":case"line-left":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":case"line-right":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect(),t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function S(e,t,n,r){var i=new w(t),s=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(s),a=[];if(s.snapToLines){var l;switch(s.vertical){case"":a=["+y","-y"],l="height";break;case"rl":a=["+x","-x"],l="width";break;case"lr":a=["-x","+x"],l="width"}var c=i.lineHeight,u=c*Math.round(o),d=n[l]+c,h=a[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),o<0&&(u+=""===s.vertical?n.height:n.width,a=a.reverse()),i.move(h,u)}else{var p=i.lineHeight/n.height*100;switch(s.lineAlign){case"center":o-=p/2;break;case"end":o-=p}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],i=new w(t)}var f=function(e,t){for(var i,s=new w(e),o=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(n,t[a])||e.within(n)&&e.overlapsAny(r);)e.move(t[a]);if(e.within(n))return e;var l=e.intersectPercentage(n);o>l&&(i=new w(e),o=l),e=new w(s)}return i||s}(i,a);t.move(f.toCSSCompatValues(n))}function k(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=i(b.prototype),_.prototype.constructor=_,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},k.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},k.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null},k.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],s=w.getSimpleBoxPosition(r),o={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var n,a,l=0;l<t.length;l++)a=t[l],n=new _(e,a,o),r.appendChild(n.div),S(0,n,s,i),a.displayState=n.div,i.push(w.getSimpleBoxPosition(n))}()}else for(var a=0;a<t.length;a++)r.appendChild(t[a].displayState)},k.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},k.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof s))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}function r(e){e.match(/X-TIMESTAMP-MAP/)?l(e,function(e,n){"X-TIMESTAMP-MAP"===e&&function(e){var n=new a;l(e,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",o(t))}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)},/=/):l(e,function(e,n){"Region"===e&&function(e){var n=new a;if(l(e,function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(2!==r.length)break;var i=new a;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;n.set(e+"X",i.get("x")),n.set(e+"Y",i.get("y"));break;case"scroll":n.alt(e,t,["up"])}},/=/,/\s/),n.has("id")){var r=new(t.vttjs.VTTRegion||t.window.VTTRegion);r.width=n.get("width",100),r.lines=n.get("lines",3),r.regionAnchorX=n.get("regionanchorX",0),r.regionAnchorY=n.get("regionanchorY",100),r.viewportAnchorX=n.get("viewportanchorX",0),r.viewportAnchorY=n.get("viewportanchorY",100),r.scroll=n.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:n.get("id"),region:r})}}(n)},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var u=(i=n()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new s(s.Errors.BadSignature);t.state="HEADER"}for(var d=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(d?d=!1:i=n(),t.state){case"HEADER":/:/.test(i)?r(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{c(i,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var h=-1!==i.indexOf("--\x3e");if(!i||h&&(d=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new s(s.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=k},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},6317:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});var r=n(4617),i=(0,r.P$)({"../../node_modules/.pnpm/color-name@1.1.3/node_modules/color-name/index.js"(e,t){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}}),s=(0,r.P$)({"../../node_modules/.pnpm/color-convert@1.9.3/node_modules/color-convert/conversions.js"(e,t){var n,r=i(),s={};for(n in r)r.hasOwnProperty(n)&&(s[r[n]]=n);var o,a,l,c=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(l in c)if(c.hasOwnProperty(l)){if(!("channels"in c[l]))throw new Error("missing channels property: "+l);if(!("labels"in c[l]))throw new Error("missing channel labels property: "+l);if(c[l].labels.length!==c[l].channels)throw new Error("channel and label counts mismatch: "+l);o=c[l].channels,a=c[l].labels,delete c[l].channels,delete c[l].labels,Object.defineProperty(c[l],"channels",{value:o}),Object.defineProperty(c[l],"labels",{value:a})}function u(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}c.rgb.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,s=e[2]/255,o=Math.min(r,i,s),a=Math.max(r,i,s),l=a-o;return a===o?t=0:r===a?t=(i-s)/l:i===a?t=2+(s-r)/l:s===a&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+a)/2,[t,100*(a===o?0:n<=.5?l/(a+o):l/(2-a-o)),100*n]},c.rgb.hsv=function(e){var t,n,r,i,s,o=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),d=function(e){return(c-e)/6/u+.5};return 0===u?i=s=0:(s=u/c,t=d(o),n=d(a),r=d(l),o===c?i=r-n:a===c?i=1/3+t-r:l===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*s,100*c]},c.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[c.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,r))*100,100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},c.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},c.rgb.keyword=function(e){var t=s[e];if(t)return t;var n,i=1/0;for(var o in r)if(r.hasOwnProperty(o)){var a=u(e,r[o]);a<i&&(i=a,n=o)}return n},c.keyword.rgb=function(e){return r[e]},c.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},c.rgb.lab=function(e){var t=c.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},c.hsl.rgb=function(e){var t,n,r,i,s,o=e[0]/360,a=e[1]/100,l=e[2]/100;if(0===a)return[s=255*l,s,s];t=2*l-(n=l<.5?l*(1+a):l+a-l*a),i=[0,0,0];for(var c=0;c<3;c++)(r=o+1/3*-(c-1))<0&&r++,r>1&&r--,s=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[c]=255*s;return i},c.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,s=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=s<=1?s:2-s,[t,100*(0===r?2*i/(s+i):2*n/(r+n)),(r+n)/2*100]},c.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,s=t-Math.floor(t),o=255*r*(1-n),a=255*r*(1-n*s),l=255*r*(1-n*(1-s));switch(r*=255,i){case 0:return[r,l,o];case 1:return[a,r,o];case 2:return[o,r,l];case 3:return[o,a,r];case 4:return[l,o,r];case 5:return[r,o,a]}},c.hsv.hsl=function(e){var t,n,r,i=e[0],s=e[1]/100,o=e[2]/100,a=Math.max(o,.01);return r=(2-s)*o,n=s*a,[i,100*(n=(n/=(t=(2-s)*a)<=1?t:2-t)||0),100*(r/=2)]},c.hwb.rgb=function(e){var t,n,r,i,s,o,a,l=e[0]/360,c=e[1]/100,u=e[2]/100,d=c+u;switch(d>1&&(c/=d,u/=d),r=6*l-(t=Math.floor(6*l)),1&t&&(r=1-r),i=c+r*((n=1-u)-c),t){default:case 6:case 0:s=n,o=i,a=c;break;case 1:s=i,o=n,a=c;break;case 2:s=c,o=n,a=i;break;case 3:s=c,o=i,a=n;break;case 4:s=i,o=c,a=n;break;case 5:s=n,o=c,a=i}return[255*s,255*o,255*a]},c.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},c.xyz.rgb=function(e){var t,n,r,i=e[0]/100,s=e[1]/100,o=e[2]/100;return n=-.9689*i+1.8758*s+.0415*o,r=.0557*i+-.204*s+1.057*o,t=(t=3.2406*i+-1.5372*s+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},c.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},c.lab.xyz=function(e){var t,n,r,i=e[0];t=e[1]/500+(n=(i+16)/116),r=n-e[2]/200;var s=Math.pow(n,3),o=Math.pow(t,3),a=Math.pow(r,3);return n=s>.008856?s:(n-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,r=a>.008856?a:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},c.lab.lch=function(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},c.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},c.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:c.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var s=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===i&&(s+=60),s},c.hsv.ansi16=function(e){return c.rgb.ansi16(c.hsv.rgb(e),e[2])},c.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},c.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},c.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},c.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},c.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},c.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,s=Math.max(Math.max(n,r),i),o=Math.min(Math.min(n,r),i),a=s-o;return t=a<=0?0:s===n?(r-i)/a%6:s===r?2+(i-n)/a:4+(n-r)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?o/(1-a):0)]},c.hsl.hcg=function(e){var t,n=e[1]/100,r=e[2]/100,i=0;return(t=r<.5?2*n*r:2*n*(1-r))<1&&(i=(r-.5*t)/(1-t)),[e[0],100*t,100*i]},c.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},c.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i,s=[0,0,0],o=t%1*6,a=o%1,l=1-a;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return i=(1-n)*r,[255*(n*s[0]+i),255*(n*s[1]+i),255*(n*s[2]+i)]},c.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},c.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},c.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},c.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},c.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},c.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},c.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},c.gray.hsl=c.gray.hsv=function(e){return[0,0,e[0]]},c.gray.hwb=function(e){return[0,100,e[0]]},c.gray.cmyk=function(e){return[0,0,0,e[0]]},c.gray.lab=function(e){return[e[0],0,0]},c.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},c.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}}),o=(0,r.P$)({"../../node_modules/.pnpm/color-convert@1.9.3/node_modules/color-convert/route.js"(e,t){var n=s();function r(e,t){return function(n){return t(e(n))}}function i(e,t){for(var i=[t[e].parent,e],s=n[t[e].parent][e],o=t[e].parent;t[o].parent;)i.unshift(t[o].parent),s=r(n[t[o].parent][o],s),o=t[o].parent;return s.conversion=i,s}t.exports=function(e){for(var t=function(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,i=0;i<r;i++)e[t[i]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var i=r.pop(),s=Object.keys(n[i]),o=s.length,a=0;a<o;a++){var l=s[a],c=t[l];-1===c.distance&&(c.distance=t[i].distance+1,c.parent=i,r.unshift(l))}return t}(e),r={},s=Object.keys(t),o=s.length,a=0;a<o;a++){var l=s[a];null!==t[l].parent&&(r[l]=i(l,t))}return r}}}),a=(0,r.P$)({"../../node_modules/.pnpm/color-convert@1.9.3/node_modules/color-convert/index.js"(e,t){var n=s(),r=o(),i={};Object.keys(n).forEach(function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:n[e].channels}),Object.defineProperty(i[e],"labels",{value:n[e].labels});var t=r(e);Object.keys(t).forEach(function(n){var r=t[n];i[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),i[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})}),t.exports=i}})},6559:(e,t,n)=>{"use strict";var r=n(4582).freeze;t.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=r({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES},6993:(e,t,n)=>{var r=n(5546);function i(){var t,n,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.toStringTag||"@@toStringTag";function l(e,i,s,o){var a=i&&i.prototype instanceof u?i:u,l=Object.create(a.prototype);return r(l,"_invoke",function(e,r,i){var s,o,a,l=0,u=i||[],d=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return s=e,o=0,a=t,h.n=n,c}};function p(e,r){for(o=e,a=r,n=0;!d&&l&&!i&&n<u.length;n++){var i,s=u[n],p=h.p,f=s[2];e>3?(i=f===r)&&(a=s[(o=s[4])?5:(o=3,3)],s[4]=s[5]=t):s[0]<=p&&((i=e<2&&p<s[1])?(o=0,h.v=r,h.n=s[1]):p<f&&(i=e<3||s[0]>r||r>f)&&(s[4]=e,s[5]=r,h.n=f,o=0))}if(i||e>1)return c;throw d=!0,r}return function(i,u,f){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),o=u,a=f;(n=o<2?t:a)||!d;){s||(o?o<3?(o>1&&(h.n=-1),p(o,a)):h.n=a:h.v=a);try{if(l=2,s){if(o||(i="next"),n=s[i]){if(!(n=n.call(s,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,o<2&&(o=0)}else 1===o&&(n=s.return)&&n.call(s),o<2&&(a=TypeError("The iterator does not provide a '"+i+"' method"),o=1);s=t}else if((n=(d=h.n<0)?a:e.call(r,h))!==c)break}catch(e){s=t,o=1,a=e}finally{l=1}}return{value:n,done:d}}}(e,s,o),!0),l}var c={};function u(){}function d(){}function h(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(r(n={},o,function(){return this}),n),f=h.prototype=u.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,r(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=h,r(f,"constructor",h),r(h,"constructor",d),d.displayName="GeneratorFunction",r(h,a,"GeneratorFunction"),r(f),r(f,a,"Generator"),r(f,o,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(e.exports=i=function(){return{w:l,m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},7056:e=>{e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},7422:e=>{"use strict";e.exports="data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABTsAAsAAAAAIpAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV32Y21hcAAAAYQAAAEJAAAD5p42+VxnbHlmAAACkAAADtIAABckI4l972hlYWQAABFkAAAAKwAAADYsvIjpaGhlYQAAEZAAAAAdAAAAJA+RCL1obXR4AAARsAAAABcAAAC8Q2YAAGxvY2EAABHIAAAAYAAAAGB7CIGGbWF4cAAAEigAAAAfAAAAIAFAAI9uYW1lAAASSAAAASUAAAIK1cf1oHBvc3QAABNwAAABfAAAAnXdFqh1eJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGR7yDiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGPHcRdyA4RZgQRADaGCyYAAHic7dPXbcMwAEXRK1vuvffem749XAbKV3bjBA6fXsaIgMMLEWoQJaAEFKNnlELyQ4K27zib5PNF6vl8yld+TKr5kH0+cUw0xv00Hwvx2DResUyFKrV4XoMmLdp06NKjz4AhI8ZMmDJjzoIlK9Zs2LJjz4EjJ85cuHLjziPe/0UWL17mf2tqKLz/9jK9f8tXpGCoRdPKhtS0RqFkWvVQNtSKoVYNtWaoddPXEBqG2jQ9XWgZattQO4baNdSeofYNdWCoQ0MdGerYUCeGOjXUmaHODXVhqEtDXRnq2lA3hro11J2h7g31YKhHQz0Z6tlQL4Z6NdSbod4N9WGoT9MfHF6GmhnZLxyDcRMAAAB4nJ1YC1hU17U+a5/HMA4iA3NmVBDmoQwP5TFnHlFeA4gYiUFRQINoSCBAyK3G2yi+0aipYtFcHYo2xsb4NiY3+VrNxSaX5uvt495ozNdoYoxmem2/L8HGpLc+InB279pnhlGr5mvL4eyz99nrrL32eu1/DQcc/okdYgdHOA6MQKp4r9gx0EcMHMezOalVasW5BM7NcXoSb9fFgE6KtSSBxWz1FYDPG+vMBGcKb9cebu2VS5s2aaTkCvRSf6C7Y+Ppibm5E09v7IDs2/3uZQtbD0zIyppwoHXh/93ukmyYgdePNRp65p5v+3v/9otQl2O7wP34cT88p8Md2YxpYLQZoRcy6FlSBRnwnGAe6BPMSCZo+7NJVqS0cE4uHendzhSnbPH6TDqL1+Nme5LZXkCHnGyoH0kne30WH+gswhm3q+pt/mTas9NLS64GnjmSlTPw0wVQT/ewRaBgxtydy3cuUB9/6SW+vb5yRvr+t0eOfPKJZ/9t3+4tL7xj32Xd3thCxi+ge6ifdsAN+l5+wi5HQ/cCoeull1AszS7CUfEcJzK7sKWJAdJhCd0sPM4+EY7QDm5ov08hXRQXE5bf6PV5Q5+IjW7X7Nku92Ask4l2hCRRD6TPqISiCJeQna3SCFwrhrNzXHzo4yFevBwxpzxk8WCIIfkvVEKVy32SbT8n68gzgaslpaiO2zIGIyuSb7RNf9HSuN26y/7OC1tgEmpiyA6aD4qcgTOiLThwGG0eB694FI8NHLLN6OBlRVaMxNAFS4JdXUG6mW8PwpKuYLCLXKGbu8iwYNdgO06Sn3Th+/vyZAxs8Ro30DjHe9gy8Fywi24OMm7Qyzh3MTZVOMYhLBnoC+J79lpTUyQmorjhnMwlcQ5uPEYGpDjsOkkH49BjQLQBqs3jFtFdJNlksYmoQFDArLh8Xh+Qd6Ghcsb6FUuehDi+U/lqD71K/qiegeV1imcwjl7ExwiSrf4BZyCujV6cVcFo6VX+G9IcPyFjJnUufbU/jzrL1X99as36reXl8K32nFaOr+E8jWJEcJ55DpMVfSMe95/AJaOsGBH2GJCNpiRQbK4C8BjdmQA22QY2j03Em13i2YHqtNLU1NI04Yj2HJgA6fQc6VPNpA/D+Ryks554NnVy2mB72uRUfPLsqR4N0LOBQKArwJYO+5W2fgZX8oC1HR6HjNaQTVIG2FPwnTcXXGZZfNB7TE6pTKZUwaw91XWLAoFFGcnB5PHjsckgBjbWutrL+0h5Y1xw3DRGDumsnXb3MJwXrJIN5U7m0rgJ3yG5w4he5ckFG4pmNEkOm0/xOO4r4yL87wqtQM+hiJIVp+6iG2wPBKD35ElGkDx+UfC2v1mFG1o+M3AjNFty8biKMXwzyxnZLds8wYD2BxmCPHAldPOeLsy/0BugftYhVYFAhO8SqQ0j3oK7dHJZnI/jxmUS4onlxskSF8thmvNZjIrRZwEPxr0lBuLRuz3oy/FOHCsxwOPYh2M+e9u3J5pgPYz9gp6G7C9m0A11F9ddqKMfV+4sbq45/YspOysXvT+3pdFdYNg2fHbW8Dz301MqDVuGrz0Fuh0YMW8mddrpqzST7rV9BcvqPoNvadRndWp0p8HvbiqrFj5yFQ/vNFSXDpxpLEFWp+DcrF3FT1afWshFcmCfeAMjEvO65i0Y6XijQfSRPWx3TV/Df7Km3E1l+kLt56s/rwVzuRusNMhudznkwdLaS+QNdeal2jDPP4l9qHc98vTYZOSkxzD+njBWVWjFPKgipx6DkWvXQiW8OYcewVHE5yukinDMcfGgc0opDltYKDxIGBedkzc6jSfE7tlvESCDFUw0Hx0opS+U0lHCxNottbNWSxX9zZVvEhKWUSyBpaXwBc2a98M6UqPeXAs/GDon8Ax7hsthO8cM5HU7Ad0UvRR9lHmtyQKZ4MAe814X5h9MSUkQmhf96eVJ6p90OjIiqSIjvykvr2l5U55O/fPQKD+jIomYpNyGJQ25uQ2kIikRfAmuBHCPsWqkSDEqgZ5KDI2sifS/R43MbZg0idFHbCPNxXxZws1ACVE6hAhOdJwRkJLFBLPZpRGYJ50pko6XzMkgmSx40ljik6AQcKhFnLcQE6rF7PXFe1Ocoj0T3AXgSgJTDIhHRfHlYZKuSzc6uievOJGXY+i5GJkkTp7UM3y0LqATDbtFcbdBxO7o4T25JYlEjoH0uynUh8rapkxp62QN70svSF+hT4gGPlovlmcm/ComLi7mV4kTykV9NFWjE/QrwgQ4uIcAP0rQF4VZYRP2o3PhHHzfPMJj9Ir+uzKUlrH49ntT18AVvj1sc3YGjUT/Mt2Dxawa8ArcA7bCQIpvfwAYu22vEG/No/5RvPdA7g+AelLrPwzy+LtkLPhnpIxH14m4EYq8eeMHbPEPNm6G7Nv9B4jcFPZ8bJj0SEjP3MPgQdKTqqEoy2v6G32P/Y6dxOv04AxnoAeq+GILvUavtYCBXm+BaIhuodcfrN5B/V2EYMCPh+SxavjGyPwV0x4CJgUPGT0mQaODGBACIJZGsMXwAD0LGXx7l3CdAcKMIKI+f5CepWeD0BvyU/GcdBxPF8SwejC6LGZmAURFdsSWKR5HyHld2kbdIZO1Ixx+bnnzU7n5+blPNV9jnUDWhP2tC68tbN3PVIldsQPxSAcSpjOav7Q05uXn5zW2LLvDXn9B6syscPy9iDLEMmSrJz6nYuWMipukjM0AH8JkGS+XFyMRkzSCH7KD/hwm172SAyZYumHlefr5AddrtA0O0TnwaVZxcRY9Bfukn9Gf05N1r9DV9MoBsJ1f+ZrqUvtPHizJAntWybv7hmqLt6QLuK6ZS9Fqi1jO5rDoWPZXXII5Tgajg53cIXCjDCGIcYrRIY2n6+mXOa/W0bdhau3ryiEYe2FV/5oeaIYK/5w5frCyll6/cYO8DiNhw6t1MBWmznt91QX62UF1N7l0eHBZTRGpKaqpKVIPF9UcIzmReud9TSY75+K899GHbBu6wjoR7RKKZVYiYxSPf5/2wJT5e3NAhmUbVn5KLx1Ujg0+BGvpAIh0DezInTkzF37KVocxrKU3r1+XLtAe2lO3l66kfQfB/unKY+q8N375Ru8bc4pJXfEcESU95q+p8ZNZRTWH1d9FzvUdYXk5rLkcdkEisoKKVHQW/b3GEx6tPaYcoJfOr9wAbSBnv1IHpep0OExr4LPMkpJM+j7sly7UHkOzXjoAZljHCGiyegtNlwljM0v+c19ET9Pvst09a2Mtgcf5/ZSzYO5h1156+eyydfAsxGa9XAuF6vzjh6CssLq6ECysperXX0sX5h5ZdpZe3guxsGIPEtHk/aqXX1hVqP5HYVVVISkrrNqvXorIc+5Ou91Hnr/LcD2afi6eX7UBloOcs7cOpqgGaNfs1g7bNbs9z6wASaylN69d0/TFTIz6Ws8+oGV3mE2612wRTHKcVUbhjKadebloMc+dyXgMVtVK6BwMB/+mVW09igdRBWaRtNQX59d/VD//xdQ0TCiYNj1KT9sq6Wdu5WTbqk3qDXyDaLa1fv621LS01G3z61sD6lH8lAxDLicV921s6Bf92JOYvzNYCL1khbqBXEFUzC521N5NyzNaQIWhjyFyDoBIVrAjmv2UEaLlI+c6zw1jmVIPLLLZZUTj6GxGHW+mq1tgHXR2D85p4Q934+jLbtjVLcyCdS10NVzpHqxp4Q/hK7WopY/NRGx9HGsPGdFjOjcpjBnGYMVqY/4eqT5khWEHWUup2A/pTw7pdWgsWft7ETUERL96nRg0HNFPmCYba6pylECaExX89A9WLUOVB4oKLu/o1oqSYHCgLzBUlAz8hNFDRpeSU1XT+LRmDUgPaKbYdHDn9suF/tu13nHJij0N97LfS0QmqONuyONk7zvUI6Qa0pF9f2+oABL92AT6e0U//z9YqAiWtJLU1JK0gS+1aacwamiNqK067u9ZQ8f1d4qLodMzz3uL89Z68V/Hnr++hXWUuHgw8dfi972PeTyPefu3aNNucemQ74qFuIaJnVkOu4Q+yjuwmmC1FqZpl1i4uzoPxjkpPf3Xv545tl26Rr+dOvUd+omqJzch9dOeU7f10Y64nMcKK137DccIZq2WdXtdZjbEoLSzHwiMtrjYLDxpHQW8gjMX6XFYAE2zSWVD04EGYSs9MbO6sEo20BMEAB4mpvSypsKjZ4Stgzb+c3A9/MQT2+vrBy+qvyFxLUtLlSRF/Ri2wjfZ2dus2Q8lXx4608/jnqK5OOap6NY2PSjYYnECCjiEeLJll/pbmqfeIK+ps3+MxrlEhqmTPipVP7kqlF4VhpEb6r+Q7YOJg38kJ9SHBf3NBl6+9YchfbUjb5ahLSzUM3kPHmwFAsZ5rpai0S7E5xWzZ1j+fW7zsUWP2g5NXTw52ySCTrgG0+lbw60l2Y/CB185CoA8NK+tbRKxfjy6pm5hzQRRR+cMqv1Jbiw6STivtEvt3DRcy0QEh92JlUGo2PG4tSKHl00YD6xc8CK+YPYyy3io2lN8BcSjKRzrIV6ypOAobqxViJPaT9M9Hy5szY33mp7OX/Zu89L/7Ww5vqY2Y8b0pKgoiUhG5cPDPzq8qTV/WkzUOIvXVVA96kmjcBrr3HrYC/Wn+fYP6Z7T1rqy3zknbvqma/FvVk96fNXGkuaXrdHW5JGSxZT/2I/O73v+yNWafMdzc5NdxYurHs6h86e01sLKLz9EBrg+x36rxAaED7hRnAMx7Vzu+9wabh3zG8XLQjx0ablUJzmxdErxYT3kzQSd0SSafVqF5PXgpp0OyYJ1EyNHpGUZmvK575ySzd85JSqF7IBzSAbMM04+MbE58xF3/njXOGecSaermlw2y9PsSQdytLJVr8t+wg+rR8cZYoeNxVIzNdk3Bngi8U5LAlgTFoQnzJCa5EsCgYhCaGL+qPj7TdhG31p9tej3R04N//PXxNwJvyUqwaJqRPJY98TJ5TPndmflRAkAhBfe46sfKW5wizSge08Xb7Ca/GUVs55trngkKkrUS2WPzKttaaqq+idmahugkY+W6fN0I6i3gPt/x88U4wAAeJxjYGRgYADiGU9YXsXz23xl4GZnAIFH7fO+IdMc/WBxDgYmEAUASbMKwAB4nGNgZGBgZwABjj4Ghv//OfoZGBlQgT4ARicDZAAAAHicY2BgYGAfxJijD8Fmu4EqBwCSpgKpAAAAAAAADgBoAH4AzADgAQIBQgFsAZgB7gIuAooC0AL8A2IDjAOoA+AEMASwBNoFCAVaBcAGCAYuBnAGrAb2B04HigfSCCoIcAiGCJwIyAkkCVYJiAmsCfIKIApWCsQLknicY2BkYGDQZ2hmYGcAASYg5gJCBob/YD4DABqrAdAAeJxdkE1qg0AYhl8Tk9AIoVDaVSmzahcF87PMARLIMoFAl0ZHY1BHdBJIT9AT9AQ9RQ9Qeqy+yteNMzDzfM+88w0K4BY/cNAMB6N2bUaPPBLukybCLvleeAAPj8JD+hfhMV7hC3u4wxs7OO4NzQSZcI/8Ltwnfwi75E/hAR7wJTyk/xYeY49fYQ/PztM+jbTZ7LY6OWdBJdX/pqs6NYWa+zMxa13oKrA6Uoerqi/JwtpYxZXJ1coUVmeZUWVlTjq0/tHacjmdxuL90OR8O0UEDYMNdtiSEpz5XQGqzlm30kzUdAYFFOb8R7NOZk0q2lwAyz1i7oAr1xoXvrOgtYhZx8wY5KRV269JZ5yGpmzPTjQhvY9je6vEElPOuJP3mWKnP5M3V+YAAAB4nG2ReVPbMBDF/ULi2EkDBFqO3gdHLxUzDB9IkdexBllydRD49ihO3Ckz7B/a31utZnafkkGyiXnyclxhgB0MMUKKMTLkmGCKV5hhF3vYxxwHOMRrvMERjnGCU7zFO7zHB3zEJ3zGF3zFN5zhHBe4xHf8wE/8wm8w/MEVimTYKv44XR9MSCsUjVoeHE3vjQoNsSZ4mmxZmVWPjSz7jlou6/0qKOWEJdKMtCe793/hQfqxa6XWZHMXFl56RS4TvPXSaDeoy0zUUZB109KstDK8lHo5q6Qi1hcOnqkImubPS6aqRq7mlnaEWabub4iYblba3SRmgldS0+FWdhNtt04F14JUaqkl7tcpOpJtErvNt3Bd9HRT5JWxK25Ldjvp6br4hzfFiIdSmlzTg2fSUzNrLd1LE1ynxq4OVaVoKLjzJ60UPtj1RKzHzsbjly6inVnFBS2MucviPncU7Rr7lfTxRepDs1A2j3ZHRc7PuzFYSfE3ZOd4kjwBy227hA=="},7495:(e,t,n)=>{"use strict";var r=n(9840);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,i,s){if(n)e(n);else if(i.statusCode>=400&&i.statusCode<=599){var o=s;if(t)if(r.TextDecoder){var a=(void 0===(l=i.headers&&i.headers["content-type"])&&(l=""),l.toLowerCase().split(";").reduce(function(e,t){var n=t.split("="),r=n[0],i=n[1];return"charset"===r.trim()?i.trim():e},"utf-8"));try{o=new TextDecoder(a).decode(s)}catch(e){}}else o=String.fromCharCode.apply(null,new Uint8Array(s));e({cause:o})}else e(null,s);var l}}},7659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},7687:(e,t,n)=>{"use strict";n.r(t),n.d(t,{JsonDiffWorker:()=>u});var r=n(2096),i=n(5534);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var s=t&&t.prototype instanceof f?t:f,o=Object.create(s.prototype),a=new C(i||[]);return r(o,"_invoke",{value:k(e,n,a)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function f(){}function m(){}function g(){}var y={};u(y,a,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(A([])));b&&b!==t&&n.call(b,a)&&(y=b);var _=g.prototype=f.prototype=Object.create(y);function w(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){function i(r,o,a,l){var c=h(e[r],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,a,l)},function(e){i("throw",e,a,l)}):t.resolve(d).then(function(e){u.value=e,a(u)},function(e){return i("throw",e,a,l)})}l(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return o=o?o.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=T(o,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function T(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=g,r(_,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(S.prototype),u(S.prototype,l,function(){return this}),e.AsyncIterator=S,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new S(d(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(_),u(_,c,"Generator"),u(_,a,function(){return this}),u(_,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function a(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"queue",new Map),c(this,"scheduler",new r.Y),c(this,"worker",void 0),this.worker=t,this.worker.addEventListener("message",function(e){var t=n.queue.get(e.data.id);t&&(n.queue.delete(e.data.id),t.resolve(e.data.returns))})}var t,n,s,u;return t=e,n=[{key:"diff",value:(s=o().mark(function e(t){var n,r;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scheduler.request();case 2:return n=(0,i.A)(),r=d(),this.queue.set(n,r),this.worker.postMessage({method:"diff",id:n,args:[t]}),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}),u=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=s.apply(e,t);function o(e){a(i,n,r,o,l,"next",e)}function l(e){a(i,n,r,o,l,"throw",e)}o(void 0)})},function(e){return u.apply(this,arguments)})}],n&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(){var e,t=new Promise(function(t){e=t});return t.resolve=function(){return e.apply(void 0,arguments)},t}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},8670:e=>{"use strict";var t=function(){function e(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var t=e.prototype;return t.getIsEnabled=function(){return this.enabled_},t.enable=function(){this.enabled_=!0},t.disable=function(){this.enabled_=!1},t.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},t.getMaxAttempts=function(){return this.maxAttempts_},t.setMaxAttempts=function(e){this.maxAttempts_=e},t.getDelayFactor=function(){return this.delayFactor_},t.setDelayFactor=function(e){this.delayFactor_=e},t.getFuzzFactor=function(){return this.fuzzFactor_},t.setFuzzFactor=function(e){this.fuzzFactor_=e},t.getInitialDelay=function(){return this.initialDelay_},t.setInitialDelay=function(e){this.initialDelay_=e},t.createRetry=function(e){var t=void 0===e?{}:e,r=t.maxAttempts,i=t.delayFactor,s=t.fuzzFactor,o=t.initialDelay;return new n({maxAttempts:r||this.maxAttempts_,delayFactor:i||this.delayFactor_,fuzzFactor:s||this.fuzzFactor_,initialDelay:o||this.initialDelay_})},e}(),n=function(){function e(e){this.maxAttempts_=e.maxAttempts,this.delayFactor_=e.delayFactor,this.fuzzFactor_=e.fuzzFactor,this.currentDelay_=e.initialDelay,this.currentAttempt_=1}var t=e.prototype;return t.moveToNextAttempt=function(){this.currentAttempt_++;var e=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+e},t.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},t.getCurrentDelay=function(){return this.currentDelay_},t.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},t.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},t.getCurrentFuzzedDelay=function(){var e=this.getCurrentMinPossibleDelay(),t=this.getCurrentMaxPossibleDelay();return e+Math.random()*(t-e)},e}();e.exports=t},8962:(e,t,n)=>{var r=n(3626).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=r(e.subarray(i)),n.firstOffset=r(e.subarray(i+8)),i+=16),i+=2;var s=t.getUint16(i);for(i+=2;s>0;i+=12,s--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n}},8978:(e,t,n)=>{var r=n(4722);r.DOMImplementation,r.XMLSerializer,t.DOMParser=n(5752).DOMParser},9622:e=>{var t,n,r,i,s,o,a,l=9e4;t=function(e){return e*l},n=function(e,t){return e*t},r=function(e){return e/l},i=function(e,t){return e/t},s=function(e,n){return t(i(e,n))},o=function(e,t){return n(r(e),t)},a=function(e,t,n){return r(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:i,audioTsToVideoTs:s,videoTsToAudioTs:o,metadataTsToSeconds:a}},9697:(e,t,n)=>{var r,i=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},s=n(542);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=s),e.exports=r},9840:(e,t,n)=>{var r;r="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=r},9879:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>xo});var r=n(9840),i=n.n(r),s=n(9697),o=n.n(s),a=n(1036),l=n.n(a),c=n(4784),u=n.n(c);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}const h=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=i().location&&i().location.href||"");var n=/^\/\//.test(e),r=!i().location&&!/\/\//i.test(e);e=new(i().URL)(e,i().location||"https://example.com");var s=new URL(t,e);return r?s.href.slice(19):n?s.href.slice(s.protocol.length):s.href};var p=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}();function f(e){for(var t,n=(t=e,i().atob?i().atob(t):Buffer.from(t,"base64").toString("binary")),r=new Uint8Array(n.length),s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class m extends p{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const g=String.fromCharCode(9),y=function(e){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},v=function(e){const t={};if(!e)return t;const n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let r,i=n.length;for(;i--;)""!==n[i]&&(r=/([^=]*)=(.*)/.exec(n[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),t[r[0]]=r[1]);return t},b=e=>{const t=e.split("x"),n={};return t[0]&&(n.width=parseInt(t[0],10)),t[1]&&(n.height=parseInt(t[1],10)),n};class _ extends p{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((t,n)=>{const r=n(e);return r===e?t:t.concat([r])},[e]).forEach(e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e),t)return n=d(y(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e),t)return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"map"},t[1]){const e=v(t[1]);e.URI&&(n.uri=e.URI),e.BYTERANGE&&(n.byterange=y(e.BYTERANGE))}this.trigger("data",n)}else{if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e),t)return n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=v(t[1]),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=b(n.attributes.RESOLUTION)),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e),t)return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=v(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e),t)return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e),t)return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=v(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e),t)return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=v(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"skip"},n.attributes=v(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(g)),void this.trigger("data",n);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part"},n.attributes=v(t[1]),["DURATION"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=y(n.attributes.BYTERANGE)),void this.trigger("data",n);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"server-control"},n.attributes=v(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))}),void this.trigger("data",n);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part-inf"},n.attributes=v(t[1]),["PART-TARGET"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),void this.trigger("data",n);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"preload-hint"},n.attributes=v(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);const t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}}),void this.trigger("data",n);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"rendition-report"},n.attributes=v(t[1]),["LAST-MSN","LAST-PART"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))}),void this.trigger("data",n);if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(e),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=v(t[1]),["ID","CLASS"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=String(n.attributes[e]))}),["START-DATE","END-DATE"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=new Date(n.attributes[e]))}),["DURATION","PLANNED-DURATION"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["END-ON-NEXT"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/i.test(n.attributes[e]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=n.attributes[e].toString(16))});const e=/^X-([A-Z]+-)+[A-Z]+$/;for(const t in n.attributes){if(!e.test(t))continue;const r=/[0-9A-Fa-f]{6}/g.test(n.attributes[t]),i=/^\d+(\.\d+)?$/.test(n.attributes[t]);n.attributes[t]=r?n.attributes[t].toString(16):i?parseFloat(n.attributes[t]):String(n.attributes[t])}return void this.trigger("data",n)}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e),t)this.trigger("data",{type:"tag",tagType:"independent-segments"});else if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"i-frames-only"});else{if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(e),t)return n={type:"tag",tagType:"content-steering"},n.attributes=v(t[1]),void this.trigger("data",n);if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(e),t)return n={type:"tag",tagType:"i-frame-playlist"},n.attributes=v(t[1]),n.attributes.URI&&(n.uri=n.attributes.URI),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes.RESOLUTION&&(n.attributes.RESOLUTION=b(n.attributes.RESOLUTION)),n.attributes["AVERAGE-BANDWIDTH"]&&(n.attributes["AVERAGE-BANDWIDTH"]=parseInt(n.attributes["AVERAGE-BANDWIDTH"],10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),void this.trigger("data",n);if(t=/^#EXT-X-DEFINE:(.*)$/.exec(e),t)return n={type:"tag",tagType:"define"},n.attributes=v(t[1]),void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))}addParser({expression:e,customType:t,dataParser:n,segment:r}){"function"!=typeof n&&(n=e=>e),this.customParsers.push(i=>{if(e.exec(i))return this.trigger("data",{type:"custom",data:n(i),customType:t,segment:r}),!0})}addTagMapper({expression:e,map:t}){this.tagMappers.push(n=>e.test(n)?t(n):n)}}const w=function(e){const t={};return Object.keys(e).forEach(function(n){var r;t[(r=n,r.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()))]=e[n]}),t},S=function(e){const{serverControl:t,targetDuration:n,partTargetDuration:r}=e;if(!t)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",a=n&&3*n,l=r&&2*r;n&&!t.hasOwnProperty(s)&&(t[s]=a,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${a}).`})),a&&t[s]<a&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${t[s]}) to targetDuration * 3 (${a})`}),t[s]=a),r&&!t.hasOwnProperty(o)&&(t[o]=3*r,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[o]}).`})),r&&t[o]<l&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${t[o]}) to partTargetDuration * 2 (${l}).`}),t[o]=l)};class k extends p{constructor(e={}){super(),this.lineStream=new m,this.parseStream=new _,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,n=[];let r,i,s={},o=!1;const a=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let c=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let u=0,h=0;const p={};this.on("end",()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&r&&(s.map=r),!s.key&&i&&(s.key=i),s.timeline||"number"!=typeof c||(s.timeline=c),this.manifest.preloadSegment=s)}),this.parseStream.on("data",function(e){let m,g;if(t.manifest.definitions)for(const n in t.manifest.definitions)if(e.uri&&(e.uri=e.uri.replace(`{$${n}}`,t.manifest.definitions[n])),e.attributes)for(const r in e.attributes)"string"==typeof e.attributes[r]&&(e.attributes[r]=e.attributes[r].replace(`{$${n}}`,t.manifest.definitions[n]));({tag(){({version(){e.version&&(this.manifest.version=e.version)},"allow-cache"(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=u)),"offset"in e&&(s.byterange=t,t.offset=e.offset),u=t.offset+t.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.title&&(s.title=e.title),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:f(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(i.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence"(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type"(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map(){r={},e.uri&&(r.uri=e.uri),e.byterange&&(r.byterange=e.byterange),i&&(r.key=i)},"stream-inf"(){this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(s.attributes||(s.attributes={}),d(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const t=this.manifest.mediaGroups[e.attributes.TYPE];t[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},m=t[e.attributes["GROUP-ID"]],g={default:/yes/i.test(e.attributes.DEFAULT)},g.default?g.autoselect=!0:g.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(g.language=e.attributes.LANGUAGE),e.attributes.URI&&(g.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(g.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(g.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(g.forced=/yes/i.test(e.attributes.FORCED)),m[e.attributes.NAME]=g},discontinuity(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject;const{lastProgramDateTime:t}=this;this.lastProgramDateTime=new Date(e.dateTimeString).getTime(),null===t&&this.manifest.segments.reduceRight((e,t)=>(t.programDateTime=e-1e3*t.duration,t.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,S.call(this,this.manifest))},start(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){s.cueOut=e.data},"cue-out-cont"(){s.cueOutCont=e.data},"cue-in"(){s.cueIn=e.data},skip(){this.manifest.skip=w(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const t=this.manifest.segments.length,n=w(e.attributes);s.parts=s.parts||[],s.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=h),h=n.byterange.offset+n.byterange.length);const r=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${r} for segment #${t}`,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})})},"server-control"(){const t=this.manifest.serverControl=w(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),S.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const t=this.manifest.segments.length,n=w(e.attributes),r=n.type&&"PART"===n.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=r?h:0,r&&(h=n.byterange.offset+n.byterange.length)));const i=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${i} for segment #${t}`,e.attributes,["TYPE","URI"]),n.type)for(let e=0;e<s.preloadHints.length-1;e++){const r=s.preloadHints[e];r.type&&r.type===n.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${i} for segment #${t} has the same TYPE ${n.type} as preload hint #${e}`})}},"rendition-report"(){const t=w(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);const n=this.manifest.renditionReports.length-1,r=["LAST-MSN","URI"];o&&r.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${n}`,e.attributes,r)},"part-inf"(){this.manifest.partInf=w(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),S.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(w(e.attributes));const t=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${t}`,e.attributes,["ID","START-DATE"]);const n=this.manifest.dateRanges[t];n.endDate&&n.startDate&&new Date(n.endDate)<new Date(n.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),n.duration&&n.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),n.plannedDuration&&n.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const r=!!n.endOnNext;if(r&&!n.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),r&&(n.duration||n.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),n.duration&&n.endDate){const e=n.startDate.getTime()+1e3*n.duration;this.manifest.dateRanges[t].endDate=new Date(e)}if(p[n.id]){for(const e in p[n.id])if(n[e]&&JSON.stringify(p[n.id][e])!==JSON.stringify(n[e])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const e=this.manifest.dateRanges.findIndex(e=>e.id===n.id);this.manifest.dateRanges[e]=d(this.manifest.dateRanges[e],n),p[n.id]=d(p[n.id],n),this.manifest.dateRanges.pop()}else p[n.id]=n},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=w(e.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",e.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const t=(e,t)=>{e in this.manifest.definitions?this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${e}`}):this.manifest.definitions[e]=t};if("QUERYPARAM"in e.attributes){if("NAME"in e.attributes||"IMPORT"in e.attributes)return void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});const n=this.params.get(e.attributes.QUERYPARAM);return n?void t(e.attributes.QUERYPARAM,decodeURIComponent(n)):void this.trigger("error",{message:`EXT-X-DEFINE: No query param ${e.attributes.QUERYPARAM}`})}return"NAME"in e.attributes?"IMPORT"in e.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in e.attributes&&"string"==typeof e.attributes.VALUE?void t(e.attributes.NAME,e.attributes.VALUE):void this.trigger("error",{message:`EXT-X-DEFINE: No value for ${e.attributes.NAME}`}):"IMPORT"in e.attributes?this.mainDefinitions[e.attributes.IMPORT]?void t(e.attributes.IMPORT,this.mainDefinitions[e.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${e.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:e.attributes,uri:e.uri,timeline:c}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",e.attributes,["BANDWIDTH","URI"])}}[e.tagType]||a).call(t)},uri(){s.uri=e.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),i&&(s.key=i),s.timeline=c,r&&(s.map=r),h=0,null!==this.lastProgramDateTime&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*s.duration),s={}},comment(){},custom(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,n){const r=[];n.forEach(function(e){t.hasOwnProperty(e)||r.push(e)}),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var T,x,E={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},C=["video","audio","text"],A=["Video","Audio","Text"],O=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)}):e},M=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach(function(e){var t;e=e.trim(),C.forEach(function(r){var i=E[r].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=r;var s=e.substring(0,i[1].length),o=e.replace(s,"");n.push({type:s,details:o,mediaType:r})}}),t||n.push({type:e,details:"",mediaType:"unknown"})}),n},I=function(e){return void 0===e&&(e=""),E.audio.test(e.trim().toLowerCase())},D=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map(function(e){return O(e.trim())}),r="video";1===n.length&&I(n[0])?r="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),E.text.test(t.trim().toLowerCase()))&&(r="application");var i="mp4";return n.every(function(e){return E.mp4.test(e)})?i="mp4":n.every(function(e){return E.webm.test(e)})?i="webm":n.every(function(e){return E.ogg.test(e)})&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},j=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),i().MediaSource&&i().MediaSource.isTypeSupported&&i().MediaSource.isTypeSupported(D(e))||t&&i().ManagedMediaSource&&i().ManagedMediaSource.isTypeSupported&&i().ManagedMediaSource.isTypeSupported(D(e))||!1},P=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<A.length;t++)if(E["muxer"+A[t]].test(e))return!0;return!1})},L="mp4a.40.2",N=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,R=/^application\/dash\+xml/i,U=function(e){return N.test(e)?"hls":R.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},B=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},F=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||B(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},z=i().BigInt||Number,$=[z("0x1"),z("0x100"),z("0x10000"),z("0x1000000"),z("0x100000000"),z("0x10000000000"),z("0x1000000000000"),z("0x100000000000000"),z("0x10000000000000000")],q=(T=new Uint16Array([65484]),255===(x=new Uint8Array(T.buffer,T.byteOffset,T.byteLength))[0]||x[0],function(e,t){var n=void 0===t?{}:t,r=n.signed,i=void 0!==r&&r,s=n.le,o=void 0!==s&&s;e=F(e);var a=o?"reduce":"reduceRight",l=(e[a]?e[a]:Array.prototype[a]).call(e,function(t,n,r){var i=o?r:Math.abs(r+1-e.length);return t+z(n)*$[i]},z(0));if(i){var c=$[e.length]/z(2)-z(1);(l=z(l))>c&&(l-=c,l-=c,l-=z(2))}return Number(l)}),H=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},V=function(e,t,n){var r=void 0===n?{}:n,i=r.offset,s=void 0===i?0:i,o=r.mask,a=void 0===o?[]:o;e=F(e);var l=(t=F(t)).every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&l.call(t,function(t,n){return t===(a[n]?a[n]&e[s+n]:e[s+n])})},W=n(8978);const G=e=>!!e&&"object"==typeof e,K=(...e)=>e.reduce((e,t)=>("object"!=typeof t||Object.keys(t).forEach(n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):G(e[n])&&G(t[n])?e[n]=K(e[n],t[n]):e[n]=t[n]}),e),{}),J=e=>Object.keys(e).map(t=>e[t]),X=e=>e.reduce((e,t)=>e.concat(t),[]),Y=e=>{if(!e.length)return[];const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t};const Q=({baseUrl:e="",source:t="",range:n="",indexRange:r=""})=>{const s={uri:t,resolvedUri:h(e||"",t)};if(n||r){const e=(n||r).split("-");let t,o=i().BigInt?i().BigInt(e[0]):parseInt(e[0],10),a=i().BigInt?i().BigInt(e[1]):parseInt(e[1],10);o<Number.MAX_SAFE_INTEGER&&"bigint"==typeof o&&(o=Number(o)),a<Number.MAX_SAFE_INTEGER&&"bigint"==typeof a&&(a=Number(a)),t="bigint"==typeof a||"bigint"==typeof o?i().BigInt(a)-i().BigInt(o)+i().BigInt(1):a-o+1,"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),s.byterange={length:t,offset:o}}return s},Z=e=>(e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e),ee={static(e){const{duration:t,timescale:n=1,sourceDuration:r,periodDuration:i}=e,s=Z(e.endNumber),o=t/n;return"number"==typeof s?{start:0,end:s}:"number"==typeof i?{start:0,end:i/o}:{start:0,end:r/o}},dynamic(e){const{NOW:t,clientOffset:n,availabilityStartTime:r,timescale:i=1,duration:s,periodStart:o=0,minimumUpdatePeriod:a=0,timeShiftBufferDepth:l=1/0}=e,c=Z(e.endNumber),u=(t+n)/1e3,d=r+o,h=u+a-d,p=Math.ceil(h*i/s),f=Math.floor((u-d-l)*i/s),m=Math.floor((u-d)*i/s);return{start:Math.max(0,f),end:"number"==typeof c?c:Math.min(p,m)}}},te=e=>{const{type:t,duration:n,timescale:r=1,periodDuration:i,sourceDuration:s}=e,{start:o,end:a}=ee[t](e),l=((e,t)=>{const n=[];for(let r=e;r<t;r++)n.push(r);return n})(o,a).map((e=>t=>{const{duration:n,timescale:r=1,periodStart:i,startNumber:s=1}=e;return{number:s+t,duration:n/r,timeline:i,time:t*n}})(e));if("static"===t){const e=l.length-1,t="number"==typeof i?i:s;l[e].duration=t-n/r*e}return l},ne=e=>{const{baseUrl:t,initialization:n={},sourceDuration:r,indexRange:i="",periodStart:s,presentationTime:o,number:a=0,duration:l}=e;if(!t)throw new Error("NO_BASE_URL");const c=Q({baseUrl:t,source:n.sourceURL,range:n.range}),u=Q({baseUrl:t,source:t,indexRange:i});if(u.map=c,l){const t=te(e);t.length&&(u.duration=t[0].duration,u.timeline=t[0].timeline)}else r&&(u.duration=r,u.timeline=s);return u.presentationTime=o||s,u.number=a,[u]},re=(e,t,n)=>{const r=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,o=e.timeline||0,a=e.sidx.byterange,l=a.offset+a.length,c=t.timescale,u=t.references.filter(e=>1!==e.referenceType),d=[],h=e.endList?"static":"dynamic",p=e.sidx.timeline;let f,m=p,g=e.mediaSequence||0;f="bigint"==typeof t.firstOffset?i().BigInt(l)+t.firstOffset:l+t.firstOffset;for(let e=0;e<u.length;e++){const a=t.references[e],l=a.referencedSize,u=a.subsegmentDuration;let y;y="bigint"==typeof f?f+i().BigInt(l)-i().BigInt(1):f+l-1;const v=ne({baseUrl:n,timescale:c,timeline:o,periodStart:p,presentationTime:m,number:g,duration:u,sourceDuration:s,indexRange:`${f}-${y}`,type:h})[0];r&&(v.map=r),d.push(v),f+="bigint"==typeof f?i().BigInt(l):l,m+=u/c,g++}return e.segments=d,e},ie=["AUDIO","SUBTITLES"],se=1/60,oe=e=>{return(t=e,n=({timeline:e})=>e,J(t.reduce((e,t)=>(t.forEach(t=>{e[n(t)]=t}),e),{}))).sort((e,t)=>e.timeline>t.timeline?1:-1);var t,n},ae=e=>{let t=[];var n,r;return n=e,r=(e,n,r,i)=>{t=t.concat(e.playlists||[])},ie.forEach(function(e){for(var t in n.mediaGroups[e])for(var i in n.mediaGroups[e][t]){var s=n.mediaGroups[e][t][i];r(s)}}),t},le=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach((t,n)=>{t.number=e.mediaSequence+n})},ce=e=>e&&e.uri+"-"+(e=>{let t;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?i().BigInt(e.offset)+i().BigInt(e.length)-i().BigInt(1):e.offset+e.length-1,`${e.offset}-${t}`})(e.byterange),ue=e=>{const t=e.reduce(function(e,t){return e[t.attributes.baseUrl]||(e[t.attributes.baseUrl]=[]),e[t.attributes.baseUrl].push(t),e},{});let n=[];return Object.values(t).forEach(e=>{const t=J(e.reduce((e,t)=>{const n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),e[n].segments.push(...t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e},{}));n=n.concat(t)}),n.map(e=>{var t;return e.discontinuityStarts=(t=e.segments||[],t.reduce((e,t,n)=>(t.discontinuity&&e.push(n),e),[])),e})},de=(e,t)=>{const n=ce(e.sidx),r=n&&t[n]&&t[n].sidx;return r&&re(e,r,e.sidx.resolvedUri),e},he=(e,t={})=>{if(!Object.keys(t).length)return e;for(const n in e)e[n]=de(e[n],t);return e},pe=({attributes:e,segments:t,sidx:n,discontinuityStarts:r})=>{const i={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,discontinuityStarts:r,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(i.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(i.contentProtection=e.contentProtection),e.serviceLocation&&(i.attributes.serviceLocation=e.serviceLocation),n&&(i.sidx=n),i},fe=({attributes:e})=>"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType,me=({attributes:e})=>"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType,ge=({attributes:e})=>"text/vtt"===e.mimeType||"text"===e.contentType,ye=e=>e?Object.keys(e).reduce((t,n)=>{const r=e[n];return t.concat(r.playlists)},[]):[],ve=({dashPlaylists:e,locations:t,contentSteering:n,sidxMapping:r={},previousManifest:i,eventStream:s})=>{if(!e.length)return{};const{sourceDuration:o,type:a,suggestedPresentationDelay:l,minimumUpdatePeriod:c}=e[0].attributes,u=ue(e.filter(fe)).map(pe),d=ue(e.filter(me)),h=ue(e.filter(ge)),p=e.map(e=>e.attributes.captionServices).filter(Boolean),f={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:he(u,r)};c>=0&&(f.minimumUpdatePeriod=1e3*c),t&&(f.locations=t),n&&(f.contentSteering=n),"dynamic"===a&&(f.suggestedPresentationDelay=l),s&&s.length>0&&(f.eventStream=s);const m=0===f.playlists.length,g=d.length?((e,t={},n=!1)=>{let r;const i=e.reduce((e,i)=>{const s=i.attributes.role&&i.attributes.role.value||"",o=i.attributes.lang||"";let a=i.attributes.label||"main";if(o&&!i.attributes.label){const e=s?` (${s})`:"";a=`${i.attributes.lang}${e}`}e[a]||(e[a]={language:o,autoselect:!0,default:"main"===s,playlists:[],uri:""});const l=de((({attributes:e,segments:t,sidx:n,mediaSequence:r,discontinuitySequence:i,discontinuityStarts:s},o)=>{const a={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,discontinuitySequence:i,discontinuityStarts:s,timelineStarts:e.timelineStarts,mediaSequence:r,segments:t};return e.contentProtection&&(a.contentProtection=e.contentProtection),e.serviceLocation&&(a.attributes.serviceLocation=e.serviceLocation),n&&(a.sidx=n),o&&(a.attributes.AUDIO="audio",a.attributes.SUBTITLES="subs"),a})(i,n),t);return e[a].playlists.push(l),void 0===r&&"main"===s&&(r=i,r.default=!0),e},{});return r||(i[Object.keys(i)[0]].default=!0),i})(d,r,m):null,y=h.length?((e,t={})=>e.reduce((e,n)=>{const r=n.attributes.label||n.attributes.lang||"text",i=n.attributes.lang||"und";return e[r]||(e[r]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[r].playlists.push(de((({attributes:e,segments:t,mediaSequence:n,discontinuityStarts:r,discontinuitySequence:i})=>{void 0===t&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);const s={NAME:e.id,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1};e.codecs&&(s.CODECS=e.codecs);const o={attributes:s,uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:r,discontinuitySequence:i,mediaSequence:n,segments:t};return e.serviceLocation&&(o.attributes.serviceLocation=e.serviceLocation),o})(n),t)),e},{}))(h,r):null,v=u.concat(ye(g),ye(y)),b=v.map(({timelineStarts:e})=>e);var _,w;return f.timelineStarts=oe(b),_=v,w=f.timelineStarts,_.forEach(e=>{e.mediaSequence=0,e.discontinuitySequence=w.findIndex(function({timeline:t}){return t===e.timeline}),e.segments&&e.segments.forEach((e,t)=>{e.number=t})}),g&&(f.mediaGroups.AUDIO.audio=g),y&&(f.mediaGroups.SUBTITLES.subs=y),p.length&&(f.mediaGroups["CLOSED-CAPTIONS"].cc=p.reduce((e,t)=>t?(t.forEach(t=>{const{channel:n,language:r}=t;e[r]={autoselect:!1,default:!1,instreamId:n,language:r},t.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[r].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[r]["3D"]=t["3D"])}),e):e,{})),i?(({oldManifest:e,newManifest:t})=>{const n=e.playlists.concat(ae(e)),r=t.playlists.concat(ae(t));return t.timelineStarts=oe([e.timelineStarts,t.timelineStarts]),(({oldPlaylists:e,newPlaylists:t,timelineStarts:n})=>{t.forEach(t=>{t.discontinuitySequence=n.findIndex(function({timeline:e}){return e===t.timeline});const r=((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null})(e,t.attributes.NAME);if(!r)return;if(t.sidx)return;const i=t.segments[0],s=r.segments.findIndex(function(e){return Math.abs(e.presentationTime-i.presentationTime)<se});if(-1===s)return le({playlist:t,mediaSequence:r.mediaSequence+r.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!r.segments.length&&t.timeline>r.timeline||r.segments.length&&t.timeline>r.segments[r.segments.length-1].timeline)&&t.discontinuitySequence--);r.segments[s].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),le({playlist:t,mediaSequence:r.segments[s].number})})})({oldPlaylists:n,newPlaylists:r,timelineStarts:t.timelineStarts}),t})({oldManifest:i,newManifest:f}):f},be=(e,t,n)=>{const{NOW:r,clientOffset:i,availabilityStartTime:s,timescale:o=1,periodStart:a=0,minimumUpdatePeriod:l=0}=e,c=(r+i)/1e3+l-(s+a);return Math.ceil((c*o-t)/n)},_e=(e,t)=>{const{type:n,minimumUpdatePeriod:r=0,media:i="",sourceDuration:s,timescale:o=1,startNumber:a=1,periodStart:l}=e,c=[];let u=-1;for(let d=0;d<t.length;d++){const h=t[d],p=h.d,f=h.r||0,m=h.t||0;let g;if(u<0&&(u=m),m&&m>u&&(u=m),f<0){const a=d+1;g=a===t.length?"dynamic"===n&&r>0&&i.indexOf("$Number$")>0?be(e,u,p):(s*o-u)/p:(t[a].t-u)/p}else g=f+1;const y=a+c.length+g;let v=a+c.length;for(;v<y;)c.push({number:v,duration:p/o,time:u,timeline:l}),u+=p,v++}return c},we=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Se=(e,t)=>e.replace(we,(e=>(t,n,r,i)=>{if("$$"===t)return"$";if(void 0===e[n])return t;const s=""+e[n];return"RepresentationID"===n?s:(i=r?parseInt(i,10):1,s.length>=i?s:`${new Array(i-s.length+1).join("0")}${s}`)})(t)),ke=(e,t)=>{const n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=e,i=Q({baseUrl:e.baseUrl,source:Se(r.sourceURL,n),range:r.range}),s=((e,t)=>e.duration||t?e.duration?te(e):_e(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}])(e,t);return s.map(t=>{n.Number=t.number,n.Time=t.time;const r=Se(e.media||"",n),s=e.timescale||1,o=e.presentationTimeOffset||0,a=e.periodStart+(t.time-o)/s;return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:h(e.baseUrl||"",r),map:i,number:t.number,presentationTime:a}})},Te=(e,t)=>{const{duration:n,segmentUrls:r=[],periodStart:i}=e;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");const s=r.map(t=>((e,t)=>{const{baseUrl:n,initialization:r={}}=e,i=Q({baseUrl:n,source:r.sourceURL,range:r.range}),s=Q({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=i,s})(e,t));let o;return n&&(o=te(e)),t&&(o=_e(e,t)),o.map((t,n)=>{if(s[n]){const r=s[n],o=e.timescale||1,a=e.presentationTimeOffset||0;return r.timeline=t.timeline,r.duration=t.duration,r.number=t.number,r.presentationTime=i+(t.time-a)/o,r}}).filter(e=>e)},xe=({attributes:e,segmentInfo:t})=>{let n,r;t.template?(r=ke,n=K(e,t.template)):t.base?(r=ne,n=K(e,t.base)):t.list&&(r=Te,n=K(e,t.list));const i={attributes:e};if(!r)return i;const s=r(n,t.segmentTimeline);if(n.duration){const{duration:e,timescale:t=1}=n;n.duration=e/t}else s.length?n.duration=s.reduce((e,t)=>Math.max(e,Math.ceil(t.duration)),0):n.duration=0;return i.attributes=n,i.segments=s,t.base&&n.indexRange&&(i.sidx=s[0],i.segments=[]),i},Ee=(e,t)=>Y(e.childNodes).filter(({tagName:e})=>e===t),Ce=e=>e.textContent.trim(),Ae=e=>{const t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;const[n,r,i,s,o,a]=t.slice(1);return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(i||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(a||0)},Oe={mediaPresentationDuration:e=>Ae(e),availabilityStartTime(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:e=>Ae(e),suggestedPresentationDelay:e=>Ae(e),type:e=>e,timeShiftBufferDepth:e=>Ae(e),start:e=>Ae(e),width:e=>parseInt(e,10),height:e=>parseInt(e,10),bandwidth:e=>parseInt(e,10),frameRate:e=>(e=>parseFloat(e.split("/").reduce((e,t)=>e/t)))(e),startNumber:e=>parseInt(e,10),timescale:e=>parseInt(e,10),presentationTimeOffset:e=>parseInt(e,10),duration(e){const t=parseInt(e,10);return isNaN(t)?Ae(e):t},d:e=>parseInt(e,10),t:e=>parseInt(e,10),r:e=>parseInt(e,10),presentationTime:e=>parseInt(e,10),DEFAULT:e=>e},Me=e=>e&&e.attributes?Y(e.attributes).reduce((e,t)=>{const n=Oe[t.name]||Oe.DEFAULT;return e[t.name]=n(t.value),e},{}):{},Ie={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},De=(e,t)=>t.length?X(e.map(function(e){return t.map(function(t){const n=Ce(t),r=h(e.baseUrl,n),i=K(Me(t),{baseUrl:r});return r!==n&&!i.serviceLocation&&e.serviceLocation&&(i.serviceLocation=e.serviceLocation),i})})):e,je=e=>{const t=Ee(e,"SegmentTemplate")[0],n=Ee(e,"SegmentList")[0],r=n&&Ee(n,"SegmentURL").map(e=>K({tag:"SegmentURL"},Me(e))),i=Ee(e,"SegmentBase")[0],s=n||t,o=s&&Ee(s,"SegmentTimeline")[0],a=n||i||t,l=a&&Ee(a,"Initialization")[0],c=t&&Me(t);c&&l?c.initialization=l&&Me(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});const u={template:c,segmentTimeline:o&&Ee(o,"S").map(e=>Me(e)),list:n&&K(Me(n),{segmentUrls:r,initialization:Me(l)}),base:i&&K(Me(i),{initialization:Me(l)})};return Object.keys(u).forEach(e=>{u[e]||delete u[e]}),u},Pe=e=>X(Ee(e.node,"EventStream").map(t=>{const n=Me(t),r=n.schemeIdUri;return Ee(t,"Event").map(t=>{const i=Me(t),s=i.presentationTime||0,o=n.timescale||1,a=i.duration||0,l=s/o+e.attributes.start;return{schemeIdUri:r,value:n.value,id:i.id,start:l,end:l+a/o,messageData:Ce(t)||i.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),Le=(e,t)=>(n,r)=>{const i=De(t,Ee(n.node,"BaseURL")),s=K(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);const o=Ee(n.node,"AdaptationSet"),a=je(n.node);return X(o.map(((e,t,n)=>r=>{const i=Me(r),s=De(t,Ee(r,"BaseURL")),o=Ee(r,"Role")[0],a={role:Me(o)};let l=K(e,i,a);const c=Ee(r,"Accessibility")[0],u="urn:scte:dash:cc:cea-608:2015"===(d=Me(c)).schemeIdUri?("string"!=typeof d.value?[]:d.value.split(";")).map(e=>{let t,n;return n=e,/^CC\d=/.test(e)?[t,n]=e.split("="):/^CC\d$/.test(e)&&(t=e),{channel:t,language:n}}):"urn:scte:dash:cc:cea-708:2015"===d.schemeIdUri?("string"!=typeof d.value?[]:d.value.split(";")).map(e=>{const t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){const[n,r=""]=e.split("=");t.channel=n,t.language=e,r.split(",").forEach(e=>{const[n,r]=e.split(":");"lang"===n?t.language=r:"er"===n?t.easyReader=Number(r):"war"===n?t.aspectRatio=Number(r):"3D"===n&&(t["3D"]=Number(r))})}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t}):void 0;var d;u&&(l=K(l,{captionServices:u}));const h=Ee(r,"Label")[0];if(h&&h.childNodes.length){const e=h.childNodes[0].nodeValue.trim();l=K(l,{label:e})}const p=Ee(r,"ContentProtection").reduce((e,t)=>{const n=Me(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const r=Ie[n.schemeIdUri];if(r){e[r]={attributes:n};const i=Ee(t,"cenc:pssh")[0];if(i){const t=Ce(i);e[r].pssh=t&&f(t)}}return e},{});Object.keys(p).length&&(l=K(l,{contentProtection:p}));const m=je(r),g=Ee(r,"Representation"),y=K(n,m);return X(g.map(((e,t,n)=>r=>{const i=Ee(r,"BaseURL"),s=De(t,i),o=K(e,Me(r)),a=je(r);return s.map(e=>({segmentInfo:K(n,a),attributes:K(o,e)}))})(l,s,y)))})(s,i,a)))},Ne=(e,t)=>{if(e.length>1&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!e.length)return null;const n=K({serverURL:Ce(e[0])},Me(e[0]));return n.queryBeforeStart="true"===n.queryBeforeStart,n},Re=e=>{if(""===e)throw new Error("DASH_EMPTY_MANIFEST");const t=new W.DOMParser;let n,r;try{n=t.parseFromString(e,"application/xml"),r=n&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(e){}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return r};var Ue,Be=n(8962),Fe=n.n(Be),ze=F([73,68,51]),$e=function e(t,n){return void 0===n&&(n=0),(t=F(t)).length-n<10||!V(t,ze,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=F(e))[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?r+20:r+10}(t,n),e(t,n))},qe=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?H(e):e}),He=function(e){e=F(e);for(var t=[],n=0;e.length>n;){var r=e[n],i=0,s=0,o=e[++s];for(s++;128&o;)i=(127&o)<<7,o=e[s],s++;i+=127&o;for(var a=0;a<Ue.length;a++){var l=Ue[a],c=l.id,u=l.parser;if(r===c){t.push(u(e.subarray(s,s+i)));break}}n+=i+s}return t};Ue=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,F(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=He(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:He(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Ve=function e(t,n,r){void 0===r&&(r=!1),n=function(e){return Array.isArray(e)?e.map(function(e){return qe(e)}):[qe(e)]}(n),t=F(t);var i=[];if(!n.length)return i;for(var s=0;s<t.length;){var o=(t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3])>>>0,a=t.subarray(s+4,s+8);if(0===o)break;var l=s+o;if(l>t.length){if(r)break;l=t.length}var c=t.subarray(s+8,l);V(a,n[0])&&(1===n.length?i.push(c):i.push.apply(i,e(c,n.slice(1),r))),s=l}return i},We={EBML:F([26,69,223,163]),DocType:F([66,130]),Segment:F([24,83,128,103]),SegmentInfo:F([21,73,169,102]),Tracks:F([22,84,174,107]),Track:F([174]),TrackNumber:F([215]),DefaultDuration:F([35,227,131]),TrackEntry:F([174]),TrackType:F([131]),FlagDefault:F([136]),CodecID:F([134]),CodecPrivate:F([99,162]),VideoTrack:F([224]),AudioTrack:F([225]),Cluster:F([31,67,182,117]),Timestamp:F([231]),TimestampScale:F([42,215,177]),BlockGroup:F([160]),BlockDuration:F([155]),Block:F([161]),SimpleBlock:F([163])},Ge=[128,64,32,16,8,4,2,1],Ke=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i=function(e){for(var t=1,n=0;n<Ge.length&&!(e&Ge[n]);n++)t++;return t}(e[t]),s=e.subarray(t,t+i);return n&&((s=Array.prototype.slice.call(e,t,t+i))[0]^=Ge[i-1]),{length:i,value:q(s,{signed:r}),bytes:s}},Je=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map(function(t){return e(t)}):"number"==typeof t?function(e,t){var n=(void 0===t?{}:t).le,r=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var i,s=(i=e=z(e),Math.ceil(function(e){return e.toString(2).length}(i)/8)),o=new Uint8Array(new ArrayBuffer(s)),a=0;a<s;a++){var l=r?a:Math.abs(a+1-o.length);o[l]=Number(e/$[a]&z(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=0===a?1:2)}return o}(t):t},Xe=function e(t,n,r){if(r>=n.length)return n.length;var i=Ke(n,r,!1);if(V(t.bytes,i.bytes))return r;var s=Ke(n,r+i.length);return e(t,n,r+s.length+s.value+i.length)},Ye=function e(t,n){n=function(e){return Array.isArray(e)?e.map(function(e){return Je(e)}):[Je(e)]}(n),t=F(t);var r=[];if(!n.length)return r;for(var i=0;i<t.length;){var s=Ke(t,i,!1),o=Ke(t,i+s.length),a=i+s.length+o.length;127===o.value&&(o.value=Xe(s,t,a),o.value!==t.length&&(o.value-=a));var l=a+o.value>t.length?t.length:a+o.value,c=t.subarray(a,l);V(n[0],s.bytes)&&(1===n.length?r.push(c):r=r.concat(e(c,n.slice(1)))),i+=s.length+o.length+c.length}return r},Qe=F([0,0,0,1]),Ze=F([0,0,1]),et=F([0,0,3]),tt=function(e){for(var t=[],n=1;n<e.length-2;)V(e.subarray(n,n+3),et)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var r=e.length-t.length,i=new Uint8Array(r),s=0;for(n=0;n<r;s++,n++)s===t[0]&&(s++,t.shift()),i[n]=e[s];return i},nt=function(e,t,n,r){void 0===r&&(r=1/0),e=F(e),n=[].concat(n);for(var i,s=0,o=0;s<e.length&&(o<r||i);){var a=void 0;if(V(e.subarray(s),Qe)?a=4:V(e.subarray(s),Ze)&&(a=3),a){if(o++,i)return tt(e.subarray(i,s));var l=void 0;"h264"===t?l=31&e[s+a]:"h265"===t&&(l=e[s+a]>>1&63),-1!==n.indexOf(l)&&(i=s+a),s+=a+("h264"===t?1:2)}else s++}return e.subarray(0,0)},rt={webm:F([119,101,98,109]),matroska:F([109,97,116,114,111,115,107,97]),flac:F([102,76,97,67]),ogg:F([79,103,103,83]),ac3:F([11,119]),riff:F([82,73,70,70]),avi:F([65,86,73]),wav:F([87,65,86,69]),"3gp":F([102,116,121,112,51,103]),mp4:F([102,116,121,112]),fmp4:F([115,116,121,112]),mov:F([102,116,121,112,113,116]),moov:F([109,111,111,118]),moof:F([109,111,111,102])},it={aac:function(e){var t=$e(e);return V(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=$e(e);return V(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Ye(e,[We.EBML,We.DocType])[0];return V(t,rt.webm)},mkv:function(e){var t=Ye(e,[We.EBML,We.DocType])[0];return V(t,rt.matroska)},mp4:function(e){return!it["3gp"](e)&&!it.mov(e)&&(!(!V(e,rt.mp4,{offset:4})&&!V(e,rt.fmp4,{offset:4}))||!(!V(e,rt.moof,{offset:4})&&!V(e,rt.moov,{offset:4}))||void 0)},mov:function(e){return V(e,rt.mov,{offset:4})},"3gp":function(e){return V(e,rt["3gp"],{offset:4})},ac3:function(e){var t=$e(e);return V(e,rt.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=$e(e);return V(e,rt.flac,{offset:t})},ogg:function(e){return V(e,rt.ogg)},avi:function(e){return V(e,rt.riff)&&V(e,rt.avi,{offset:8})},wav:function(e){return V(e,rt.riff)&&V(e,rt.wav,{offset:8})},h264:function(e){return function(e){return nt(e,"h264",7,3)}(e).length},h265:function(e){return function(e){return nt(e,"h265",[32,33],3)}(e).length}},st=Object.keys(it).filter(function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e}).concat(["ts","h264","h265"]);st.forEach(function(e){var t=it[e];it[e]=function(e){return t(F(e))}});var ot=it,at=function(e){e=F(e);for(var t=0;t<st.length;t++){var n=st[t];if(ot[n](e))return n}return""},lt=n(9622),ct="8.23.3";const ut={},dt=function(e,t){return ut[e]=ut[e]||[],t&&(ut[e]=ut[e].concat(t)),ut[e]},ht=function(e,t){const n=dt(e).indexOf(t);return!(n<=-1||(ut[e]=ut[e].slice(),ut[e].splice(n,1),0))},pt={prefixed:!0},ft=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],mt=ft[0];let gt;for(let e=0;e<ft.length;e++)if(ft[e][1]in o()){gt=ft[e];break}if(gt){for(let e=0;e<gt.length;e++)pt[mt[e]]=gt[e];pt.prefixed=gt[0]!==mt[0]}let yt=[];const vt=function e(t,n=":",r=""){let s,o="info";function a(...e){s("log",o,e)}return s=((e,t,n)=>(r,s,o)=>{const a=t.levels[s],l=new RegExp(`^(${a})$`);let c=e;if("log"!==r&&o.unshift(r.toUpperCase()+":"),n&&(c=`%c${e}`,o.unshift(n)),o.unshift(c+":"),yt){yt.push([].concat(o));const e=yt.length-1e3;yt.splice(0,e>0?e:0)}if(!i().console)return;let u=i().console[r];u||"debug"!==r||(u=i().console.info||i().console.log),u&&a&&l.test(r)&&u[Array.isArray(o)?"apply":"call"](i().console,o)})(t,a,r),a.createLogger=(i,s,o)=>{const a=void 0!==s?s:n;return e(`${t} ${a} ${i}`,a,void 0!==o?o:r)},a.createNewLogger=(t,n,r)=>e(t,n,r),a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:o},a.level=e=>{if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error(`"${e}" in not a valid log level`);o=e}return o},a.history=()=>yt?[].concat(yt):[],a.history.filter=e=>(yt||[]).filter(t=>new RegExp(`.*${e}.*`).test(t[0])),a.history.clear=()=>{yt&&(yt.length=0)},a.history.disable=()=>{null!==yt&&(yt.length=0,yt=null)},a.history.enable=()=>{null===yt&&(yt=[])},a.error=(...e)=>s("error",o,e),a.warn=(...e)=>s("warn",o,e),a.debug=(...e)=>s("debug",o,e),a}("VIDEOJS"),bt=vt.createLogger,_t=Object.prototype.toString,wt=function(e){return Tt(e)?Object.keys(e):[]};function St(e,t){wt(e).forEach(n=>t(e[n],n))}function kt(e,t,n=0){return wt(e).reduce((n,r)=>t(n,e[r],r),n)}function Tt(e){return!!e&&"object"==typeof e}function xt(e){return Tt(e)&&"[object Object]"===_t.call(e)&&e.constructor===Object}function Et(...e){const t={};return e.forEach(e=>{e&&St(e,(e,n)=>{xt(e)?(xt(t[n])||(t[n]={}),t[n]=Et(t[n],e)):t[n]=e})}),t}function Ct(e={}){const t=[];for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];t.push(r)}return t}function At(e,t,n,r=!0){const i=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const e=n();return i(e),e}};return r&&(s.set=i),Object.defineProperty(e,t,s)}var Ot=Object.freeze({__proto__:null,each:St,reduce:kt,isObject:Tt,isPlain:xt,merge:Et,values:Ct,defineLazyProperty:At});let Mt,It=!1,Dt=null,jt=!1,Pt=!1,Lt=!1,Nt=!1,Rt=!1,Ut=null,Bt=null;const Ft=Boolean(i().cast&&i().cast.framework&&i().cast.framework.CastReceiverContext);let zt=null,$t=!1,qt=!1,Ht=!1,Vt=!1,Wt=!1,Gt=!1,Kt=!1;const Jt=Boolean(tn()&&("ontouchstart"in i()||i().navigator.maxTouchPoints||i().DocumentTouch&&i().document instanceof i().DocumentTouch)),Xt=i().navigator&&i().navigator.userAgentData;if(Xt&&Xt.platform&&Xt.brands&&(jt="Android"===Xt.platform,Lt=Boolean(Xt.brands.find(e=>"Microsoft Edge"===e.brand)),Nt=Boolean(Xt.brands.find(e=>"Chromium"===e.brand)),Rt=!Lt&&Nt,Ut=Bt=(Xt.brands.find(e=>"Chromium"===e.brand)||{}).version||null,qt="Windows"===Xt.platform),!Nt){const e=i().navigator&&i().navigator.userAgent||"";It=/iPod/i.test(e),Dt=function(){const t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),jt=/Android/i.test(e),Mt=function(){const t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const n=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return n&&r?parseFloat(t[1]+"."+t[2]):n||null}(),Pt=/Firefox/i.test(e),Lt=/Edg/i.test(e),Nt=/Chrome/i.test(e)||/CriOS/i.test(e),Rt=!Lt&&Nt,Ut=Bt=function(){const t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),zt=function(){const t=/MSIE\s(\d+)\.\d/.exec(e);let n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(n=11),n}(),Wt=/Tizen/i.test(e),Gt=/Web0S/i.test(e),Kt=Wt||Gt,$t=/Safari/i.test(e)&&!Rt&&!jt&&!Lt&&!Kt,qt=/Windows/i.test(e),Ht=/iPad/i.test(e)||$t&&Jt&&!/iPhone/i.test(e),Vt=/iPhone/i.test(e)&&!Ht}const Yt=Vt||Ht||It,Qt=($t||Yt)&&!Rt;var Zt=Object.freeze({__proto__:null,get IS_IPOD(){return It},get IOS_VERSION(){return Dt},get IS_ANDROID(){return jt},get ANDROID_VERSION(){return Mt},get IS_FIREFOX(){return Pt},get IS_EDGE(){return Lt},get IS_CHROMIUM(){return Nt},get IS_CHROME(){return Rt},get CHROMIUM_VERSION(){return Ut},get CHROME_VERSION(){return Bt},IS_CHROMECAST_RECEIVER:Ft,get IE_VERSION(){return zt},get IS_SAFARI(){return $t},get IS_WINDOWS(){return qt},get IS_IPAD(){return Ht},get IS_IPHONE(){return Vt},get IS_TIZEN(){return Wt},get IS_WEBOS(){return Gt},get IS_SMART_TV(){return Kt},TOUCH_ENABLED:Jt,IS_IOS:Yt,IS_ANY_SAFARI:Qt});function en(e){return"string"==typeof e&&Boolean(e.trim())}function tn(){return o()===i().document}function nn(e){return Tt(e)&&1===e.nodeType}function rn(){try{return i().parent!==i().self}catch(e){return!0}}function sn(e){return function(t,n){if(!en(t))return o()[e](null);en(n)&&(n=o().querySelector(n));const r=nn(n)?n:o();return r[e]&&r[e](t)}}function on(e="div",t={},n={},r){const i=o().createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){const n=t[e];"textContent"===e?an(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)}),Object.getOwnPropertyNames(n).forEach(function(e){i.setAttribute(e,n[e])}),r&&En(i,r),i}function an(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function ln(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function cn(e,t){return function(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),e.classList.contains(t)}function un(e,...t){return e.classList.add(...t.reduce((e,t)=>e.concat(t.split(/\s+/)),[])),e}function dn(e,...t){return e?(e.classList.remove(...t.reduce((e,t)=>e.concat(t.split(/\s+/)),[])),e):(vt.warn("removeClass was called with an element that doesn't exist"),null)}function hn(e,t,n){return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=void 0),t.split(/\s+/).forEach(t=>e.classList.toggle(t,n)),e}function pn(e,t){Object.getOwnPropertyNames(t).forEach(function(n){const r=t[n];null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)})}function fn(e){const t={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(e&&e.attributes&&e.attributes.length>0){const r=e.attributes;for(let e=r.length-1;e>=0;e--){const i=r[e].name;let s=r[e].value;n.includes(i)&&(s=null!==s),t[i]=s}}return t}function mn(e,t){return e.getAttribute(t)}function gn(e,t,n){e.setAttribute(t,n)}function yn(e,t){e.removeAttribute(t)}function vn(){o().body.focus(),o().onselectstart=function(){return!1}}function bn(){o().onselectstart=function(){return!0}}function _n(e){if(e&&e.getBoundingClientRect&&e.parentNode){const t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(e=>{void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(In(e,"height"))),n.width||(n.width=parseFloat(In(e,"width"))),n}}function wn(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};const t=e.offsetWidth,n=e.offsetHeight;let r=0,i=0;for(;e.offsetParent&&e!==o()[pt.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function Sn(e,t){const n={x:0,y:0};if(Yt){let t=e;for(;t&&"html"!==t.nodeName.toLowerCase();){const e=In(t,"transform");if(/^matrix/.test(e)){const t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){const t=e.slice(9,-1).split(/,\s/).map(Number);n.x+=t[12],n.y+=t[13]}if(t.assignedSlot&&t.assignedSlot.parentElement&&i().WebKitCSSMatrix){const e=i().getComputedStyle(t.assignedSlot.parentElement).transform,r=new(i().WebKitCSSMatrix)(e);n.x+=r.m41,n.y+=r.m42}t=t.parentNode||t.host}}const r={},s=wn(t.target),o=wn(e),a=o.width,l=o.height;let c=t.offsetY-(o.top-s.top),u=t.offsetX-(o.left-s.left);return t.changedTouches&&(u=t.changedTouches[0].pageX-o.left,c=t.changedTouches[0].pageY+o.top,Yt&&(u-=n.x,c-=n.y)),r.y=1-Math.max(0,Math.min(1,c/l)),r.x=Math.max(0,Math.min(1,u/a)),r}function kn(e){return Tt(e)&&3===e.nodeType}function Tn(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function xn(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(e=>("function"==typeof e&&(e=e()),nn(e)||kn(e)?e:"string"==typeof e&&/\S/.test(e)?o().createTextNode(e):void 0)).filter(e=>e)}function En(e,t){return xn(t).forEach(t=>e.appendChild(t)),e}function Cn(e,t){return En(Tn(e),t)}function An(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||"mousedown"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}const On=sn("querySelector"),Mn=sn("querySelectorAll");function In(e,t){if(!e||!t)return"";if("function"==typeof i().getComputedStyle){let n;try{n=i().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}function Dn(e){[...o().styleSheets].forEach(t=>{try{const n=[...t.cssRules].map(e=>e.cssText).join(""),r=o().createElement("style");r.textContent=n,e.document.head.appendChild(r)}catch(n){const r=o().createElement("link");r.rel="stylesheet",r.type=t.type,r.media=t.media.mediaText,r.href=t.href,e.document.head.appendChild(r)}})}var jn=Object.freeze({__proto__:null,isReal:tn,isEl:nn,isInFrame:rn,createEl:on,textContent:an,prependTo:ln,hasClass:cn,addClass:un,removeClass:dn,toggleClass:hn,setAttributes:pn,getAttributes:fn,getAttribute:mn,setAttribute:gn,removeAttribute:yn,blockTextSelection:vn,unblockTextSelection:bn,getBoundingClientRect:_n,findPosition:wn,getPointerPosition:Sn,isTextNode:kn,emptyEl:Tn,normalizeContent:xn,appendContent:En,insertContent:Cn,isSingleLeftClick:An,$:On,$$:Mn,computedStyle:In,copyStyleSheetsToWindow:Dn});let Pn,Ln=!1;const Nn=function(){if(!1===Pn.options.autoSetup)return;const e=Array.prototype.slice.call(o().getElementsByTagName("video")),t=Array.prototype.slice.call(o().getElementsByTagName("audio")),n=Array.prototype.slice.call(o().getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(let e=0,t=r.length;e<t;e++){const t=r[e];if(!t||!t.getAttribute){Rn(1);break}void 0===t.player&&null!==t.getAttribute("data-setup")&&Pn(t)}else Ln||Rn(1)};function Rn(e,t){tn()&&(t&&(Pn=t),i().setTimeout(Nn,e))}function Un(){Ln=!0,i().removeEventListener("load",Un)}tn()&&("complete"===o().readyState?Un():i().addEventListener("load",Un));const Bn=function(e){const t=o().createElement("style");return t.className=e,t},Fn=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};var zn=new WeakMap;let $n,qn=3;function Hn(){return qn++}function Vn(e,t){if(!zn.has(e))return;const n=zn.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&zn.delete(e)}function Wn(e,t,n,r){n.forEach(function(n){e(t,n,r)})}function Gn(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){const r=e||i().event;e={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const t in r)s.includes(t)||"returnValue"===t&&r.preventDefault||(e[t]=r[t]);if(e.target||(e.target=e.srcElement||o()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){const t=o().documentElement,n=o().body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}const Kn=["touchstart","touchmove"];function Jn(e,t,n){if(Array.isArray(t))return Wn(Jn,e,t,n);zn.has(e)||zn.set(e,{});const r=zn.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=Hn()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(r.disabled)return;t=Gn(t);const i=r.handlers[t.type];if(i){const r=i.slice(0);for(let i=0,s=r.length;i<s&&!t.isImmediatePropagationStopped();i++)try{r[i].call(e,t,n)}catch(e){vt.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){let n=!1;(function(){if("boolean"!=typeof $n){$n=!1;try{const e=Object.defineProperty({},"passive",{get(){$n=!0}});i().addEventListener("test",null,e),i().removeEventListener("test",null,e)}catch(e){}}return $n})()&&Kn.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function Xn(e,t,n){if(!zn.has(e))return;const r=zn.get(e);if(!r.handlers)return;if(Array.isArray(t))return Wn(Xn,e,t,n);const i=function(e,t){r.handlers[t]=[],Vn(e,t)};if(void 0===t){for(const t in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},t)&&i(e,t);return}const s=r.handlers[t];if(s)if(n){if(n.guid)for(let e=0;e<s.length;e++)s[e].guid===n.guid&&s.splice(e--,1);Vn(e,t)}else i(e,t)}function Yn(e,t,n){const r=zn.has(e)?zn.get(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Gn(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)Yn.call(null,i,t,n);else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){zn.has(t.target)||zn.set(t.target,{});const e=zn.get(t.target);t.target[t.type]&&(e.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),e.disabled=!1)}return!t.defaultPrevented}function Qn(e,t,n){if(Array.isArray(t))return Wn(Qn,e,t,n);const r=function(){Xn(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Hn(),Jn(e,t,r)}function Zn(e,t,n){const r=function(){Xn(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Hn(),Jn(e,t,r)}var er=Object.freeze({__proto__:null,fixEvent:Gn,on:Jn,off:Xn,trigger:Yn,one:Qn,any:Zn});const tr=30,nr=function(e,t,n){t.guid||(t.guid=Hn());const r=t.bind(e);return r.guid=n?n+"_"+t.guid:t.guid,r},rr=function(e,t){let n=i().performance.now();return function(...r){const s=i().performance.now();s-n>=t&&(e(...r),n=s)}},ir=function(e,t,n,r=i()){let s;const o=function(){const i=this,o=arguments;let a=function(){s=null,a=null,n||e.apply(i,o)};!s&&n&&e.apply(i,o),r.clearTimeout(s),s=r.setTimeout(a,t)};return o.cancel=()=>{r.clearTimeout(s),s=null},o};var sr=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:tr,bind_:nr,throttle:rr,debounce:ir});let or;class ar{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Jn(this,e,t),this.addEventListener=n}off(e,t){Xn(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Qn(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Zn(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;"string"==typeof e&&(e={type:t}),e=Gn(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Yn(this,e)}queueTrigger(e){or||(or=new Map);const t=e.type||e;let n=or.get(this);n||(n=new Map,or.set(this,n));const r=n.get(t);n.delete(t),i().clearTimeout(r);const s=i().setTimeout(()=>{n.delete(t),0===n.size&&(n=null,or.delete(this)),this.trigger(e)},0);n.set(t,s)}}ar.prototype.allowedEvents_={},ar.prototype.addEventListener=ar.prototype.on,ar.prototype.removeEventListener=ar.prototype.off,ar.prototype.dispatchEvent=ar.prototype.trigger;const lr=e=>"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,cr=e=>e instanceof ar||!!e.eventBusEl_&&["on","one","off","trigger"].every(t=>"function"==typeof e[t]),ur=e=>"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length,dr=(e,t,n)=>{if(!e||!e.nodeName&&!cr(e))throw new Error(`Invalid target for ${lr(t)}#${n}; must be a DOM node or evented object.`)},hr=(e,t,n)=>{if(!ur(e))throw new Error(`Invalid event type for ${lr(t)}#${n}; must be a non-empty string or array.`)},pr=(e,t,n)=>{if("function"!=typeof e)throw new Error(`Invalid listener for ${lr(t)}#${n}; must be a function.`)},fr=(e,t,n)=>{const r=t.length<3||t[0]===e||t[0]===e.eventBusEl_;let i,s,o;return r?(i=e.eventBusEl_,t.length>=3&&t.shift(),[s,o]=t):(i=t[0],s=t[1],o=t[2]),dr(i,e,n),hr(s,e,n),pr(o,e,n),o=nr(e,o),{isTargetingSelf:r,target:i,type:s,listener:o}},mr=(e,t,n,r)=>{dr(e,e,t),e.nodeName?er[t](e,n,r):e[t](n,r)},gr={on(...e){const{isTargetingSelf:t,target:n,type:r,listener:i}=fr(this,e,"on");if(mr(n,"on",r,i),!t){const e=()=>this.off(n,r,i);e.guid=i.guid;const t=()=>this.off("dispose",e);t.guid=i.guid,mr(this,"on","dispose",e),mr(n,"on","dispose",t)}},one(...e){const{isTargetingSelf:t,target:n,type:r,listener:i}=fr(this,e,"one");if(t)mr(n,"one",r,i);else{const e=(...t)=>{this.off(n,r,e),i.apply(null,t)};e.guid=i.guid,mr(n,"one",r,e)}},any(...e){const{isTargetingSelf:t,target:n,type:r,listener:i}=fr(this,e,"any");if(t)mr(n,"any",r,i);else{const e=(...t)=>{this.off(n,r,e),i.apply(null,t)};e.guid=i.guid,mr(n,"any",r,e)}},off(e,t,n){if(!e||ur(e))Xn(this.eventBusEl_,e,t);else{const r=e,i=t;dr(r,this,"off"),hr(i,this,"off"),pr(n,this,"off"),n=nr(this,n),this.off("dispose",n),r.nodeName?(Xn(r,i,n),Xn(r,"dispose",n)):cr(r)&&(r.off(i,n),r.off("dispose",n))}},trigger(e,t){dr(this.eventBusEl_,this,"trigger");const n=e&&"string"!=typeof e?e.type:e;if(!ur(n))throw new Error(`Invalid event type for ${lr(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Yn(this.eventBusEl_,e,t)}};function yr(e,t={}){const{eventBusKey:n}=t;if(n){if(!e[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);e.eventBusEl_=e[n]}else e.eventBusEl_=on("span",{className:"vjs-event-bus"});return Object.assign(e,gr),e.eventedCallbacks&&e.eventedCallbacks.forEach(e=>{e()}),e.on("dispose",()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&zn.has(e)&&zn.delete(e)}),i().setTimeout(()=>{e.eventBusEl_=null},0)}),e}const vr={state:{},setState(e){let t;return"function"==typeof e&&(e=e()),St(e,(e,n)=>{this.state[n]!==e&&(t=t||{},t[n]={from:this.state[n],to:e}),this.state[n]=e}),t&&cr(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function br(e,t){return Object.assign(e,vr),e.state=Object.assign({},e.state,t),"function"==typeof e.handleStateChanged&&cr(e)&&e.on("statechanged",e.handleStateChanged),e}const _r=function(e){return"string"!=typeof e?e:e.replace(/./,e=>e.toLowerCase())},wr=function(e){return"string"!=typeof e?e:e.replace(/./,e=>e.toUpperCase())},Sr=function(e,t){return wr(e)===wr(t)};var kr=Object.freeze({__proto__:null,toLowerCase:_r,toTitleCase:wr,titleCaseEquals:Sr});class Tr{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Et({},this.options_),t=this.options_=Et(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const t=e&&e.id&&e.id()||"no_player";this.id_=`${t}_component_${Hn()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(e=>this.addClass(e)),["on","off","one","any","trigger"].forEach(e=>{this[e]=void 0}),!1!==t.evented&&(yr(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),br(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=Et(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return on(e,t,n)}localize(e,t,n=e){const r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),s=i&&i[r],o=r&&r.split("-")[0],a=i&&i[o];let l=n;return s&&s[e]?l=s[e]:a&&a[e]&&(l=a[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,n){const r=t[n-1];let i=r;return void 0===r&&(i=e),i})),l}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((e,t)=>e.concat(t),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",r=on("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),i=o().createElementNS(n,"svg");i.setAttributeNS(null,"viewBox","0 0 512 512");const s=o().createElementNS(n,"use");return i.appendChild(s),s.setAttributeNS(null,"href",`#vjs-icon-${e}`),r.appendChild(i),this.iconIsSet_?t.replaceChild(r,t.querySelector(".vjs-icon-placeholder")):t.appendChild(r),this.iconIsSet_=!0,r}addChild(e,t={},n=this.children_.length){let r,i;if("string"==typeof e){i=wr(e);const n=t.componentClass||i;t.name=i;const s=Tr.getComponent(n);if(!s)throw new Error(`Component ${n} does not exist`);if("function"!=typeof s)return null;r=new s(this.player_||this,t)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(n,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),i=i||r.name&&wr(r.name()),i&&(this.childNameIndex_[i]=r,this.childNameIndex_[_r(i)]=r),"function"==typeof r.el&&r.el()){let e=null;this.children_[n+1]&&(this.children_[n+1].el_?e=this.children_[n+1].el_:nn(this.children_[n+1])&&(e=this.children_[n+1])),this.contentEl().insertBefore(r.el(),e)}return r}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[wr(e.name())]=null,this.childNameIndex_[_r(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=e=>{const n=e.name;let r=e.opts;if(void 0!==t[n]&&(r=t[n]),!1===r)return;!0===r&&(r={}),r.playerOptions=this.options_.playerOptions;const i=this.addChild(n,r);i&&(this[n]=i)};let r;const i=Tr.getComponent("Tech");r=Array.isArray(e)?e:Object.keys(e),r.concat(Object.keys(this.options_).filter(function(e){return!r.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(t=>{let n,r;return"string"==typeof t?(n=t,r=e[n]||this.options_[n]||{}):(n=t.name,r=t),{name:n,opts:r}}).filter(e=>{const t=Tr.getComponent(e.opts.componentClass||wr(e.name));return t&&!i.isTech(t)}).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)}$(e,t){return On(e,t||this.contentEl())}$$(e,t){return Mn(e,t||this.contentEl())}hasClass(e){return cn(this.el_,e)}addClass(...e){un(this.el_,...e)}removeClass(...e){dn(this.el_,...e)}toggleClass(e,t){hn(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return mn(this.el_,e)}setAttribute(e,t){gn(this.el_,e,t)}removeAttribute(e){yn(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;const r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+wr(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=In(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const n=`offset${wr(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect();return{boundingClientRect:{x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},center:{x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&("Tab"===e.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e,t=0,n=null;this.on("touchstart",function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},t=i().performance.now(),e=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)e=!1;else if(n){const r=t.touches[0].pageX-n.pageX,i=t.touches[0].pageY-n.pageY;Math.sqrt(r*r+i*i)>10&&(e=!1)}});const r=function(){e=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",function(r){n=null,!0===e&&i().performance.now()-t<200&&(r.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=nr(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=nr(this,e),this.clearTimersOnDispose_(),n=i().setTimeout(()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),i().clearTimeout(e)),e}setInterval(e,t){e=nr(this,e),this.clearTimersOnDispose_();const n=i().setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),i().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=nr(this,e),t=i().requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=nr(this,t);const n=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),i().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((e,n)=>this[t](n))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return Boolean(this.el_.disabled)}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(e){const t=i().getComputedStyle(e,null),n=t.getPropertyValue("visibility");return"none"!==t.getPropertyValue("display")&&!["hidden","collapse"].includes(n)}return e||(e=this.el()),!!(function(e){if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(o().documentElement.clientWidth||i().innerWidth))return!1;if(t.y<0)return!1;if(t.y>(o().documentElement.clientHeight||i().innerHeight))return!1;let n=o().elementFromPoint(t.x,t.y);for(;n;){if(n===e)return!0;if(!n.parentNode)return!1;n=n.parentNode}}(e)&&(n=e,t(n.parentElement)&&t(n)&&"0"!==n.style.opacity&&"0px"!==i().getComputedStyle(n).height&&"0px"!==i().getComputedStyle(n).width)&&(!e.parentElement||e.tabIndex>=0));var n}static registerComponent(e,t){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=Tr.getComponent("Tech"),r=n&&n.isTech(t),i=Tr===t||Tr.prototype.isPrototypeOf(t.prototype);if(r||!i){let t;throw t=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${t}.`)}e=wr(e),Tr.components_||(Tr.components_={});const s=Tr.getComponent("Player");if("Player"===e&&s&&s.players){const e=s.players,t=Object.keys(e);if(e&&t.length>0)for(let n=0;n<t.length;n++)if(null!==e[t[n]])throw new Error("Can not register Player component after player has been created.")}return Tr.components_[e]=t,Tr.components_[_r(e)]=t,t}static getComponent(e){if(e&&Tr.components_)return Tr.components_[e]}}function xr(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${n}).`)}(e,r,n.length-1),n[r][t]}function Er(e){let t;return t=void 0===e||0===e.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:xr.bind(null,"start",0,e),end:xr.bind(null,"end",1,e)},i().Symbol&&i().Symbol.iterator&&(t[i().Symbol.iterator]=()=>(e||[]).values()),t}function Cr(e,t){return Array.isArray(e)?Er(e):void 0===e||void 0===t?Er():Er([[e,t]])}Tr.registerComponent("Component",Tr);const Ar=function(e,t){e=e<0?0:e;let n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600);const s=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),i=i>0||o>0?i+":":"",r=((i||s>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,i+r+n};let Or=Ar;function Mr(e){Or=e}function Ir(){Or=Ar}function Dr(e,t=e){return Or(e,t)}var jr=Object.freeze({__proto__:null,createTimeRanges:Cr,createTimeRange:Cr,setFormatTime:Mr,resetFormatTime:Ir,formatTime:Dr});function Pr(e,t){let n,r,i=0;if(!t)return 0;e&&e.length||(e=Cr(0,0));for(let s=0;s<e.length;s++)n=e.start(s),r=e.end(s),r>t&&(r=t),i+=r-n;return i/t}function Lr(e){if(e instanceof Lr)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:Tt(e)&&("number"==typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=Lr.defaultMessages[this.code]||"")}function Nr(e){return null!=e&&"function"==typeof e.then}function Rr(e){Nr(e)&&e.then(null,e=>{})}Lr.prototype.code=0,Lr.prototype.message="",Lr.prototype.status=null,Lr.prototype.metadata=null,Lr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Lr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},Lr.MEDIA_ERR_CUSTOM=0,Lr.prototype.MEDIA_ERR_CUSTOM=0,Lr.MEDIA_ERR_ABORTED=1,Lr.prototype.MEDIA_ERR_ABORTED=1,Lr.MEDIA_ERR_NETWORK=2,Lr.prototype.MEDIA_ERR_NETWORK=2,Lr.MEDIA_ERR_DECODE=3,Lr.prototype.MEDIA_ERR_DECODE=3,Lr.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Lr.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Lr.MEDIA_ERR_ENCRYPTED=5,Lr.prototype.MEDIA_ERR_ENCRYPTED=5;const Ur=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,n,r)=>(e[n]&&(t[n]=e[n]),t),{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})};var Br=Ur;const Fr="vjs-modal-dialog";class zr extends Tr{constructor(e,t){super(e,t),this.handleKeyDown_=e=>this.handleKeyDown(e),this.close_=e=>this.close(e),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=on("div",{className:`${Fr}-content`},{role:"document"}),this.descEl_=on("p",{className:`${Fr}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),an(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Fr} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_)return void(this.options_.fillAlways&&this.fill());const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const e=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Cn(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);const i=this.getChild("closeButton");i&&n.appendChild(i.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Tn(this.contentEl()),this.trigger("modalempty")}content(e){return void 0!==e&&(this.content_=e),this.content_}conditionalFocus_(){const e=o().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),"Escape"===e.key&&this.closeable())return e.preventDefault(),void this.close();if("Tab"!==e.key)return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let r;for(let e=0;e<t.length;e++)if(n===t[e]){r=e;break}o().activeElement===this.el_&&(r=0),e.shiftKey&&0===r?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||r!==t.length-1||(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,e=>(e instanceof i().HTMLAnchorElement||e instanceof i().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof i().HTMLInputElement||e instanceof i().HTMLSelectElement||e instanceof i().HTMLTextAreaElement||e instanceof i().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof i().HTMLIFrameElement||e instanceof i().HTMLObjectElement||e instanceof i().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable"))}}zr.prototype.options_={pauseOnOpen:!0,temporary:!0},Tr.registerComponent("ModalDialog",zr);class $r extends ar{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},cr(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,r=this.length;n<r;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}$r.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const e in $r.prototype.allowedEvents_)$r.prototype["on"+e]=null;const qr=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)};class Hr extends $r{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){qr(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&qr(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,qr(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Vr=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)};class Wr extends $r{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Vr(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set(){}})}addTrack(e){e.selected&&Vr(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Vr(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class Gr extends $r{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}}class Kr{constructor(e){Kr.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const r=e.length;this.cues_=e,this.length_=e.length;const i=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)}getCueById(e){let t=null;for(let n=0,r=this.length;n<r;n++){const r=this[n];if(r.id===e){t=r;break}}return t}}const Jr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Xr={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Yr={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Qr={disabled:"disabled",hidden:"hidden",showing:"showing"};class Zr extends ar{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Hn(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const e in t)Object.defineProperty(this,e,{get:()=>t[e],set(){}});Object.defineProperty(this,"label",{get:()=>n,set(e){e!==n&&(n=e,this.trigger("labelchange"))}})}}const ei=function(e){return new URL(e,o().baseURI)},ti=function(e){return new URL(e,o().baseURI).href},ni=function(e){if("string"==typeof e){const t=e.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return t?t[1].toLowerCase():""}return""},ri=function(e,t=i().location){return ei(e).origin!==t.origin};var ii=Object.freeze({__proto__:null,parseUrl:ei,getAbsoluteURL:ti,getFileExtension:ni,isCrossOrigin:ri});const si=function(e,t){const n=new(i().WebVTT.Parser)(i(),i().vttjs,i().WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(i().console&&i().console.groupCollapsed&&i().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),r.forEach(e=>vt.error(e)),i().console&&i().console.groupEnd&&i().console.groupEnd()),n.flush()},oi=function(e,t){const n={uri:e},r=ri(e);r&&(n.cors=r);const s="use-credentials"===t.tech_.crossOrigin();s&&(n.withCredentials=s),l()(n,nr(this,function(e,n,r){if(e)return vt.error(e,n);t.loaded_=!0,"function"!=typeof i().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],e=>{if("vttjserror"!==e.type)return si(r,t);vt.error(`vttjs failed to load, stopping trying to process ${t.src}`)}):si(r,t)}))};class ai extends Zr{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Et(e,{kind:Yr[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=Qr[t.mode]||"disabled";const r=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const i=new Kr(this.cues_),s=new Kr(this.activeCues_);let o=!1;this.timeupdateHandler=nr(this,function(e={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==n&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>r,set(){}},mode:{get:()=>n,set(e){Qr[e]&&n!==e&&(n=e,this.preload_||"disabled"===n||0!==this.cues.length||oi(this.src,this),this.stopTracking(),"disabled"!==n&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?i:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return s;const e=this.tech_.currentTime(),t=[];for(let n=0,r=this.cues.length;n<r;n++){const r=this.cues[n];r.startTime<=e&&r.endTime>=e&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(let e=0;e<t.length;e++)-1===this.activeCues_.indexOf(t[e])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&oi(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new(i().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let e=0;e<n.length;e++)n[e]!==this&&n[e].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}toJSON(){return Br(this)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}ai.prototype.allowedEvents_={cuechange:"cuechange"};class li extends Zr{constructor(e={}){const t=Et(e,{kind:Xr[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class ci extends Zr{constructor(e={}){const t=Et(e,{kind:Jr[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class ui extends ar{constructor(e={}){let t;super();const n=new ai(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get:()=>t},track:{get:()=>n}}),t=ui.NONE,n.addEventListener("loadeddata",()=>{t=ui.LOADED,this.trigger({type:"load",target:this})})}}ui.prototype.allowedEvents_={load:"load"},ui.NONE=0,ui.LOADING=1,ui.LOADED=2,ui.ERROR=3;const di={audio:{ListClass:Hr,TrackClass:li,capitalName:"Audio"},video:{ListClass:Wr,TrackClass:ci,capitalName:"Video"},text:{ListClass:Gr,TrackClass:ai,capitalName:"Text"}};Object.keys(di).forEach(function(e){di[e].getterName=`${e}Tracks`,di[e].privateName=`${e}Tracks_`});const hi={remoteText:{ListClass:Gr,TrackClass:ai,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:ui,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},pi=Object.assign({},di,hi);hi.names=Object.keys(hi),di.names=Object.keys(di),pi.names=[].concat(hi.names).concat(di.names);class fi extends Tr{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=e=>this.onDurationChange(e),this.trackProgress_=e=>this.trackProgress(e),this.trackCurrentTime_=e=>this.trackCurrentTime(e),this.stopTrackingCurrentTime_=e=>this.stopTrackingCurrentTime(e),this.disposeSourceHandler_=e=>this.disposeSourceHandler(e),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),pi.names.forEach(t=>{const n=pi[t];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(t=>{!1===e[`native${t}Tracks`]&&(this[`featuresNative${t}Tracks`]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new pi.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(nr(this,function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Cr(0,0)}bufferedPercent(){return Pr(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(di.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach(e=>{const t=this[`${e}Tracks`]()||[];let n=t.length;for(;n--;){const r=t[n];"text"===e&&this.removeRemoteTextTrack(r),t.removeTrack(r)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new Lr(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Cr(0,0):Cr()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){di.names.forEach(e=>{const t=di[e],n=()=>{this.trigger(`${e}trackchange`)},r=this[t.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),this.on("dispose",()=>{r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})}addWebVttScript_(){if(!i().WebVTT)if(o().body.contains(this.el())){if(!this.options_["vtt.js"]&&xt(u())&&Object.keys(u()).length>0)return void this.trigger("vttjsloaded");const e=o().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),i().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=t=>e.addTrack(t.track),r=t=>e.removeTrack(t.track);t.on("addtrack",n),t.on("removetrack",r),this.addWebVttScript_();const i=()=>this.trigger("texttrackchange"),s=()=>{i();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",i),"showing"===n.mode&&n.addEventListener("cuechange",i)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",r),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(let t=0;t<e.length;t++)e[t].removeEventListener("cuechange",i)})}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i={}){const s=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;const o=new pi.text.TrackClass(i);return s.addTrack(o),o}(this,e,t,n)}createRemoteTextTrack(e){const t=Et(e,{tech:this});return new hi.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!1===t&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(n.track)),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Hn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return fi.canPlayType(e.type)}static isTech(e){return e.prototype instanceof fi||e instanceof fi||e===fi}static registerTech(e,t){if(fi.techs_||(fi.techs_={}),!fi.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!fi.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!fi.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=wr(e),fi.techs_[e]=t,fi.techs_[_r(e)]=t,"Tech"!==e&&fi.defaultTechOrder_.push(e),t}static getTech(e){if(e)return fi.techs_&&fi.techs_[e]?fi.techs_[e]:(e=wr(e),i()&&i().videojs&&i().videojs[e]?(vt.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),i().videojs[e]):void 0)}}pi.names.forEach(function(e){const t=pi[e];fi.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),fi.prototype.featuresVolumeControl=!0,fi.prototype.featuresMuteControl=!0,fi.prototype.featuresFullscreenResize=!1,fi.prototype.featuresPlaybackRate=!1,fi.prototype.featuresProgressEvents=!1,fi.prototype.featuresSourceset=!1,fi.prototype.featuresTimeupdateEvents=!1,fi.prototype.featuresNativeTextTracks=!1,fi.prototype.featuresVideoFrameCallback=!1,fi.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){let r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){const n=e.sourceHandlers||[];let r;for(let e=0;e<n.length;e++)if(r=n[e].canPlayType(t),r)return r;return""},e.selectSourceHandler=function(t,n){const r=e.sourceHandlers||[];let i;for(let e=0;e<r.length;e++)if(i=r[e].canHandleSource(t,n),i)return r[e];return null},e.canPlaySource=function(t,n){const r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(e){const t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){let n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:vt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Tr.registerComponent("Tech",fi),fi.registerTech("Tech",fi),fi.defaultTechOrder_=[];const mi={},gi={},yi={};function vi(e,t,n){e.setTimeout(()=>Ti(t,mi[t.type],n,e),1)}function bi(e,t,n,r=null){const i="call"+wr(n),s=e.reduce(ki(i),r),o=s===yi,a=o?null:t[n](s);return function(e,t,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i];s[t]&&s[t](r,n)}}(e,n,a,o),a}const _i={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},wi={setCurrentTime:1,setMuted:1,setVolume:1},Si={play:1,pause:1};function ki(e){return(t,n)=>t===yi?yi:n[e]?n[e](t):t}function Ti(e={},t=[],n,r,i=[],s=!1){const[o,...a]=t;if("string"==typeof o)Ti(e,mi[o],n,r,i,s);else if(o){const t=function(e,t){const n=gi[e.id()];let r=null;if(null==n)return r=t(e),gi[e.id()]=[[t,r]],r;for(let e=0;e<n.length;e++){const[i,s]=n[e];i===t&&(r=s)}return null===r&&(r=t(e),n.push([t,r])),r}(r,o);if(!t.setSource)return i.push(t),Ti(e,a,n,r,i,s);t.setSource(Object.assign({},e),function(o,l){if(o)return Ti(e,a,n,r,i,s);i.push(t),Ti(l,e.type===l.type?a:mi[l.type],n,r,i,s)})}else a.length?Ti(e,a,n,r,i,s):s?n(e,i):Ti(e,mi["*"],n,r,i,!0)}const xi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ei=function(e=""){const t=ni(e);return xi[t.toLowerCase()]||""},Ci=function(e){if(Array.isArray(e)){let t=[];e.forEach(function(e){e=Ci(e),Array.isArray(e)?t=t.concat(e):Tt(e)&&t.push(e)}),e=t}else e="string"==typeof e&&e.trim()?[Ai({src:e})]:Tt(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Ai(e)]:[];return e};function Ai(e){if(!e.type){const t=Ei(e.src);t&&(e.type=t)}return e}const Oi=Wt?10009:Gt?461:8,Mi={codes:{play:415,pause:19,ff:417,rw:412,back:Oi},names:{415:"play",19:"pause",417:"ff",412:"rw",[Oi]:"back"},isEventKey(e,t){return t=t.toLowerCase(),!(!this.names[e.keyCode]||this.names[e.keyCode]!==t)},getEventName(e){if(this.names[e.keyCode])return this.names[e.keyCode];if(this.codes[e.code]){const t=this.codes[e.code];return this.names[t]}return null}};class Ii extends ar{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const e=t.key.substring(5).toLowerCase();this.move(e)}else if(Mi.isEventKey(t,"play")||Mi.isEventKey(t,"pause")||Mi.isEventKey(t,"ff")||Mi.isEventKey(t,"rw")){t.preventDefault();const e=Mi.getEventName(t);this.performMediaAction_(e)}else Mi.isEventKey(t,"Back")&&e.target&&"function"==typeof e.target.closeable&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let n=null;const r=this.getCurrentComponent(e.target);t&&(n=Boolean(t.closest(".video-js")),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(e.currentTarget.contains(e.relatedTarget)||n)&&t||(r&&"CloseButton"===r.name()?this.refocusComponent():(this.pause(),r&&r.el()&&(this.lastFocusedComponent_=r)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function n(e){for(const r of e)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&t.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&n(r.children_)}return e.children_.forEach(e=>{if(e.hasOwnProperty("el_")){if(e.getIsFocusable&&e.getIsAvailableToBeFocused&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el()))return void t.push(e);e.hasOwnProperty("children_")&&e.children_.length>0?n(e.children_):e.hasOwnProperty("items")&&e.items.length>0?n(e.items):this.findSuitableDOMChild(e)&&t.push(e)}if("ErrorDisplay"===e.name_&&e.opened_){const n=e.el_.querySelector(".vjs-errors-ok-button-container");n&&n.querySelectorAll("button").forEach((e,n)=>{t.push({name:()=>"ModalButton"+(n+1),el:()=>e,getPositions:()=>{const t=e.getBoundingClientRect();return{boundingClientRect:{x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left},center:{x:t.left+t.width/2,y:t.top+t.height/2,width:0,height:0,top:t.top+t.height/2,right:t.left+t.width/2,bottom:t.top+t.height/2,left:t.left+t.width/2}}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:e=>!0,focus:()=>e.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){return e.el()?function t(n){if(e.getIsFocusable(n)&&e.getIsAvailableToBeFocused(n))return n;for(let e=0;e<n.children.length;e++){const r=t(n.children[e]);if(r)return r}return null}(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length)for(const e of this.focusableComponents)if(e.el()===t)return e}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name())return this.focusableComponents.splice(t,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const n=t.getPositions(),r=this.focusableComponents.filter(r=>r!==t&&this.isInDirection_(n.boundingClientRect,r.getPositions().boundingClientRect,e)),i=this.findBestCandidate_(n.center,r,e);i?this.focus(i):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,n){let r=1/0,i=null;for(const s of t){const t=s.getPositions().center,o=this.calculateDistance_(e,t,n);o<r&&(r=o,i=s)}return i}isInDirection_(e,t,n){switch(n){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[e])}else this.focus(this.updateFocusableComponents()[0])}focus(e){"object"==typeof e&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,n){const r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);let s;switch(n){case"right":case"left":s=r+100*i;break;case"up":s=2*i+.5*r;break;case"down":s=5*i+r;break;default:s=r+i}return s}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if("TextTrackSelect"===t.constructor.name){e.focus(t);break}}}Tr.registerComponent("MediaLoader",class extends Tr{constructor(e,t,n){if(super(e,Et({createEl:!1},t),n),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let n=0,r=t.playerOptions.techOrder;n<r.length;n++){const t=wr(r[n]);let i=fi.getTech(t);if(t||(i=Tr.getComponent(t)),i&&i.isSupported()){e.loadTech_(t);break}}}});class Di extends Tr{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e=>this.handleMouseOver(e),this.handleMouseOut_=e=>this.handleMouseOut(e),this.handleClick_=e=>this.handleClick(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&vt.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const r=on(e,t,n);return this.player_.options_.experimentalSvgIcons||r.appendChild(on("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=on("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,an(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){" "===e.key||"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Tr.registerComponent("ClickableComponent",Di);class ji extends Di{constructor(e,t){super(e,t),this.update(),this.update_=e=>this.update(e),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return on("div",{className:"vjs-poster"})}crossOrigin(e){if(void 0===e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(on("picture",{className:"vjs-poster",tabIndex:-1},{},on("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Rr(this.player_.play()):this.player_.pause())}}ji.prototype.crossorigin=ji.prototype.crossOrigin,Tr.registerComponent("PosterImage",ji);const Pi="#222",Li="#ccc",Ni={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Ri(e,t){let n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ui(e,t,n){try{e.style[t]=n}catch(e){return}}function Bi(e){return e?`${e}px`:""}Tr.registerComponent("TextTrackDisplay",class extends Tr{constructor(e,t,n){super(e,t,n);const r=e=>this.updateDisplay(e),s=e=>{this.updateDisplayOverlay(),this.updateDisplay(e)};e.on("loadstart",e=>this.toggleDisplay(e)),e.on("useractive",r),e.on("userinactive",r),e.on("texttrackchange",r),e.on("loadedmetadata",e=>{this.updateDisplayOverlay(),this.preselectTrack(e)}),e.ready(nr(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",s),e.on("playerresize",s);const t=i().screen.orientation||i(),n=i().screen.orientation?"change":"orientationchange";t.addEventListener(n,s),e.on("dispose",()=>t.removeEventListener(n,s));const r=this.options_.playerOptions.tracks||[];for(let e=0;e<r.length;e++)this.player_.addRemoteTextTrack(r[e],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let r,i,s;for(let o=0;o<t.length;o++){const a=t[o];n&&n.enabled&&n.language&&n.language===a.language&&a.kind in e?a.kind===n.kind?s=a:s||(s=a):n&&!n.enabled?(s=null,r=null,i=null):a.default&&("descriptions"!==a.kind||r?a.kind in e&&!i&&(i=a):r=a)}s?s.mode="showing":i?i.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof i().WebVTT&&i().WebVTT.processCues(i(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const t=[];for(let n=0;n<e.length;++n){const r=e[n];"showing"===r.mode&&t.push(r)}return void this.updateForTrack(t)}let n=null,r=null,s=e.length;for(;s--;){const t=e[s];"showing"===t.mode&&("descriptions"===t.kind?n=t:r=t)}if(r?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):n&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n)),!i().CSS.supports("inset","10px")){const e=this.el_,t=e.querySelectorAll(".vjs-text-track-cue"),n=this.player_.controlBar.el_.getBoundingClientRect().height,r=this.player_.el_.getBoundingClientRect().height;e.style="",Ui(e,"position","relative"),Ui(e,"height",r-n+"px"),Ui(e,"top","unset"),Ui(e,"bottom",Kt?r+"px":"0px"),t.length>0&&t.forEach(e=>{if(e.style.inset){const t=e.style.inset.split(" ");3===t.length&&Object.assign(e.style,{top:t[0],right:t[1],bottom:t[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!i().CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,r=this.player_.videoWidth()/this.player_.videoHeight();let s=0,o=0;Math.abs(n-r)>.1&&(n>r?s=Math.round((e-t*r)/2):o=Math.round((t-e/r)/2)),Ui(this.el_,"insetInline",Bi(s)),Ui(this.el_,"insetBlock",Bi(o))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let r=n.length;for(;r--;){const e=n[r];if(!e)continue;const s=e.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&Ui(s.firstChild,"color",Ri(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ui(s.firstChild,"backgroundColor",Ri(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ui(s,"backgroundColor",Ri(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?s.firstChild.style.textShadow=`2px 2px 3px ${Pi}, 2px 2px 4px ${Pi}, 2px 2px 5px ${Pi}`:"raised"===t.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${Pi}, 2px 2px ${Pi}, 3px 3px ${Pi}`:"depressed"===t.edgeStyle?s.firstChild.style.textShadow=`1px 1px ${Li}, 0 1px ${Li}, -1px -1px ${Pi}, 0 -1px ${Pi}`:"uniform"===t.edgeStyle&&(s.firstChild.style.textShadow=`0 0 4px ${Pi}, 0 0 4px ${Pi}, 0 0 4px ${Pi}, 0 0 4px ${Pi}`)),t.fontPercent&&1!==t.fontPercent){const e=i().parseFloat(s.style.fontSize);s.style.fontSize=e*t.fontPercent+"px",s.style.height="auto",s.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Ni[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof i().WebVTT||e.every(e=>!e.activeCues))return;const t=[];for(let n=0;n<e.length;++n){const r=e[n];for(let e=0;e<r.activeCues.length;++e)t.push(r.activeCues[e])}i().WebVTT.processCues(i(),t,this.el_);for(let t=0;t<e.length;++t){const n=e[t];for(let e=0;e<n.activeCues.length;++e){const r=n.activeCues[e].displayState;un(r,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:t)),n.language&&gn(r,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}}),Tr.registerComponent("LoadingSpinner",class extends Tr{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=on("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class Fi extends Di{createEl(e,t={},n={}){const r=on("button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n));return this.player_.options_.experimentalSvgIcons||r.appendChild(on("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,t={}){const n=this.constructor.name;return vt.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),Tr.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){" "!==e.key&&"Enter"!==e.key?super.handleKeyDown(e):e.stopPropagation()}}Tr.registerComponent("Button",Fi);class zi extends Fi{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",e=>this.handleMouseDown(e))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if("tap"===e.type||this.mouseused_&&"clientX"in e&&"clientY"in e)return Rr(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(!r)return void this.player_.tech(!0).focus();const i=()=>r.focus();Nr(t)?t.then(i,()=>{}):this.setTimeout(i,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}zi.prototype.controlText_="Play Video",Tr.registerComponent("BigPlayButton",zi),Tr.registerComponent("CloseButton",class extends Fi{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){"Escape"===e.key?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class $i extends Fi{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.setIcon("play"),this.on(e,"play",e=>this.handlePlay(e)),this.on(e,"pause",e=>this.handlePause(e)),t.replay&&this.on(e,"ended",e=>this.handleEnded(e))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Rr(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",e=>this.handleSeeked(e))}}$i.prototype.controlText_="Play",Tr.registerComponent("PlayToggle",$i);class qi extends Tr{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],e=>this.update(e)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=on("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return t.appendChild(n),this.contentEl_=on("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){(this.player_.options_.enableSmoothSeeking||"seeking"!==e.type)&&this.updateContent(e)}updateTextNode_(e=0){e=Dr(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,vt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=o().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}qi.prototype.labelText_="Time",qi.prototype.controlText_="Time",Tr.registerComponent("TimeDisplay",qi);class Hi extends qi{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():e&&e.target&&"function"==typeof e.target.pendingSeekTime?e.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}Hi.prototype.labelText_="Current Time",Hi.prototype.controlText_="Current Time",Tr.registerComponent("CurrentTimeDisplay",Hi);class Vi extends qi{constructor(e,t){super(e,t);const n=e=>this.updateContent(e);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}Vi.prototype.labelText_="Duration",Vi.prototype.controlText_="Duration",Tr.registerComponent("DurationDisplay",Vi),Tr.registerComponent("TimeDivider",class extends Tr{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}});class Wi extends qi{constructor(e,t){super(e,t),this.on(e,"durationchange",e=>this.updateContent(e))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(on("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}Wi.prototype.labelText_="Remaining Time",Wi.prototype.controlText_="Remaining Time",Tr.registerComponent("RemainingTimeDisplay",Wi),Tr.registerComponent("LiveDisplay",class extends Tr{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",e=>this.updateShowing(e))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=on("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(on("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(o().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class Gi extends Fi{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e=>this.updateLiveEdgeStatus(e),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=on("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function Ki(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}Gi.prototype.controlText_="Seek to live, currently playing live",Tr.registerComponent("SeekToLive",Gi);var Ji=Object.freeze({__proto__:null,clamp:Ki});class Xi extends Tr{constructor(e,t){super(e,t),this.handleMouseDown_=e=>this.handleMouseDown(e),this.handleMouseUp_=e=>this.handleMouseUp(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.handleClick_=e=>this.handleClick(e),this.handleMouseMove_=e=>this.handleMouseMove(e),this.update_=e=>this.update(e),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Rt||e.preventDefault(),vn(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;bn(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"})),e}getProgress(){return Number(Ki(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Sn(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,n=t&&t.enabled,r=t&&t.horizontalSeek;n?r&&"ArrowLeft"===e.key||!r&&"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepBack()):r&&"ArrowRight"===e.key||!r&&"ArrowUp"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):"ArrowLeft"===e.key||"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepBack()):"ArrowUp"===e.key||"ArrowRight"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Tr.registerComponent("Slider",Xi);const Yi=(e,t)=>Ki(e/t*100,0,100).toFixed(2)+"%";Tr.registerComponent("LoadProgressBar",class extends Tr{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",e=>this.update(e))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=on("span",{className:"vjs-control-text"}),n=on("span",{textContent:this.localize("Loaded")}),r=o().createTextNode(": ");return this.percentageEl_=on("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(r),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const e=this.player_.liveTracker,t=this.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():this.player_.duration(),r=this.player_.bufferedEnd(),i=this.partEls_,s=Yi(r,n);this.percent_!==s&&(this.el_.style.width=s,an(this.percentageEl_,s),this.percent_=s);for(let e=0;e<t.length;e++){const n=t.start(e),s=t.end(e);let o=i[e];o||(o=this.el_.appendChild(on()),i[e]=o),o.dataset.start===n&&o.dataset.end===s||(o.dataset.start=n,o.dataset.end=s,o.style.left=Yi(n,r),o.style.width=Yi(s-n,r))}for(let e=i.length;e>t.length;e--)this.el_.removeChild(i[e-1]);i.length=t.length})}}),Tr.registerComponent("TimeTooltip",class extends Tr{constructor(e,t){super(e,t),this.update=rr(nr(this,this.update),tr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const r=wn(this.el_),i=_n(this.player_.el()),s=e.width*t;if(!i||!r)return;let o=e.left-i.left+s,a=e.width-s+(i.right-e.right);a||(a=e.width-s,o=s);let l=r.width/2;o<l?l+=l-o:a<l&&(l=a),l<0?l=0:l>r.width&&(l=r.width),l=Math.round(l),this.el_.style.right=`-${l}px`,this.write(n)}write(e){an(this.el_,e)}updateTime(e,t,n,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let i;const s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const e=this.player_.liveTracker.liveWindow(),n=e-t*e;i=(n<1?"":"-")+Dr(n,e)}else i=Dr(n,s);this.update(e,t,i),r&&r()})}});class Qi extends Tr{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=rr(nr(this,this.update),tr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t,n){const r=this.getChild("timeTooltip");if(!r)return;const i=n&&n.target&&"function"==typeof n.target.pendingSeekTime?n.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,t,i)}}Qi.prototype.options_={children:[]},Yt||jt||Qi.prototype.options_.children.push("timeTooltip"),Tr.registerComponent("PlayProgressBar",Qi);class Zi extends Tr{constructor(e,t){super(e,t),this.update=rr(nr(this,this.update),tr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,()=>{this.el_.style.left=e.width*t+"px"})}}Zi.prototype.options_={children:["timeTooltip"]},Tr.registerComponent("MouseTimeDisplay",Zi);class es extends Xi{constructor(e,t){(t=Et(es.prototype.options_,t)).children=[...t.children];const n=e.options_.disableSeekWhileScrubbingOnMobile&&(Yt||jt)||e.options_.disableSeekWhileScrubbingOnSTV;(!Yt&&!jt||n)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbing_=n,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=nr(this,this.update),this.update=rr(this.update_,tr),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in o()&&"visibilityState"in o()&&this.on(o(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===o().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,tr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===o().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const n=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker;let i=this.player_.duration();r&&r.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),this.currentTime_===n&&this.duration_===i||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Dr(n,i),Dr(i,i)],"{1} of {2}")),this.currentTime_=n,this.duration_=i),this.bar&&this.bar.update(_n(this.el()),this.getProgress(),e)}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(void 0!==e)if(null!==e){const t=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,t))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(null!==this.pendingSeekTime())return this.pendingSeekTime()/this.player_.duration();const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){An(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!An(e)||isNaN(this.player_.duration()))return;let n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);const r=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(r>=.99)return void i.seekToLiveEdge();const e=i.seekableStart(),t=i.liveCurrentTime();if(n=e+r*i.liveWindow(),n>=t&&(n=t),n<=e&&(n=e+.1),n===1/0)return}else n=r*this.player_.duration(),n===this.player_.duration()&&(n-=.1);this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(n):this.userSeek_(n),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Rr(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();const t=null!==this.pendingSeekTime()?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(t+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(" "===e.key||"Enter"===e.key)e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if("Home"===e.key)e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if("End"===e.key)e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const n=.1*parseInt(e.key,10);t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else"PageDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):"PageUp"===e.key?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in o()&&"visibilityState"in o()&&this.off(o(),"visibilitychange",this.toggleVisibility_),super.dispose()}}es.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12},Tr.registerComponent("SeekBar",es);class ts extends Tr{constructor(e,t){super(e,t),this.handleMouseMove=rr(nr(this,this.handleMouseMove),tr),this.throttledHandleMouseSeek=rr(nr(this,this.handleMouseSeek),tr),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.handleMouseDownHandler_=e=>this.handleMouseDown(e),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(!n&&!r)return;const i=t.el(),s=wn(i);let o=Sn(i,e).x;o=Ki(o,0,1),r&&r.update(s,o),n&&n.update(s,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Rr(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}ts.prototype.options_={children:["seekBar"]},Tr.registerComponent("ProgressControl",ts);class ns extends Fi{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],e=>this.handlePictureInPictureChange(e)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],e=>this.handlePictureInPictureEnabledChange(e)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){o().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in i()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof o().exitPictureInPicture&&super.show()}}ns.prototype.controlText_="Picture-in-Picture",Tr.registerComponent("PictureInPictureToggle",ns);class rs extends Fi{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",e=>this.handleFullscreenChange(e)),!1===o()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}rs.prototype.controlText_="Fullscreen",Tr.registerComponent("FullscreenToggle",rs),Tr.registerComponent("VolumeLevel",class extends Tr{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}),Tr.registerComponent("VolumeLevelTooltip",class extends Tr{constructor(e,t){super(e,t),this.update=rr(nr(this,this.update),tr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,r){if(!n){const n=_n(this.el_),r=_n(this.player_.el()),i=e.width*t;if(!r||!n)return;const s=e.left-r.left+i,o=e.width-i+(r.right-e.right);let a=n.width/2;s<a?a+=a-s:o<a&&(a=o),a<0?a=0:a>n.width&&(a=n.width),this.el_.style.right=`-${a}px`}this.write(`${r}%`)}write(e){an(this.el_,e)}updateVolume(e,t,n,r,i){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,n,r.toFixed(0)),i&&i()})}});class is extends Tr{constructor(e,t){super(e,t),this.update=rr(nr(this,this.update),tr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,()=>{n?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"})}}is.prototype.options_={children:["volumeLevelTooltip"]},Tr.registerComponent("MouseVolumeLevelDisplay",is);class ss extends Xi{constructor(e,t){super(e,t),this.on("slideractive",e=>this.updateLastVolume_(e)),this.on(e,"volumechange",e=>this.updateARIAAttributes(e)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){An(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),r=_n(n),i=this.vertical();let s=Sn(n,e);s=i?s.y:s.x,s=Ki(s,0,1),t.update(r,s,i)}An(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)})}}ss.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Yt||jt||ss.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),ss.prototype.playerEvent="volumechange",Tr.registerComponent("VolumeBar",ss);class os extends Tr{constructor(e,t={}){t.vertical=t.vertical||!1,(void 0===t.volumeBar||xt(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(this,e),this.throttledHandleMouseMove=rr(nr(this,this.handleMouseMove),tr),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.on("mousedown",e=>this.handleMouseDown(e)),this.on("touchstart",e=>this.handleMouseDown(e)),this.on("mousemove",e=>this.handleMouseMove(e)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}os.prototype.options_={children:["volumeBar"]},Tr.registerComponent("VolumeControl",os);class as extends Fi{constructor(e,t){super(e,t),function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(this,e),this.on(e,["loadstart","volumechange"],e=>this.update(e))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){const e=n<.1?.1:n;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),Yt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),dn(this.el_,[0,1,2,3].reduce((e,t)=>e+`${t?" ":""}vjs-vol-${t}`,"")),un(this.el_,`vjs-vol-${t}`)}updateControlText_(){const e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)}}as.prototype.controlText_="Mute",Tr.registerComponent("MuteToggle",as);class ls extends Tr{constructor(e,t={}){void 0!==t.inline?t.inline=t.inline:t.inline=!0,(void 0===t.volumeControl||xt(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=e=>this.handleKeyPress(e),this.on(e,["loadstart"],e=>this.volumePanelState_(e)),this.on(this.muteToggle,"keyup",e=>this.handleKeyPress(e)),this.on(this.volumeControl,"keyup",e=>this.handleVolumeControlKeyUp(e)),this.on("keydown",e=>this.handleKeyPress(e)),this.on("mouseover",e=>this.handleMouseOver(e)),this.on("mouseout",e=>this.handleMouseOut(e)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){"Escape"===e.key&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Jn(o(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Xn(o(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){"Escape"===e.key&&this.handleMouseOut()}}ls.prototype.options_={children:["muteToggle","volumeControl"]},Tr.registerComponent("VolumePanel",ls);class cs extends Fi{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,r=n&&n.isLive()?n.seekableEnd():this.player_.duration();let i;i=t+this.skipTime<=r?t+this.skipTime:r,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}cs.prototype.controlText_="Skip Forward",Tr.registerComponent("SkipForward",cs);class us extends Fi{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,r=n&&n.isLive()&&n.seekableStart();let i;i=r&&t-this.skipTime<=r?r:t>=this.skipTime?t-this.skipTime:0,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}us.prototype.controlText_="Skip Backward",Tr.registerComponent("SkipBackward",us);class ds extends Tr{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",e=>this.handleKeyDown(e)),this.boundHandleBlur_=e=>this.handleBlur(e),this.boundHandleTapClick_=e=>this.handleTapClick(e)}addEventListenerForItem(e){e instanceof Tr&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Tr&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=on(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Jn(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||o().activeElement;if(!this.children().some(e=>e.el()===t)){const e=this.menuButton_;e&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter(t=>t.el()===e.target)[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}}handleKeyDown(e){"ArrowLeft"===e.key||"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),this.stepForward()):"ArrowRight"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}Tr.registerComponent("Menu",ds);class hs extends Tr{constructor(e,t={}){super(e,t),this.menuButton_=new Fi(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=Fi.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=e=>this.handleClick(e);this.handleMenuKeyUp_=e=>this.handleMenuKeyUp(e),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",e=>this.handleKeyDown(e)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Jn(o(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",e=>this.handleMouseLeave(e)),this.on("keydown",e=>this.handleSubmenuKeyDown(e))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new ds(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=on("li",{className:"vjs-menu-title",textContent:wr(this.options_.title),tabIndex:-1}),n=new Tr(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${Fi.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Xn(o(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){"Escape"===e.key||"Tab"===e.key?(this.buttonPressed_&&this.unpressButton(),"Tab"===!e.key&&(e.preventDefault(),this.menuButton_.focus())):"Up"!==e.key&&("Down"!==e.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(e.preventDefault(),this.pressButton())}handleMenuKeyUp(e){"Escape"!==e.key&&"Tab"!==e.key||this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){"Escape"!==e.key&&"Tab"!==e.key||(this.buttonPressed_&&this.unpressButton(),"Tab"===!e.key&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Yt&&rn())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Tr.registerComponent("MenuButton",hs);class ps extends hs{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const r=nr(this,this.update);n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),n.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r),n.removeEventListener("labelchange",r)})}}Tr.registerComponent("TrackButton",ps);class fs extends Di{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),i=on("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(i):r.replaceChild(i,r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Tr.registerComponent("MenuItem",fs);class ms extends fs{constructor(e,t){const n=t.track,r=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...e)=>{this.handleTracksChange.apply(this,e)},a=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",a)}),void 0===r.onchange){let e;this.on(["tap","click"],function(){if("object"!=typeof i().Event)try{e=new(i().Event)("change")}catch(e){}e||(e=o().createEvent("Event"),e.initEvent("change",!0,!0)),r.dispatchEvent(e)})}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),n)for(let e=0;e<n.length;e++){const r=n[e];-1!==this.kinds.indexOf(r.kind)&&(r===t?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Tr.registerComponent("TextTrackMenuItem",ms);class gs extends ms{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let e=0,r=t.length;e<r;e++){const r=t[e];if(this.options_.kinds.indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let e=0,r=t.length;e<r;e++){const r=t[e];if(["captions","descriptions","subtitles"].indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Tr.registerComponent("OffTextTrackMenuItem",gs);class ys extends ps{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=ms){let n;this.label_&&(n=`${this.label_} off`),e.push(new gs(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let n=0;n<r.length;n++){const i=r[n];if(this.kinds_.indexOf(i.kind)>-1){const n=new t(this.player_,{track:i,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});n.addClass(`vjs-${i.kind}-menu-item`),e.push(n)}}return e}}Tr.registerComponent("TextTrackButton",ys);class vs extends fs{constructor(e,t){const n=t.track,r=t.cue,i=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=i&&i<r.endTime,super(e,t),this.track=n,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Tr.registerComponent("ChaptersTrackMenuItem",vs);class bs extends ys{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(e=>{e.selected(this.track_.activeCues[0]===e.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(wr(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new vs(this.player_,{track:this.track_,cue:r});e.push(i)}return e}}bs.prototype.kind_="chapters",bs.prototype.controlText_="Chapters",Tr.registerComponent("ChaptersButton",bs);class _s extends ys{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const r=e.textTracks(),i=nr(this,this.handleTracksChange);r.addEventListener("change",i),this.on("dispose",function(){r.removeEventListener("change",i)})}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let e=0,r=t.length;e<r;e++){const r=t[e];if(r.kind!==this.kind_&&"showing"===r.mode){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}_s.prototype.kind_="descriptions",_s.prototype.controlText_="Descriptions",Tr.registerComponent("DescriptionsButton",_s);class ws extends ys{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}ws.prototype.kind_="subtitles",ws.prototype.controlText_="Subtitles",Tr.registerComponent("SubtitlesButton",ws);class Ss extends ms{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Tr.registerComponent("CaptionSettingsMenuItem",Ss);class ks extends ys{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ss(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}ks.prototype.kind_="captions",ks.prototype.controlText_="Captions",Tr.registerComponent("CaptionsButton",ks);class Ts extends ms{createEl(e,t,n){const r=super.createEl(e,t,n),i=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):i.appendChild(on("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(on("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}}Tr.registerComponent("SubsCapsMenuItem",Ts);class xs extends ys{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(wr(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ss(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,Ts),e}}xs.prototype.kinds_=["captions","subtitles"],xs.prototype.controlText_="Subtitles",Tr.registerComponent("SubsCapsButton",xs);class Es extends fs{constructor(e,t){const n=t.track,r=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const i=(...e)=>{this.handleTracksChange.apply(this,e)};r.addEventListener("change",i),this.on("dispose",()=>{r.removeEventListener("change",i)})}createEl(e,t,n){const r=super.createEl(e,t,n),i=r.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(i.appendChild(on("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(on("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let t=0;t<e.length;t++){const n=e[t];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Tr.registerComponent("AudioTrackMenuItem",Es);class Cs extends ps{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const r=t[n];e.push(new Es(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}Cs.prototype.controlText_="Audio Track",Tr.registerComponent("AudioTrackButton",Cs);class As extends fs{constructor(e,t){const n=t.rate,r=parseFloat(n,10);t.label=n,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=r,this.on(e,"ratechange",e=>this.update(e))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}As.prototype.contentElType="button",Tr.registerComponent("PlaybackRateMenuItem",As);class Os extends hs{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",e=>this.updateVisibility(e)),this.on(e,"ratechange",e=>this.updateLabel(e)),this.on(e,"playbackrateschange",e=>this.handlePlaybackRateschange(e))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=on("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new As(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}Os.prototype.controlText_="Playback Rate",Tr.registerComponent("PlaybackRateMenuButton",Os);class Ms extends Tr{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}Tr.registerComponent("Spacer",Ms),Tr.registerComponent("CustomControlSpacer",class extends Ms{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}});class Is extends Tr{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Is.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},Tr.registerComponent("ControlBar",Is);class Ds extends zr{constructor(e,t){super(e,t),this.on(e,"error",e=>{this.open(e)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}Ds.prototype.options_=Object.assign({},zr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Tr.registerComponent("ErrorDisplay",Ds);class js extends Tr{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),on("select",{id:this.options_.id},{},this.options_.SelectOptions.map(e=>{const t=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Hn()}`)+"-"+e[1].replace(/\W+/g,""),n=on("option",{id:t,value:this.localize(e[0]),textContent:this.localize(e[1])});return n.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${t}`),n}))}}Tr.registerComponent("TextTrackSelect",js);class Ps extends Tr{constructor(e,t={}){super(e,t);const n=on("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(n);const r=this.options_.selects;for(const t of r){const n=this.options_.selectConfigs[t],r=n.className,i=n.id.replace("%s",this.options_.id_);let s=null;const o=`vjs_select_${Hn()}`;if("colors"===this.options_.type){s=on("span",{className:r});const e=on("label",{id:i,className:"vjs-label",textContent:this.localize(n.label)});e.setAttribute("for",o),s.appendChild(e)}const a=new js(e,{SelectOptions:n.options,legendId:this.options_.legendId,id:o,labelId:i});this.addChild(a),"colors"===this.options_.type&&(s.appendChild(a.el()),this.el().appendChild(s))}}createEl(){return on("fieldset",{className:this.options_.className})}}Tr.registerComponent("TextTrackFieldset",Ps);class Ls extends Tr{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,r=new Ps(e,{id_:n,legendId:`captions-text-legend-${n}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const i=new Ps(e,{id_:n,legendId:`captions-background-${n}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(i);const s=new Ps(e,{id_:n,legendId:`captions-window-${n}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s)}createEl(){return on("div",{className:"vjs-track-settings-colors"})}}Tr.registerComponent("TextTrackSettingsColors",Ls);class Ns extends Tr{constructor(e,t={}){super(e,t);const n=this.options_.textTrackComponentid,r=new Ps(e,{id_:n,legendId:`captions-font-size-${n}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const i=new Ps(e,{id_:n,legendId:`captions-edge-style-${n}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(i);const s=new Ps(e,{id_:n,legendId:`captions-font-family-${n}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s)}createEl(){return on("div",{className:"vjs-track-settings-font"})}}Tr.registerComponent("TextTrackSettingsFont",Ns);class Rs extends Tr{constructor(e,t={}){super(e,t);const n=new Fi(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});n.el().classList.remove("vjs-control","vjs-button"),n.el().textContent=this.localize("Reset"),this.addChild(n);const r=this.localize("Done"),i=new Fi(e,{controlText:r,className:"vjs-done-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=r,this.addChild(i)}createEl(){return on("div",{className:"vjs-track-settings-controls"})}}Tr.registerComponent("TrackSettingsControls",Rs);const Us="vjs-text-track-settings",Bs=["#000","Black"],Fs=["#00F","Blue"],zs=["#0FF","Cyan"],$s=["#0F0","Green"],qs=["#F0F","Magenta"],Hs=["#F00","Red"],Vs=["#FFF","White"],Ws=["#FF0","Yellow"],Gs=["1","Opaque"],Ks=["0.5","Semi-Transparent"],Js=["0","Transparent"],Xs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Bs,Vs,Hs,$s,Fs,Ws,qs,zs],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Gs,Ks,Js],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Vs,Bs,Hs,$s,Fs,Ws,qs,zs],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>"1.00"===e?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Gs,Ks],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Js,Ks,Gs],className:"vjs-window-opacity vjs-opacity"}};function Ys(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}Xs.windowColor.options=Xs.backgroundColor.options,Tr.registerComponent("TextTrackSettings",class extends zr{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=on("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new Ls(e,{textTrackComponentid:this.id_,selectConfigs:Xs,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const n=new Ns(e,{textTrackComponentid:this.id_,selectConfigs:Xs,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(n);const r=new Rs(e);this.addChild(r)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),St(Xs,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return kt(Xs,(e,t,n)=>{const r=(i=this.$(t.selector),s=t.parser,Ys(i.options[i.options.selectedIndex].value,s));var i,s;return void 0!==r&&(e[n]=r),e},{})}setValues(e){St(Xs,(t,n)=>{!function(e,t,n){if(t)for(let r=0;r<e.options.length;r++)if(Ys(e.options[r].value,n)===t){e.selectedIndex=r;break}}(this.$(t.selector),e[n],t.parser)})}setDefaults(){St(Xs,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(i().localStorage.getItem(Us))}catch(e){vt.warn(e)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?i().localStorage.setItem(Us,JSON.stringify(e)):i().localStorage.removeItem(Us)}catch(e){vt.warn(e)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}),Tr.registerComponent("ResizeManager",class extends Tr{constructor(e,t){let n=t.ResizeObserver||i().ResizeObserver;null===t.ResizeObserver&&(n=!1),super(e,Et({createEl:!n,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||i().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=ir(()=>{this.resizeHandler()},100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const e=this.debouncedHandler_;let t=this.unloadListener_=function(){Xn(this,"resize",e),Xn(this,"unload",t),t=null};Jn(this.el_.contentWindow,"unload",t),Jn(this.el_.contentWindow,"resize",e)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const Qs={trackingThreshold:20,liveTolerance:15};Tr.registerComponent("LiveTracker",class extends Tr{constructor(e,t){super(e,Et(Qs,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",e=>this.handleDurationchange(e)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(i().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const r=this.liveCurrentTime(),s=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-s)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,tr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),Tr.registerComponent("TitleBar",class extends Tr{constructor(e,t){super(e,t),this.on("statechanged",e=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:on("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Hn()}`}),description:on("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Hn()}`})},on("div",{className:"vjs-title-bar"},{},Ct(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(e=>{const r=this.state[e],i=this.els[e],s=n[e];Tn(i),r&&an(i,r),t&&(t.removeAttribute(s),r&&t.setAttribute(s,i.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const Zs={initialDisplay:4e3,position:[],takeFocus:!1};Tr.registerComponent("TransientButton",class extends Fi{constructor(e,t){super(e,t=Et(Zs,t)),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],e=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=on("button",{},{type:"button",class:this.buildCSSClass()},on("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}});const eo=e=>{const t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;const n=e.$$("source"),r=[];let i="";if(!n.length)return!1;for(let e=0;e<n.length;e++){const t=n[e].src;t&&-1===r.indexOf(t)&&r.push(t)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},to=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){const t=o().createElement(this.nodeName.toLowerCase());t.innerHTML=e;const n=o().createDocumentFragment();for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",i().Element.prototype.appendChild.call(this,n),this.innerHTML}}),no=(e,t)=>{let n={};for(let r=0;r<e.length&&(n=Object.getOwnPropertyDescriptor(e[r],t),!(n&&n.set&&n.get));r++);return n.enumerable=!0,n.configurable=!0,n},ro=function(e){const t=e.el();if(t.resetSourceWatch_)return;const n={},r=(e=>no([e.el(),i().HTMLMediaElement.prototype,i().Element.prototype,to],"innerHTML"))(e),s=n=>(...r)=>{const i=n.apply(t,r);return eo(e),i};["append","appendChild","insertAdjacentHTML"].forEach(e=>{t[e]&&(n[e]=t[e],t[e]=s(n[e]))}),Object.defineProperty(t,"innerHTML",Et(r,{set:s(r.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(n).forEach(e=>{t[e]=n[e]}),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)},io=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?ti(i().Element.prototype.getAttribute.call(this,"src")):""},set(e){return i().Element.prototype.setAttribute.call(this,"src",e),e}});class so extends fi{constructor(e,t){super(e,t);const n=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,n&&(this.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const e=this.el_.childNodes;let t=e.length;const n=[];for(;t--;){const i=e[t];"track"===i.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),this.textTracks().addTrack(i.track),r||this.el_.hasAttribute("crossorigin")||!ri(i.src)||(r=!0)):n.push(i))}for(let e=0;e<n.length;e++)this.el_.removeChild(n[e])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&vt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Jt||Vt)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),so.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(e){if(!e.featuresSourceset)return;const t=e.el();if(t.resetSourceset_)return;const n=(e=>no([e.el(),i().HTMLMediaElement.prototype,io],"src"))(e),r=t.setAttribute,s=t.load;Object.defineProperty(t,"src",Et(n,{set:r=>{const i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=(n,i)=>{const s=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),s},t.load=()=>{const n=s.call(t);return eo(e)||(e.triggerSourceset(""),ro(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):eo(e)||ro(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=s,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let n=0;n<e.length;n++){const r=e[n];"metadata"===r.kind&&t.push({track:r,storedMode:r.mode})}};n(),e.addEventListener("change",n),this.on("dispose",()=>e.removeEventListener("change",n));const r=()=>{for(let e=0;e<t.length;e++){const n=t[e];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach(e=>{this.el()[`${n}Tracks`].removeEventListener(e,this[`${n}TracksListeners_`][e])}),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=di[e],n=this.el()[t.getterName],r=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const i={change:t=>{const n={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(n),"text"===e&&this[hi.remoteText.getterName]().trigger(n)},addtrack(e){r.addTrack(e.track)},removetrack(e){r.removeTrack(e.track)}},s=function(){const e=[];for(let t=0;t<r.length;t++){let i=!1;for(let e=0;e<n.length;e++)if(n[e]===r[t]){i=!0;break}i||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=i,Object.keys(i).forEach(e=>{const t=i[e];n.addEventListener(e,t),this.on("dispose",r=>n.removeEventListener(e,t))}),this.on("loadstart",s),this.on("dispose",e=>this.off("loadstart",s))}proxyNativeTracks_(){di.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),so.disposeMediaElement(e),e=t}else{e=o().createElement("video");const t=Et({},this.options_.tag&&fn(this.options_.tag));Jt&&!0===this.options_.nativeControlsForTouch||delete t.controls,pn(e,Object.assign(t,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&gn(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const r=t[n],i=this.options_[r];void 0!==i&&(i?gn(e,r,r):yn(e,r),e[r]=i)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let e=!1;const t=function(){e=!0};this.on("loadstart",t);const n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",t),this.off("loadedmetadata",n),e||this.trigger("loadstart")})}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(e){this.trigger(e)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Qt?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){vt(e,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&jt&&Rt&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Rr(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return vt.error("Invalid source URL."),!1;const n={src:e};t&&(n.type=t);const r=on("source",{},n);return this.el_.appendChild(r),!0}removeSourceElement(e){if(!e)return vt.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const n of t)if(n.src===e)return this.el_.removeChild(n),!0;return vt.warn(`No matching source element found with src: ${e}`),!1}reset(){so.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=o().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),i().performance&&(e.creationTime=i().performance.now()),e}}At(so,"TEST_VID",function(){if(!tn())return;const e=o().createElement("video"),t=o().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}),so.isSupported=function(){try{so.TEST_VID.volume=.5}catch(e){return!1}return!(!so.TEST_VID||!so.TEST_VID.canPlayType)},so.canPlayType=function(e){return so.TEST_VID.canPlayType(e)},so.canPlaySource=function(e,t){return so.canPlayType(e.type)},so.canControlVolume=function(){try{const e=so.TEST_VID.volume;so.TEST_VID.volume=e/2+.1;const t=e!==so.TEST_VID.volume;return t&&Yt?(i().setTimeout(()=>{so&&so.prototype&&(so.prototype.featuresVolumeControl=e!==so.TEST_VID.volume)}),!1):t}catch(e){return!1}},so.canMuteVolume=function(){try{const e=so.TEST_VID.muted;return so.TEST_VID.muted=!e,so.TEST_VID.muted?gn(so.TEST_VID,"muted","muted"):yn(so.TEST_VID,"muted"),e!==so.TEST_VID.muted}catch(e){return!1}},so.canControlPlaybackRate=function(){if(jt&&Rt&&Bt<58)return!1;try{const e=so.TEST_VID.playbackRate;return so.TEST_VID.playbackRate=e/2+.1,e!==so.TEST_VID.playbackRate}catch(e){return!1}},so.canOverrideAttributes=function(){try{const e=()=>{};Object.defineProperty(o().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(o().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(o().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(o().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},so.supportsNativeTextTracks=function(){return Qt||Yt&&Rt},so.supportsNativeVideoTracks=function(){return!(!so.TEST_VID||!so.TEST_VID.videoTracks)},so.supportsNativeAudioTracks=function(){return!(!so.TEST_VID||!so.TEST_VID.audioTracks)},so.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([e,t]){At(so.prototype,e,()=>so[t](),!0)}),so.prototype.featuresVolumeControl=so.canControlVolume(),so.prototype.movingMediaElementInDOM=!Yt,so.prototype.featuresFullscreenResize=!0,so.prototype.featuresProgressEvents=!0,so.prototype.featuresTimeupdateEvents=!0,so.prototype.featuresVideoFrameCallback=!(!so.TEST_VID||!so.TEST_VID.requestVideoFrameCallback),so.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},so.resetMediaElement=function(e){if(!e)return;const t=e.querySelectorAll("source");let n=t.length;for(;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){so.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){so.prototype["set"+wr(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){so.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){so.prototype["set"+wr(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){so.prototype[e]=function(){return this.el_[e]()}}),fi.withSourceHandlers(so),so.nativeSourceHandler={},so.nativeSourceHandler.canPlayType=function(e){try{return so.TEST_VID.canPlayType(e)}catch(e){return""}},so.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return so.nativeSourceHandler.canPlayType(e.type);if(e.src){const t=ni(e.src);return so.nativeSourceHandler.canPlayType(`video/${t}`)}return""},so.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},so.nativeSourceHandler.dispose=function(){},so.registerSourceHandler(so.nativeSourceHandler),fi.registerTech("Html5",so);const oo=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ao={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},lo=["tiny","xsmall","small","medium","large","xlarge","huge"],co={};lo.forEach(e=>{const t="x"===e.charAt(0)?`x-${e.substring(1)}`:e;co[e]=`vjs-layout-${t}`});const uo={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class ho extends Tr{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${Hn()}`,(t=Object.assign(ho.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const n=e.closest("[lang]");n&&(t.language=n.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=e=>this.documentFullscreenChange_(e),this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e),this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e),this.boundApplyInitTime_=e=>this.applyInitTime_(e),this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e),this.boundHandleTechClick_=e=>this.handleTechClick_(e),this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e),this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e),this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e),this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e),this.boundHandleTechTap_=e=>this.handleTechTap_(e),this.boundUpdatePlayerHeightOnAudioOnlyMode_=e=>this.updatePlayerHeightOnAudioOnlyMode_(e),this.isFullscreen_=!1,this.log=bt(this.id_),this.fsApi_=pt,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&fn(e),this.language(this.options_.language),t.languages){const e={};Object.getOwnPropertyNames(t.languages).forEach(function(n){e[n.toLowerCase()]=t.languages[n]}),this.languages_=e}else this.languages_=ho.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(e=>{if("function"!=typeof this[e])throw new Error(`plugin "${e}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),yr(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Jn(o(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=Et(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(e=>{this[e](t.plugins[e])}),t.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const e=(new(i().DOMParser)).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">\n      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(e.querySelector("parsererror"))vt.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const t=e.documentElement;t.style.display="none",this.el_.appendChild(t),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new Ii(this),this.addClass("vjs-spatial-navigation-enabled")),Jt&&this.addClass("vjs-touch-enabled"),Yt||this.addClass("vjs-workinghover"),ho.players[this.id_]=this;const s=ct.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",e=>this.listenForUserActivity_(e)),this.on("keydown",e=>this.handleKeyDown(e)),this.on("languagechange",e=>this.handleLanguagechange(e)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Xn(o(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Xn(o(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),ho.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),gi.hasOwnProperty(this.id())&&delete gi[this.id()],pi.names.forEach(e=>{const t=this[pi[e].getterName]();t&&t.off&&t.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e,t=this.tag,n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const r="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=t.parentNode:r||(e=this.el_=super.createEl("div"));const s=fn(t);if(r){for(e=this.el_=t,t=this.tag=o().createElement("video");e.children.length;)t.appendChild(e.firstChild);cn(e,"video-js")||un(e,"video-js"),e.appendChild(t),n=this.playerElIngest_=e,Object.keys(e).forEach(n=>{try{t[n]=e[n]}catch(e){}})}t.setAttribute("tabindex","-1"),s.tabindex="-1",Rt&&qt&&(t.setAttribute("role","application"),s.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(n){r&&"class"===n||e.setAttribute(n,s[n]),r&&t.setAttribute(n,s[n])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(e=>Zt[e]).map(e=>"vjs-device-"+e.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),!0!==i().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Bn("vjs-styles-dimensions");const e=On(".vjs-styles-defaults"),t=On("head");t.insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=t.getElementsByTagName("a");for(let e=0;e<l.length;e++){const t=l.item(e);un(t,"vjs-hidden"),t.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!n&&t.parentNode.insertBefore(e,t),ln(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}crossOrigin(e){if(void 0===e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):vt.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();const r=parseFloat(t);isNaN(r)?vt.error(`Improper value "${t}" supplied for for ${e}`):(this[n]=r,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;var t,n;this.fluid_=!!e,cr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},cr(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===i().VIDEOJS_NO_DYNAMIC_STYLE){const e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}let e,t,n,r;n=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=n.split(":"),o=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*o,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),Fn(this.styleEl_,`\n      .${r} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*o}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=wr(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(fi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let i=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(i=!1);const s={source:t,autoplay:i,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};pi.names.forEach(e=>{const t=pi[e];s[t.getterName]=this[t.privateName]}),Object.assign(s,this.options_[n]),Object.assign(s,this.options_[r]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);const o=fi.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);var a,l;this.tech_=new o(s),this.tech_.ready(nr(this,this.handleTechReady_),!0),a=this.textTracksJson_||[],l=this.tech_,a.forEach(function(e){const t=l.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(e=>t.addCue(e))}),l.textTracks(),oo.forEach(e=>{this.on(this.tech_,e,t=>this[`handleTech${wr(e)}_`](t))}),Object.keys(ao).forEach(e=>{this.on(this.tech_,e,t=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${ao[e]}_`].bind(this),event:t}):this[`handleTech${ao[e]}_`](t)})}),this.on(this.tech_,"loadstart",e=>this.handleTechLoadStart_(e)),this.on(this.tech_,"sourceset",e=>this.handleTechSourceset_(e)),this.on(this.tech_,"waiting",e=>this.handleTechWaiting_(e)),this.on(this.tech_,"ended",e=>this.handleTechEnded_(e)),this.on(this.tech_,"seeking",e=>this.handleTechSeeking_(e)),this.on(this.tech_,"play",e=>this.handleTechPlay_(e)),this.on(this.tech_,"pause",e=>this.handleTechPause_(e)),this.on(this.tech_,"durationchange",e=>this.handleTechDurationChange_(e)),this.on(this.tech_,"fullscreenchange",(e,t)=>this.handleTechFullscreenChange_(e,t)),this.on(this.tech_,"fullscreenerror",(e,t)=>this.handleTechFullscreenError_(e,t)),this.on(this.tech_,"enterpictureinpicture",e=>this.handleTechEnterPictureInPicture_(e)),this.on(this.tech_,"leavepictureinpicture",e=>this.handleTechLeavePictureInPicture_(e)),this.on(this.tech_,"error",e=>this.handleTechError_(e)),this.on(this.tech_,"posterchange",e=>this.handleTechPosterChange_(e)),this.on(this.tech_,"textdata",e=>this.handleTechTextData_(e)),this.on(this.tech_,"ratechange",e=>this.handleTechRateChange_(e)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||ln(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){pi.names.forEach(e=>{const t=pi[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=function(e){const t=e.$$("track"),n=Array.prototype.map.call(t,e=>e.track);return Array.prototype.map.call(t,function(e){const t=Ur(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(Ur))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&vt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}version(){return{"video.js":ct}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const t=()=>{const e=this.muted();this.muted(!0);const t=()=>{this.muted(e)};this.playTerminatedQueue_.push(t);const n=this.play();if(Nr(n))return n.catch(e=>{throw t(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${e||""}`)})};let n;return"any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():t():(n=this.play(),Nr(n)&&(n=n.catch(t))),Nr(n)?n.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})}):void 0}updateSourceCaches_(e=""){let t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=((e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;const n=e.cache_.sources.filter(e=>e.src===t);if(n.length)return n[0].type;const r=e.$$("source");for(let e=0;e<r.length;e++){const n=r[e];if(n.type&&n.src&&n.src===t)return n.type}return Ei(t)})(this,t)),this.cache_.source=Et({},e,{src:t,type:n});const r=this.cache_.sources.filter(e=>e.src&&e.src===t),i=[],s=this.$$("source"),o=[];for(let e=0;e<s.length;e++){const n=fn(s[e]);i.push(n),n.src&&n.src===t&&o.push(n.src)}o.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=e=>this.updateSourceCaches_(e);const n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==n)&&(t=()=>{}),t(r),e.src||this.tech_.any(["sourceset","loadstart"],e=>{if("sourceset"===e.type)return;const t=this.techGet_("currentSrc");this.lastSource_.tech=t,this.updateSourceCaches_(t)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Rr(this.play()):this.pause()))}handleTechDoubleClick_(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),t=>t.contains(e.target))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!o().pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let r=o()[this.fsApi_.fullscreenElement]===n;!r&&n.matches&&(r=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in wi)return function(e,t,n,r){return t[n](e.reduce(ki(n),r))}(this.middleware_,this.tech_,e,t);if(e in Si)return bi(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw vt(e),e}},!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in _i)return function(e,t,n){return e.reduceRight(ki(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Si)return bi(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw vt(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t;if("TypeError"===t.name)throw vt(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t;throw vt(t),t}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Rr){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),n=Boolean(Qt||Yt);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=e=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&n&&this.load());const r=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Cr(0,0)}scrubbing(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return void 0===e?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),this.cache_.initTime=0,void(isFinite(e)&&(this.cache_.currentTime=Number(e)))):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return e&&e.length||(e=Cr(0,0)),e}seekable(){let e=this.techGet_("seekable");return e&&e.length||(e=Cr(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return Pr(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((n,r)=>{function i(){t.off("fullscreenerror",o),t.off("fullscreenchange",s)}function s(){i(),n()}function o(e,t){i(),r(t)}t.one("fullscreenchange",s),t.one("fullscreenerror",o);const a=t.requestFullscreenHelper_(e);a&&(a.then(i,i),a.then(n,r))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const e=this.el_[this.fsApi_.requestFullscreen](t);return e&&e.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),e}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,n)=>{function r(){e.off("fullscreenerror",s),e.off("fullscreenchange",i)}function i(){r(),t()}function s(e,t){r(),n(t)}e.one("fullscreenchange",i),e.one("fullscreenerror",s);const o=e.exitFullscreenHelper_();o&&(o.then(r,r),o.then(t,n))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=o()[this.fsApi_.exitFullscreen]();return e&&Rr(e.then(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=o().documentElement.style.overflow,Jn(o(),"keydown",this.boundFullWindowOnEscKey_),o().documentElement.style.overflow="hidden",un(o().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){"Escape"===e.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Xn(o(),"keydown",this.boundFullWindowOnEscKey_),o().documentElement.style.overflow=this.docOrigOverflow,dn(o().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&i().documentPictureInPicture){const e=o().createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(on("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),i().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(Dn(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",t=>{const n=t.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in o()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return i().documentPictureInPicture&&i().documentPictureInPicture.window?(i().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in o()?o().exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:t}=this.options_;t&&t.hotkeys&&((e=>{const t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=t=>"f"===e.key.toLowerCase(),muteKey:r=t=>"m"===e.key.toLowerCase(),playPauseKey:i=t=>"k"===e.key.toLowerCase()||" "===e.key.toLowerCase()}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const t=Tr.getComponent("FullscreenToggle");!1!==o()[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),Tr.getComponent("MuteToggle").prototype.handleClick.call(this,e)):i.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Tr.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let n=0,r=this.options_.techOrder;n<r.length;n++){const i=r[n];let s=fi.getTech(i);if(s||(s=Tr.getComponent(i)),s){if(s.isSupported()&&(t=s.canPlayType(e),t))return t}else vt.error(`The "${i}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map(e=>[e,fi.getTech(e)]).filter(([e,t])=>t?t.isSupported():(vt.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`),!1)),n=function(e,t,n){let r;return e.some(e=>t.some(t=>{if(r=n(e,t),r)return!0})),r};let r;const i=([e,t],n)=>{if(t.canPlaySource(n,this.options_[e.toLowerCase()]))return{source:n,tech:e}};var s;return r=this.options_.sourceOrder?n(e,t,(s=i,(e,t)=>s(t,e))):n(t,e,i),r||!1}handleSrc_(e,t){if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=Ci(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),vi(this,n[0],(e,r)=>{if(this.middleware_=r,t||(this.cache_.sources=n),this.updateSourceCaches_(e),this.src_(e))return n.length>1?this.handleSrc_(n.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());var i,s;i=r,s=this.tech_,i.forEach(e=>e.setTech&&e.setTech(s))}),n.length>1){const e=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},t=()=>{this.off("error",e)};this.one("error",e),this.one("playing",t),this.resetRetryOnError_=()=>{this.off("error",e),this.off("playing",t)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(Sr(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}addSourceElement(e,t){return!!this.tech_&&this.tech_.addSourceElement(e,t)}removeSourceElement(e){return!!this.tech_&&this.tech_.removeSourceElement(e)}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():Rr(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),cr(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:r}=this.controlBar||{},{seekBar:i}=n||{};e&&e.updateContent(),t&&t.updateContent(),r&&r.updateContent(),i&&(i.update(),i.loadProgressBar&&i.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(dt("beforeerror").forEach(t=>{const n=t(this,e);Tt(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Lr(e),this.addClass("vjs-error"),vt.error(`(CODE:${this.error_.code} ${Lr.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),dt("error").forEach(e=>e(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const r=nr(this,this.reportUserActivity),i=function(t){r(),this.clearInterval(e)};this.on("mousedown",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())}),this.on("mouseup",i),this.on("mouseleave",i);const s=this.getChild("controlBar");let o;!s||Yt||jt||(s.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);const e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))},250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");e&&this.audioOnlyCache_.controlBarHeight!==e.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach(e=>{e!==t&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=n,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),cr(this)&&this.trigger("languagechange"))}languages(){return Et(ho.prototype.options_.languages,this.languages_)}toJSON(){const e=Et(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let r=t[n];r=Et(r),r.player=void 0,e.tracks[n]=r}return e}createModal(e,t){(t=t||{}).content=e||"";const n=new zr(this,t);return this.addChild(n),n.on("dispose",()=>{this.removeChild(n)}),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<lo.length;n++){const r=lo[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(co[e]),this.addClass(co[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},uo,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return co[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!=typeof e)return;const n=this.crossOrigin();this.reset(),this.cache_.media=Et(e);const{artist:r,artwork:i,description:s,poster:o,src:a,textTracks:l,title:c}=this.cache_.media;!i&&o&&(this.cache_.media.artwork=[{src:o,type:Ei(o)}]),n&&this.crossOrigin(n),a&&this.src(a),o&&this.poster(o),Array.isArray(l)&&l.forEach(e=>this.addRemoteTextTrack(e,!1)),this.titleBar&&this.titleBar.update({title:c,description:s||r||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),e=>({kind:e.kind,label:e.label,language:e.language,src:e.src}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Ei(t.poster)}]),t}return Et(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=fn(e),r=n["data-setup"];if(cn(e,"vjs-fill")&&(n.fill=!0),cn(e,"vjs-fluid")&&(n.fluid=!0),null!==r)try{Object.assign(n,JSON.parse(r||"{}"))}catch(e){vt.error("data-setup",e)}if(Object.assign(t,n),e.hasChildNodes()){const n=e.childNodes;for(let e=0,r=n.length;e<r;e++){const r=n[e],i=r.nodeName.toLowerCase();"source"===i?t.sources.push(fn(r)):"track"===i&&t.tracks.push(fn(r))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(e=>"number"==typeof e)&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}ho.prototype.videoTracks=()=>{},ho.prototype.audioTracks=()=>{},ho.prototype.textTracks=()=>{},ho.prototype.remoteTextTracks=()=>{},ho.prototype.remoteTextTrackEls=()=>{},pi.names.forEach(function(e){const t=pi[e];ho.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),ho.prototype.crossorigin=ho.prototype.crossOrigin,ho.players={};const po=i().navigator;ho.prototype.options_={techOrder:fi.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:po&&(po.languages&&po.languages[0]||po.userLanguage||po.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1},oo.forEach(function(e){ho.prototype[`handleTech${wr(e)}_`]=function(){return this.trigger(e)}}),Tr.registerComponent("Player",ho);const fo="plugin",mo="activePlugins_",go={},yo=e=>go.hasOwnProperty(e),vo=e=>yo(e)?go[e]:void 0,bo=(e,t)=>{e[mo]=e[mo]||{},e[mo][t]=!0},_o=(e,t,n)=>{const r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},wo=(e,t)=>(t.prototype.name=e,function(...n){_o(this,{name:e,plugin:t,instance:null},!0);const r=new t(...[this,...n]);return this[e]=()=>r,_o(this,r.getEventHash()),r});class So{constructor(e){if(this.constructor===So)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),yr(this),delete this.trigger,br(this,this.constructor.defaultState),bo(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Yn(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[mo][e]=!1,this.player=this.state=null,t[e]=wo(e,go[e])}static isBasic(e){const t="string"==typeof e?vo(e):e;return"function"==typeof t&&!So.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if("string"!=typeof e)throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(yo(e))vt.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(ho.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if("function"!=typeof t)throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return go[e]=t,e!==fo&&(So.isBasic(t)?ho.prototype[e]=function(e,t){const n=function(){_o(this,{name:e,plugin:t,instance:null},!0);const n=t.apply(this,arguments);return bo(this,e),_o(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}(e,t):ho.prototype[e]=wo(e,t)),t}static deregisterPlugin(e){if(e===fo)throw new Error("Cannot de-register base plugin.");yo(e)&&(delete go[e],delete ho.prototype[e])}static getPlugins(e=Object.keys(go)){let t;return e.forEach(e=>{const n=vo(e);n&&(t=t||{},t[e]=n)}),t}static getPluginVersion(e){const t=vo(e);return t&&t.VERSION||""}}function ko(e,t,n,r){return function(e,t){let n=!1;return function(...r){return n||vt.warn(e),n=!0,t.apply(this,r)}}(`${t} is deprecated and will be removed in ${e}.0; please use ${n} instead.`,r)}So.getPlugin=vo,So.BASE_PLUGIN_NAME=fo,So.registerPlugin(fo,So),ho.prototype.usingPlugin=function(e){return!!this[mo]&&!0===this[mo][e]},ho.prototype.hasPlugin=function(e){return!!yo(e)};const To=e=>0===e.indexOf("#")?e.slice(1):e;function xo(e,t,n){let r=xo.getPlayer(e);if(r)return t&&vt.warn(`Player "${e}" is already initialised. Options will not be applied.`),n&&r.ready(n),r;const s="string"==typeof e?On("#"+To(e)):e;if(!nn(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o="getRootNode"in s&&s.getRootNode()instanceof i().ShadowRoot?s.getRootNode():s.ownerDocument.body;s.ownerDocument.defaultView&&o.contains(s)||vt.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),dt("beforesetup").forEach(e=>{const n=e(s,Et(t));Tt(n)&&!Array.isArray(n)?t=Et(t,n):vt.error("please return an object in beforesetup hooks")});const a=Tr.getComponent("Player");return r=new a(s,t,n),dt("setup").forEach(e=>e(r)),r}if(xo.hooks_=ut,xo.hooks=dt,xo.hook=function(e,t){dt(e,t)},xo.hookOnce=function(e,t){dt(e,[].concat(t).map(t=>{const n=(...r)=>(ht(e,n),t(...r));return n}))},xo.removeHook=ht,!0!==i().VIDEOJS_NO_DYNAMIC_STYLE&&tn()){let e=On(".vjs-styles-defaults");if(!e){e=Bn("vjs-styles-defaults");const t=On("head");t&&t.insertBefore(e,t.firstChild),Fn(e,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Rn(1,xo),xo.VERSION=ct,xo.options=ho.prototype.options_,xo.getPlayers=()=>ho.players,xo.getPlayer=e=>{const t=ho.players;let n;if("string"==typeof e){const r=To(e),i=t[r];if(i)return i;n=On("#"+r)}else n=e;if(nn(n)){const{player:e,playerId:r}=n;if(e||t[r])return e||t[r]}},xo.getAllPlayers=()=>Object.keys(ho.players).map(e=>ho.players[e]).filter(Boolean),xo.players=ho.players,xo.getComponent=Tr.getComponent,xo.registerComponent=(e,t)=>(fi.isTech(t)&&vt.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Tr.registerComponent.call(Tr,e,t)),xo.getTech=fi.getTech,xo.registerTech=fi.registerTech,xo.use=function(e,t){mi[e]=mi[e]||[],mi[e].push(t)},Object.defineProperty(xo,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(xo.middleware,"TERMINATOR",{value:yi,writeable:!1,enumerable:!0}),xo.browser=Zt,xo.obj=Ot,xo.mergeOptions=ko(9,"videojs.mergeOptions","videojs.obj.merge",Et),xo.defineLazyProperty=ko(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",At),xo.bind=ko(9,"videojs.bind","native Function.prototype.bind",nr),xo.registerPlugin=So.registerPlugin,xo.deregisterPlugin=So.deregisterPlugin,xo.plugin=(e,t)=>(vt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),So.registerPlugin(e,t)),xo.getPlugins=So.getPlugins,xo.getPlugin=So.getPlugin,xo.getPluginVersion=So.getPluginVersion,xo.addLanguage=function(e,t){return e=(""+e).toLowerCase(),xo.options.languages=Et(xo.options.languages,{[e]:t}),xo.options.languages[e]},xo.log=vt,xo.createLogger=bt,xo.time=jr,xo.createTimeRange=ko(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Cr),xo.createTimeRanges=ko(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Cr),xo.formatTime=ko(9,"videojs.formatTime","videojs.time.formatTime",Dr),xo.setFormatTime=ko(9,"videojs.setFormatTime","videojs.time.setFormatTime",Mr),xo.resetFormatTime=ko(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Ir),xo.parseUrl=ko(9,"videojs.parseUrl","videojs.url.parseUrl",ei),xo.isCrossOrigin=ko(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",ri),xo.EventTarget=ar,xo.any=Zn,xo.on=Jn,xo.one=Qn,xo.off=Xn,xo.trigger=Yn,xo.xhr=l(),xo.TrackList=$r,xo.TextTrack=ai,xo.TextTrackList=Gr,xo.AudioTrack=li,xo.AudioTrackList=Hr,xo.VideoTrack=ci,xo.VideoTrackList=Wr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(e=>{xo[e]=function(){return vt.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),jn[e].apply(null,arguments)}}),xo.computedStyle=ko(9,"videojs.computedStyle","videojs.dom.computedStyle",In),xo.dom=jn,xo.fn=sr,xo.num=Ji,xo.str=kr,xo.url=ii,xo.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};class Eo{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:()=>t.enabled_(),set(e){t.enabled_(e)}}),t}}class Co extends xo.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new Eo(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,r=this.length;n<r;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Co.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const e in Co.prototype.allowedEvents_)Co.prototype["on"+e]=null;var Ao="4.1.0";const Oo=function(e){return function(e){const t=e.qualityLevels,n=new Co,r=function(){n.dispose(),e.qualityLevels=t,e.off("dispose",r)};return e.on("dispose",r),e.qualityLevels=()=>n,e.qualityLevels.VERSION=Ao,n}(this,xo.obj.merge({},e))};xo.registerPlugin("qualityLevels",Oo),Oo.VERSION=Ao;const Mo=h,Io=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,Do=e=>xo.log.debug?xo.log.debug.bind(xo,"VHS:",`${e} >`):function(){};function jo(...e){const t=xo.obj||xo;return(t.merge||t.mergeOptions).apply(t,e)}function Po(...e){const t=xo.time||xo;return(t.createTimeRanges||t.createTimeRanges).apply(t,e)}const Lo=1/30,No=.1,Ro=function(e,t){const n=[];let r;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return Po(n)},Uo=function(e,t){return Ro(e,function(e,n){return e-No<=t&&n+No>=t})},Bo=function(e,t){return Ro(e,function(e){return e-Lo>=t})},Fo=e=>{const t=[];if(!e||!e.length)return"";for(let n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},zo=e=>{const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},$o=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},qo=function(e,t){let n=0;if(!e||!e.length)return n;for(let r=0;r<e.length;r++){const i=e.start(r),s=e.end(r);t>s||(n+=t>i&&t<=s?s-t:s-i)}return n},Ho=(e,t)=>{if(!t.preload)return t.duration;let n=0;return(t.parts||[]).forEach(function(e){n+=e.duration}),(t.preloadHints||[]).forEach(function(t){"PART"===t.type&&(n+=e.partTargetDuration)}),n},Vo=e=>(e.segments||[]).reduce((e,t,n)=>(t.parts?t.parts.forEach(function(r,i){e.push({duration:r.duration,segmentIndex:n,partIndex:i,part:r,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e),[]),Wo=e=>{const t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Go=({preloadSegment:e})=>{if(!e)return;const{parts:t,preloadHints:n}=e;let r=(n||[]).reduce((e,t)=>e+("PART"===t.type?1:0),0);return r+=t&&t.length?t.length:0,r},Ko=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;const n=Wo(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Jo=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;const r=function(e,t){let n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=e.segments[r],void 0!==i.end)return{result:n+i.end,precise:!0};if(n+=Ho(e,i),void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(r.precise)return r.result;const i=function(e,t){let n,r=0,i=t-e.mediaSequence;for(;i<e.segments.length;i++){if(n=e.segments[i],void 0!==n.start)return{result:n.start-r,precise:!0};if(r+=Ho(e,n),void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:r.result+n},Xo=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return i()[1/0]}return Jo(e,t,n)},Yo=function({defaultDuration:e,durationList:t,startIndex:n,endIndex:r}){let i=0;if(n>r&&([n,r]=[r,n]),n<0){for(let t=n;t<Math.min(0,r);t++)i+=e;n=0}for(let e=n;e<r;e++)i+=t[e].duration;return i},Qo=function(e,t,n,r){if(!e||!e.segments)return null;if(e.endList)return Xo(e);if(null===t)return null;t=t||0;let i=Jo(e,e.mediaSequence+e.segments.length,t);return n&&(i-=r="number"==typeof r?r:Ko(null,e)),Math.max(0,i)},Zo=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},ea=function(e){return e.excludeUntil&&e.excludeUntil===1/0},ta=function(e){const t=Zo(e);return!e.disabled&&!t},na=function(e,t){return t.attributes&&t.attributes[e]},ra=(e,t)=>{if(1===e.playlists.length)return!0;const n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(e=>!!ta(e)&&(e.attributes.BANDWIDTH||0)<n).length},ia=(e,t)=>!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri)),sa=function(e,t){const n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{};let r=!1;for(const e in n){for(const i in n[e])if(r=t(n[e][i]),r)break;if(r)break}return!!r},oa=e=>{if(!e||!e.playlists||!e.playlists.length)return sa(e,e=>e.playlists&&e.playlists.length||e.uri);for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t],r=n.attributes&&n.attributes.CODECS;if((!r||!r.split(",").every(e=>I(e)))&&!sa(e,e=>ia(n,e)))return!1}return!0};var aa={liveEdgeDelay:Ko,duration:Xo,seekable:function(e,t,n){const r=t||0;let i=Qo(e,t,!0,n);return null===i?Po():(i<r&&(i=r),Po(r,i))},getMediaInfoForTime:function({playlist:e,currentTime:t,startingSegmentIndex:n,startingPartIndex:r,startTime:i,exactManifestTimings:s}){let o=t-i;const a=Vo(e);let l=0;for(let e=0;e<a.length;e++){const t=a[e];if(n===t.segmentIndex&&("number"!=typeof r||"number"!=typeof t.partIndex||r===t.partIndex)){l=e;break}}if(o<0){if(l>0)for(let t=l-1;t>=0;t--){const n=a[t];if(o+=n.duration,s){if(o<0)continue}else if(o+Lo<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:i-Yo({defaultDuration:e.targetDuration,durationList:a,startIndex:l,endIndex:t})}}return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t}}if(l<0){for(let n=l;n<0;n++)if(o-=e.targetDuration,o<0)return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t};l=0}for(let t=l;t<a.length;t++){const n=a[t];o-=n.duration;const r=n.duration>Lo;if(0!==o&&!(r&&o+Lo>=0)||t===a.length-1){if(s){if(o>0)continue}else if(o-Lo>=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:i+Yo({defaultDuration:e.targetDuration,durationList:a,startIndex:l,endIndex:t})}}}return{segmentIndex:a[a.length-1].segmentIndex,partIndex:a[a.length-1].partIndex,startTime:t}},isEnabled:ta,isDisabled:function(e){return e.disabled},isExcluded:Zo,isIncompatible:ea,playlistEnd:Qo,isAes:function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:na,estimateSegmentRequestTime:function(e,t,n,r=0){return na("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:ra,isAudioOnly:oa,playlistMatch:ia,segmentDurationWithParts:Ho};const{log:la}=xo,ca=(e,t)=>`${e}-${t}`,ua=(e,t,n)=>`placeholder-uri-${e}-${t}-${n}`,da=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(e.mediaGroups[n])for(const r in e.mediaGroups[n])for(const i in e.mediaGroups[n][r]){const s=e.mediaGroups[n][r][i];t(s,n,r,i)}})},ha=({playlist:e,uri:t,id:n})=>{e.id=n,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},pa=(e,t,n=ua)=>{e.uri=t;for(let t=0;t<e.playlists.length;t++)if(!e.playlists[t].uri){const n=`placeholder-uri-${t}`;e.playlists[t].uri=n}const r=oa(e);da(e,(t,i,s,o)=>{if(!t.playlists||!t.playlists.length){if(r&&"AUDIO"===i&&!t.uri)for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t];if(n.attributes&&n.attributes.AUDIO&&n.attributes.AUDIO===s)return}t.playlists=[d({},t)]}t.playlists.forEach(function(t,r){const a=n(i,s,o,t),l=ca(r,a);t.uri?t.resolvedUri=t.resolvedUri||Mo(e.uri,t.uri):(t.uri=0===r?a:l,t.resolvedUri=t.uri),t.id=t.id||l,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t})}),(e=>{let t=e.playlists.length;for(;t--;){const n=e.playlists[t];ha({playlist:n,id:ca(t,n.uri)}),n.resolvedUri=Mo(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||la.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(e),(e=>{da(e,t=>{t.uri&&(t.resolvedUri=Mo(e.uri,t.uri))})})(e)};class fa{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(null!==this.offset_)return;if(!e.length)return;const[t]=e;void 0!==t.programDateTime&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,n=t.startDate.getTime();this.trimProcessedDateRanges_(n),this.pendingDateRanges_=e.reduce((e,t)=>(e.set(t.id,t),e),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(null===this.offset_)return[];const e={},t=[];this.pendingDateRanges_.forEach((n,r)=>{if(!this.processedDateRanges_.has(r)&&(n.startTime=n.startDate.getTime()/1e3-this.offset_,n.processDateRange=()=>this.processDateRange(n),t.push(n),n.class))if(e[n.class]){const t=e[n.class].push(n);n.classListIndex=t-1}else e[n.class]=[n],n.classListIndex=0});for(const n of t){const t=e[n.class]||[];n.endDate?n.endTime=n.endDate.getTime()/1e3-this.offset_:n.endOnNext&&t[n.classListIndex+1]?n.endTime=t[n.classListIndex+1].startTime:n.duration?n.endTime=n.startTime+n.duration:n.plannedDuration?n.endTime=n.startTime+n.plannedDuration:n.endTime=n.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((t,n)=>{t.startDate.getTime()<e&&this.processedDateRanges_.delete(n)})}}const ma=({requestType:e,request:t,error:n,parseFailure:r})=>{const i=t.status<200||t.status>299,s=t.status>=400&&t.status<=499,o={uri:t.uri,requestType:e},a=i&&!s||r;if(n&&s)o.error=d({},n),o.errorType=xo.Error.NetworkRequestFailed;else if(t.aborted)o.errorType=xo.Error.NetworkRequestAborted;else if(t.timedout)o.erroType=xo.Error.NetworkRequestTimeout;else if(a){const e=r?xo.Error.NetworkBodyParserFailed:xo.Error.NetworkBadStatus;o.errorType=e,o.status=t.status,o.headers=t.headers}return o},ga=Do("CodecUtils"),ya=function(e){const t=e.attributes||{};if(t.CODECS)return M(t.CODECS)},va=(e,t)=>{const n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},ba=function(e){const t={};return e.forEach(({mediaType:e,type:n,details:r})=>{t[e]=t[e]||[],t[e].push(O(`${n}${r}`))}),Object.keys(t).forEach(function(e){if(t[e].length>1)return ga(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]}),t},_a=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},wa=function(e,t){const n=t.attributes||{},r=ba(ya(t)||[]);if(va(e,t)&&!r.audio&&!((e,t)=>{if(!va(e,t))return!0;const n=t.attributes||{},r=e.mediaGroups.AUDIO[n.AUDIO];for(const e in r)if(!r[e].uri&&!r[e].playlists)return!0;return!1})(e,t)){const t=ba(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return M(i.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);t.audio&&(r.audio=t.audio)}return r},{EventTarget:Sa}=xo,ka=(e,t)=>{if(!e)return t;const n=jo(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(let r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(n.parts[r]=jo(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Ta=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=Mo(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Mo(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Mo(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Mo(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(e=>{e.resolvedUri||(e.resolvedUri=Mo(t,e.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(e=>{e.resolvedUri||(e.resolvedUri=Mo(t,e.uri))})},xa=function(e){const t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(let e=0;e<n.preloadHints.length;e++)if("MAP"===n.preloadHints[e].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},Ea=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,Ca=(e,t,n=Ea)=>{const r=jo(e,{}),i=r.playlists[t.id];if(!i)return null;if(n(i,t))return null;t.segments=xa(t);const s=jo(i,t);if(s.preloadSegment&&!t.preloadSegment&&delete s.preloadSegment,i.segments){if(t.skip){t.segments=t.segments||[];for(let e=0;e<t.skip.skippedSegments;e++)t.segments.unshift({skipped:!0})}s.segments=((e,t,n)=>{const r=e.slice(),i=t.slice();n=n||0;const s=[];let o;for(let e=0;e<i.length;e++){const t=r[e+n],a=i[e];t?(o=t.map||o,s.push(ka(t,a))):(o&&!a.map&&(a.map=o),s.push(a))}return s})(i.segments,t.segments,t.mediaSequence-i.mediaSequence)}s.segments.forEach(e=>{Ta(e,s.resolvedUri)});for(let e=0;e<r.playlists.length;e++)r.playlists[e].id===t.id&&(r.playlists[e]=s);return r.playlists[t.id]=s,r.playlists[t.uri]=s,da(e,(e,n,r,i)=>{if(e.playlists)for(let n=0;n<e.playlists.length;n++)t.id===e.playlists[n].id&&(e.playlists[n]=s)}),r},Aa=(e,t)=>{const n=e.segments||[],r=n[n.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],s=i&&i.duration||r&&r.duration;return t&&s?1e3*s:500*(e.partTargetDuration||e.targetDuration||10)},Oa=(e,t,n)=>{if(!e)return;const r=[];return e.forEach(e=>{if(!e.attributes)return;const{BANDWIDTH:t,RESOLUTION:n,CODECS:i}=e.attributes;r.push({id:e.id,bandwidth:t,resolution:n,codecs:i})}),{type:t,isLive:n,renditions:r}};class Ma extends Sa{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Do("PlaylistLoader");const{withCredentials:r=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=r,this.addDateRangesToTextTrack_=n.addDateRangesToTextTrack;const i=t.options_;this.customTagParsers=i&&i.customTagParsers||[],this.customTagMappers=i&&i.customTagMappers||[],this.llhls=i&&i.llhls,this.dateRangesStorage_=new fa,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();t.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=Mo(this.main.uri,e.uri);this.llhls&&(t=((e,t)=>{if(t.endList||!t.serverControl)return e;const n={};if(t.serverControl.canBlockReload){const{preloadSegment:e}=t;let r=t.mediaSequence+t.segments.length;if(e){const i=e.parts||[],s=Go(t)-1;s>-1&&s!==i.length-1&&(n._HLS_part=s),(s>-1||i.length)&&r--}n._HLS_msn=r}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const t=new(i().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(e){n.hasOwnProperty(e)&&t.searchParams.set(e,n[e])}),e=t.toString()}return e})(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e,t)=>{if(this.request)return e?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})})}playlistRequestError(e,t,n){const{uri:r,id:i}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[i],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:ma({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{const n=(({onwarn:e,oninfo:t,manifestString:n,customTagParsers:r=[],customTagMappers:i=[],llhls:s})=>{const o=new k;e&&o.on("warn",e),t&&o.on("info",t),r.forEach(e=>o.addParser(e)),i.forEach(e=>o.addTagMapper(e)),o.push(n),o.end();const a=o.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(e){a.hasOwnProperty(e)&&delete a[e]}),a.segments&&a.segments.forEach(function(e){["parts","preloadHints"].forEach(function(t){e.hasOwnProperty(t)&&delete e[t]})})),!a.targetDuration){let t=10;a.segments&&a.segments.length&&(t=a.segments.reduce((e,t)=>Math.max(e,t.duration),0)),e&&e({message:`manifest has no targetDuration defaulting to ${t}`}),a.targetDuration=t}const l=Wo(a);if(l.length&&!a.partTargetDuration){const t=l.reduce((e,t)=>Math.max(e,t.duration),0);e&&(e({message:`manifest has no partTargetDuration defaulting to ${t}`}),la.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),a.partTargetDuration=t}return a})({onwarn:({message:t})=>this.logger_(`m3u8-parser warn for ${e}: ${t}`),oninfo:({message:t})=>this.logger_(`m3u8-parser info for ${e}: ${t}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return n.playlists&&n.playlists.length?(this.excludeAudioOnlyVariants(n.playlists),n):n}catch(e){this.error=e,this.error.metadata={errorType:xo.Error.StreamingHlsPlaylistParserError,error:e}}}excludeAudioOnlyVariants(e){const t=e=>{const t=e.attributes||{},{width:n,height:r}=t.RESOLUTION||{};if(n&&r)return!0;const i=ya(e)||[],s=ba(i);return Boolean(s.video)};e.some(t)&&e.forEach(e=>{t(e)||(e.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:r}){this.request=null,this.state="HAVE_METADATA";const i={playlistInfo:{type:"media",uri:n}};this.trigger({type:"playlistparsestart",metadata:i});const s=t||this.parseManifest_({url:n,manifestString:e});s.lastRequest=Date.now(),ha({playlist:s,uri:n,id:r});const o=Ca(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Aa(this.media(),!!o)),i.parsedPlaylist=Oa(this.main.playlists,i.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:i}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),i().clearTimeout(this.mediaUpdateTimeout),i().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new fa,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(i().clearTimeout(this.finalRenditionTimeout),t){const t=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=i().setTimeout(this.media.bind(this,e,!1),t))}const n=this.state,r=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Aa(e,!0)),!r)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,r)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Io(e.resolvedUri,r),t)return this.playlistRequestError(this.request,e,n);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:r.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const e=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;return void(this.mediaUpdateTimeout=i().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},e))}this.started?t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=i().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=i().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,n)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:n.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:n.responseText,code:2,metadata:ma({requestType:n.requestType,request:n,error:t})},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Io(this.src,n),this.trigger({type:"playlistparsestart",metadata:e});const r=this.parseManifest_({manifestString:n.responseText,url:this.src});e.parsedPlaylist=Oa(r.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(r)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,pa(this.main,this.srcUri()),e.playlists.forEach(e=>{e.segments=xa(e),e.segments.forEach(t=>{Ta(t,e.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||i().location.href;this.main=((e,t)=>{const n=ca(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:i().location.href,resolvedUri:i().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r})(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const n=this.main,r=e.ID;let i=n.playlists.length;for(;i--;){const s=n.playlists[i];if(s.attributes["PATHWAY-ID"]===r){const o=s.resolvedUri,a=s.id;if(t){const t=this.createCloneURI_(s.resolvedUri,e),o=ca(r,t),a=this.createCloneAttributes_(r,s.attributes),l=this.createClonePlaylist_(s,o,e,a);n.playlists[i]=l,n.playlists[o]=l,n.playlists[t]=l}else n.playlists.splice(i,1);delete n.playlists[a],delete n.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const n=this.main,r=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{if(n.mediaGroups[e]&&n.mediaGroups[e][r])for(const t in n.mediaGroups[e])if(t===r){for(const r in n.mediaGroups[e][t])n.mediaGroups[e][t][r].playlists.forEach((e,t)=>{const r=n.playlists[e.id],i=r.id,s=r.resolvedUri;delete n.playlists[i],delete n.playlists[s]});delete n.mediaGroups[e][t]}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const n=this.main,r=n.playlists.length,i=this.createCloneURI_(t.resolvedUri,e),s=ca(e.ID,i),o=this.createCloneAttributes_(e.ID,t.attributes),a=this.createClonePlaylist_(t,s,e,o);n.playlists[r]=a,n.playlists[s]=a,n.playlists[i]=a,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,n=e["BASE-ID"],r=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{if(r.mediaGroups[i]&&!r.mediaGroups[i][t])for(const s in r.mediaGroups[i])if(s===n){r.mediaGroups[i][t]={};for(const n in r.mediaGroups[i][s]){const o=r.mediaGroups[i][s][n];r.mediaGroups[i][t][n]=d({},o);const a=r.mediaGroups[i][t][n],l=this.createCloneURI_(o.resolvedUri,e);a.resolvedUri=l,a.uri=l,a.playlists=[],o.playlists.forEach((s,o)=>{const l=r.playlists[s.id],c=ua(i,t,n),u=ca(t,c);if(l&&!r.playlists[u]){const t=this.createClonePlaylist_(l,u,e),n=t.resolvedUri;r.playlists[u]=t,r.playlists[n]=t}a.playlists[o]=this.createClonePlaylist_(s,u,e)})}}})}createClonePlaylist_(e,t,n,r){const i=this.createCloneURI_(e.resolvedUri,n),s={resolvedUri:i,uri:i,id:t};return e.segments&&(s.segments=[]),r&&(s.attributes=r),jo(e,s)}createCloneURI_(e,t){const n=new URL(e);n.hostname=t["URI-REPLACEMENT"].HOST;const r=t["URI-REPLACEMENT"].PARAMS;for(const e of Object.keys(r))n.searchParams.set(e,r[e]);return n.href}createCloneAttributes_(e,t){const n={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{t[r]&&(n[r]=e)}),n}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const r=e.contentProtection[n].attributes.keyId;r&&t.add(r.toLowerCase())}return t}}}const Ia=function(e,t,n,r){const i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),r(t,e)},Da=function(){const e=function e(t,n){t=jo({timeout:45e3},t);const r=e.beforeRequest||xo.Vhs.xhr.beforeRequest,i=e._requestCallbackSet||xo.Vhs.xhr._requestCallbackSet||new Set,s=e._responseCallbackSet||xo.Vhs.xhr._responseCallbackSet;r&&"function"==typeof r&&(xo.log.warn("beforeRequest is deprecated, use onRequest instead."),i.add(r));const o=!0===xo.Vhs.xhr.original?xo.xhr:xo.Vhs.xhr,a=((e,t)=>{if(!e||!e.size)return;let n=t;return e.forEach(e=>{n=e(n)}),n})(i,t);i.delete(r);const l=o(a||t,function(e,t){return((e,t,n,r)=>{e&&e.size&&e.forEach(e=>{e(t,n,r)})})(s,l,e,t),Ia(l,e,t,n)}),c=l.abort;return l.abort=function(){return l.aborted=!0,c.apply(l,arguments)},l.uri=t.uri,l.requestType=t.requestType,l.requestTime=Date.now(),l};return e.original=!0,e},ja=function(e){const t={};return e.byterange&&(t.Range=function(e){let t;const n=e.offset;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?i().BigInt(e.offset)+i().BigInt(e.length)-i().BigInt(1):e.offset+e.length-1,"bytes="+n+"-"+t}(e.byterange)),t},Pa=function(e,t){return e.start(t)+"-"+e.end(t)},La=function(e,t){const n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Na=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Ra=function(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];B(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r}),t},Ua=function(e){const t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Ba=function(e){return e.resolvedUri},Fa=e=>{const t=Array.prototype.slice.call(e),n=16;let r,i,s="";for(let e=0;e<t.length/n;e++)r=t.slice(e*n,e*n+n).map(La).join(""),i=t.slice(e*n,e*n+n).map(Na).join(""),s+=r+" "+i+"\n";return s};var za=Object.freeze({__proto__:null,createTransferableMessage:Ra,initSegmentId:Ua,segmentKeyId:Ba,hexDump:Fa,tagDump:({bytes:e})=>Fa(e),textRanges:e=>{let t,n="";for(t=0;t<e.length;t++)n+=Pa(e,t)+" ";return n}});const $a=({programTime:e,playlist:t,retryCount:n=2,seekTo:r,pauseAfterSeek:i=!0,tech:s,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(void 0===e||!t||!r)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!s.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!(e=>{if(!e.segments||0===e.segments.length)return!1;for(let t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0})(t))return o({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const a=((e,t)=>{let n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;let r=t.segments[0];if(n<new Date(r.dateTimeObject))return null;for(let e=0;e<t.segments.length-1&&(r=t.segments[e],!(n<new Date(t.segments[e+1].dateTimeObject)));e++);const i=t.segments[t.segments.length-1],s=i.dateTimeObject,o=i.videoTimingInfo?(a=i.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:i.duration+.25*i.duration;var a;return n>new Date(s.getTime()+1e3*o)?null:(n>new Date(s)&&(r=i),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:aa.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})})(e,t);if(!a)return o({message:`${e} was not found in the stream`});const l=a.segment,c=((e,t)=>{let n,r;try{n=new Date(e),r=new Date(t)}catch(e){}const i=n.getTime();return(r.getTime()-i)/1e3})(l.dateTimeObject,e);if("estimate"===a.type)return 0===n?o({message:`${e} is not buffered yet. Try again`}):(r(a.estimatedStart+c),void s.one("seeked",()=>{$a({programTime:e,playlist:t,retryCount:n-1,seekTo:r,pauseAfterSeek:i,tech:s,callback:o})}));const u=l.start+c;s.one("seeked",()=>o(null,s.currentTime())),i&&s.pause(),r(u)},qa=(e,t)=>{if(4===e.readyState)return t()},{EventTarget:Ha}=xo,Va=function(e,t){if(!Ea(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let n=0;n<e.segments.length;n++){const r=e.segments[n],i=t.segments[n];if(r.uri!==i.uri)return!1;if(!r.byterange&&!i.byterange)continue;const s=r.byterange,o=i.byterange;if(s&&!o||!s&&o)return!1;if(s.offset!==o.offset||s.length!==o.length)return!1}return!0},Wa=(e,t,n,r)=>`placeholder-uri-${e}-${t}-${r.attributes.NAME||n}`,Ga=(e,t)=>(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length,Ka=(e,t)=>{const n={};for(const r in e){const i=e[r].sidx;if(i){const e=ce(i);if(!t[e])break;const r=t[e].sidxInfo;Ga(r,i)&&(n[e]=t[e])}}return n};class Ja extends Ha{constructor(e,t,n={},r){super(),this.isPaused_=!0,this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:i=!1}=n;if(this.vhs_=t,this.withCredentials=i,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Do("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,n){const r=e.sidx&&ce(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r])return i().clearTimeout(this.mediaRequest_),void(this.mediaRequest_=i().setTimeout(()=>n(!1),0));const s=Io(e.sidx.resolvedUri),o=(i,s)=>{if(this.requestErrored_(i,s,t))return;const o=this.mainPlaylistLoader_.sidxMapping_,{requestType:a}=s;let l;try{l=Fe()(F(s.response).subarray(8))}catch(e){return e.metadata=ma({requestType:a,request:s,parseFailure:!0}),void this.requestErrored_(e,s,t)}return o[r]={sidxInfo:e.sidx,sidx:l},re(e,l,e.sidx.resolvedUri),n(!0)};this.request=((e,t,n,r)=>{let i,s=[],o=!1;const a=function(e,t,r,i){return t.abort(),o=!0,n(e,t,r,i)},l=function(e,t){if(o)return;if(e)return e.metadata=ma({requestType:r,request:t,error:e}),a(e,t,"",s);const n=t.responseText.substring(s&&s.byteLength||0,t.responseText.length);if(s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e}),t.length<=1)return F(t[0]);var r=t.reduce(function(e,t,n){return e+(t.byteLength||t.length)},0),i=new Uint8Array(r),s=0;return t.forEach(function(e){e=F(e),i.set(e,s),s+=e.byteLength}),i}(s,H(n,!0)),i=i||$e(s),s.length<10||i&&s.length<i+2)return qa(t,()=>a(e,t,"",s));const l=at(s);return"ts"===l&&s.length<188||!l&&s.length<376?qa(t,()=>a(e,t,"",s)):a(null,t,l,s)},c={uri:e,beforeSend(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",function({total:t,loaded:n}){return Ia(e,null,{statusCode:e.status},l)})}},u=t(c,function(e,t){return Ia(u,e,t,l)});return u})(s,this.vhs_.xhr,(t,n,r,i)=>{if(t)return o(t,n);if(!r||"mp4"!==r){const t=r||"unknown";return o({status:n.status,message:`Unsupported ${t} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},n)}const{offset:a,length:l}=e.sidx.byterange;if(i.length>=l+a)return o(t,{response:i.subarray(a,a+l),status:n.status,uri:n.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:ja({byterange:e.sidx.byterange})},o)},"dash-sidx")}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},i().clearTimeout(this.minimumUpdatePeriodTimeout_),i().clearTimeout(this.mediaRequest_),i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,n=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,i().clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),"HAVE_MAIN_MANIFEST"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(i().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){this.isPaused_=!1,i().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const e=t?t.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=i().setTimeout(()=>this.load(),e))}this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){if(this.started=!0,!this.isMain_)return i().clearTimeout(this.mediaRequest_),void(this.mediaRequest_=i().setTimeout(()=>this.haveMain_(),0));this.requestMain_((e,t)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(n,r)=>{if(n){const{requestType:e}=r;n.metadata=ma({requestType:e,request:r,error:n})}if(this.requestErrored_(n,r))return void("HAVE_NOTHING"===this.state&&(this.started=!1));this.trigger({type:"manifestrequestcomplete",metadata:t});const i=r.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Io(this.mainPlaylistLoader_.srcUrl,r),i?(this.handleMain_(),void this.syncClientServerClock_(()=>e(r,i))):e(r,i)})}syncClientServerClock_(e){const t=(n=this.mainPlaylistLoader_.mainXml_,(e=>{const t=Ee(e,"UTCTiming")[0];if(!t)return null;const n=Me(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n})(Re(n)));var n;return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Mo(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,r)=>{if(!this.request)return;if(n){const{requestType:t}=r;return this.error.metadata=ma({requestType:t,request:r,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let i;i="HEAD"===t.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):this.mainLoaded_:Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=i-Date.now(),e()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){i().clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};let n;this.trigger({type:"manifestparsestart",metadata:t});try{n=(({mainXml:e,srcUrl:t,clientOffset:n,sidxMapping:r,previousManifest:i})=>{const s=((e,t={})=>{const n=((e,t={})=>{const{manifestUri:n="",NOW:r=Date.now(),clientOffset:i=0,eventHandler:s=function(){}}=t,o=Ee(e,"Period");if(!o.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const a=Ee(e,"Location"),l=Me(e),c=De([{baseUrl:n}],Ee(e,"BaseURL")),u=Ee(e,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=r,l.clientOffset=i,a.length&&(l.locations=a.map(Ce));const d=[];return o.forEach((e,t)=>{const n=Me(e),r=d[t-1];n.start=(({attributes:e,priorPeriodAttributes:t,mpdType:n})=>"number"==typeof e.start?e.start:t&&"number"==typeof t.start&&"number"==typeof t.duration?t.start+t.duration:t||"static"!==n?null:0)({attributes:n,priorPeriodAttributes:r?r.attributes:null,mpdType:l.type}),d.push({node:e,attributes:n})}),{locations:l.locations,contentSteeringInfo:Ne(u,s),representationInfo:X(d.map(Le(l,c))),eventStream:X(d.map(Pe))}})(Re(e),t),r=n.representationInfo.map(xe);return ve({dashPlaylists:r,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:n.eventStream})})(e,{manifestUri:t,clientOffset:n,sidxMapping:r,previousManifest:i});return pa(s,t,Wa),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(e){this.error=e,this.error.metadata={errorType:xo.Error.StreamingDashManifestParserError,error:e},this.trigger("error")}e&&(n=((e,t,n)=>{let r=!0,i=jo(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let e=0;e<t.playlists.length;e++){const s=t.playlists[e];if(s.sidx){const e=ce(s.sidx);n&&n[e]&&n[e].sidx&&re(s,n[e].sidx,s.sidx.resolvedUri)}const o=Ca(i,s,Va);o&&(i=o,r=!1)}return da(t,(e,t,n,s)=>{if(e.playlists&&e.playlists.length){const o=e.playlists[0].id,a=Ca(i,e.playlists[0],Va);a&&(i=a,s in i.mediaGroups[t][n]||(i.mediaGroups[t][n][s]=e),i.mediaGroups[t][n][s].playlists[0]=i.playlists[o],r=!1)}}),((e,t)=>{da(e,(n,r,i,s)=>{t.mediaGroups[r][i]&&s in t.mediaGroups[r][i]||delete e.mediaGroups[r][i][s]})})(i,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:i})(e,n,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=n||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(n),n){const{duration:e,endList:r}=n,i=[];n.playlists.forEach(e=>{i.push({id:e.id,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS})});const s={duration:e,isLive:!r,renditions:i};t.parsedManifest=s,this.trigger({type:"manifestparsecomplete",metadata:t})}return Boolean(n)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(i().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=i().setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((e,t)=>{let n=Ka(e.playlists,t);return da(e,(e,r,i,s)=>{if(e.playlists&&e.playlists.length){const r=e.playlists;n=jo(n,Ka(r,t))}}),n})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,e=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=i().setTimeout(()=>{this.trigger("mediaupdatetimeout"),e()},Aa(this.media(),Boolean(n))))};e()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const e=this.mainPlaylistLoader_.main.eventStream.map(e=>({cueTime:e.start,frames:[{data:e.messageData}]}));this.addMetadataToTextTrack("EventStream",e,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const n in e.contentProtection){const r=e.contentProtection[n].attributes["cenc:default_KID"];r&&t.add(r.replace(/-/g,"").toLowerCase())}return t}}}var Xa={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Ya=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Qa=function(e){return function(){const t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(t){const n=new BlobBuilder;return n.append(e),URL.createObjectURL(n.getBlob())}}(e),n=Ya(new Worker(t));n.objURL=t;const r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},n}},Za=function(e){return`var browserWorkerPolyFill = ${Ya.toString()};\nbrowserWorkerPolyFill(self);\n`+e},el=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},tl=Za(el(function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,s;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(s=[],r=arguments.length,r=1;r<arguments.length;++r)s.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,s)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var r,i,s,o,a,l,c,u,d,h,p,f,m,g,y,v,b,_,w,S,k,T,x,E,C,A,O,M,I,D,j,P,L,N,R,U,B,F,z,$,q=t,H=Math.pow(2,32),V={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*H+n.getUint32(4)},MAX_UINT32:H},W=V.MAX_UINT32;!function(){var e;if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in T)T.hasOwnProperty(e)&&(T[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);x=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),M={video:A,audio:O},j=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),P=new Uint8Array([0,0,0,0,0,0,0,0]),L=P,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=P,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),r=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},i=function(){return r(T.dinf,r(T.dref,j))},s=function(e){return r(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},y=function(e){return r(T.hdlr,M[e])},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),r(T.mdhd,t)},m=function(e){return r(T.mdia,g(e),y(e.type),l(e))},a=function(e){return r(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return r(T.minf,"video"===e.type?r(T.vmhd,I):r(T.smhd,D),i(),b(e))},c=function(e,t){for(var n=[],i=t.length;i--;)n[i]=w(t[i]);return r.apply(null,[T.moof,a(e)].concat(n))},u=function(e){for(var t=e.length,n=[];t--;)n[t]=p(e[t]);return r.apply(null,[T.moov,h(4294967295)].concat(n).concat(d(e)))},d=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return r.apply(null,[T.mvex].concat(n))},h=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return r(T.mvhd,t)},v=function(e){var t,n,i=e.samples||[],s=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,s[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return r(T.sdtp,s)},b=function(e){return r(T.stbl,_(e),r(T.stts,R),r(T.stsc,L),r(T.stsz,N),r(T.stco,P))},_=function(e){return r(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):B(e))},U=function(e){var t,n,i=e.sps||[],s=e.pps||[],o=[],a=[];for(t=0;t<i.length;t++)o.push((65280&i[t].byteLength)>>>8),o.push(255&i[t].byteLength),o=o.concat(Array.prototype.slice.call(i[t]));for(t=0;t<s.length;t++)a.push((65280&s[t].byteLength)>>>8),a.push(255&s[t].byteLength),a=a.concat(Array.prototype.slice.call(s[t]));if(n=[T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r(T.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],o,[s.length],a))),r(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],c=e.sarRatio[1];n.push(r(T.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return r.apply(null,n)},B=function(e){return r(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),s(e))},f=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return r(T.tkhd,t)},w=function(e){var t,n,i,s,o,a;return t=r(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/W),a=Math.floor(e.baseMediaDecodeTime%W),n=r(T.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===e.type?(i=k(e,92),r(T.traf,t,n,i)):(s=v(e),i=k(e,s.length+92),r(T.traf,t,n,i,s))},p=function(e){return e.duration=e.duration||4294967295,r(T.trak,f(e),m(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),r(T.trex,t)},$=function(e,t){var n=0,r=0,i=0,s=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,n|r|i|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},z=function(e,t){var n,i,s,o,a,l;for(t+=20+16*(o=e.samples||[]).length,s=$(o,t),(i=new Uint8Array(s.length+16*o.length)).set(s),n=s.length,l=0;l<o.length;l++)a=o[l],i[n++]=(4278190080&a.duration)>>>24,i[n++]=(16711680&a.duration)>>>16,i[n++]=(65280&a.duration)>>>8,i[n++]=255&a.duration,i[n++]=(4278190080&a.size)>>>24,i[n++]=(16711680&a.size)>>>16,i[n++]=(65280&a.size)>>>8,i[n++]=255&a.size,i[n++]=a.flags.isLeading<<2|a.flags.dependsOn,i[n++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,i[n++]=61440&a.flags.degradationPriority,i[n++]=15&a.flags.degradationPriority,i[n++]=(4278190080&a.compositionTimeOffset)>>>24,i[n++]=(16711680&a.compositionTimeOffset)>>>16,i[n++]=(65280&a.compositionTimeOffset)>>>8,i[n++]=255&a.compositionTimeOffset;return r(T.trun,i)},F=function(e,t){var n,i,s,o,a,l;for(t+=20+8*(o=e.samples||[]).length,s=$(o,t),(n=new Uint8Array(s.length+8*o.length)).set(s),i=s.length,l=0;l<o.length;l++)a=o[l],n[i++]=(4278190080&a.duration)>>>24,n[i++]=(16711680&a.duration)>>>16,n[i++]=(65280&a.duration)>>>8,n[i++]=255&a.duration,n[i++]=(4278190080&a.size)>>>24,n[i++]=(16711680&a.size)>>>16,n[i++]=(65280&a.size)>>>8,n[i++]=255&a.size;return r(T.trun,n)},k=function(e,t){return"audio"===e.type?F(e,t):z(e,t)};var G,K,J,X,Y,Q,Z,ee,te={ftyp:o=function(){return r(T.ftyp,x,E,x,C)},mdat:function(e){return r(T.mdat,e)},moof:c,moov:u,initSegment:function(e){var t,n=o(),r=u(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}},ne=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},re={groupNalsIntoFrames:function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i},groupFramesIntoGops:function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var n,r,i,s,o,a=t||0,l=[];for(n=0;n<e.length;n++)for(s=e[n],r=0;r<s.length;r++)o=s[r],a+=(i=ne(o,a)).size,l.push(i);return l},concatenateNalData:function(e){var t,n,r,i,s,o,a=0,l=e.byteLength,c=e.nalCount,u=new Uint8Array(l+4*c),d=new DataView(u.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(s=i[n],r=0;r<s.length;r++)o=s[r],d.setUint32(a,o.data.byteLength),a+=4,u.set(o.data,a),a+=o.data.byteLength;return u},generateSampleTableForFrame:function(e,t){var n,r=[];return n=ne(e,t||0),r.push(n),r},concatenateNalDataForFrame:function(e){var t,n,r=0,i=e.byteLength,s=e.length,o=new Uint8Array(i+4*s),a=new DataView(o.buffer);for(t=0;t<e.length;t++)n=e[t],a.setUint32(r,n.data.byteLength),r+=4,o.set(n.data,r),r+=n.data.byteLength;return o}},ie=[33,16,5,32,164,27],se=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],oe=function(e){for(var t=[];e--;)t.push(0);return t},ae=9e4;Q=function(e,t){return K(Y(e,t))},Z=function(e,t){return J(X(e),t)},ee=function(e,t,n){return X(n?e:e-t)};var le={ONE_SECOND_IN_TS:ae,secondsToVideoTs:K=function(e){return e*ae},secondsToAudioTs:J=function(e,t){return e*t},videoTsToSeconds:X=function(e){return e/ae},audioTsToSeconds:Y=function(e,t){return e/t},audioTsToVideoTs:Q,videoTsToAudioTs:Z,metadataTsToSeconds:ee},ce=le,ue={prefixWithSilence:function(e,t,n,r){var i,s,o,a,l,c=0,u=0,d=0;if(t.length&&(i=ce.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(ce.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&r&&(c=i-Math.max(n,r),d=(u=Math.floor(c/s))*s),!(u<1||d>ce.ONE_SECOND_IN_TS/2))){for((o=function(){if(!G){var e={96e3:[ie,[227,64],oe(154),[56]],88200:[ie,[231],oe(170),[56]],64e3:[ie,[248,192],oe(240),[56]],48e3:[ie,[255,192],oe(268),[55,148,128],oe(54),[112]],44100:[ie,[255,192],oe(268),[55,163,128],oe(84),[112]],32e3:[ie,[255,192],oe(268),[55,234],oe(226),[112]],24e3:[ie,[255,192],oe(268),[55,255,128],oe(268),[111,112],oe(126),[224]],16e3:[ie,[255,192],oe(268),[55,255,128],oe(268),[111,255],oe(269),[223,108],oe(195),[1,192]],12e3:[se,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,253,128],oe(259),[56]],11025:[se,oe(268),[3,127,248],oe(268),[6,255,240],oe(268),[13,255,224],oe(268),[27,255,192],oe(268),[55,175,128],oe(108),[112]],8e3:[se,oe(268),[3,121,16],oe(47),[7]]};t=e,G=Object.keys(t).reduce(function(e,n){return e[n]=new Uint8Array(t[n].reduce(function(e,t){return e.concat(t)},[])),e},{})}var t;return G}()[e.samplerate])||(o=t[0].data),a=0;a<u;a++)l=t[0],t.splice(0,0,{data:o,dts:l.dts-s,pts:l.pts-s});return e.baseMediaDecodeTime-=Math.floor(ce.videoTsToAudioTs(d,e.samplerate)),d}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},generateSampleTable:function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},concatenateFrameData:function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}},de=le.ONE_SECOND_IN_TS,he={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/de,n=Math.floor(n)),n},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}},pe={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,r,i,s,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)s={type:3&t[2+(i=3*n)],pts:e},4&t[i+2]&&(s.ccData=t[i+3]<<8|t[i+4],o.push(s));return o},discardEmulationPreventionBytes:function(e){for(var t,n,r=e.byteLength,i=[],s=1;s<r-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(s=0;s<t;o++,s++)o===i[0]&&(o++,i.shift()),n[s]=e[o];return n},USER_DATA_REGISTERED_ITU_T_T35:4},fe=q,me=pe,ge=function(e){e=e||{},ge.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ee(0,0),new Ee(0,1),new Ee(1,0),new Ee(1,1)],this.parse708captions_&&(this.cc708Stream_=new we({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ge.prototype=new fe,ge.prototype.push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=me.parseSei(e.escapedRBSP)).payload&&t.payloadType===me.USER_DATA_REGISTERED_ITU_T_T35&&(n=me.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=me.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ge.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},ge.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ge.prototype.flush=function(){return this.flushStream("flush")},ge.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ge.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},ge.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ge.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ge.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ge.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ge.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ye={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ve=function(e){return 32<=e&&e<=127||160<=e&&e<=255},be=function(e){this.windowNum=e,this.reset()};be.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},be.prototype.getText=function(){return this.rows.join("\n")},be.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},be.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},be.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},be.prototype.addText=function(e){this.rows[this.rowIdx]+=e},be.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var _e=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new be(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};_e.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new be(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},_e.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},_e.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var we=function(e){e=e||{},we.prototype.init.call(this);var t,n=this,r=e.captionServices||{},i={};Object.keys(r).forEach(e=>{t=r[e],/^SERVICE/.test(e)&&(i[e]=t.encoding)}),this.serviceEncodings=i,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(n.new708Packet(),n.add708Bytes(e)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e))}};we.prototype=new fe,we.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},we.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,r=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(r)},we.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,r=null,i=0,s=t[i++];for(e.seq=s>>6,e.sizeCode=63&s;i<t.length;i++)r=31&(s=t[i++]),7==(n=s>>5)&&r>0&&(n=s=t[i++]),this.pushServiceBlock(n,i,r),r>0&&(i+=r-1)},we.prototype.pushServiceBlock=function(e,t,n){var r,i=t,s=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,i));i<t+n&&i<s.length;i++)r=s[i],ve(r)?i=this.handleText(i,o):24===r?i=this.multiByteCharacter(i,o):16===r?i=this.extendedCommands(i,o):128<=r&&r<=135?i=this.setCurrentWindow(i,o):152<=r&&r<=159?i=this.defineWindow(i,o):136===r?i=this.clearWindows(i,o):140===r?i=this.deleteWindows(i,o):137===r?i=this.displayWindows(i,o):138===r?i=this.hideWindows(i,o):139===r?i=this.toggleWindows(i,o):151===r?i=this.setWindowAttributes(i,o):144===r?i=this.setPenAttributes(i,o):145===r?i=this.setPenColor(i,o):146===r?i=this.setPenLocation(i,o):143===r?o=this.reset(i,o):8===r?o.currentWindow.backspace():12===r?o.currentWindow.clearText():13===r?o.currentWindow.pendingNewLine=!0:14===r?o.currentWindow.clearText():141===r&&i++},we.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return ve(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},we.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},we.prototype.initService=function(e,t){var n,r,i=this;return(n="SERVICE"+e)in this.serviceEncodings&&(r=this.serviceEncodings[n]),this.services[e]=new _e(e,r,i),this.services[e].init(this.getPts(t),function(t){i.flushDisplayed(t,i.services[e])}),this.services[e]},we.prototype.handleText=function(e,t,n){var r,i,s,o,a=n&&n.isExtended,l=n&&n.isMultiByte,c=this.current708Packet.data,u=a?4096:0,d=c[e],h=c[e+1],p=t.currentWindow;if(l?(i=[d,h],e++):i=[d],t.textDecoder_&&!a)r=t.textDecoder_.decode(new Uint8Array(i));else if(l){const e=i.map(e=>("0"+(255&e).toString(16)).slice(-2)).join("");r=String.fromCharCode(parseInt(e,16))}else o=ye[s=u|d]||s,r=4096&s&&s===o?"":String.fromCharCode(o);return p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(e)),p.pendingNewLine=!1,p.addText(r),e},we.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,r=n[e+1],i=n[e+2];return ve(r)&&ve(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},we.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},we.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,r=n[e],i=7&r;t.setCurrentWindow(i);var s=t.currentWindow;return r=n[++e],s.visible=(32&r)>>5,s.rowLock=(16&r)>>4,s.columnLock=(8&r)>>3,s.priority=7&r,r=n[++e],s.relativePositioning=(128&r)>>7,s.anchorVertical=127&r,r=n[++e],s.anchorHorizontal=r,r=n[++e],s.anchorPoint=(240&r)>>4,s.rowCount=15&r,r=n[++e],s.columnCount=63&r,r=n[++e],s.windowStyle=(56&r)>>3,s.penStyle=7&r,s.virtualRowCount=s.rowCount+1,e},we.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.winAttr;return r=n[++e],i.fillOpacity=(192&r)>>6,i.fillRed=(48&r)>>4,i.fillGreen=(12&r)>>2,i.fillBlue=3&r,r=n[++e],i.borderType=(192&r)>>6,i.borderRed=(48&r)>>4,i.borderGreen=(12&r)>>2,i.borderBlue=3&r,r=n[++e],i.borderType+=(128&r)>>5,i.wordWrap=(64&r)>>6,i.printDirection=(48&r)>>4,i.scrollDirection=(12&r)>>2,i.justify=3&r,r=n[++e],i.effectSpeed=(240&r)>>4,i.effectDirection=(12&r)>>2,i.displayEffect=3&r,e},we.prototype.flushDisplayed=function(e,t){for(var n=[],r=0;r<8;r++)t.windows[r].visible&&!t.windows[r].isEmpty()&&n.push(t.windows[r].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},we.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},we.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=1);return e},we.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=0);return e},we.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible^=1);return e},we.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].clearText();return e},we.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].reset();return e},we.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penAttr;return r=n[++e],i.textTag=(240&r)>>4,i.offset=(12&r)>>2,i.penSize=3&r,r=n[++e],i.italics=(128&r)>>7,i.underline=(64&r)>>6,i.edgeType=(56&r)>>3,i.fontStyle=7&r,e},we.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penColor;return r=n[++e],i.fgOpacity=(192&r)>>6,i.fgRed=(48&r)>>4,i.fgGreen=(12&r)>>2,i.fgBlue=3&r,r=n[++e],i.bgOpacity=(192&r)>>6,i.bgRed=(48&r)>>4,i.bgGreen=(12&r)>>2,i.bgBlue=3&r,r=n[++e],i.edgeRed=(48&r)>>4,i.edgeGreen=(12&r)>>2,i.edgeBlue=3&r,e},we.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,r=n[++e],i.row=15&r,r=n[++e],i.column=63&r,e},we.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ke=function(e){return null===e?"":(e=Se[e]||e,String.fromCharCode(e))},Te=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],xe=function(){for(var e=[],t=15;t--;)e.push({text:"",indent:0,offset:0});return e},Ee=function(e,t){Ee.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,s;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=xe();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=xe();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=xe()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))s=ke((r=(3&r)<<8)|i),this[this.mode_](e.pts,s),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),s=ke((r=(3&r)<<8)|i),this[this.mode_](e.pts,s),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14&~i||this.addFormatting(e.pts,["i"]),1&~i||this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i)){const e=3&i;this.nonDisplayed_[this.row_].offset=e,this.column_+=e}else if(this.isPAC(r,i)){var o=Te.indexOf(7968&t);if("rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&o>=0&&o<=14&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),!(16&~t)){const e=(14&t)>>1;this.column_=4*e,this.nonDisplayed_[this.row_].indent+=e}this.isColorPAC(i)&&(14&~i||this.addFormatting(e.pts,["i"]))}else this.isNormalChar(r)&&(0===i&&(i=null),s=ke(r),s+=ke(i),this[this.mode_](e.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};Ee.prototype=new fe,Ee.prototype.flushDisplayed=function(e){const t=e=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."})},n=[];this.displayed_.forEach((e,r)=>{if(e&&e.text&&e.text.length){try{e.text=e.text.trim()}catch(e){t(r)}e.text.length&&n.push({text:e.text,line:r+1,position:10+Math.min(70,10*e.indent)+2.5*e.offset})}else null==e&&t(r)}),n.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,content:n,stream:this.name_})},Ee.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=xe(),this.nonDisplayed_=xe(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ee.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ee.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ee.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ee.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ee.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ee.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ee.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ee.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ee.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=xe(),this.displayed_=xe()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]={text:"",indent:0,offset:0};void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ee.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},Ee.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Ee.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_].text;n+=t,this.nonDisplayed_[this.row_].text=n},Ee.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_].text;n+=t,this.displayed_[this.row_].text=n},Ee.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]={text:"",indent:0,offset:0};for(e=this.row_+1;e<15;e++)this.displayed_[e]={text:"",indent:0,offset:0};for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Ee.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_].text;n+=t,this.displayed_[this.row_].text=n};var Ce={CaptionStream:ge,Cea608Stream:Ee,Cea708Stream:we},Ae={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Oe=q,Me="shared",Ie=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},De=function(e){var t,n;De.prototype.init.call(this),this.type_=e||Me,this.push=function(e){"metadata"!==e.type?this.type_!==Me&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Ie(e.dts,n),e.pts=Ie(e.pts,n),t=e.dts,this.trigger("data",e)):this.trigger("data",e)},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};De.prototype=new Oe;var je,Pe={TimestampRolloverStream:De,handleRollover:Ie},Le=(e,t,n)=>{if(!e)return-1;for(var r=n;r<e.length;r++)if(e[r]===t)return r;return-1},Ne=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Re=function(e,t,n){return decodeURIComponent(Ne(e,t,n))},Ue=function(e,t,n){return unescape(Ne(e,t,n))},Be=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Fe={APIC:function(e){var t,n,r=1;3===e.data[0]&&((t=Le(e.data,0,r))<0||(e.mimeType=Ue(e.data,r,t),r=t+1,e.pictureType=e.data[r],r++,(n=Le(e.data,0,r))<0||(e.description=Re(e.data,r,n),r=n+1,"--\x3e"===e.mimeType?e.url=Ue(e.data,r,e.data.length):e.pictureData=e.data.subarray(r,e.data.length))))},"T*":function(e){3===e.data[0]&&(e.value=Re(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;3===e.data[0]&&-1!==(t=Le(e.data,0,1))&&(e.description=Re(e.data,1,t),e.value=Re(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value)},"W*":function(e){e.url=Ue(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;3===e.data[0]&&-1!==(t=Le(e.data,0,1))&&(e.description=Re(e.data,1,t),e.url=Ue(e.data,t+1,e.data.length).replace(/\0.*$/,""))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Ue(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}},ze={parseId3Frames:function(e){var t,n=10,r=0,i=[];if(!(e.length<10||e[0]!=="I".charCodeAt(0)||e[1]!=="D".charCodeAt(0)||e[2]!=="3".charCodeAt(0))){r=Be(e.subarray(6,10)),r+=10,64&e[5]&&(n+=4,n+=Be(e.subarray(10,14)),r-=Be(e.subarray(16,20)));do{if((t=Be(e.subarray(n+4,n+8)))<1)break;var s={id:String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]),data:e.subarray(n+10,n+t+10)};s.key=s.id,Fe[s.id]?Fe[s.id](s):"T"===s.id[0]?Fe["T*"](s):"W"===s.id[0]&&Fe["W*"](s),i.push(s),n+=10,n+=t}while(n<r);return i}},parseSyncSafeInteger:Be,frameParsers:Fe},$e=Ae,qe=ze;(je=function(e){var t,n={descriptor:e&&e.descriptor},r=0,i=[],s=0;if(je.prototype.init.call(this),this.dispatchType=$e.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,a,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),s+=e.data.byteLength,1===i.length&&(r=qe.parseSyncSafeInteger(e.data.subarray(6,10)),r+=10),!(s<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},l=0;l<r;)t.data.set(i[0].data.subarray(0,r-l),l),l+=i[0].data.byteLength,s-=i[0].data.byteLength,i.shift();n=10,64&t.data[5]&&(n+=4,n+=qe.parseSyncSafeInteger(t.data.subarray(10,14)),r-=qe.parseSyncSafeInteger(t.data.subarray(16,20)));do{if((o=qe.parseSyncSafeInteger(t.data.subarray(n+4,n+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((a={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=a.id,qe.frameParsers[a.id]?qe.frameParsers[a.id](a):"T"===a.id[0]?qe.frameParsers["T*"](a):"W"===a.id[0]&&qe.frameParsers["W*"](a),"com.apple.streaming.transportStreamTimestamp"===a.owner){var c=a.data,u=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;u*=4,u+=3&c[7],a.timeStamp=u,void 0===t.pts&&void 0===t.dts&&(t.pts=a.timeStamp,t.dts=a.timeStamp),this.trigger("timestamp",a)}t.frames.push(a),n+=10,n+=o}while(n<r);this.trigger("data",t)}}}).prototype=new q;var He,Ve,We,Ge=je,Ke=q,Je=Ce,Xe=Ae,Ye=Pe.TimestampRolloverStream,Qe=188;(He=function(){var e=new Uint8Array(Qe),t=0;He.prototype.init.call(this),this.push=function(n){var r,i=0,s=Qe;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;s<r.byteLength;)71!==r[i]||71!==r[s]?(i++,s++):(this.trigger("data",r.subarray(i,s)),i+=Qe,s+=Qe);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===Qe&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new Ke,(Ve=function(){var e,t,n,r;Ve.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var s=e[i],o=(31&e[i+1])<<8|e[i+2];s===Xe.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:s===Xe.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:s===Xe.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=s),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Xe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Xe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new Ke,Ve.STREAM_TYPES={h264:27,adts:15},We=function(){var e,t=this,n=!1,r={data:[],size:0},i={data:[],size:0},s={data:[],size:0},o=function(e,n,r){var i,s,o=new Uint8Array(e.size),a={type:n},l=0,c=0;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,l=0;l<e.data.length;l++)s=e.data[l],o.set(s.data,c),c+=s.data.byteLength;!function(e,t){var n;const r=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===r&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=!!(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))}(o,a),i="video"===n||a.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",a)}};We.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case Xe.H264_STREAM_TYPE:e=r,t="video";break;case Xe.ADTS_STREAM_TYPE:e=i,t="audio";break;case Xe.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=a.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",r)}})[a.type]()},this.reset=function(){r.size=0,r.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(r,"video"),o(i,"audio"),o(s,"timed-metadata")},this.flush=function(){if(!n&&e){var r={type:"metadata",tracks:[]};null!==e.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}n=!1,this.flushStreams_(),this.trigger("done")}},We.prototype=new Ke;var Ze={PAT_PID:0,MP2T_PACKET_LENGTH:Qe,TransportPacketStream:He,TransportParseStream:Ve,ElementaryStream:We,TimestampRolloverStream:Ye,CaptionStream:Je.CaptionStream,Cea608Stream:Je.Cea608Stream,Cea708Stream:Je.Cea708Stream,MetadataStream:Ge};for(var et in Xe)Xe.hasOwnProperty(et)&&(Ze[et]=Xe[et]);var tt,nt=Ze,rt=le.ONE_SECOND_IN_TS,it=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(tt=function(e){var t,n=0;tt.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e} to ${t} in frame ${n} outside syncword`})},this.push=function(r){var i,s,o,a,l,c=0;if(e||(n=0),"audio"===r.type){var u;for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+r.data.byteLength)).set(o),t.set(r.data,o.byteLength)):t=r.data;c+7<t.length;)if(255===t[c]&&240==(246&t[c+1])){if("number"==typeof u&&(this.skipWarn_(u,c),u=null),s=2*(1&~t[c+1]),i=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,l=(a=1024*(1+(3&t[c+6])))*rt/it[(60&t[c+2])>>>2],t.byteLength-c<i)break;this.trigger("data",{pts:r.pts+n*l,dts:r.dts+n*l,sampleCount:a,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:it[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+s,c+i)}),n++,c+=i}else"number"!=typeof u&&(u=c),c++;"number"==typeof u&&(this.skipWarn_(u,c),u=null),t=t.subarray(c)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new q;var st,ot,at,lt=tt,ct=q,ut=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,s=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");s.set(e.subarray(i,i+o)),n=new DataView(s.buffer).getUint32(0),r=8*o,t-=o},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),s=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?s<<i|this.readBits(i):s},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(n&2147483648>>>e)return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(ot=function(){var e,t,n=0;ot.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var s=t.byteLength;n<s-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<s;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<s);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new ct,at={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},st=function(){var e,t,n,r,i,s,o,a=new ot;st.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,a.push(e))},a.on("data",function(o){var a={trackId:t,pts:n,dts:r,data:o,nalUnitTypeCode:31&o[0]};switch(a.nalUnitTypeCode){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=i(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=i(o.subarray(1)),a.config=s(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",a)}),a.on("done",function(){e.trigger("done")}),a.on("partialdone",function(){e.trigger("partialdone")}),a.on("reset",function(){e.trigger("reset")}),a.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},o=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],s=1;s<r-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(s=0;s<t;o++,s++)o===i[0]&&(o++,i.shift()),n[s]=e[o];return n},s=function(e){var t,n,r,i,s,a,l,c,u,d,h,p,f=0,m=0,g=0,y=0,v=[1,1];if(n=(t=new ut(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),at[n]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==s?8:12,p=0;p<h;p++)t.readBoolean()&&o(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),p=0;p<l;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(c+1)-2*f-2*m,height:(2-d)*(u+1)*16-2*g-2*y,sarRatio:v}}},st.prototype=new ct;var dt,ht={H264Stream:st,NalByteStream:ot},pt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ft=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},mt=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=ft(e,t),mt(e,t))},gt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},yt=function(e,t,n){return unescape(function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(e,t,n))},vt={isLikelyAacData:function(e){var t=mt(e,0);return e.length>=t+2&&!(255&~e[t])&&!(240&~e[t+1])&&16==(22&e[t+1])},parseId3TagSize:ft,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&!(240&~e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return pt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=gt(e.subarray(10,14)));do{if((n=gt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){if("com.apple.streaming.transportStreamTimestamp"===yt(r,0,i)){var s=r.subarray(i+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(o*=4)+(3&s[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}},bt=vt;(dt=function(){var e=new Uint8Array,t=0;dt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,s,o,a=0,l=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255&~e[l]||240&~e[l+1])l++;else{if(e.length-l<7)break;if(l+(a=bt.parseAdtsSize(e,l))>e.length)break;s={type:"audio",data:e.subarray(l,l+a),pts:t,dts:t},this.trigger("data",s),l+=a}else{if(e.length-l<10)break;if(l+(a=bt.parseId3TagSize(e,l))>e.length)break;i={type:"timed-metadata",data:e.subarray(l,l+a)},this.trigger("data",i),l+=a}r=e.length-l,e=r>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new q;var _t,wt,St,kt,Tt=q,xt=te,Et=re,Ct=ue,At=he,Ot=nt,Mt=le,It=lt,Dt=ht.H264Stream,jt=dt,Pt=vt.isLikelyAacData,Lt=le.ONE_SECOND_IN_TS,Nt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Rt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ut=function(e,t){t.stream=e,this.trigger("log",t)},Bt=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];"headOfPipeline"!==i&&t[i].on&&t[i].on("log",Ut.bind(e,i))}},Ft=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},zt=function(e,t,n,r,i,s){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:s,baseMediaDecodeTime:e}};wt=function(e,t){var n,r=[],i=0,s=0,o=1/0;n=(t=t||{}).firstSequenceNumber||0,wt.prototype.init.call(this),this.push=function(t){At.collectDtsInfo(e,t),e&&Nt.forEach(function(n){e[n]=t[n]}),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var a,l,c,u,d,h,p;0!==r.length?(a=Ct.trimAdtsFramesByEarliestDts(r,e,i),e.baseMediaDecodeTime=At.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=Ct.prefixWithSilence(e,a,s,o),e.samples=Ct.generateSampleTable(a),c=xt.mdat(Ct.concatenateFrameData(a)),r=[],l=xt.moof(n,[e]),u=new Uint8Array(l.byteLength+c.byteLength),n++,u.set(l),u.set(c,l.byteLength),At.clearDtsInfo(e),d=Math.ceil(1024*Lt/e.samplerate),a.length&&(h=a.length*d,this.trigger("segmentTimingInfo",zt(Mt.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),a[0].dts,a[0].pts,a[0].dts+h,a[0].pts+h,p||0)),this.trigger("timingInfo",{start:a[0].pts,end:a[0].pts+h})),this.trigger("data",{track:e,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){At.clearDtsInfo(e),r=[],this.trigger("reset")}},wt.prototype=new Tt,_t=function(e,t){var n,r,i,s=[],o=[];n=(t=t||{}).firstSequenceNumber||0,_t.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){At.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],Rt.forEach(function(t){e[t]=r[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var r,i,a,l,c,u,d,h,p=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=Et.groupNalsIntoFrames(s),(a=Et.groupFramesIntoGops(r))[0][0].keyFrame||((i=this.getGopForFusion_(s[0],e))?(p=i.duration,a.unshift(i),a.byteLength+=i.byteLength,a.nalCount+=i.nalCount,a.pts=i.pts,a.dts=i.dts,a.duration+=i.duration):a=Et.extendFirstKeyFrame(a)),o.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");At.clearDtsInfo(e),a=f}At.collectDtsInfo(e,a),e.samples=Et.generateSampleTable(a),c=xt.mdat(Et.concatenateNalData(a)),e.baseMediaDecodeTime=At.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),d=a[0],h=a[a.length-1],this.trigger("segmentTimingInfo",zt(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:a[0].pts,end:a[a.length-1].pts+a[a.length-1].duration}),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=xt.moof(n,[e]),u=new Uint8Array(l.byteLength+c.byteLength),n++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:e,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){At.clearDtsInfo(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,s,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)i=(s=this.gopCache_[o]).gop,e.pps&&Ft(e.pps[0],s.pps[0])&&e.sps&&Ft(e.sps[0],s.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||a>n)&&(r=s,a=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,s,a,l,c;for(s=e.byteLength,a=e.nalCount,l=e.duration,t=n=0;t<o.length&&n<e.length&&(r=o[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,s-=i.byteLength,a-=i.nalCount,l-=i.duration);return 0===n?e:n===e.length?null:((c=e.slice(n)).byteLength=s,c.duration=l,c.nalCount=a,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,n,r,i,s,a,l;for(t=o.length-1,n=e.length-1,s=null,a=!1;t>=0&&n>=0;){if(r=o[t],i=e[n],r.pts===i.pts){a=!0;break}r.pts>i.pts?t--:(t===o.length-1&&(s=n),n--)}if(!a&&null===s)return null;if(0===(l=a?n:s))return e;var c=e.slice(l),u=c.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){o=e}},_t.prototype=new Tt,kt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,kt.prototype.init.call(this),this.push=function(e){return e.content||e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},kt.prototype=new Tt,kt.prototype.flush=function(e){var t,n,r,i,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Rt.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Nt.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=xt.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],s),s+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=Mt.metadataTsToSeconds(t.startPts,a,this.keepOriginalTimestamps),t.endTime=Mt.metadataTsToSeconds(t.endPts,a,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=Mt.metadataTsToSeconds(n.pts,a,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),i=0;i<o.captions.length;i++)t=o.captions[i],this.trigger("caption",t);for(i=0;i<o.metadata.length;i++)n=o.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},kt.prototype.setRemux=function(e){this.remuxTracks=e},(St=function(e){var t,n,r=this,i=!0;St.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new Ot.MetadataStream,i.aacStream=new jt,i.audioTimestampRolloverStream=new Ot.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Ot.TimestampRolloverStream("timed-metadata"),i.adtsStream=new It,i.coalesceStream=new kt(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",function(e){i.aacStream.setTimestamp(e.timeStamp)}),i.aacStream.on("data",function(s){"timed-metadata"!==s.type&&"audio"!==s.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new wt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),Bt(this,i)},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Ot.MetadataStream,i.packetStream=new Ot.TransportPacketStream,i.parseStream=new Ot.TransportParseStream,i.elementaryStream=new Ot.ElementaryStream,i.timestampRolloverStream=new Ot.TimestampRolloverStream,i.adtsStream=new It,i.h264Stream=new Dt,i.captionStream=new Ot.CaptionStream(e),i.coalesceStream=new kt(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(s){var o;if("metadata"===s.type){for(o=s.tracks.length;o--;)t||"video"!==s.tracks[o].type?n||"audio"!==s.tracks[o].type||((n=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new _t(t,e),i.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))}),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new wt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)}),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),Bt(this,i)},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,At.clearDtsInfo(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,At.clearDtsInfo(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(i){var t=Pt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Tt;var $t,qt,Ht={Transmuxer:St,VideoSegmentStream:_t,AudioSegmentStream:wt,AUDIO_PROPERTIES:Nt,VIDEO_PROPERTIES:Rt,generateSegmentTimingInfo:zt},Vt=function(e){return e>>>0},Wt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},Gt=Vt,Kt=Wt,Jt=function(e,t){var n,r,i,s,o,a=[];if(!t.length)return null;for(n=0;n<e.byteLength;)r=Gt(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),i=Kt(e.subarray(n+4,n+8)),s=r>1?n+r:e.byteLength,i===t[0]&&(1===t.length?a.push(e.subarray(n+8,s)):(o=Jt(e.subarray(n+8,s),t.slice(1))).length&&(a=a.concat(o))),n=s;return a},Xt=Jt,Yt=Vt,Qt=V.getUint64,Zt=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Qt(e.subarray(4)):t.baseMediaDecodeTime=Yt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},en=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],s=2&r.flags[2],o=8&r.flags[2],a=16&r.flags[2],l=32&r.flags[2],c=65536&r.flags[0],u=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),s&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(r.defaultSampleDuration=n.getUint32(t),t+=4),a&&(r.defaultSampleSize=n.getUint32(t),t+=4),l&&(r.defaultSampleFlags=n.getUint32(t)),c&&(r.durationIsEmpty=!0),!i&&u&&(r.baseDataOffsetIsMoof=!0),r},tn=V.getUint64,nn=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},rn=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],s=4&n.flags[2],o=1&n.flags[1],a=2&n.flags[1],l=4&n.flags[1],c=8&n.flags[1],u=r.getUint32(4),d=8;for(i&&(n.dataOffset=r.getInt32(d),d+=4),s&&u&&(t={flags:nn(e.subarray(d,d+4))},d+=4,o&&(t.duration=r.getUint32(d),d+=4),a&&(t.size=r.getUint32(d),d+=4),c&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t),u--);u--;)t={},o&&(t.duration=r.getUint32(d),d+=4),a&&(t.size=r.getUint32(d),d+=4),l&&(t.flags=nn(e.subarray(d,d+4)),d+=4),c&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t);return n},sn=V.getUint64,on=function(e){return new Date(1e3*e-20828448e5)},an=Wt,ln=function(e){var t,n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=n)if(n=r.getUint32(t),t+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},cn={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:$t(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,r,i,s=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},a=31&e[5];for(r=6,i=0;i<a;i++)n=s.getUint16(r),r+=2,o.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;i<t;i++)n=s.getUint16(r),r+=2,o.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},edts:function(e){return{boxes:$t(e)}},elst:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),edits:[]},i=n.getUint32(4);for(t=8;i;i--)0===r.version?(r.edits.push({segmentDuration:n.getUint32(t),mediaTime:n.getInt32(t+4),mediaRate:n.getUint16(t+8)+n.getUint16(t+10)/65536}),t+=12):(r.edits.push({segmentDuration:sn(e.subarray(t)),mediaTime:sn(e.subarray(t+8)),mediaRate:n.getUint16(t+16)+n.getUint16(t+18)/65536}),t+=20);return r},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:an(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(an(e.subarray(r,r+4))),r+=4;return n},dinf:function(e){return{boxes:$t(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:$t(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:an(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:ln(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(r+=4,i.creationTime=on(n.getUint32(r)),r+=8,i.modificationTime=on(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=on(n.getUint32(r)),r+=4,i.modificationTime=on(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,t=n.getUint16(r),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:$t(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:$t(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=$t(e.subarray(28))[0]),n},moof:function(e){return{boxes:$t(e)}},moov:function(e){return{boxes:$t(e)}},mvex:function(e){return{boxes:$t(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=on(t.getUint32(n)),n+=8,r.modificationTime=on(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=8,r.duration=t.getUint32(n)):(r.creationTime=on(t.getUint32(n)),n+=4,r.modificationTime=on(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=4,r.duration=t.getUint32(n)),n+=4,r.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=t.getUint32(n),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=tn(e.subarray(r)),n.firstOffset=tn(e.subarray(r+8)),r+=16),r+=2;var i=t.getUint16(r);for(r+=2;i>0;r+=12,i--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:$t(e)}},ctts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),compositionOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.compositionOffsets.push({sampleCount:n.getUint32(t),sampleOffset:n[0===r.version?"getUint32":"getInt32"](t+4)});return r},stss:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),syncSamples:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.syncSamples.push(n.getUint32(t));return r},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.chunkOffsets.push(n.getUint32(t));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:$t(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},styp:function(e){return cn.ftyp(e)},tfdt:Zt,tfhd:en,tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=on(t.getUint32(n)),n+=8,r.modificationTime=on(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=8,r.duration=t.getUint32(n)):(r.creationTime=on(t.getUint32(n)),n+=4,r.modificationTime=on(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=4,r.duration=t.getUint32(n)),n+=4,n+=8,r.layer=t.getUint16(n),n+=2,r.alternateGroup=t.getUint16(n),n+=2,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=t.getUint16(n)+t.getUint16(n+2)/65536,n+=4,r.height=t.getUint16(n)+t.getUint16(n+2)/65536,r},traf:function(e){return{boxes:$t(e)}},trak:function(e){return{boxes:$t(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:rn,"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};$t=function(e){for(var t,n,r,i,s,o=0,a=[],l=new ArrayBuffer(e.length),c=new Uint8Array(l),u=0;u<e.length;++u)c[u]=e[u];for(t=new DataView(l);o<e.byteLength;)n=t.getUint32(o),r=an(e.subarray(o+4,o+8)),i=n>1?o+n:e.byteLength,(s=(cn[r]||function(e){return{data:e}})(e.subarray(o+8,i))).size=n,s.type=r,a.push(s),o=i;return a},qt=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(e,r){return n+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var r=n+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var s=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return s?1===s.length?r+"<"+s.join("").slice(1)+">":r+"<\n"+s.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+qt(e.boxes,t+1):"")}).join("\n")};var un,dn,hn,pn,fn,mn,gn,yn={inspect:$t,textify:qt,parseType:an,findBox:Xt,parseTraf:cn.traf,parseTfdt:cn.tfdt,parseHdlr:cn.hdlr,parseTfhd:cn.tfhd,parseTrun:cn.trun,parseSidx:cn.sidx},vn=function(e){for(var t=0,n=String.fromCharCode(e[t]),r="";"\0"!==n;)r+=n,t++,n=String.fromCharCode(e[t]);return r+n},bn=V.getUint64,_n=function(e){return void 0!==e||null!==e},wn={parseEmsgBox:function(e){var t,n,r,i,s,o,a,l=4,c=e[0];if(0===c)l+=(t=vn(e.subarray(l))).length,l+=(n=vn(e.subarray(l))).length,r=(u=new DataView(e.buffer)).getUint32(l),l+=4,s=u.getUint32(l),l+=4,o=u.getUint32(l),l+=4,a=u.getUint32(l),l+=4;else if(1===c){var u;r=(u=new DataView(e.buffer)).getUint32(l),l+=4,i=bn(e.subarray(l)),l+=8,o=u.getUint32(l),l+=4,a=u.getUint32(l),l+=4,l+=(t=vn(e.subarray(l))).length,l+=(n=vn(e.subarray(l))).length}var d={scheme_id_uri:t,value:n,timescale:r||1,presentation_time:i,presentation_time_delta:s,event_duration:o,id:a,message_data:new Uint8Array(e.subarray(l,e.byteLength))};return function(e,t){var n="\0"!==t.scheme_id_uri,r=0===e&&_n(t.presentation_time_delta)&&n,i=1===e&&_n(t.presentation_time)&&n;return!(e>1)&&r||i}(c,d)?d:void 0},scaleTime:function(e,t,n,r){return e||0===e?e/t:r+n/t}},Sn="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},kn=Vt,Tn=function(e){return("00"+e.toString(16)).slice(-2)},xn=Xt,En=Wt,Cn=wn,An=en,On=rn,Mn=Zt,In=V.getUint64,Dn=Sn,jn=ze.parseId3Frames;un=function(e){return xn(e,["moov","trak"]).reduce(function(e,t){var n,r,i,s,o;return(n=xn(t,["tkhd"])[0])?(r=n[0],s=kn(n[i=0===r?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]),(o=xn(t,["mdia","mdhd"])[0])?(i=0===(r=o[0])?12:20,e[s]=kn(o[i]<<24|o[i+1]<<16|o[i+2]<<8|o[i+3]),e):null):null},{})},dn=function(e,t){var n=xn(t,["moof","traf"]).reduce(function(t,n){var r,i=xn(n,["tfhd"])[0],s=kn(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),o=e[s]||9e4,a=xn(n,["tfdt"])[0],l=new DataView(a.buffer,a.byteOffset,a.byteLength);let c;return"bigint"==typeof(r=1===a[0]?In(a.subarray(4,12)):l.getUint32(4))?c=r/Dn.BigInt(o):"number"!=typeof r||isNaN(r)||(c=r/o),c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),c<t&&(t=c),t},1/0);return"bigint"==typeof n||isFinite(n)?n:0},hn=function(e,t){var n,r=xn(t,["moof","traf"]),i=0,s=0;if(r&&r.length){var o=xn(r[0],["tfhd"])[0],a=xn(r[0],["trun"])[0],l=xn(r[0],["tfdt"])[0];if(o&&(n=An(o).trackId),l&&(i=Mn(l).baseMediaDecodeTime),a){var c=On(a);c.samples&&c.samples.length&&(s=c.samples[0].compositionTimeOffset||0)}}var u=e[n]||9e4;"bigint"==typeof i&&(s=Dn.BigInt(s),u=Dn.BigInt(u));var d=(i+s)/u;return"bigint"==typeof d&&d<Number.MAX_SAFE_INTEGER&&(d=Number(d)),d},pn=function(e){var t=xn(e,["moov","trak"]),n=[];return t.forEach(function(e){var t=xn(e,["mdia","hdlr"]),r=xn(e,["tkhd"]);t.forEach(function(e,t){var i,s,o=En(e.subarray(8,12)),a=r[t];"vide"===o&&(s=0===(i=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),n.push(s))})}),n},mn=function(e){var t=0===e[0]?12:20;return kn(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},fn=function(e){var t=xn(e,["moov","trak"]),n=[];return t.forEach(function(e){var t,r,i={},s=xn(e,["tkhd"])[0];s&&(r=(t=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var o=xn(e,["mdia","hdlr"])[0];if(o){var a=En(o.subarray(8,12));i.type="vide"===a?"video":"soun"===a?"audio":a}var l=xn(e,["mdia","minf","stbl","stsd"])[0];if(l){var c=l.subarray(8);i.codec=En(c.subarray(4,8));var u,d=xn(c,[i.codec])[0];d&&(/^[asm]vc[1-9]$/i.test(i.codec)?(u=d.subarray(78),"avcC"===En(u.subarray(4,8))&&u.length>11?(i.codec+=".",i.codec+=Tn(u[9]),i.codec+=Tn(u[10]),i.codec+=Tn(u[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(u=d.subarray(28),"esds"===En(u.subarray(4,8))&&u.length>20&&0!==u[19]?(i.codec+="."+Tn(u[19]),i.codec+="."+Tn(u[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var h=xn(e,["mdia","mdhd"])[0];h&&(i.timescale=mn(h)),n.push(i)}),n},gn=function(e,t=0){return xn(e,["emsg"]).map(e=>{var n=Cn.parseEmsgBox(new Uint8Array(e)),r=jn(n.message_data);return{cueTime:Cn.scaleTime(n.presentation_time,n.timescale,n.presentation_time_delta,t),duration:Cn.scaleTime(n.event_duration,n.timescale),frames:r}})};var Pn={findBox:xn,parseType:En,timescale:un,startTime:dn,compositionStartTime:hn,videoTrackIds:pn,tracks:fn,getTimescaleFromMediaHeader:mn,getEmsgID3:gn};const{parseTrun:Ln}=yn,{findBox:Nn}=Pn;var Rn=Sn,Un={getMdatTrafPairs:function(e){var t=Nn(e,["moof","traf"]),n=Nn(e,["mdat"]),r=[];return n.forEach(function(e,n){var i=t[n];r.push({mdat:e,traf:i})}),r},parseSamples:function(e,t,n){var r=t,i=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,a=[];return e.forEach(function(e){var t=Ln(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=s),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof r?(e.pts=r+Rn.BigInt(e.compositionTimeOffset),r+=Rn.BigInt(e.duration)):(e.pts=r+e.compositionTimeOffset,r+=e.duration)}),a=a.concat(t)}),a}},Bn=pe.discardEmulationPreventionBytes,Fn=Ce.CaptionStream,zn=Xt,$n=Zt,qn=en,{getMdatTrafPairs:Hn,parseSamples:Vn}=Un,Wn=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},Gn=function(){var e,t,n,r,i,s,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new Fn,o=!0,s=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0}),e.on("log",function(e){i.logs.push(e)})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&r===t[n])},this.parse=function(e,s,o){var a;if(!this.isInitialized())return null;if(!s||!o)return null;if(this.isNewInit(s,o))n=s[0],r=o[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,s,o)}return a=function(e,t,n){if(null===t)return null;var r=function(e,t){var n={};return Hn(e).forEach(function(e){var r,i=e.mdat,s=e.traf,o=zn(s,["tfhd"]),a=qn(o[0]),l=a.trackId,c=zn(s,["tfdt"]),u=c.length>0?$n(c[0]).baseMediaDecodeTime:0,d=zn(s,["trun"]);t===l&&d.length>0&&(r=function(e,t,n){var r,i,s,o,a=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=s)if(s=a.getUint32(i),i+=4,!(s<=0))switch(31&e[i]){case 6:var c=e.subarray(i+1,i+1+s),u=Wn(i,t);if(r={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:Bn(c),trackId:n},u)r.pts=u.pts,r.dts=u.dts,o=u;else{if(!o){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+n+". See mux.js#223."});break}r.pts=o.pts,r.dts=o.dts}l.seiNals.push(r)}return l}(i,Vn(d,u,a),l),n[l]||(n[l]={seiNals:[],logs:[]}),n[l].seiNals=n[l].seiNals.concat(r.seiNals),n[l].logs=n[l].logs.concat(r.logs))}),n}(e,t)[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}}(e,n,r),a&&a.logs&&(i.logs=i.logs.concat(a.logs)),null!==a&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;s?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()};const{parseTfdt:Kn}=yn,Jn=Xt,{getTimescaleFromMediaHeader:Xn}=Pn,{parseSamples:Yn,getMdatTrafPairs:Qn}=Un;var Zn=function(){let e=9e4;this.init=function(t){const n=Jn(t,["moov","trak","mdia","mdhd"])[0];n&&(e=Xn(n))},this.parseSegment=function(t){const n=[],r=Qn(t);let i=0;return r.forEach(function(t){const r=t.mdat,s=t.traf,o=Jn(s,["tfdt"])[0],a=Jn(s,["tfhd"])[0],l=Jn(s,["trun"]);if(o){const e=Kn(o);i=e.baseMediaDecodeTime}if(l.length&&a){const t=Yn(l,i,a);let s=0;t.forEach(function(t){const i=new TextDecoder("utf-8"),o=r.slice(s,s+t.size);Jn(o,["vtte"])[0]||Jn(o,["vttc"]).forEach(function(r){const s=Jn(r,["payl"])[0],o=Jn(r,["sttg"])[0],a=t.pts/e,l=(t.pts+t.duration)/e;let c,u;if(s)try{c=i.decode(s)}catch(e){console.error(e)}if(o)try{u=i.decode(o)}catch(e){console.error(e)}t.duration&&c&&n.push({cueText:c,start:a,end:l,settings:u})}),s+=t.size})}}),n}},er=Ae,tr=function(e){var t=31&e[1];return(t<<=8)|e[2]},nr=function(e){return!!(64&e[1])},rr=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},ir=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},sr={parseType:function(e,t){var n=tr(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=nr(e),n=4+rr(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=nr(e),r=4+rr(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var s=12+((15&e[r+10])<<8|e[r+11]);s<i;){var o=r+s;t[(31&e[o+1])<<8|e[o+2]]=e[o],s+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:nr,parsePesType:function(e,t){switch(t[tr(e)]){case er.H264_STREAM_TYPE:return"video";case er.ADTS_STREAM_TYPE:return"audio";case er.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!nr(e))return null;var t=4+rr(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+rr(e),n=e.subarray(t),r=0,i=0,s=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===ir(31&n[i+3])&&(s=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===ir(31&n[i+3])&&(s=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===ir(31&n[i+3])&&(s=!0),s}},or=Ae,ar=Pe.handleRollover,lr={};lr.ts=sr,lr.aac=vt;var cr=le.ONE_SECOND_IN_TS,ur=188,dr=71,hr=function(e,t,n){for(var r,i,s,o,a=0,l=ur,c=!1;l<=e.byteLength;)if(e[a]!==dr||e[l]!==dr&&l!==e.byteLength)a++,l++;else{if(r=e.subarray(a,l),"pes"===lr.ts.parseType(r,t.pid)&&(i=lr.ts.parsePesType(r,t.table),s=lr.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&s&&(o=lr.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),c=!0)),c)break;a+=ur,l+=ur}for(a=(l=e.byteLength)-ur,c=!1;a>=0;)if(e[a]!==dr||e[l]!==dr&&l!==e.byteLength)a--,l--;else{if(r=e.subarray(a,l),"pes"===lr.ts.parseType(r,t.pid)&&(i=lr.ts.parsePesType(r,t.table),s=lr.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&s&&(o=lr.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),c=!0)),c)break;a-=ur,l-=ur}},pr=function(e,t,n){for(var r,i,s,o,a,l,c,u=0,d=ur,h=!1,p={data:[],size:0};d<e.byteLength;)if(e[u]!==dr||e[d]!==dr)u++,d++;else{if(r=e.subarray(u,d),"pes"===lr.ts.parseType(r,t.pid)&&(i=lr.ts.parsePesType(r,t.table),s=lr.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(s&&!h&&(o=lr.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),h=!0),!n.firstKeyFrame))){if(s&&0!==p.size){for(a=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),a.set(c,l),l+=c.byteLength;if(lr.ts.videoPacketContainsKeyFrame(a)){var f=lr.ts.parsePesTime(a);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(r),p.size+=r.byteLength}if(h&&n.firstKeyFrame)break;u+=ur,d+=ur}for(u=(d=e.byteLength)-ur,h=!1;u>=0;)if(e[u]!==dr||e[d]!==dr)u--,d--;else{if(r=e.subarray(u,d),"pes"===lr.ts.parseType(r,t.pid)&&(i=lr.ts.parsePesType(r,t.table),s=lr.ts.parsePayloadUnitStartIndicator(r),"video"===i&&s&&(o=lr.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),h=!0)),h)break;u-=ur,d-=ur}},fr=function(e,t){var n;return n=lr.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,s=null,o=0,a=0;e.length-a>=3;){switch(lr.aac.parseType(e,a)){case"timed-metadata":if(e.length-a<10){n=!0;break}if((o=lr.aac.parseId3TagSize(e,a))>e.length){n=!0;break}null===s&&(t=e.subarray(a,a+o),s=lr.aac.parseAacTimestamp(t)),a+=o;break;case"audio":if(e.length-a<7){n=!0;break}if((o=lr.aac.parseAdtsSize(e,a))>e.length){n=!0;break}null===i&&(t=e.subarray(a,a+o),i=lr.aac.parseSampleRate(t)),r++,a+=o;break;default:a++}if(n)return null}if(null===i||null===s)return null;var l=cr/i;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*r*l,pts:s+1024*r*l}]}}(e):function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=ur;i<e.byteLength;)if(e[r]!==dr||e[i]!==dr)r++,i++;else{switch(n=e.subarray(r,i),lr.ts.parseType(n,t.pid)){case"pat":t.pid=lr.ts.parsePat(n);break;case"pmt":var s=lr.ts.parsePmt(n);t.table=t.table||{},Object.keys(s).forEach(function(e){t.table[e]=s[e]})}r+=ur,i+=ur}}(e,t),t.table)if(t.table.hasOwnProperty(r))switch(t.table[r]){case or.H264_STREAM_TYPE:n.video=[],pr(e,t,n),0===n.video.length&&delete n.video;break;case or.ADTS_STREAM_TYPE:n.audio=[],hr(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=ar(e.dts,n),e.pts=ar(e.pts,n),e.dtsTime=e.dts/cr,e.ptsTime=e.pts/cr})}if(e.video&&e.video.length){var r=t;if((void 0===r||isNaN(r))&&(r=e.video[0].dts),e.video.forEach(function(e){e.dts=ar(e.dts,r),e.pts=ar(e.pts,r),e.dtsTime=e.dts/cr,e.ptsTime=e.pts/cr}),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=ar(i.dts,r),i.pts=ar(i.pts,r),i.dtsTime=i.dts/cr,i.ptsTime=i.pts/cr}}}(n,t),n):null};class mr{constructor(e,t){this.options=t||{},this.self=e,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ht.Transmuxer(this.options),function(e,t){t.on("data",function(t){const n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};const r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){const n={start:{decode:le.videoTsToSeconds(t.start.dts),presentation:le.videoTsToSeconds(t.start.pts)},end:{decode:le.videoTsToSeconds(t.end.dts),presentation:le.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:le.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})}),t.on("audioSegmentTimingInfo",function(t){const n={start:{decode:le.videoTsToSeconds(t.start.dts),presentation:le.videoTsToSeconds(t.start.pts)},end:{decode:le.videoTsToSeconds(t.end.dts),presentation:le.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:le.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:le.videoTsToSeconds(t.start),end:le.videoTsToSeconds(t.end)}})}),t.on("videoTimingInfo",function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:le.videoTsToSeconds(t.start),end:le.videoTsToSeconds(t.end)}})}),t.on("log",function(t){e.postMessage({action:"log",log:t})})}(this.self,this.transmuxer)}pushMp4Captions(e){this.captionParser||(this.captionParser=new Gn,this.captionParser.init());const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])}initMp4WebVttParser(e){this.webVttParser||(this.webVttParser=new Zn);const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.webVttParser.init(t)}getMp4WebVttText(e){this.webVttParser||(this.webVttParser=new Zn);const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.webVttParser.parseSegment(t);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:n||[],data:t.buffer},[t.buffer])}probeMp4StartTime({timescales:e,data:t}){const n=Pn.startTime(e,t);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:t},[t.buffer])}probeMp4Tracks({data:e}){const t=Pn.tracks(e);this.self.postMessage({action:"probeMp4Tracks",tracks:t,data:e},[e.buffer])}probeEmsgID3({data:e,offset:t}){const n=Pn.getEmsgID3(e,t);this.self.postMessage({action:"probeEmsgID3",id3Frames:n,emsgData:e},[e.buffer])}probeTs({data:e,baseStartTime:t}){const n="number"!=typeof t||isNaN(t)?void 0:t*le.ONE_SECOND_IN_TS,r=fr(e,n);let i=null;r&&(i={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1},i.hasVideo&&(i.videoStart=r.video[0].ptsTime),i.hasAudio&&(i.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:i,data:e},[e.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e){const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}reset(){this.transmuxer.reset()}setTimestampOffset(e){const t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(le.secondsToVideoTs(t)))}setAudioAppendStart(e){this.transmuxer.setAudioAppendStart(Math.ceil(le.secondsToVideoTs(e.appendStart)))}setRemux(e){this.transmuxer.setRemux(e.remux)}flush(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new mr(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new mr(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}));var nl=Qa(tl);const rl=e=>{const{transmuxer:t,bytes:n,audioAppendStart:r,gopsToAlignWith:i,remux:s,onData:o,onTrackInfo:a,onAudioTimingInfo:l,onVideoTimingInfo:c,onVideoSegmentTimingInfo:u,onAudioSegmentTimingInfo:d,onId3:h,onCaptions:p,onDone:f,onEndedTimeline:m,onTransmuxerLog:g,isEndOfTimeline:y,segment:v,triggerSegmentEventFn:b}=e,_={buffer:[]};let w=y;if(t.onmessage=n=>{t.currentTransmux===e&&("data"===n.data.action&&((e,t,n)=>{const{type:r,initSegment:i,captions:s,captionStreams:o,metadata:a,videoFrameDtsTime:l,videoFramePtsTime:c}=e.data.segment;t.buffer.push({captions:s,captionStreams:o,metadata:a});const u=e.data.segment.boxes||{data:e.data.segment.data},d={type:r,data:new Uint8Array(u.data,u.data.byteOffset,u.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};void 0!==l&&(d.videoFrameDtsTime=l),void 0!==c&&(d.videoFramePtsTime=c),n(d)})(n,_,o),"trackinfo"===n.data.action&&a(n.data.trackInfo),"gopInfo"===n.data.action&&((e,t)=>{t.gopInfo=e.data.gopInfo})(n,_),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&c(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&u(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(w=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(w||(t.onmessage=null,(({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)})({transmuxedData:_,callback:f}),il(t))))},t.onerror=()=>{const e={message:"Received an error message from the transmuxer worker",metadata:{errorType:xo.Error.StreamingFailedToTransmuxSegment,segmentInfo:Ul({segment:v})}};f(null,e)},r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),n.byteLength){const e=n instanceof ArrayBuffer?n:n.buffer,r=n instanceof ArrayBuffer?0:n.byteOffset;b({type:"segmenttransmuxingstart",segment:v}),t.postMessage({action:"push",data:e,byteOffset:r,byteLength:n.byteLength},[e])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},il=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():rl(e.currentTransmux))},sl=(e,t)=>{e.postMessage({action:t}),il(e)};var ol=e=>{((e,t)=>{if(!t.currentTransmux)return t.currentTransmux=e,void sl(t,e);t.transmuxQueue.push(sl.bind(null,t,e))})("reset",e)};const al=function(e){const t=e.transmuxer,n=e.endAction||e.action,r=e.callback,i=d({},e,{endAction:null,transmuxer:null,callback:null}),s=i=>{i.data.action===n&&(t.removeEventListener("message",s),i.data.data&&(i.data.data=new Uint8Array(i.data.data,e.byteOffset||0,e.byteLength||i.data.data.byteLength),e.data&&(e.data=i.data.data)),r(i.data))};if(t.addEventListener("message",s),e.data){const n=e.data instanceof ArrayBuffer;i.byteOffset=n?0:e.data.byteOffset,i.byteLength=e.data.byteLength;const r=[n?e.data:e.data.buffer];t.postMessage(i,r)}else t.postMessage(i)},ll=-101,cl=-102,ul="wvtt",dl=e=>{e.forEach(e=>{e.abort()})},hl=(e,t)=>{const{requestType:n}=t,r=ma({requestType:n,request:t,error:e});return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:ll,xhr:t,metadata:r}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:cl,xhr:t,metadata:r}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t,metadata:r}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t,metadata:r}:null},pl=(e,t,n,r)=>(i,s)=>{const o=s.response,a=hl(i,s);if(a)return n(a,e);if(16!==o.byteLength)return n({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:2,xhr:s},e);const l=new DataView(o),c=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let e=0;e<t.length;e++)t[e].bytes=c;const u={uri:s.uri};return r({type:"segmentkeyloadcomplete",segment:e,keyInfo:u}),n(null,e)},fl=(e,t)=>{const n=at(e.map.bytes);if("mp4"!==n){const r=e.map.resolvedUri||e.map.uri,i=n||"unknown";return t({internal:!0,message:`Found unsupported ${i} container for initialization segment at URL: ${r}`,code:2,metadata:{mediaType:i}})}al({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:n,data:r})=>(e.map.bytes=r,n.forEach(function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale),"text"===t.type&&((e,t)=>{t===ul&&e.transmuxer.postMessage({action:"initMp4WebVttParser",data:e.map.bytes})})(e,t.codec))}),t(null))})},ml=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{const f=e.map&&e.map.tracks||{},m=Boolean(f.audio&&f.video);let g=r.bind(null,e,"audio","start");const y=r.bind(null,e,"audio","end");let v=r.bind(null,e,"video","start");const b=r.bind(null,e,"video","end");al({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:r=>{e.bytes=t=r.data;const f=r.result;f&&(n(e,{hasAudio:f.hasAudio,hasVideo:f.hasVideo,isMuxed:m}),n=null),(e=>{if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void rl(e);e.transmuxer.transmuxQueue.push(e)})({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:m,onData:t=>{t.type="combined"===t.type?"video":t.type,u(e,t)},onTrackInfo:t=>{n&&(m&&(t.isMuxed=!0),n(e,t))},onAudioTimingInfo:e=>{g&&void 0!==e.start&&(g(e.start),g=null),y&&void 0!==e.end&&y(e.end)},onVideoTimingInfo:e=>{v&&void 0!==e.start&&(v(e.start),v=null),b&&void 0!==e.end&&b(e.end)},onVideoSegmentTimingInfo:t=>{const n={pts:{start:t.start.presentation,end:t.end.presentation},dts:{start:t.start.decode,end:t.end.decode}};p({type:"segmenttransmuxingtiminginfoavailable",segment:e,timingInfo:n}),i(t)},onAudioSegmentTimingInfo:t=>{const n={pts:{start:t.start.pts,end:t.end.pts},dts:{start:t.start.dts,end:t.end.dts}};p({type:"segmenttransmuxingtiminginfoavailable",segment:e,timingInfo:n}),s(t)},onId3:(t,n)=>{o(e,t,n)},onCaptions:t=>{a(e,[t])},isEndOfTimeline:l,onEndedTimeline:()=>{c()},onTransmuxerLog:h,onDone:(t,n)=>{d&&(t.type="combined"===t.type?"video":t.type,p({type:"segmenttransmuxingcomplete",segment:e}),d(n,e,t))},segment:e,triggerSegmentEventFn:p})}})},gl=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{let f=new Uint8Array(t);if(function(e){return Ve(e,["moof"]).length>0}(f)){e.isFmp4=!0;const{tracks:i}=e.map;if(i.text&&(!i.audio||!i.video))return u(e,{data:f,type:"text"}),void((e,t,n)=>{t===ul&&al({action:"getMp4WebVttText",data:e.bytes,transmuxer:e.transmuxer,callback:({data:t,mp4VttCues:r})=>{e.bytes=t,n(null,e,{mp4VttCues:r})}})})(e,i.text.codec,d);const s={isFmp4:!0,hasVideo:!!i.video,hasAudio:!!i.audio};i.audio&&i.audio.codec&&"enca"!==i.audio.codec&&(s.audioCodec=i.audio.codec),i.video&&i.video.codec&&"encv"!==i.video.codec&&(s.videoCodec=i.video.codec),i.video&&i.audio&&(s.isMuxed=!0),n(e,s);const l=(t,n)=>{u(e,{data:f,type:s.hasAudio&&!s.isMuxed?"audio":"video"}),n&&n.length&&o(e,n),t&&t.length&&a(e,t),d(null,e,{})};return void al({action:"probeMp4StartTime",timescales:e.map.timescales,data:f,transmuxer:e.transmuxer,callback:({data:n,startTime:o})=>{t=n.buffer,e.bytes=f=n,s.hasAudio&&!s.isMuxed&&r(e,"audio","start",o),s.hasVideo&&r(e,"video","start",o),al({action:"probeEmsgID3",data:f,transmuxer:e.transmuxer,offset:o,callback:({emsgData:n,id3Frames:r})=>{t=n.buffer,e.bytes=f=n,i.video&&n.byteLength&&e.transmuxer?al({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:f,timescales:e.map.timescales,trackIds:[i.video.id],callback:n=>{t=n.data.buffer,e.bytes=f=n.data,n.logs.forEach(function(e){h(jo(e,{stream:"mp4CaptionParser"}))}),l(n.captions,r)}}):l(void 0,r)}})}})}if(e.transmuxer){if(void 0===e.container&&(e.container=at(f)),"ts"!==e.container&&"aac"!==e.container)return n(e,{hasAudio:!1,hasVideo:!1}),void d(null,e,{});ml({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})}else d(null,e,{})},yl=function({id:e,key:t,encryptedBytes:n,decryptionWorker:r,segment:i,doneFn:s},o){const a=t=>{if(t.data.source===e){r.removeEventListener("message",a);const e=t.data.decrypted;o(new Uint8Array(e.bytes,e.byteOffset,e.byteLength))}};let l;r.onerror=()=>{const e="An error occurred in the decryption worker",t=Ul({segment:i}),n={message:e,metadata:{error:new Error(e),errorType:xo.Error.StreamingFailedToDecryptSegment,segmentInfo:t,keyInfo:{uri:i.key.resolvedUri||i.map.key.resolvedUri}}};s(n,i)},r.addEventListener("message",a),l=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),r.postMessage(Ra({source:e,encrypted:n,key:l,iv:t.iv}),[n.buffer,l.buffer])},vl=({xhr:e,xhrOptions:t,decryptionWorker:n,segment:r,abortFn:i,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g,triggerSegmentEventFn:y})=>{const v=[],b=(({activeXhrs:e,decryptionWorker:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{let f=0,m=!1;return(g,y)=>{if(!m){if(g)return m=!0,dl(e),d(g,y);if(f+=1,f===e.length){const f=function(){if(y.encryptedBytes)return(({decryptionWorker:e,segment:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})=>{p({type:"segmentdecryptionstart"}),yl({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e,segment:t,doneFn:d},e=>{t.bytes=e,p({type:"segmentdecryptioncomplete",segment:t}),gl({segment:t,bytes:t.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})})})({decryptionWorker:t,segment:y,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p});gl({segment:y,bytes:y.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h,triggerSegmentEventFn:p})};if(y.endOfAllRequests=Date.now(),y.map&&y.map.encryptedBytes&&!y.map.bytes)return p({type:"segmentdecryptionstart",segment:y}),yl({decryptionWorker:t,id:y.requestId+"-init",encryptedBytes:y.map.encryptedBytes,key:y.map.key,segment:y,doneFn:d},t=>{y.map.bytes=t,p({type:"segmentdecryptioncomplete",segment:y}),fl(y,t=>{if(t)return dl(e),d(t,y);f()})});f()}}}})({activeXhrs:v,decryptionWorker:n,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g,triggerSegmentEventFn:y});if(r.key&&!r.key.bytes){const n=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&n.push(r.map.key);const i=jo(t,{uri:r.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),s=pl(r,n,b,y);y({type:"segmentkeyloadstart",segment:r,keyInfo:{uri:r.key.resolvedUri}});const o=e(i,s);v.push(o)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const n=jo(t,{uri:r.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),i=pl(r,[r.map.key],b,y);y({type:"segmentkeyloadstart",segment:r,keyInfo:{uri:r.map.key.resolvedUri}});const s=e(n,i);v.push(s)}const n=jo(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:ja(r.map),requestType:"segment-media-initialization"}),i=(({segment:e,finishProcessingFn:t,triggerSegmentEventFn:n})=>(r,i)=>{const s=hl(r,i);if(s)return t(s,e);const o=new Uint8Array(i.response);if(n({type:"segmentloaded",segment:e}),e.map.key)return e.map.encryptedBytes=o,t(null,e);e.map.bytes=o,fl(e,function(n){if(n)return n.xhr=i,n.status=i.status,t(n,e);t(null,e)})})({segment:r,finishProcessingFn:b,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:r});const s=e(n,i);v.push(s)}const _=jo(t,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:ja(r),requestType:"segment"}),w=(({segment:e,finishProcessingFn:t,responseType:n,triggerSegmentEventFn:r})=>(i,s)=>{const o=hl(i,s);if(o)return t(o,e);r({type:"segmentloaded",segment:e});const a="arraybuffer"!==n&&s.responseText?(e=>{const t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer})(s.responseText.substring(e.lastReachedChar||0)):s.response;return e.stats=(e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}))(s),e.key?e.encryptedBytes=new Uint8Array(a):e.bytes=new Uint8Array(a),t(null,e)})({segment:r,finishProcessingFn:b,responseType:_.responseType,triggerSegmentEventFn:y});y({type:"segmentloadstart",segment:r});const S=e(_,w);S.addEventListener("progress",(({segment:e,progressFn:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u})=>n=>{if(!n.target.aborted)return e.stats=jo(e.stats,(e=>{const t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n})(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)})({segment:r,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f})),v.push(S);const k={};return v.forEach(e=>{e.addEventListener("loadend",(({loadendState:e,abortFn:t})=>n=>{n.target.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)})({loadendState:k,abortFn:i}))}),()=>dl(v)},bl=Do("PlaylistSelector"),_l=function(e){if(!e||!e.playlist)return;const t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},wl=function(e,t){if(!e)return"";const n=i().getComputedStyle(e);return n?n[t]:""},Sl=function(e,t){const n=e.slice();e.sort(function(e,r){const i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i})},kl=function(e,t){let n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||i().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||i().Number.MAX_VALUE,n-r};let Tl=function(e){const{main:t,bandwidth:n,playerWidth:r,playerHeight:s,playerObjectFit:o,limitRenditionByPlayerDimensions:a,playlistController:l}=e;if(!t)return;const c={bandwidth:n,width:r,height:s,limitRenditionByPlayerDimensions:a};let u=t.playlists;aa.isAudioOnly(t)&&(u=l.getAudioTrackPlaylists_(),c.audioOnly=!0);let d=u.map(e=>{let t;const n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,r=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||i().Number.MAX_VALUE,{bandwidth:t,width:n,height:r,playlist:e}});Sl(d,(e,t)=>e.bandwidth-t.bandwidth),d=d.filter(e=>!aa.isIncompatible(e.playlist));let h=d.filter(e=>aa.isEnabled(e.playlist));h.length||(h=d.filter(e=>!aa.isDisabled(e.playlist)));const p=h.filter(e=>e.bandwidth*Xa.BANDWIDTH_VARIANCE<n);let f=p[p.length-1];const m=p.filter(e=>e.bandwidth===f.bandwidth)[0];if(!1===a){const e=m||h[0]||d[0];if(e&&e.playlist){let t="sortedPlaylistReps";return m&&(t="bandwidthBestRep"),h[0]&&(t="enabledPlaylistReps"),bl(`choosing ${_l(e)} using ${t} with options`,c),e.playlist}return bl("could not choose a playlist with options",c),null}const g=p.filter(e=>e.width&&e.height);Sl(g,(e,t)=>e.width-t.width);const y=g.filter(e=>e.width===r&&e.height===s);f=y[y.length-1];const v=y.filter(e=>e.bandwidth===f.bandwidth)[0];let b,_,w,S;if(v||(b=g.filter(e=>"cover"===o?e.width>r&&e.height>s:e.width>r||e.height>s),_=b.filter(e=>e.width===b[0].width&&e.height===b[0].height),f=_[_.length-1],w=_.filter(e=>e.bandwidth===f.bandwidth)[0]),l.leastPixelDiffSelector){const e=g.map(e=>(e.pixelDiff=Math.abs(e.width-r)+Math.abs(e.height-s),e));Sl(e,(e,t)=>e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff),S=e[0]}const k=S||w||v||m||h[0]||d[0];if(k&&k.playlist){let e="sortedPlaylistReps";return S?e="leastPixelDiffRep":w?e="resolutionPlusOneRep":v?e="resolutionBestRep":m?e="bandwidthBestRep":h[0]&&(e="enabledPlaylistReps"),bl(`choosing ${_l(k)} using ${e} with options`,c),k.playlist}return bl("could not choose a playlist with options",c),null};const xl=function(){let e=this.useDevicePixelRatio&&i().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(e=this.customPixelRatio),Tl({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(wl(this.tech_.el(),"width"),10)*e,playerHeight:parseInt(wl(this.tech_.el(),"height"),10)*e,playerObjectFit:this.usePlayerObjectFit?wl(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})};function El(e){try{return new URL(e).pathname.split("/").slice(-2).join("/")}catch(e){return""}}const Cl={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Al=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Ol=(e,t,n)=>{e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,xo.browser.IS_ANY_SAFARI||(e.metadataTrack_.inBandMetadataTrackDispatchType=t))},Ml=function(e,t,n){let r,i;if(n&&n.cues)for(r=n.cues.length;r--;)i=n.cues[r],i.startTime>=e&&i.endTime<=t&&n.removeCue(i)},Il=e=>"number"==typeof e&&isFinite(e),Dl=1/60,jl=e=>{const{startOfSegment:t,duration:n,segment:r,part:i,playlist:{mediaSequence:s,id:o,segments:a=[]},mediaIndex:l,partIndex:c,timeline:u}=e,d=a.length-1;let h="mediaIndex/partIndex increment";e.getMediaInfoForTime?h=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(h+=` with independent ${e.independent}`);const p="number"==typeof c,f=e.segment.uri?"segment":"pre-segment",m=p?Go({preloadSegment:r})-1:0;return`${f} [${s+l}/${s+d}]`+(p?` part [${c}/${m}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(p?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${t}]`+` duration [${n}]`+` timeline [${u}]`+` selected by [${h}]`+` playlist [${o}]`},Pl=e=>`${e}TimingInfo`,Ll=({timelineChangeController:e,currentTimeline:t,segmentTimeline:n,loaderType:r,audioDisabled:i})=>{if(t===n)return!1;if("audio"===r){const t=e.lastTimelineChange({type:"main"});return!t||t.to!==n}if("main"===r&&i){const t=e.pendingTimelineChange({type:"audio"});return!t||t.to!==n}return!1},Nl=e=>{const t=e.pendingSegment_;if(t&&Ll({timelineChangeController:e.timelineChangeController_,currentTimeline:e.currentTimeline_,segmentTimeline:t.timeline,loaderType:e.loaderType_,audioDisabled:e.audioDisabled_})&&(e=>{if(!e)return!1;const t=e.pendingTimelineChange({type:"audio"}),n=e.pendingTimelineChange({type:"main"}),r=t&&n,i=r&&t.to!==n.to;return!(!r||-1===t.from||-1===n.from||!i)})(e.timelineChangeController_)){if((e=>{const t=e.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=e.timelineChangeController_.pendingTimelineChange({type:"main"});return t&&n&&t.to<n.to})(e))return void e.timelineChangeController_.trigger("audioTimelineBehind");e.timelineChangeController_.trigger("fixBadTimelineChange")}},Rl=({segmentDuration:e,maxDuration:t})=>!!e&&Math.round(e)>t+Lo,Ul=({type:e,segment:t})=>{if(!t)return;const n=Boolean(t.key||t.map&&t.map.ke),r=Boolean(t.map&&!t.map.bytes),i=void 0===t.startOfSegment?t.start:t.startOfSegment;return{type:e||t.type,uri:t.resolvedUri||t.uri,start:i,duration:t.duration,isEncrypted:n,isMediaInitialization:r}};class Bl extends xo.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Do(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e){e!==this.state_&&(this.logger_(`${this.state_} -> ${e}`),this.state_=e,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Nl(this)}),this.sourceUpdater_.on("codecschange",e=>{this.trigger(d({type:"codecschange"},e))}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Nl(this)}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",e=>{this.trigger(d({type:"timelinechange"},e)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Nl(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Nl(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return(e=>{const t=new nl;t.currentTransmux=null,t.transmuxQueue=[];const n=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)),t.postMessage({action:"init",options:e}),t})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if("WAITING"!==this.state)return this.pendingSegment_&&(this.pendingSegment_=null),void this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,i().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&ol(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Po();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:n,isMuxed:r}=e;if(n&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=Ua(e);let r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,t=!1){if(!e)return null;const n=Ba(e);let r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;if(this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_(`playlist update [${i} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:\ncurrentTime: ${this.currentTime_()}\nbufferedEnd: ${$o(this.buffered_())}\n`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList||"number"!=typeof e.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const s=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${s}]`),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const e=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!e.parts||!e.parts.length||!e.parts[this.partIndex])){const e=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e}}r&&(r.mediaIndex-=s,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&ol(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;"hls"===this.sourceType_&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=()=>{},r=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let i=1;const s=()=>{i--,0===i&&n()};!r&&this.audioDisabled_||(i++,this.sourceUpdater_.removeAudio(e,t,s)),(r||"main"===this.loaderType_)&&(this.gopBuffer_=((e,t,n,r)=>{const i=Math.ceil((t-r)*lt.ONE_SECOND_IN_TS),s=Math.ceil((n-r)*lt.ONE_SECOND_IN_TS),o=e.slice();let a=e.length;for(;a--&&!(e[a].pts<=s););if(-1===a)return o;let l=a+1;for(;l--&&!(e[l].pts<=i););return l=Math.max(l,0),o.splice(l,a-l+1),o})(this.gopBuffer_,e,t,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,t,s));for(const n in this.inbandTextTracks_)Ml(e,t,this.inbandTextTracks_[n]);Ml(e,t,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&i().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:Ul({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const r="number"==typeof e&&t.segments[e],i=e+1===t.segments.length,s=!r||!r.parts||n+1===r.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&i&&s}chooseNextRequest_(){const e=this.buffered_(),t=$o(e)||0,n=qo(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,i=n>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||r||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(e,t,n){t=t||[];const r=[];let i=0;for(let s=0;s<t.length;s++){const o=t[s];if(e===o.timeline&&(r.push(s),i+=o.duration,i>n))return s}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,s,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(null!==this.mediaIndex){const e=s[this.mediaIndex],n="number"==typeof this.partIndex?this.partIndex:-1;o.startOfSegment=e.end?e.end:t,e.parts&&e.parts[n+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=n+1):o.mediaIndex=this.mediaIndex+1}else{let e,n,r;const i=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:\nFor TargetTime: ${i}.\nCurrentTime: ${this.currentTime_()}\nBufferedEnd: ${t}\nFetch At Buffer: ${this.fetchAtBuffer_}\n`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const t=this.getSyncInfoFromMediaSequenceSync_(i);if(!t){const e="No sync info found while using media sequence sync";return this.error({message:e,metadata:{errorType:xo.Error.StreamingFailedToSelectNextSegment,error:new Error(e)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${t.start} --\x3e ${t.end})`),e=t.segmentIndex,n=t.partIndex,r=t.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const t=aa.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:i,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});e=t.segmentIndex,n=t.partIndex,r=t.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${i}`:`currentTime ${i}`,o.mediaIndex=e,o.startOfSegment=r,o.partIndex=n,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const a=s[o.mediaIndex];let l=a&&"number"==typeof o.partIndex&&a.parts&&a.parts[o.partIndex];if(!a||"number"==typeof o.partIndex&&!l)return null;"number"!=typeof o.partIndex&&a.parts&&(o.partIndex=0,l=a.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!n&&l&&!c&&!l.independent)if(0===o.partIndex){const e=s[o.mediaIndex-1],t=e.parts&&e.parts.length&&e.parts[e.parts.length-1];t&&t.independent&&(o.mediaIndex-=1,o.partIndex=e.parts.length-1,o.independent="previous segment")}else a.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const u=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=s.length-1&&u&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const n=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!n)return null;if(!n.isAppended)return n;const r=this.mediaSequenceSync_.getSyncInfoForTime(n.end);return r?(r.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),r):null}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:r,startOfSegment:i,isSyncRequest:s,partIndex:o,forceTimestampOffset:a,getMediaInfoForTime:l}=e,c=n.segments[r],u="number"==typeof o&&c.parts[o],d={requestId:"segment-loader-"+Math.random(),uri:u&&u.resolvedUri||c.resolvedUri,mediaIndex:r,partIndex:u?o:null,isSyncRequest:s,startOfSegment:i,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:u&&u.duration||c.duration,segment:c,part:u,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h=void 0!==a?a:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:h});const p=$o(this.sourceUpdater_.audioBuffered());return"number"==typeof p&&(d.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(d.gopsToAlignWith=((e,t,n)=>{if(null==t||!e.length)return[];const r=Math.ceil((t-n+3)*lt.ONE_SECOND_IN_TS);let i;for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d}timestampOffsetForSegment_(e){return(({segmentTimeline:e,currentTimeline:t,startOfSegment:n,buffered:r,overrideCheck:i})=>i||e!==t?e<t?n:r.length?r.end(r.length-1):n:null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=aa.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),s=function(e,t,n=1){return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(i<=s)return;const o=function(e){const{main:t,currentTime:n,bandwidth:r,duration:i,segmentDuration:s,timeUntilRebuffer:o,currentTimeline:a,syncController:l}=e,c=t.playlists.filter(e=>!aa.isIncompatible(e));let u=c.filter(aa.isEnabled);u.length||(u=c.filter(e=>!aa.isDisabled(e)));const d=u.filter(aa.hasAttribute.bind(null,"BANDWIDTH")).map(e=>{const t=l.getSyncPoint(e,i,a,n)?1:2;return{playlist:e,rebufferingImpact:aa.estimateSegmentRequestTime(s,r,e)*t-o}}),h=d.filter(e=>e.rebufferingImpact<=0);return Sl(h,(e,t)=>kl(t.playlist,e.playlist)),h.length?h[0]:(Sl(d,(e,t)=>e.rebufferingImpact-t.rebufferingImpact),d[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const a=i-s-o.rebufferingImpact;let l=.5;s<=Lo&&(l=1),!o.playlist||o.playlist.uri===this.playlist_.uri||a<l||(this.bandwidth=o.playlist.attributes.BANDWIDTH*Xa.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${jl(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:n,hasVideo:r}=t,i={segmentInfo:Ul({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:n,hasVideo:r}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:i}),this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;const n=Object.keys(e).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(s!==r[i])return!1;if(e[s]!==t[s])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Nl(this)))}handleTimingInfo_(e,t,n,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const i=this.pendingSegment_,s=Pl(t);i[s]=i[s]||{},i[s][n]=r,this.logger_(`timinginfo: ${t} - ${n} - ${r}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Nl(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach(e=>{r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};const t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)}),Object.keys(r).forEach(e=>{const{startTime:t,endTime:s,captions:o}=r[e],a=this.inbandTextTracks_;this.logger_(`adding cues from ${t} -> ${s} for ${e}`),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"});let r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);const i=t.textTracks().getTrackById(r);if(i)e[n]=i;else{let i=n,s=n,o=!1;const a=(t.options_.vhs&&t.options_.vhs.captionServices||{})[r];a&&(i=a.label,s=a.language,o=a.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:r,default:o,label:i,language:s},!1).track}}}(a,this.vhs_.tech_,e),Ml(t,s,a[e]),function({inbandTextTracks:e,captionArray:t,timestampOffset:n}){if(!t)return;const r=i().WebKitDataCue||i().VTTCue;t.forEach(t=>{const i=t.stream;t.content?t.content.forEach(s=>{const o=new r(t.startTime+n,t.endTime+n,s.text);o.line=s.line,o.align="left",o.position=s.position,o.positionAlign="line-left",e[i].addCue(o)}):e[i].addCue(new r(t.startTime+n,t.endTime+n,t.text))})}({captionArray:o,inbandTextTracks:a,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(n,t,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(e=>e())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(e=>e())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&Ll({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:r,isMuxed:i}=t;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||Ll({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return Nl(this),void this.callQueue_.push(this.handleData_.bind(this,e,t));const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[Pl(t.type)].start;else{const e=this.getCurrentMediaInfo_(),t="main"===this.loaderType_&&e&&e.hasVideo;let r;t&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=this.chooseNextRequest_();if(e.mediaIndex!==n.mediaIndex||e.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:r}){if(n){const e=Ua(n);if(this.activeInitSegmentId_===e)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},r){const s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+zo(s).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+zo(o).join(", "));const a=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,c=o.length?o.start(0):0,u=o.length?o.end(o.length-1):0;if(l-a<=1&&u-c<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${zo(s).join(", ")}, video buffer: ${zo(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const d=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${d}`),this.remove(0,d,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=i().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},r){r&&(22!==r.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error({message:`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:xo.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n}))}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:r,bytes:i}){if(!i){const e=[r];let t=r.byteLength;n&&(e.unshift(n),t+=n.byteLength),i=(e=>{let t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach(e=>{t.set(e,n),n+=e.byteLength})),t})({bytes:t,segments:e})}const s={segmentInfo:Ul({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:s}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:i},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:i}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,i=`${e}TimingInfo`;r[i]||(r[i]={}),r[i].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[i].transmuxedPresentationStart=n.start.presentation,r[i].transmuxedDecodeStart=n.start.decode,r[i].transmuxedPresentationEnd=n.end.presentation,r[i].transmuxedDecodeEnd=n.end.decode,r[i].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:r}=t;if(!r||!r.byteLength)return;if("audio"===n&&this.audioDisabled_)return;const i=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_())return Nl(this),void this.loadQueue_.push(()=>{const t=d({},e,{forceTimestampOffset:!0});d(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,i=e.timeline!==this.currentTimeline_&&e.timeline>0,s=n||r&&i;this.logger_(`Requesting\n${El(e.uri)}\n${jl(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=vl({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:t,level:n,stream:r})=>{this.logger_(`${jl(e)} logged from transmuxer stream ${r} as a ${n}: ${t}`)},triggerSegmentEventFn:({type:e,segment:t,keyInfo:n,trackInfo:r,timingInfo:i})=>{const s={segmentInfo:Ul({segment:t})};n&&(s.keyInfo=n),r&&(s.trackInfo=r),i&&(s.timingInfo=i),this.trigger({type:e,metadata:s})}})}trimBackBuffer_(e){const t=((e,t,n)=>{let r=t-Xa.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));const i=t-n;return Math.min(i,r)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,r=e.segment.key||e.segment.map&&e.segment.map.key,i=e.segment.map&&!e.segment.map.bytes,s={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:r,isMediaInitialization:i},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?s.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(s.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);s.key=this.segmentKey(t.key),s.key.iv=n}return t.map&&(s.map=this.initSegmentForMap(t.map)),s}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Dl)return void this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record 0.016666666666666666`);const n={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:n}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return;if(t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===cl)return;return this.pause(),e.code===ll?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=((e,t,n)=>{if(!t.length)return e;if(n)return t.slice();const r=t[0].pts;let i=0;for(;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)})(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:i,useVideoTimingInfo:s,videoTimingInfo:o,audioTimingInfo:a}){if(void 0!==e)return e;if(!s)return a.start;const l=t.segments[n-1];return 0!==n&&l&&void 0!==l.start&&l.end===r+i?o.start:r}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:n,hasVideo:r,isMuxed:i}=t,s="main"===this.loaderType_&&r,o=!this.audioDisabled_&&n&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);s&&e.waitingOnAppends++,o&&e.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=((e,t,n)=>"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const e={segmentInfo:Ul({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:e})}if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=((e,t)=>{if("hls"!==t)return null;const n=(e=>{let t=0;return["video","audio"].forEach(function(n){const r=e[`${n}TimingInfo`];if(!r)return;const{start:s,end:o}=r;let a;"bigint"==typeof s||"bigint"==typeof o?a=i().BigInt(o)-i().BigInt(s):"number"==typeof s&&"number"==typeof o&&(a=o-s),void 0!==a&&a>t&&(t=a)}),"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t})({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;const r=e.playlist.targetDuration,s=Rl({segmentDuration:n,maxDuration:2*r}),o=Rl({segmentDuration:n,maxDuration:r}),a=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${n} when the reported duration is ${e.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||o?{severity:s?"warn":"info",message:a}:null})(e,this.sourceType_);if(t&&("warn"===t.severity?xo.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${jl(e)}`);this.logger_(`Appended ${jl(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,r=e.part,s=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,o=r&&r.end&&this.currentTime_()-r.end>3*e.playlist.partTargetDuration;if(s||o)return this.logger_(`bad ${s?"segment":"part"} ${jl(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Dl)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record 0.016666666666666666`);const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,r=t.end;if(!Il(n)||!Il(r))return;Ml(n,r,this.segmentMetadataTrack_);const s=i().WebKitDataCue||i().VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},a=new s(n,r,JSON.stringify(o));a.value=o,this.segmentMetadataTrack_.addCue(a)}}function Fl(){}const zl=function(e){return"string"!=typeof e?e:e.replace(/./,e=>e.toUpperCase())},$l=["video","audio"],ql=(e,t)=>{const n=t[`${e}Buffer`];return n&&n.updating||t.queuePending[e]},Hl=(e,t)=>{if(0===t.queue.length)return;let n=0,r=t.queue[n];if("mediaSource"!==r.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!ql(e,t)){if(r.type!==e){if(n=((e,t)=>{for(let n=0;n<t.length;n++){const r=t[n];if("mediaSource"===r.type)return null;if(r.type===e)return n}return null})(e,t.queue),null===n)return;r=t.queue[n]}return t.queue.splice(n,1),t.queuePending[e]=r,r.action(e,t),r.doneFn?void 0:(t.queuePending[e]=null,void Hl(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),r.action(t),r.doneFn&&r.doneFn(),Hl("audio",t),Hl("video",t))},Vl=(e,t)=>{const n=t[`${e}Buffer`],r=zl(e);n&&(n.removeEventListener("updateend",t[`on${r}UpdateEnd_`]),n.removeEventListener("error",t[`on${r}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},Wl=(e,t)=>e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t),Gl=(e,t,n)=>(r,i)=>{const s=i[`${r}Buffer`];if(Wl(i.mediaSource,s)){i.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${r}Buffer`);try{s.appendBuffer(e)}catch(e){i.logger_(`Error with code ${e.code} `+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${r}Buffer`),i.queuePending[r]=null,n(e)}}},Kl=(e,t)=>(n,r)=>{const i=r[`${n}Buffer`];if(Wl(r.mediaSource,i)){r.logger_(`Removing ${e} to ${t} from ${n}Buffer`);try{i.remove(e,t)}catch(i){r.logger_(`Remove ${e} to ${t} from ${n}Buffer failed`)}}},Jl=e=>(t,n)=>{const r=n[`${t}Buffer`];Wl(n.mediaSource,r)&&(n.logger_(`Setting ${t}timestampOffset to ${e}`),r.timestampOffset=e)},Xl=e=>(t,n)=>{e()},Yl=e=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(e){xo.log.warn("Failed to call media source endOfStream",e)}}},Ql=e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(e){xo.log.warn("Failed to set media source duration",e)}},Zl=(e,t)=>n=>{const r=zl(e),i=D(t);n.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);const s=n.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",n[`on${r}UpdateEnd_`]),s.addEventListener("error",n[`on${r}Error_`]),n.codecs[e]=t,n[`${e}Buffer`]=s},ec=e=>t=>{const n=t[`${e}Buffer`];if(Vl(e,t),Wl(t.mediaSource,n)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(n)}catch(t){xo.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,t)}}},tc=e=>(t,n)=>{const r=n[`${t}Buffer`],i=D(e);if(!Wl(n.mediaSource,r))return;const s=e.substring(0,e.indexOf(".")),o=n.codecs[t];if(o.substring(0,o.indexOf("."))===s)return;const a={codecsChangeInfo:{from:o,to:e}};n.trigger({type:"codecschange",metadata:a}),n.logger_(`changing ${t}Buffer codec from ${o} to ${e}`);try{r.changeType(i),n.codecs[t]=e}catch(e){a.errorType=xo.Error.StreamingCodecsChangeError,a.error=e,e.metadata=a,n.error_=e,n.trigger("error"),xo.log.warn(`Failed to changeType on ${t}Buffer`,e)}},nc=({type:e,sourceUpdater:t,action:n,doneFn:r,name:i})=>{t.queue.push({type:e,action:n,doneFn:r,name:i}),Hl(e,t)},rc=(e,t)=>n=>{const r=function(e){if(0===e.length)return"Buffered Ranges are empty";let t="Buffered Ranges: \n";for(let n=0;n<e.length;n++){const r=e.start(n),i=e.end(n);t+=`${r} --\x3e ${i}. Duration (${i-r})\n`}return t}(t[`${e}Buffered`]());if(t.logger_(`received "updateend" event for ${e} Source Buffer: `,r),t.queuePending[e]){const n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[`${e}Error_`])}Hl(e,t)};class ic extends xo.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Hl("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Do("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=rc("video",this),this.onAudioUpdateEnd_=rc("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){nc({type:"mediaSource",sourceUpdater:this,action:Zl(e,t),name:"addSourceBuffer"})}abort(e){nc({type:e,sourceUpdater:this,action:(e,t)=>{if("open"!==t.mediaSource.readyState)return;const n=t[`${e}Buffer`];if(Wl(t.mediaSource,n)){t.logger_(`calling abort on ${e}Buffer`);try{n.abort()}catch(t){xo.log.warn(`Failed to abort on ${e}Buffer`,t)}}},name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?nc({type:"mediaSource",sourceUpdater:this,action:ec(e),name:"removeSourceBuffer"}):xo.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!xo.browser.IS_FIREFOX&&i().MediaSource&&i().MediaSource.prototype&&"function"==typeof i().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return i().SourceBuffer&&i().SourceBuffer.prototype&&"function"==typeof i().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?nc({type:e,sourceUpdater:this,action:tc(t),name:"changeType"}):xo.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)})}appendBuffer(e,t){const{segmentInfo:n,type:r,bytes:i}=e;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${i.length} until video append`);if(nc({type:r,sourceUpdater:this,action:Gl(i,n||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const e=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${e.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,e.forEach(e=>{this.appendBuffer.apply(this,e)})}}audioBuffered(){return Wl(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Po()}videoBuffered(){return Wl(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Po()}buffered(){const e=Wl(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Wl(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){let n=null,r=null,i=0;const s=[],o=[];if(!(e&&e.length&&t&&t.length))return Po();let a=e.length;for(;a--;)s.push({time:e.start(a),type:"start"}),s.push({time:e.end(a),type:"end"});for(a=t.length;a--;)s.push({time:t.start(a),type:"start"}),s.push({time:t.end(a),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),a=0;a<s.length;a++)"start"===s[a].type?(i++,2===i&&(n=s[a].time)):"end"===s[a].type&&(i--,1===i&&(r=s[a].time)),null!==n&&null!==r&&(o.push([n,r]),n=null,r=null);return Po(o)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Fl){nc({type:"mediaSource",sourceUpdater:this,action:Ql(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Fl){"string"!=typeof e&&(e=void 0),nc({type:"mediaSource",sourceUpdater:this,action:Yl(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=Fl){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?nc({type:"audio",sourceUpdater:this,action:Kl(e,t),doneFn:n,name:"remove"}):n()}removeVideo(e,t,n=Fl){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?nc({type:"video",sourceUpdater:this,action:Kl(e,t),doneFn:n,name:"remove"}):n()}updating(){return!(!ql("audio",this)&&!ql("video",this))}audioTimestampOffset(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(nc({type:"audio",sourceUpdater:this,action:Jl(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(nc({type:"video",sourceUpdater:this,action:Jl(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&nc({type:"audio",sourceUpdater:this,action:Xl(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&nc({type:"video",sourceUpdater:this,action:Xl(e),name:"callback"})}dispose(){this.trigger("dispose"),$l.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>Vl(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const sc=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),oc=new Uint8Array("\n\n".split("").map(e=>e.charCodeAt(0)));class ac extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class lc extends Bl{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Po();const e=this.subtitlesTrack_.cues;return Po([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=Ua(e);let r=this.initSegments_[n];if(t&&!r&&e.bytes){const t=oc.byteLength+e.bytes.byteLength,i=new Uint8Array(t);i.set(e.bytes),i.set(oc,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:i}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){Ml(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===ll&&this.handleTimeout_(),e.code===cl?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const r=this.pendingSegment_,s=n.mp4VttCues&&n.mp4VttCues.length;s&&(r.mp4VttCues=n.mp4VttCues),this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const o=r.segment;if(o.map&&(o.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof i().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,n),()=>this.stopForError({message:"Error loading vtt.js"}));o.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message,metadata:{errorType:xo.Error.StreamingVttParserError,error:e}})}if(s||this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,r.cues.forEach(e=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(i().VTTCue)(e.startTime,e.endTime,e.text):e)}),function(e){const t=e.cues;if(!t)return;const n={};for(let r=t.length-1;r>=0;r--){const i=t[r],s=`${i.startTime}-${i.endTime}-${i.text}`;n[s]?e.removeCue(i):n[s]=i}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const n=e&&"vtt"===e.type,r=t&&"text"===t.type;n&&r&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(n=>{const r=n.start+t,s=n.end+t,o=new(i().VTTCue)(r,s,n.cueText);n.settings&&n.settings.split(" ").forEach(e=>{const t=e.split(":"),n=t[0],r=t[1];o[n]=isNaN(r)?r:Number(r)}),e.cues.push(o)})}parseVTTCues_(e){let t,n=!1;if("function"!=typeof i().WebVTT)throw new ac;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues)return void this.parseMp4VttCues_(e);"function"==typeof i().TextDecoder?t=new(i().TextDecoder)("utf8"):(t=i().WebVTT.StringDecoder(),n=!0);const r=new(i().WebVTT.Parser)(i(),i().vttjs,t);if(r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=t=>{e.timestampmap=t},r.onparsingerror=e=>{xo.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){let t=e.segment.map.bytes;n&&(t=sc(t)),r.parse(t)}let s=e.bytes;n&&(s=sc(s)),r.parse(s),r.flush()}updateTimeMapping_(e,t,n){const r=e.segment;if(!t)return;if(!e.cues.length)return void(r.empty=!0);const{MPEGTS:i,LOCAL:s}=e.timestampmap,o=i/lt.ONE_SECOND_IN_TS-s+t.mapping;if(e.cues.forEach(e=>{const n=e.endTime-e.startTime,r=this.handleRollover_(e.startTime+o,t.time);e.startTime=Math.max(r,0),e.endTime=Math.max(r+n,0)}),!n.syncInfo){const t=e.cues[0].startTime,i=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(t,i-r.duration)}}}handleRollover_(e,t){if(null===t)return e;let n=e*lt.ONE_SECOND_IN_TS;const r=t*lt.ONE_SECOND_IN_TS;let i;for(i=r<n?-8589934592:8589934592;Math.abs(n-r)>4294967296;)n+=i;return n/lt.ONE_SECOND_IN_TS}}const cc=function(e,t){const n=e.cues;for(let e=0;e<n.length;e++){const r=n[e];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null};class uc{constructor({start:e,end:t,segmentIndex:n,partIndex:r=null,appended:i=!1}){this.start_=e,this.end_=t,this.segmentIndex_=n,this.partIndex_=r,this.appended_=i}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class dc{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class hc{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:n,segments:r}=e;if(this.isReliable_=this.isReliablePlaylist_(n,r),this.isReliable_)return this.updateStorage_(r,n,this.calculateBaseTime_(n,r,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:n}of this.storage_.values())if(n.length){for(const t of n)if(t.isInRange(e))return t}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,n){const r=new Map;let i="\n",s=n,o=t;this.start_=s,e.forEach((e,t)=>{const n=this.storage_.get(o),a=s,l=a+e.duration,c=Boolean(n&&n.segmentSyncInfo&&n.segmentSyncInfo.isAppended),u=new uc({start:a,end:l,appended:c,segmentIndex:t});e.syncInfo=u;let d=s;const h=(e.parts||[]).map((e,r)=>{const s=d,a=d+e.duration,l=Boolean(n&&n.partsSyncInfo&&n.partsSyncInfo[r]&&n.partsSyncInfo[r].isAppended),c=new uc({start:s,end:a,appended:l,segmentIndex:t,partIndex:r});return d=a,i+=`Media Sequence: ${o}.${r} | Range: ${s} --\x3e ${a} | Appended: ${l}\n`,e.syncInfo=c,c});r.set(o,new dc(u,h)),i+=`${El(e.resolvedUri)} | Media Sequence: ${o} | Range: ${a} --\x3e ${l} | Appended: ${c}\n`,o++,s=l}),this.end_=s,this.storage_=r,this.diagnostics_=i}calculateBaseTime_(e,t,n){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const r=Math.min(...this.storage_.keys());if(e<r){const n=r-e;let i=this.storage_.get(r).segmentSyncInfo.start;for(let e=0;e<n;e++)i-=t[e].duration;return i}return n}isReliablePlaylist_(e,t){return null!=e&&Array.isArray(t)&&t.length}}class pc extends hc{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,n){if(!this.storage_.size){const t=this.parent_.getSyncInfoForMediaSequence(e);return t?t.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,n)}}const fc=[{name:"VOD",run:(e,t,n,r,i)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(e,t,n,r,i,s)=>{const o=e.getMediaSequenceSync(s);if(!o)return null;if(!o.isReliable)return null;const a=o.getSyncInfoForTime(i);return a?{time:a.start,partIndex:a.partIndex,segmentIndex:a.segmentIndex}:null}},{name:"ProgramDateTime",run:(e,t,n,r,i)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let s=null,o=null;const a=Vo(t);i=i||0;for(let n=0;n<a.length;n++){const r=a[t.endList||0===i?n:a.length-(n+1)],l=r.segment,c=e.timelineToDatetimeMappings[l.timeline];if(!c||!l.dateTimeObject)continue;let u=l.dateTimeObject.getTime()/1e3+c;if(l.parts&&"number"==typeof r.partIndex)for(let e=0;e<r.partIndex;e++)u+=l.parts[e].duration;const d=Math.abs(i-u);if(null!==o&&(0===d||o<d))break;o=d,s={time:u,segmentIndex:r.segmentIndex,partIndex:r.partIndex}}return s}},{name:"Segment",run:(e,t,n,r,i)=>{let s=null,o=null;i=i||0;const a=Vo(t);for(let e=0;e<a.length;e++){const n=a[t.endList||0===i?e:a.length-(e+1)],l=n.segment,c=n.part&&n.part.start||l&&l.start;if(l.timeline===r&&void 0!==c){const e=Math.abs(i-c);if(null!==o&&o<e)break;(!s||null===o||o>=e)&&(o=e,s={time:c,segmentIndex:n.segmentIndex,partIndex:n.partIndex})}}return s}},{name:"Discontinuity",run:(e,t,n,r,i)=>{let s=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length){let n=null;for(let r=0;r<t.discontinuityStarts.length;r++){const o=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,l=e.discontinuities[a];if(l){const e=Math.abs(i-l.time);if(null!==n&&n<e)break;(!s||null===n||n>=e)&&(n=e,s={time:l.time,segmentIndex:o,partIndex:null})}}}return s}},{name:"Playlist",run:(e,t,n,r,i)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class mc extends xo.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new hc,n=new pc(t),r=new pc(t);this.mediaSequenceStorage_={main:t,audio:n,vtt:r},this.logger_=Do("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,n,r,i){if(t!==1/0)return fc.find(({name:e})=>"VOD"===e).run(this,e,t);const s=this.runStrategies_(e,t,n,r,i);if(!s.length)return null;for(const t of s){const{syncPoint:n,strategy:i}=t,{segmentIndex:s,time:o}=n;if(s<0)continue;const a=o,l=a+e.segments[s].duration;if(this.logger_(`Strategy: ${i}. Current time: ${r}. selected segment: ${s}. Time: [${a} -> ${l}]}`),r>=a&&r<l)return this.logger_("Found sync point with exact match: ",n),n}return this.selectSyncPoint_(s,{key:"time",value:r})}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+Yo({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,r,i){const s=[];for(let o=0;o<fc.length;o++){const a=fc[o],l=a.run(this,e,t,n,r,i);l&&(l.strategy=a.name,s.push({strategy:a.name,syncPoint:l}))}return s}selectSyncPoint_(e,t){let n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy;for(let s=1;s<e.length;s++){const o=Math.abs(e[s].syncPoint[t.key]-t.value);o<r&&(r=o,n=e[s].syncPoint,i=e[s].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${i}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+("number"==typeof n.partIndex?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>86400)xo.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);else for(let r=n-1;r>=0;r--){const n=e.segments[r];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:n.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),r=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const i=r.dateTimeObject;r.discontinuity&&t&&i&&(this.timelineToDatetimeMappings[r.timeline]=-i.getTime()/1e3)}timestampOffsetForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const r=e.segment,i=e.part;let s,o,a=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),s=e.startOfSegment,o=t.end+a.mapping;else{if(!a)return!1;s=t.start+a.mapping,o=t.end+a.mapping}return i&&(i.start=s,i.end=o),(!r.start||s<r.start)&&(r.start=s),r.end=o,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let r=0;r<t.discontinuityStarts.length;r++){const i=t.discontinuityStarts[r],s=t.discontinuitySequence+r+1,o=i-e.mediaIndex,a=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>a){let r;r=o<0?n.start-Yo({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:i}):n.end+Yo({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:i}),this.discontinuities[s]={time:r,accuracy:a}}}}dispose(){this.trigger("dispose"),this.off()}}class gc extends xo.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return"number"==typeof t&&"number"==typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){if("number"==typeof t&&"number"==typeof n){this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e];const r={timelineChangeInfo:{from:t,to:n}};this.trigger({type:"timelinechange",metadata:r})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const yc=Za(el(function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}();let t=null;class r{constructor(e){let n,r,i;t||(t=function(){const e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4];let s,o,a;const l=[],c=[];let u,d,h,p,f,m;for(s=0;s<256;s++)c[(l[s]=s<<1^283*(s>>7))^s]=s;for(o=a=0;!r[o];o^=u||1,a=c[a]||1)for(p=a^a<<1^a<<2^a<<3^a<<4,p=p>>8^255&p^99,r[o]=p,i[p]=o,h=l[d=l[u=l[o]]],m=16843009*h^65537*d^257*u^16843008*o,f=257*l[p]^16843008*p,s=0;s<4;s++)t[s][o]=f=f<<24^f>>>8,n[s][p]=m=m<<24^m>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),n[s]=n[s].slice(0);return e}()),this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),t[1][3].slice(),t[1][4].slice()]];const s=this._tables[0][4],o=this._tables[1],a=e.length;let l=1;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size");const c=e.slice(0),u=[];for(this._key=[c,u],n=a;n<4*a+28;n++)i=c[n-1],(n%a===0||8===a&&n%a===4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],n%a===0&&(i=i<<8^i>>>24^l<<24,l=l<<1^283*(l>>7))),c[n]=c[n-a]^i;for(r=0;n;r++,n--)i=c[3&r?n:n-4],u[r]=n<=4||r<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}decrypt(e,t,n,r,i,s){const o=this._key[1];let a,l,c,u=e^o[0],d=r^o[1],h=n^o[2],p=t^o[3];const f=o.length/4-2;let m,g=4;const y=this._tables[1],v=y[0],b=y[1],_=y[2],w=y[3],S=y[4];for(m=0;m<f;m++)a=v[u>>>24]^b[d>>16&255]^_[h>>8&255]^w[255&p]^o[g],l=v[d>>>24]^b[h>>16&255]^_[p>>8&255]^w[255&u]^o[g+1],c=v[h>>>24]^b[p>>16&255]^_[u>>8&255]^w[255&d]^o[g+2],p=v[p>>>24]^b[u>>16&255]^_[d>>8&255]^w[255&h]^o[g+3],g+=4,u=a,d=l,h=c;for(m=0;m<4;m++)i[(3&-m)+s]=S[u>>>24]<<24^S[d>>16&255]<<16^S[h>>8&255]<<8^S[255&p]^o[g++],a=u,u=d,d=h,h=p,p=a}}class i extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const s=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24};class o{constructor(e,t,n,r){const a=o.STEP,l=new Int32Array(e.buffer),c=new Uint8Array(e.byteLength);let u=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+a),t,n,c)),u=a;u<l.length;u+=a)n=new Uint32Array([s(l[u-4]),s(l[u-3]),s(l[u-2]),s(l[u-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+a),t,n,c));this.asyncStream_.push(function(){var e;r(null,(e=c).subarray(0,e.byteLength-e[e.byteLength-1]))})}static get STEP(){return 32e3}decryptChunk_(e,t,n,i){return function(){const o=function(e,t,n){const i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),o=new r(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),l=new Int32Array(a.buffer);let c,u,d,h,p,f,m,g,y;for(c=n[0],u=n[1],d=n[2],h=n[3],y=0;y<i.length;y+=4)p=s(i[y]),f=s(i[y+1]),m=s(i[y+2]),g=s(i[y+3]),o.decrypt(p,f,m,g,l,y),l[y]=s(l[y]^c),l[y+1]=s(l[y+1]^u),l[y+2]=s(l[y+2]^d),l[y+3]=s(l[y+3]^h),c=p,u=f,d=m,h=g;return a}(e,t,n);i.set(o,e.byteOffset)}}}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},l=("undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{}).BigInt||Number;l("0x1"),l("0x100"),l("0x10000"),l("0x1000000"),l("0x100000000"),l("0x10000000000"),l("0x1000000000000"),l("0x100000000000000"),l("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();self.onmessage=function(e){const t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new o(n,r,i,function(e,n){self.postMessage(function(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];var i;i=r,("function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r}),t}({source:t.source,decrypted:n}),[n.buffer])})}}));var vc=Qa(yc);const bc=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},_c=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},wc=(e,t)=>{t.activePlaylistLoader=e,e.load()},Sc={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:n},excludePlaylist:r}=t,i=n.activeTrack(),s=n.activeGroup(),o=(s.filter(e=>e.default)[0]||s[0]).id,a=n.tracks[o];if(i!==a){xo.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const e in n.tracks)n.tracks[e].enabled=n.tracks[e]===a;n.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:n}}=t;xo.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}},kc={AUDIO:(e,t,n)=>{if(!t)return;const{tech:r,requestOptions:i,segmentLoaders:{[e]:s}}=n;t.on("loadedmetadata",()=>{const e=t.media();s.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&s.load()}),t.on("loadedplaylist",()=>{s.playlist(t.media(),i),r.paused()||s.load()}),t.on("error",Sc[e](e,n))},SUBTITLES:(e,t,n)=>{const{tech:r,requestOptions:i,segmentLoaders:{[e]:s},mediaTypes:{[e]:o}}=n;t.on("loadedmetadata",()=>{const e=t.media();s.playlist(e,i),s.track(o.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&s.load()}),t.on("loadedplaylist",()=>{s.playlist(t.media(),i),r.paused()||s.load()}),t.on("error",Sc[e](e,n))}},Tc={AUDIO:(e,t)=>{const{vhs:n,sourceType:r,segmentLoaders:{[e]:i},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[e]:{groups:a,tracks:l,logger_:c}},mainPlaylistLoader:u}=t,d=oa(u.main);o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},d&&(o[e].main.default.playlists=u.main.playlists));for(const i in o[e]){a[i]||(a[i]=[]);for(const h in o[e][i]){let p,f=o[e][i][h];if(d?(c(`AUDIO group '${i}' label '${h}' is a main playlist`),f.isMainPlaylist=!0,p=null):p="vhs-json"===r&&f.playlists?new Ma(f.playlists[0],n,s):f.resolvedUri?new Ma(f.resolvedUri,n,s):f.playlists&&"dash"===r?new Ja(f.playlists[0],n,s,u):null,f=jo({id:h,playlistLoader:p},f),kc[e](e,f.playlistLoader,t),a[i].push(f),void 0===l[h]){const e=new xo.AudioTrack({id:h,kind:bc(f),enabled:!1,language:f.language,default:f.default,label:h});l[h]=e}}}i.on("error",Sc[e](e,t))},SUBTITLES:(e,t)=>{const{tech:n,vhs:r,sourceType:i,segmentLoaders:{[e]:s},requestOptions:o,main:{mediaGroups:a},mediaTypes:{[e]:{groups:l,tracks:c}},mainPlaylistLoader:u}=t;for(const s in a[e]){l[s]||(l[s]=[]);for(const d in a[e][s]){if(!r.options_.useForcedSubtitles&&a[e][s][d].forced)continue;let h,p=a[e][s][d];if("hls"===i)h=new Ma(p.resolvedUri,r,o);else if("dash"===i){if(!p.playlists.filter(e=>e.excludeUntil!==1/0).length)return;h=new Ja(p.playlists[0],r,o,u)}else"vhs-json"===i&&(h=new Ma(p.playlists?p.playlists[0]:p.resolvedUri,r,o));if(p=jo({id:d,playlistLoader:h},p),kc[e](e,p.playlistLoader,t),l[s].push(p),void 0===c[d]){const e=n.addRemoteTextTrack({id:d,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:d},!1).track;c[d]=e}}}s.on("error",Sc[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{const{tech:n,main:{mediaGroups:r},mediaTypes:{[e]:{groups:i,tracks:s}}}=t;for(const t in r[e]){i[t]||(i[t]=[]);for(const o in r[e][t]){const a=r[e][t][o];if(!/^(?:CC|SERVICE)/.test(a.instreamId))continue;const l=n.options_.vhs&&n.options_.vhs.captionServices||{};let c={label:o,language:a.language,instreamId:a.instreamId,default:a.default&&a.autoselect};if(l[c.instreamId]&&(c=jo(c,l[c.instreamId])),void 0===c.default&&delete c.default,i[t].push(jo({id:o},a)),void 0===s[o]){const e=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=e}}}}},xc=(e,t)=>{for(let n=0;n<e.length;n++){if(ia(t,e[n]))return!0;if(e[n].playlists&&xc(e[n].playlists,t))return!0}return!1},Ec={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if(n[e].enabled)return n[e];return null},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if("showing"===n[e].mode||"hidden"===n[e].mode)return n[e];return null}};class Cc{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){1===e&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Mo(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(e=>[e.ID,e])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Ac extends xo.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new Cc,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Do("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const n=t.serverUri||t.serverURL;if(!n)return this.logger_(`steering manifest URL is ${n}, cannot request steering manifest.`),void this.trigger("error");n.startsWith("data:")?this.decodeDataUriManifest_(n.substring(n.indexOf(",")+1)):(this.steeringManifest.reloadUri=Mo(e,n),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const n=e?t:this.getRequestURI(t);if(!n)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();const r={contentSteeringInfo:{uri:n}};this.trigger({type:"contentsteeringloadstart",metadata:r}),this.request_=this.xhr_({uri:n,requestType:"content-steering-manifest"},(e,t)=>{if(e){if(410===t.status)return this.logger_(`manifest request 410 ${e}.`),this.logger_(`There will be no more content steering requests to ${n} this session.`),void this.excludedSteeringManifestURLs.add(n);if(429===t.status){const n=t.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${e}.`),this.logger_(`content steering will retry in ${n} seconds.`),void this.startTTLTimeout_(parseInt(n,10))}return this.logger_(`manifest failed to load ${e}.`),void this.startTTLTimeout_()}let i;this.trigger({type:"contentsteeringloadcomplete",metadata:r});try{i=JSON.parse(this.request_.responseText)}catch(e){const t={errorType:xo.Error.StreamingContentSteeringParserError,error:e};this.trigger({type:"error",metadata:t})}this.assignSteeringProperties_(i);const s={contentSteeringInfo:r.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:s}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new(i().URL)(e),n=new(i().URL)(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}decodeDataUriManifest_(e){const t=JSON.parse(i().atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new(i().URL)(e),n=this.getPathway(),r=this.getBandwidth_();if(n){const e=`_${this.manifestType_}_pathway`;t.searchParams.set(e,n)}if(r){const e=`_${this.manifestType_}_throughput`;t.searchParams.set(e,r)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const t=(e=>{for(const t of e)if(this.availablePathways_.has(t))return t;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==t&&(this.currentPathway=t,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=e=>this.excludedSteeringManifestURLs.has(e);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(e);if(!t(n))return n}const n=this.setSteeringParams_(e);return t(n)?null:n}startTTLTimeout_(e=this.steeringManifest.ttl){const t=1e3*e;this.ttlTimeout_=i().setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){i().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new Cc}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Mo(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let Oc;const Mc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Ic=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]};class Dc extends xo.EventTarget{constructor(e){super(),this.fastQualityChange_=(e=>{let t=null;return(...n)=>{clearTimeout(t),t=setTimeout(()=>{e.apply(null,n)},100)}})(this.fastQualityChange_.bind(this));const{src:t,withCredentials:n,tech:r,bandwidth:s,externVhs:o,useCueTags:a,playlistExclusionDuration:l,enableLowInitialPlaylist:c,sourceType:u,cacheEncryptionKeys:d,bufferBasedABR:h,leastPixelDiffSelector:p,captionServices:f,experimentalUseMMS:m}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:g}=e;null==g&&(g=1/0),Oc=o,this.bufferBasedABR=Boolean(h),this.leastPixelDiffSelector=Boolean(p),this.withCredentials=n,this.tech_=r,this.vhs_=r.vhs,this.player_=e.player_,this.sourceType_=u,this.useCueTags_=a,this.playlistExclusionDuration=l,this.maxPlaylistRetries=g,this.enableLowInitialPlaylist=c,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:g,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Fl,activeTrack:Fl,getActiveGroup:Fl,onGroupChanged:Fl,onTrackChanged:Fl,lastTrack_:null,logger_:Do(`MediaGroups[${t}]`)}}),e})(),m&&i().ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new(i().ManagedMediaSource),this.usingManagedMediaSource_=!0,xo.log("Using ManagedMediaSource")):i().MediaSource&&(this.mediaSource=new(i().MediaSource)),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Po(),this.hasPlayed_=!1,this.syncController_=new mc(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new vc,this.sourceUpdater_=new ic(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new gc,this.keyStatusMap_=new Map;const y={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:f,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new Ja(t,this.vhs_,jo(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Ma(t,this.vhs_,jo(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Bl(jo(y,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Bl(jo(y,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new lc(jo(y,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((e,t)=>{function n(){r.off("vttjserror",i),e()}function i(){r.off("vttjsloaded",n),t()}r.one("vttjsloaded",n),r.one("vttjserror",i),r.addWebVttScript_()})}),e),this.contentSteeringController_=new Ac(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Mc.forEach(e=>{this[e+"_"]=Ic.bind(this,e)}),this.logger_=Do("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const v="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(v,()=>{const e=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-e,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const r=this.media(),i=r&&(r.id||r.uri),s=e&&(e.id||e.uri);if(i&&i!==s){this.logger_(`switch media ${i} -> ${s} from ${t}`);const n={renditionInfo:{id:s,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:n}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,n)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],n=t?t.activeGroup():null,r=this.contentSteeringController_.getPathway();if(n&&r){const t=(n.length?n[0].playlists:n.playlists).filter(e=>e.attributes.serviceLocation===r);t.length&&this.mediaTypes_[e].activePlaylistLoader.media(t[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=i().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(i().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,r=Object.keys(n);let i;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{const e=n.main||r.length&&n[r[0]];for(const t in e)if(e[t].default){i={label:t};break}}if(!i)return t;const s=[];for(const t in n)if(n[t][i.label]){const r=n[t][i.label];if(r.playlists&&r.playlists.length)s.push.apply(s,r.playlists);else if(r.uri)s.push(r);else if(e.playlists.length)for(let n=0;n<e.playlists.length;n++){const r=e.playlists[n];r.attributes&&r.attributes.AUDIO&&r.attributes.AUDIO===t&&s.push(r)}}return s.length?s:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;ra(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),(e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{Tc[t](t,e)});const{mediaTypes:t,mainPlaylistLoader:n,tech:r,vhs:i,segmentLoaders:{AUDIO:s,main:o}}=e;["AUDIO","SUBTITLES"].forEach(n=>{t[n].activeGroup=((e,t)=>n=>{const{mainPlaylistLoader:r,mediaTypes:{[e]:{groups:i}}}=t,s=r.media();if(!s)return null;let o=null;s.attributes[e]&&(o=i[s.attributes[e]]);const a=Object.keys(i);if(!o)if("AUDIO"===e&&a.length>1&&oa(t.main))for(let e=0;e<a.length;e++){const t=i[a[e]];if(xc(t,s)){o=t;break}}else i.main?o=i.main:1===a.length&&(o=i[a[0]]);return void 0===n?o:null!==n&&o&&o.filter(e=>e.id===n.id)[0]||null})(n,e),t[n].activeTrack=Ec[n](n,e),t[n].onGroupChanged=((e,t)=>()=>{const{segmentLoaders:{[e]:n,main:r},mediaTypes:{[e]:i}}=t,s=i.activeTrack(),o=i.getActiveGroup(),a=i.activePlaylistLoader,l=i.lastGroup_;o&&l&&o.id===l.id||(i.lastGroup_=o,i.lastTrack_=s,_c(n,i),o&&!o.isMainPlaylist&&(o.playlistLoader?(n.resyncLoader(),wc(o.playlistLoader,i)):a&&r.resetEverything()))})(n,e),t[n].onGroupChanging=((e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:r}}=t;r.lastGroup_=null,n.abort(),n.pause()})(n,e),t[n].onTrackChanged=((e,t)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[e]:r,main:i},mediaTypes:{[e]:s}}=t,o=s.activeTrack(),a=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!o||c.id!==o.id)&&(s.lastGroup_=a,s.lastTrack_=o,_c(r,s),a)){if(a.isMainPlaylist){if(!o||!c||o.id===c.id)return;const e=t.vhs.playlistController_,r=e.selectPlaylist();if(e.media()===r)return;return s.logger_(`track change. Switching main audio from ${c.id} to ${o.id}`),n.pause(),i.resetEverything(),void e.fastQualityChange_(r)}if("AUDIO"===e){if(!a.playlistLoader)return i.setAudio(!0),void i.resetEverything();r.setAudio(!0),i.setAudio(!1)}l!==a.playlistLoader?(r.track&&r.track(o),r.resetEverything(),wc(a.playlistLoader,s)):wc(a.playlistLoader,s)}})(n,e),t[n].getActiveGroup=((e,{mediaTypes:t})=>()=>{const n=t[e].activeTrack();return n?t[e].activeGroup(n):null})(n,e)});const a=t.AUDIO.activeGroup();if(a){const e=(a.filter(e=>e.default)[0]||a[0]).id;t.AUDIO.tracks[e].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(e=>t[e].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(e=>t[e].onGroupChanging())});const l=()=>{t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",l),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",()=>{r.audioTracks().removeEventListener("change",l),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const e in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[e])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t))return;if(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments)return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;ra(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,"dash"===this.sourceType_&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(e=>{this.mainPlaylistLoader_.on(e,e=>{this.player_.trigger(d({},e))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let r=!0;const i=Object.keys(n.AUDIO);for(const e in n.AUDIO)for(const t in n.AUDIO[e])n.AUDIO[e][t].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Oc.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),i=this.bufferHighWaterLine();return function({currentPlaylist:e,buffered:t,currentTime:n,nextPlaylist:r,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:o,bufferBasedABR:a,log:l}){if(!r)return xo.log.warn("We received no playlist to switch to. Please check your stream."),!1;const c=`allowing switch ${e&&e.id||"null"} -> ${r.id}`;if(!e)return l(`${c} as current playlist is not set`),!0;if(r.id===e.id)return!1;const u=Boolean(Uo(t,n).length);if(!e.endList)return u||"number"!=typeof e.partTargetDuration?(l(`${c} as current playlist is live`),!0):(l(`not ${c} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const d=qo(t,n),h=a?Xa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Xa.MAX_BUFFER_LOW_WATER_LINE;if(o<h)return l(`${c} as duration < max low water line (${o} < ${h})`),!0;const p=r.attributes.BANDWIDTH,f=e.attributes.BANDWIDTH;if(p<f&&(!a||d<s)){let e=`${c} as next bandwidth < current bandwidth (${p} < ${f})`;return a&&(e+=` and forwardBuffer < bufferHighWaterLine (${d} < ${s})`),l(e),!0}if((!a||p>f)&&d>=i){let e=`${c} as forwardBuffer >= bufferLowWaterLine (${d} >= ${i})`;return a&&(e+=` and next bandwidth > current bandwidth (${p} > ${f})`),l(e),!0}return l(`not ${c} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:i,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const e=this.audioSegmentLoader_.pendingSegment_;if(!e||!e.segment||!e.segment.syncInfo)return;const t=e.segment.syncInfo.end+.01;this.tech_.setCurrentTime(t)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(e=>{this.mainSegmentLoader_.on(e,e=>{this.player_.trigger(d({},e))}),this.audioSegmentLoader_.on(e,e=>{this.player_.trigger(d({},e))}),this.subtitleSegmentLoader_.on(e,e=>{this.player_.trigger(d({},e))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){e&&e===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let r=n;if(e.start){const i=e.start.timeOffset;r=i<0?Math.max(n+i,t.start(0)):Math.min(n,i)}this.trigger("firstplay"),this.tech_.setCurrentTime(r)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,e=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;const n=Oc.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=No;const s=i.end(i.length-1);return s-r<=No&&n-s<=No}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,i=r.filter(ta),s=1===i.length&&i[0]===e;if(1===r.length&&n!==1/0)return xo.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){if(this.main().contentSteering){const t=this.pathwayAttribute_(e),n=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(t),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(t)},n)}let t=!1;r.forEach(n=>{if(n===e)return;const r=n.excludeUntil;void 0!==r&&r!==1/0&&(t=!0,delete n.excludeUntil)}),t&&(xo.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;o=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const a=this.selectPlaylist();if(!a)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const l=t.internal?this.logger_:xo.log.warn,c=t.message?" "+t.message:"";l(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${a.id}.`),a.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),a.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const u=a.targetDuration/2*1e3||5e3,d="number"==typeof a.lastRequest&&Date.now()-a.lastRequest<=u;return this.switchMedia_(a,"exclude",s||d)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],r="all"===e;(r||"main"===e)&&n.push(this.mainPlaylistLoader_);const i=[];(r||"audio"===e)&&i.push("AUDIO"),(r||"subtitle"===e)&&(i.push("CLOSED-CAPTIONS"),i.push("SUBTITLES")),i.forEach(e=>{const t=this.mediaTypes_[e]&&this.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)}),["main","audio","subtitle"].forEach(t=>{const r=this[`${t}SegmentLoader_`];!r||e!==t&&"all"!==e||n.push(r)}),n.forEach(e=>t.forEach(t=>{"function"==typeof e[t]&&e[t]()}))}setCurrentTime(e){const t=Uo(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Oc.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const n=e.media();if(!n)return null;const r=this.syncController_.getMediaSequenceSync(t);if(r&&r.isReliable){const e=r.start,t=r.end;if(!isFinite(e)||!isFinite(t))return null;const i=Oc.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n);return Po([[e,Math.max(e,t-i)]])}const i=this.syncController_.getExpiredTime(n,this.duration());if(null===i)return null;const s=Oc.Playlist.seekable(n,i,Oc.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,n));return s.length?s:null}computeFinalSeekable_(e,t){if(!t)return e;const n=e.start(0),r=e.end(0),i=t.start(0),s=t.end(0);return i>r||n>s?e:Po([[Math.max(n,i),Math.min(r,s)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const n=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_)return;if(n&&n.length&&this.seekable_.length&&n.start(0)===this.seekable_.start(0)&&n.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${Fo(this.seekable_)}]`);const r={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:r}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const e=this.seekable();if(!e.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1)))}const t=this.tech_.buffered();let n=Oc.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const e in t)t[e].forEach(e=>{e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=wa(this.main(),t),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=n.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(r.video+=`,${n.audio||e.main.audioCodec||L}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||i)&&(r.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||L,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video)return void this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const s=(e,t)=>e?j(t,this.usingManagedMediaSource_):P(t),o={};let a;if(["video","audio"].forEach(function(t){if(r.hasOwnProperty(t)&&!s(e[t].isFmp4,r[t])){const n=e[t].isFmp4?"browser":"muxer";o[n]=o[n]||[],o[n].push(r[t]),"audio"===t&&(a=n)}}),i&&a&&t.attributes.AUDIO){const e=t.attributes.AUDIO;this.main().playlists.forEach(n=>{(n.attributes&&n.attributes.AUDIO)===e&&n!==t&&(n.excludeUntil=1/0)}),this.logger_(`excluding audio group ${e} as ${a} does not support codec(s): "${r.audio}"`)}if(Object.keys(o).length){const e=Object.keys(o).reduce((e,t)=>(e&&(e+=", "),e+`${t} does not support codec(s): "${o[t].join(",")}"`),"")+".";return void this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:e},playlistExclusionDuration:1/0})}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const e=[];if(["video","audio"].forEach(t=>{const n=(M(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,i=(M(r[t]||"")[0]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&e.push(`"${this.sourceUpdater_.codecs[t]}" -> "${r[t]}"`)}),e.length)return void this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${e.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return r}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(n=>{const r=e[n];if(-1!==t.indexOf(r.id))return;t.push(r.id);const i=wa(this.main,r),s=[];!i.audio||P(i.audio)||j(i.audio,this.usingManagedMediaSource_)||s.push(`audio codec ${i.audio}`),!i.video||P(i.video)||j(i.video,this.usingManagedMediaSource_)||s.push(`video codec ${i.video}`),i.text&&"stpp.ttml.im1t"===i.text&&s.push(`text codec ${i.text}`),s.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${s.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,r=ba(M(e)),i=_a(r),s=r.video&&M(r.video)[0]||null,o=r.audio&&M(r.audio)[0]||null;Object.keys(n).forEach(e=>{const r=n[e];if(-1!==t.indexOf(r.id)||r.excludeUntil===1/0)return;t.push(r.id);const a=[],l=wa(this.mainPlaylistLoader_.main,r),c=_a(l);if(l.audio||l.video){if(c!==i&&a.push(`codec count "${c}" !== "${i}"`),!this.sourceUpdater_.canChangeType()){const e=l.video&&M(l.video)[0]||null,t=l.audio&&M(l.audio)[0]||null;e&&s&&e.type.toLowerCase()!==s.type.toLowerCase()&&a.push(`video codec "${e.type}" !== "${s.type}"`),t&&o&&t.type.toLowerCase()!==o.type.toLowerCase()&&a.push(`audio codec "${t.type}" !== "${o.type}"`)}a.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id}: ${a.join(" && ")}`))}})}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n=0){if(!e.segments)return;let r,s=n;for(let n=0;n<e.segments.length;n++){const o=e.segments[n];if(r||(r=cc(t,s+o.duration/2)),r){if("cueIn"in o){r.endTime=s,r.adEndTime=s,s+=o.duration,r=null;continue}if(s<r.endTime){s+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&(r=new(i().VTTCue)(s,s+o.duration,o.cueOut),r.adStartTime=s,r.adEndTime=s+parseFloat(o.cueOut),t.addCue(r)),"cueOutCont"in o){const[e,n]=o.cueOutCont.split("/").map(parseFloat);r=new(i().VTTCue)(s,s+o.duration,""),r.adStartTime=s-e,r.adEndTime=r.adStartTime+n,t.addCue(r)}s+=o.duration}}(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Xa.GOAL_BUFFER_LENGTH,n=Xa.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Xa.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Xa.BUFFER_LOW_WATER_LINE,n=Xa.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Xa.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(t,Xa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?i:r)}bufferHighWaterLine(){return Xa.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){Ol(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:e,dateRanges:t})=>{const n=e.metadataTrack_;if(!n)return;const r=i().WebKitDataCue||i().VTTCue;t.forEach(e=>{for(const t of Object.keys(e)){if(Al.has(t))continue;const i=new r(e.startTime,e.endTime,"");i.id=e.id,i.type="com.apple.quicktime.HLS",i.value={key:Cl[t],data:e[t]},"scte35Out"!==t&&"scte35In"!==t||(i.value.data=new Uint8Array(i.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(i)}e.processDateRange()})})({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,n){const r=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Ol(this.inbandTextTracks_,e,this.tech_),(({inbandTextTracks:e,metadataArray:t,timestampOffset:n,videoDuration:r})=>{if(!t)return;const s=i().WebKitDataCue||i().VTTCue,o=e.metadataTrack_;if(!o)return;if(t.forEach(e=>{const t=e.cueTime+n;!("number"!=typeof t||i().isNaN(t)||t<0)&&t<1/0&&e.frames&&e.frames.length&&e.frames.forEach(e=>{const n=new s(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:()=>(xo.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key)},value:{get:()=>(xo.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data)},privateData:{get:()=>(xo.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data)}})}(n),o.addCue(n)})}),!o.cues||!o.cues.length)return;const a=o.cues,l=[];for(let e=0;e<a.length;e++)a[e]&&l.push(a[e]);const c=l.reduce((e,t)=>{const n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),u=Object.keys(c).sort((e,t)=>Number(e)-Number(t));u.forEach((e,t)=>{const n=c[e],i=isFinite(r)?r:e,s=Number(u[t+1])||i;n.forEach(e=>{e.endTime=s})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:n})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(e=>{this.contentSteeringController_.on(e,e=>{this.trigger(d({},e))})}),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const e=this.main();(this.contentSteeringController_.didDASHTagChange(e.uri,e.contentSteering)||(()=>{const t=this.contentSteeringController_.getAvailablePathways(),n=[];for(const r of e.playlists){const e=r.attributes.serviceLocation;if(e&&(n.push(e),!t.has(e)))return!0}return!(n.length||!t.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const t=this.main().playlists,n=new Set;let r=!1;Object.keys(t).forEach(i=>{const s=t[i],o=this.pathwayAttribute_(s),a=o&&e!==o;s.excludeUntil===1/0&&"content-steering"===s.lastExcludeReason_&&!a&&(delete s.excludeUntil,delete s.lastExcludeReason_,r=!0);const l=!s.excludeUntil&&s.excludeUntil!==1/0;!n.has(s.id)&&a&&l&&(n.add(s.id),s.excludeUntil=1/0,s.lastExcludeReason_="content-steering",this.logger_(`excluding ${s.id} for ${s.lastExcludeReason_}`))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(t=>{const n=this.mediaTypes_[t];if(n.activePlaylistLoader){const t=n.activePlaylistLoader.media_;t&&t.attributes.serviceLocation!==e&&(r=!0)}}),r&&this.changeSegmentPathway_()}handlePathwayClones_(){const e=this.main().playlists,t=this.contentSteeringController_.currentPathwayClones,n=this.contentSteeringController_.nextPathwayClones;if(t&&t.size||n&&n.size){for(const[e,r]of t.entries())n.get(e)||(this.mainPlaylistLoader_.updateOrDeleteClone(r),this.contentSteeringController_.excludePathway(e));for(const[r,i]of n.entries()){const n=t.get(r);n?this.equalPathwayClones_(n,i)||(this.mainPlaylistLoader_.updateOrDeleteClone(i,!0),this.contentSteeringController_.addAvailablePathway(r)):(e.filter(e=>e.attributes["PATHWAY-ID"]===i["BASE-ID"]).forEach(e=>{this.mainPlaylistLoader_.addClonePathway(i,e)}),this.contentSteeringController_.addAvailablePathway(r))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...n])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const n=e["URI-REPLACEMENT"].PARAMS,r=t["URI-REPLACEMENT"].PARAMS;for(const e in n)if(n[e]!==r[e])return!1;for(const e in r)if(n[e]!==r[e])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(n=>{const r=this.mainPlaylistLoader_.getKeyIdSet(n);r&&r.size&&r.forEach(r=>{const i="usable",s=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===i,o=n.lastExcludeReason_===t&&n.excludeUntil===1/0;s?s&&o&&(delete n.excludeUntil,delete n.lastExcludeReason_,this.logger_(`enabling playlist ${n.id} because key ID ${r} is ${i}`)):(n.excludeUntil!==1/0&&n.lastExcludeReason_!==t&&(n.excludeUntil=1/0,n.lastExcludeReason_=t,this.logger_(`excluding playlist ${n.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${i}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(e=>{const n=e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height<720,r=e.excludeUntil===1/0&&e.lastExcludeReason_===t;n&&r&&(delete e.excludeUntil,xo.log.warn(`enabling non-HD playlist ${e.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const n=("string"==typeof e?e:(e=>{const t=new Uint8Array(e);return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")})(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${n} added to the keyStatusMap`),this.keyStatusMap_.set(n,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class jc{constructor(e,t,n){const{playlistController_:r}=e,i=r.fastQualityChange_.bind(r);if(t.attributes){const e=t.attributes.RESOLUTION;this.width=e&&e.width,this.height=e&&e.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}var s,o,a;this.codecs=wa(r.main(),t),this.playlist=t,this.id=n,this.enabled=(s=e.playlists,o=t.id,a=i,e=>{const t=s.main.playlists[o],n=ea(t),r=ta(t);if(void 0===e)return r;e?delete t.disabled:t.disabled=!0;const i={renditionInfo:{id:o,bandwidth:t.attributes.BANDWIDTH,resolution:t.attributes.RESOLUTION,codecs:t.attributes.CODECS},cause:"fast-quality"};return e===r||n||(e?(a(t),s.trigger({type:"renditionenabled",metadata:i})):s.trigger({type:"renditiondisabled",metadata:i})),e})}}const Pc=["seeking","seeked","pause","playing","error"];class Lc extends xo.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Do("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),o=this.playlistController_,a=["main","subtitle","audio"],l={};a.forEach(e=>{l[e]={reset:()=>this.resetSegmentDownloads_(e),updateend:()=>this.checkSegmentDownloads_(e)},o[`${e}SegmentLoader_`].on("appendsdone",l[e].updateend),o[`${e}SegmentLoader_`].on("playlistupdate",l[e].reset),this.tech_.on(["seeked","seeking"],l[e].reset)});const c=e=>{["main","audio"].forEach(t=>{o[`${t}SegmentLoader_`][e]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=()=>c("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(Pc,s),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(Pc,s),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),a.forEach(e=>{o[`${e}SegmentLoader_`].off("appendsdone",l[e].updateend),o[`${e}SegmentLoader_`].off("playlistupdate",l[e].reset),this.tech_.off(["seeked","seeking"],l[e].reset)}),this.checkCurrentTimeTimeout_&&i().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&i().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=i().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],r=n.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[`${e}Buffered_`],r);if(this[`${e}Buffered_`]=r,i){const n={bufferedRanges:r};return t.trigger({type:"bufferedrangeschanged",metadata:n}),void this.resetSegmentDownloads_(e)}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:zo(r)}),this[`${e}StalledDownloads_`]<10||(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+No>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Po([this.lastRecordedTime,e]));const t={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:t}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const e=this.seekable(),t=this.tech_.currentTime();let n;if(this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)){const t=e.start(0);n=t+(t===e.end(0)?0:No)}if(void 0!==n)return this.logger_(`Trying to seek outside of seekable at time ${t} with seekable range ${Fo(e)}. Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0;const r=this.playlistController_.sourceUpdater_,i=this.tech_.buffered(),s=r.audioBuffer?r.audioBuffered():null,o=r.videoBuffer?r.videoBuffered():null,a=this.media(),l=a.partTargetDuration?a.partTargetDuration:2*(a.targetDuration-Lo),c=[s,o];for(let e=0;e<c.length;e++)if(c[e]&&qo(c[e],t)<l)return!1;const u=Bo(i,t);return 0!==u.length&&(n=u.start(0)+No,this.logger_(`Buffered region starts (${u.start(0)})  just beyond seek point (${t}). Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Uo(t,e);return n.length&&e+3<=n.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const n=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${n}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const i=Bo(r,t);return i.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${i.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,n,r=!1){if(!e.length)return!1;let i=e.end(e.length-1)+No;const s=!n.endList,o="number"==typeof n.partTargetDuration;return s&&(o||r)&&(i=e.end(e.length-1)+3*n.targetDuration),t>i}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let r;if(e.length&&t.length){const i=Uo(e,n-3),s=Uo(e,n),o=Uo(t,n);o.length&&!s.length&&i.length&&(r={start:i.end(0),end:o.end(0)})}else Bo(e,n).length||(r=this.gapFromVideoUnderflow_(e,n));return!!r&&(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${n}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),r=Bo(t,n);if(this.resetTimeUpdate_(),0===r.length||n!==e)return;this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+Lo);const i={gapInfo:{from:n,to:r.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:i}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const n=function(e){if(e.length<2)return Po();const t=[];for(let n=1;n<e.length;n++){const r=e.end(n-1),i=e.start(n);t.push([r,i])}return Po(t)}(e);for(let e=0;e<n.length;e++){const r=n.start(e),i=n.end(e);if(t-r<4&&t-r>2)return{start:r,end:i}}return null}}const Nc={errorInterval:30,getSource(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Rc=function(e,t){let n=0,r=0;const i=jo(Nc,t);e.ready(()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&e.currentTime(r)},o=function(t){null!=t&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},a=function(){if(Date.now()-n<1e3*i.errorInterval)e.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(i.getSource&&"function"==typeof i.getSource)return n=Date.now(),i.getSource.call(e,o);xo.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function(){e.off("loadedmetadata",s),e.off("error",a),e.off("dispose",l)};e.on("error",a),e.on("dispose",l),e.reloadSourceOnError=function(t){l(),Rc(e,t)}};var Uc="3.17.0";const Bc={PlaylistLoader:Ma,Playlist:aa,utils:za,STANDARD_PLAYLIST_SELECTOR:xl,INITIAL_PLAYLIST_SELECTOR:function(){const e=this.playlists.main.playlists.filter(aa.isEnabled);return Sl(e,(e,t)=>kl(e,t)),e.filter(e=>!!wa(this.playlists.main,e).video)[0]||null},lastBandwidthSelector:xl,movingAverageBandwidthSelector:function(e){let t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let r=this.useDevicePixelRatio&&i().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),Tl({main:this.playlists.main,bandwidth:t,playerWidth:parseInt(wl(this.tech_.el(),"width"),10)*r,playerHeight:parseInt(wl(this.tech_.el(),"height"),10)*r,playerObjectFit:this.usePlayerObjectFit?wl(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},comparePlaylistBandwidth:kl,comparePlaylistResolution:function(e,t){let n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||i().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||i().Number.MAX_VALUE,n===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:Da()};Object.keys(Xa).forEach(e=>{Object.defineProperty(Bc,e,{get:()=>(xo.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),Xa[e]),set(t){xo.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),"number"!=typeof t||t<0?xo.log.warn(`value of Vhs.${e} must be greater than or equal to 0`):Xa[e]=t}})});const Fc="videojs-vhs",zc=function(e,t){const n=t.media();let r=-1;for(let t=0;t<e.length;t++)if(e[t].id===n.id){r=t;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};Bc.canPlaySource=function(){return xo.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const $c=()=>{if(!i().localStorage)return null;const e=i().localStorage.getItem(Fc);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},qc=(e,t)=>{e._requestCallbackSet||(e._requestCallbackSet=new Set),e._requestCallbackSet.add(t)},Hc=(e,t)=>{e._responseCallbackSet||(e._responseCallbackSet=new Set),e._responseCallbackSet.add(t)},Vc=(e,t)=>{e._requestCallbackSet&&(e._requestCallbackSet.delete(t),e._requestCallbackSet.size||delete e._requestCallbackSet)},Wc=(e,t)=>{e._responseCallbackSet&&(e._responseCallbackSet.delete(t),e._responseCallbackSet.size||delete e._responseCallbackSet)};Bc.supportsNativeHls=function(){if(!o()||!o().createElement)return!1;const e=o().createElement("video");return!!xo.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),Bc.supportsNativeDash=!!(o()&&o().createElement&&xo.getTech("Html5").isSupported())&&/maybe|probably/i.test(o().createElement("video").canPlayType("application/dash+xml")),Bc.supportsTypeNatively=e=>"hls"===e?Bc.supportsNativeHls:"dash"===e&&Bc.supportsNativeDash,Bc.isSupported=function(){return xo.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},Bc.xhr.onRequest=function(e){qc(Bc.xhr,e)},Bc.xhr.onResponse=function(e){Hc(Bc.xhr,e)},Bc.xhr.offRequest=function(e){Vc(Bc.xhr,e)},Bc.xhr.offResponse=function(e){Wc(Bc.xhr,e)};const Gc=xo.getComponent("Component");class Kc extends Gc{constructor(e,t,n){if(super(t,n.vhs),"number"==typeof n.initialBandwidth&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=Do("VhsHandler"),t.options_&&t.options_.playerId){const e=xo.getPlayer(t.options_.playerId);this.player_=e}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(o(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],e=>{const t=o().fullscreenElement||o().webkitFullscreenElement||o().mozFullScreenElement||o().msFullscreenElement;t&&t.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=jo(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=void 0===this.options_.useNetworkInformationApi||this.options_.useNetworkInformationApi,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=$c();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Xa.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Xa.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{void 0!==this.source_[e]&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const t=this.options_.customPixelRatio;"number"==typeof t&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;var n;this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=Bc,this.options_.sourceType=U(t),this.options_.seekTo=e=>{this.tech_.setCurrentTime(e)},this.options_.player_=this.player_,this.playlistController_=new Dc(this.options_);const r=jo({liveRangeSafeTimeDelta:No},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Lc(r),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const e=xo.players[this.tech_.options_.playerId];let t=this.playlistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)});const s=this.options_.bufferBasedABR?Bc.movingAverageBandwidthSelector(.55):Bc.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=Bc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e=this.playlistController_.mainSegmentLoader_.bandwidth;const t=i().navigator.connection||i().navigator.mozConnection||i().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){const r=1e3*t.downlink*1e3;e=r>=n&&e>=n?Math.max(e,r):r}return e},set(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const e=1/(this.bandwidth||1);let t;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set(){xo.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>zo(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>zo(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(e=>{if(!i().localStorage)return!1;let t=$c();t=t?jo(t,e):e;try{i().localStorage.setItem(Fc,JSON.stringify(t))}catch(e){return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{var e;(e=this).representations=()=>{const t=e.playlistController_.main(),n=oa(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter(e=>!ea(e)).map((t,n)=>new jc(e,t,t.id)):[]}}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=i().URL.createObjectURL(this.playlistController_.mediaSource),(xo.browser.IS_ANY_SAFARI||xo.browser.IS_IOS)&&this.options_.overrideNative&&"hls"===this.options_.sourceType&&"function"==typeof this.tech_.addSourceElement?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:e,sourceKeySystems:t,audioMedia:n,mainPlaylists:r})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const i=(a=n?r.concat([n]):r,l=Object.keys(t),a.reduce((e,t)=>{if(!t.contentProtection)return e;const n=l.reduce((e,n)=>{const r=t.contentProtection[n];return r&&r.pssh&&(e[n]={pssh:r.pssh}),e},{});return Object.keys(n).length&&e.push(n),e},[])),s=[],o=[];var a,l;return i.forEach(t=>{o.push(new Promise((t,n)=>{e.tech_.one("keysessioncreated",t)})),s.push(new Promise((n,r)=>{e.eme.initializeMediaKeys({keySystems:t},e=>{e?r(e):n()})}))}),Promise.race([Promise.all(s),Promise.race(o)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=(({player:e,sourceKeySystems:t,media:n,audioMedia:r})=>{const i=((e,t,n)=>{if(!e)return e;let r={};t&&t.attributes&&t.attributes.CODECS&&(r=ba(M(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);const i=D(r.video),s=D(r.audio),o={};for(const n in e)o[n]={},s&&(o[n].audioContentType=s),i&&(o[n].videoContentType=i),t.contentProtection&&t.contentProtection[n]&&t.contentProtection[n].pssh&&(o[n].pssh=t.contentProtection[n].pssh),"string"==typeof e[n]&&(o[n].url=e[n]);return jo(e,o)})(t,n,r);return!(!i||(e.currentSource().keySystems=i,i&&!e.eme&&(xo.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",e=>{this.playlistController_.updatePlaylistByKeyStatus(e.keyId,e.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=xo.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{!function(e,t){t.representations().forEach(t=>{e.addQualityLevel(t)}),zc(e,t.playlists)}(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{zc(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":Uc,"mux.js":"7.1.0","mpd-parser":"1.3.1","m3u8-parser":"7.2.0","aes-decrypter":"4.0.2"}}version(){return this.constructor.version()}canChangeType(){return ic.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&i().URL.revokeObjectURL&&(i().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return(({playlist:e,time:t,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===t)return n({message:"getProgramTime: playlist and time must be provided"});const r=((e,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let n,r=0;for(let i=0;i<t.segments.length&&(n=t.segments[i],r=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration,!(e<=r));i++);const i=t.segments[t.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+.25*i.duration)return null;n=i}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}})(t,e);if(!r)return n({message:"valid programTime was not found"});if("estimate"===r.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const i={mediaSeconds:t},s=((e,t)=>{if(!t.dateTimeObject)return null;const n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)})(t,r.segment);return s&&(i.programDateTime=s.toISOString()),n(null,i)})({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,r=2){return $a({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{qc(this.xhr,e)},this.xhr.onResponse=e=>{Hc(this.xhr,e)},this.xhr.offRequest=e=>{Vc(this.xhr,e)},this.xhr.offResponse=e=>{Wc(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(e=>{this.playlistController_.on(e,e=>{this.player_.trigger(d({},e))})}),["gapjumped","playedrangeschanged"].forEach(e=>{this.playbackWatcher_.on(e,e=>{this.player_.trigger(d({},e))})})}}const Jc={name:"videojs-http-streaming",VERSION:Uc,canHandleSource(e,t={}){const n=jo(xo.options,t);return!(!n.vhs.experimentalUseMMS&&!j("avc1.4d400d,mp4a.40.2",!1))&&Jc.canPlayType(e.type,n)},handleSource(e,t,n={}){const r=jo(xo.options,n);return t.vhs=new Kc(e,t,r),t.vhs.xhr=Da(),t.vhs.setupXhrHooks_(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){const n=U(e);if(!n)return"";const r=Jc.getOverrideNative(t);return!Bc.supportsTypeNatively(n)||r?"maybe":""},getOverrideNative(e={}){const{vhs:t={}}=e,n=!(xo.browser.IS_ANY_SAFARI||xo.browser.IS_IOS),{overrideNative:r=n}=t;return r}};j("avc1.4d400d,mp4a.40.2",!0)&&xo.getTech("Html5").registerSourceHandler(Jc,0),xo.VhsHandler=Kc,xo.VhsSourceHandler=Jc,xo.Vhs=Bc,xo.use||xo.registerComponent("Vhs",Bc),xo.options.vhs=xo.options.vhs||{},xo.getPlugin&&xo.getPlugin("reloadSourceOnError")||xo.registerPlugin("reloadSourceOnError",function(e){Rc(this,e)})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};return(()=>{"use strict";n.r(r),n.d(r,{default:()=>RP});var e={};function t(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var n=this,r=arguments;return new Promise(function(i,s){var o=e.apply(n,r);function a(e){t(o,i,s,a,l,"next",e)}function l(e){t(o,i,s,a,l,"throw",e)}a(void 0)})}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(e),n.d(e,{AbsolutePosition:()=>tr,AbstractConnector:()=>nn,AbstractStruct:()=>vs,AbstractType:()=>xi,Array:()=>Wi,ContentAny:()=>As,ContentBinary:()=>_s,ContentDeleted:()=>ws,ContentDoc:()=>ks,ContentEmbed:()=>Ts,ContentFormat:()=>xs,ContentJSON:()=>Es,ContentString:()=>Os,ContentType:()=>Us,Doc:()=>vn,GC:()=>bs,ID:()=>qn,Item:()=>Hs,Map:()=>Ki,PermanentUserData:()=>Yn,RelativePosition:()=>Qn,Skip:()=>Gs,Snapshot:()=>lr,Text:()=>ds,Transaction:()=>Ir,UndoManager:()=>qr,UpdateDecoderV1:()=>_n,UpdateDecoderV2:()=>Sn,UpdateEncoderV1:()=>Tn,UpdateEncoderV2:()=>En,XmlElement:()=>fs,XmlFragment:()=>ps,XmlHook:()=>gs,XmlText:()=>ys,YArrayEvent:()=>Vi,YEvent:()=>mi,YMapEvent:()=>Gi,YTextEvent:()=>us,YXmlEvent:()=>ms,applyUpdate:()=>In,applyUpdateV2:()=>Mn,cleanupYTextFormatting:()=>as,compareIDs:()=>Hn,compareRelativePositions:()=>ar,convertUpdateFormatV1ToV2:()=>hi,convertUpdateFormatV2ToV1:()=>pi,createAbsolutePositionFromRelativePosition:()=>or,createDeleteSet:()=>dn,createDeleteSetFromStructStore:()=>hn,createDocFromSnapshot:()=>br,createID:()=>Vn,createRelativePositionFromJSON:()=>er,createRelativePositionFromTypeIndex:()=>rr,createSnapshot:()=>fr,decodeRelativePosition:()=>sr,decodeSnapshot:()=>pr,decodeSnapshotV2:()=>hr,decodeStateVector:()=>Ln,decodeUpdate:()=>Gr,decodeUpdateV2:()=>Kr,diffUpdate:()=>ii,diffUpdateV2:()=>ri,emptySnapshot:()=>mr,encodeRelativePosition:()=>ir,encodeSnapshot:()=>dr,encodeSnapshotV2:()=>ur,encodeStateAsUpdate:()=>jn,encodeStateAsUpdateV2:()=>Dn,encodeStateVector:()=>Rn,encodeStateVectorFromUpdate:()=>Qr,encodeStateVectorFromUpdateV2:()=>Yr,equalDeleteSets:()=>gn,equalSnapshots:()=>cr,findIndexSS:()=>xr,findRootTypeKey:()=>Kn,getItem:()=>Er,getItemCleanEnd:()=>Or,getItemCleanStart:()=>Ar,getState:()=>kr,getTypeChildren:()=>ki,isDeleted:()=>an,isParentOf:()=>Jn,iterateDeletedStructs:()=>on,logType:()=>Xn,logUpdate:()=>Vr,logUpdateV2:()=>Wr,mergeDeleteSets:()=>cn,mergeUpdates:()=>Xr,mergeUpdatesV2:()=>ni,obfuscateUpdate:()=>ui,obfuscateUpdateV2:()=>di,parseUpdateMeta:()=>ei,parseUpdateMetaV2:()=>Zr,readUpdate:()=>On,readUpdateV2:()=>An,relativePositionToJSON:()=>Zn,snapshot:()=>gr,snapshotContainsUpdate:()=>_r,transact:()=>Br,tryGc:()=>Rr,typeListToArraySnapshot:()=>Ai,typeMapGetAllSnapshot:()=>qi,typeMapGetSnapshot:()=>$i});var u=n(4756),d=n.n(u);const h=Math.floor,p=127,f=Number.MAX_SAFE_INTEGER,m="undefined"!=typeof TextEncoder?new TextEncoder:null,g=m?e=>m.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r};let y="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});y&&1===y.decode(new Uint8Array).length&&(y=null);const v=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},b=(e,t)=>{for(;t>p;)v(e,128|p&t),t=h(t/128);v(e,p&t)},_=new Uint8Array(3e4),w=_.length/3,S=m&&m.encodeInto?(e,t)=>{if(t.length<w){const n=m.encodeInto(t,_).written||0;b(e,n);for(let t=0;t<n;t++)v(e,_[t])}else k(e,g(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;b(e,r);for(let t=0;t<r;t++)v(e,n.codePointAt(t))},k=(e,t)=>{b(e,t.byteLength),((e,t)=>{const n=e.cbuf.length,r=e.cpos,i=(s=n-r)<(o=t.length)?s:o;var s,o;const a=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,a>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(((e,t)=>e>t?e:t)(2*n,a)),e.cbuf.set(t.subarray(i)),e.cpos=a)})(e,t)},T=e=>new Error(e),x=T("Unexpected end of array"),E=T("Integer out of Range"),C=e=>e.arr[e.pos++],A=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const r=e.arr[e.pos++];if(t+=(r&p)*n,n*=128,r<128)return t;if(t>f)throw E}throw x},O=y?e=>y.decode((e=>((e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n})(e,A(e)))(e)):e=>{let t=A(e);if(0===t)return"";{let n=String.fromCodePoint(C(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(C(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}};var M;!function(e){e[e.Token=0]="Token",e[e.PermissionDenied=1]="PermissionDenied",e[e.Authenticated=2]="Authenticated"}(M||(M={}));const I=e=>Array.from(e.entries()).map(([e,t])=>({clientId:e,...t}));var D;!function(e){e[e.Connecting=0]="Connecting",e[e.Open=1]="Open",e[e.Closing=2]="Closing",e[e.Closed=3]="Closed"}(D||(D={}));const j=()=>new Map,P=e=>{const t=j();return e.forEach((e,n)=>{t.set(n,e)}),t},L=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},N=()=>new Set,R=e=>e[e.length-1],U=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},B=Array.from,F=Array.isArray;class z{constructor(){this._observers=j()}on(e,t){return L(this._observers,e,N).add(t),t}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return B((this._observers.get(e)||j()).values()).forEach(e=>e(...t))}destroy(){this._observers=j()}}class ${constructor(){this._observers=j()}on(e,t){L(this._observers,e,N).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return B((this._observers.get(e)||j()).values()).forEach(e=>e(...t))}destroy(){this._observers=j()}}const q=Math.floor,H=(Math.ceil,Math.abs),V=(Math.imul,Math.round,Math.log10),W=(Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),G=(e,t)=>e>t?e:t,K=(Number.isNaN,Math.pow,Math.sign,e=>0!==e?e<0:1/e<0),J=64,X=128,Y=127,Q=Number.MAX_SAFE_INTEGER,Z=(Number.MIN_SAFE_INTEGER,Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&q(e)===e)),ee=(Number.isNaN,Number.parseInt,String.fromCharCode),te=(String.fromCodePoint,ee(65535),/^\s*/g),ne=/([A-Z])/g,re=(e,t)=>(e=>e.replace(te,""))(e.replace(ne,e=>`${t}${(e=>e.toLowerCase())(e)}`)),ie="undefined"!=typeof TextEncoder?new TextEncoder:null,se=ie?e=>ie.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r};let oe="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});oe&&1===oe.decode(new Uint8Array).length&&(oe=null);class ae{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const le=()=>new ae,ce=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},ue=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},de=ue,he=(e,t)=>{for(;t>Y;)ue(e,X|Y&t),t=q(t/128);ue(e,Y&t)},pe=(e,t)=>{const n=K(t);for(n&&(t=-t),ue(e,(t>63?X:0)|(n?J:0)|63&t),t=q(t/64);t>0;)ue(e,(t>Y?X:0)|Y&t),t=q(t/128)},fe=new Uint8Array(3e4),me=fe.length/3,ge=ie&&ie.encodeInto?(e,t)=>{if(t.length<me){const n=ie.encodeInto(t,fe).written||0;he(e,n);for(let t=0;t<n;t++)ue(e,fe[t])}else ve(e,se(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;he(e,r);for(let t=0;t<r;t++)ue(e,n.codePointAt(t))},ye=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=W(n-r,t.length),s=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(G(2*n,s)),e.cbuf.set(t.subarray(i)),e.cpos=s)},ve=(e,t)=>{he(e,t.byteLength),ye(e,t)},be=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*G(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},_e=new DataView(new ArrayBuffer(4)),we=(e,t)=>{switch(typeof t){case"string":ue(e,119),ge(e,t);break;case"number":Z(t)&&H(t)<=2147483647?(ue(e,125),pe(e,t)):(n=t,_e.setFloat32(0,n),_e.getFloat32(0)===n?(ue(e,124),((e,t)=>{be(e,4).setFloat32(0,t,!1)})(e,t)):(ue(e,123),((e,t)=>{be(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":ue(e,122),((e,t)=>{be(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)ue(e,126);else if(F(t)){ue(e,117),he(e,t.length);for(let n=0;n<t.length;n++)we(e,t[n])}else if(t instanceof Uint8Array)ue(e,116),ve(e,t);else{ue(e,118);const n=Object.keys(t);he(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];ge(e,i),we(e,t[i])}}break;case"boolean":ue(e,t?120:121);break;default:ue(e,127)}var n};class Se extends ae{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&he(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const ke=e=>{e.count>0&&(pe(e.encoder,1===e.count?e.s:-e.s),e.count>1&&he(e.encoder,e.count-2))};class Te{constructor(){this.encoder=new ae,this.s=0,this.count=0}write(e){this.s===e?this.count++:(ke(this),this.count=1,this.s=e)}toUint8Array(){return ke(this),ce(this.encoder)}}const xe=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);pe(e.encoder,t),e.count>1&&he(e.encoder,e.count-2)}};class Ee{constructor(){this.encoder=new ae,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(xe(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return xe(this),ce(this.encoder)}}class Ce{constructor(){this.sarr=[],this.s="",this.lensE=new Te}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new ae;return this.sarr.push(this.s),this.s="",ge(e,this.sarr.join("")),ye(e,this.lensE.toUint8Array()),ce(e)}}const Ae=e=>new Error(e),Oe=()=>{throw Ae("Method unimplemented")},Me=()=>{throw Ae("Unexpected case")},Ie=Ae("Unexpected end of array"),De=Ae("Integer out of Range");class je{constructor(e){this.arr=e,this.pos=0}}const Pe=e=>new je(e),Le=e=>e.pos!==e.arr.length,Ne=e=>((e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n})(e,Ue(e)),Re=e=>e.arr[e.pos++],Ue=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const r=e.arr[e.pos++];if(t+=(r&Y)*n,n*=128,r<X)return t;if(t>Q)throw De}throw Ie},Be=e=>{let t=e.arr[e.pos++],n=63&t,r=64;const i=(t&J)>0?-1:1;if(0===(t&X))return i*n;const s=e.arr.length;for(;e.pos<s;){if(t=e.arr[e.pos++],n+=(t&Y)*r,r*=128,t<X)return i*n;if(n>Q)throw De}throw Ie},Fe=oe?e=>oe.decode(Ne(e)):e=>{let t=Ue(e);if(0===t)return"";{let n=String.fromCodePoint(Re(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Re(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},ze=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},$e=[e=>{},e=>null,Be,e=>ze(e,4).getFloat32(0,!1),e=>ze(e,8).getFloat64(0,!1),e=>ze(e,8).getBigInt64(0,!1),e=>!1,e=>!0,Fe,e=>{const t=Ue(e),n={};for(let r=0;r<t;r++)n[Fe(e)]=qe(e);return n},e=>{const t=Ue(e),n=[];for(let r=0;r<t;r++)n.push(qe(e));return n},Ne],qe=e=>$e[127-Re(e)](e);class He extends je{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),Le(this)?this.count=Ue(this)+1:this.count=-1),this.count--,this.s}}class Ve extends je{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=Be(this);const e=K(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ue(this)+2)}return this.count--,this.s}}class We extends je{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=Be(this),t=1&e;this.diff=q(e/2),this.count=1,t&&(this.count=Ue(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Ge{constructor(e){this.decoder=new Ve(e),this.str=Fe(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}crypto.subtle;const Ke=crypto.getRandomValues.bind(crypto),Je=Math.random,Xe=()=>Ke(new Uint32Array(1))[0],Ye=[1e7]+-1e3+-4e3+-8e3+-1e11,Qe=()=>Ye.replace(/[018]/g,e=>(e^Xe()&15>>e/4).toString(16)),Ze=e=>new Promise(e),et=(Promise.all.bind(Promise),e=>Promise.resolve(e));let tt=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},nt=!0;try{"undefined"!=typeof localStorage&&localStorage&&(tt=localStorage,nt=!1)}catch(e){}const rt=tt,it=Object.assign,st=Object.keys,ot=(Object.values,e=>st(e).length),at=e=>st(e).length,lt=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},ct=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),ut=Object.freeze,dt=e=>{for(const t in e){const n=e[t];"object"!=typeof n&&"function"!=typeof n||dt(e[t])}return ut(e)},ht=Symbol("Equality"),pt=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&pt(e,t,n+1)}},ft=()=>{},mt=e=>e,gt=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor)return!1;if(null!=e[ht])return e[ht](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!gt(e.get(n),t.get(n)))return!1;break;case Object:if(ot(e)!==ot(t))return!1;for(const n in e)if(!ct(e,n)||!gt(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!gt(e[n],t[n]))return!1;break;default:return!1}return!0},yt="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),vt="undefined"!=typeof window&&"undefined"!=typeof document&&!yt;let bt;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);const _t=[],wt=e=>(()=>{if(void 0===bt)if(yt){bt=j();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&bt.set(t,""),t=r):null!==t?(bt.set(t,r),t=null):_t.push(r)}null!==t&&bt.set(t,"")}else"object"==typeof location?(bt=j(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){const[t,n]=e.split("=");bt.set(`--${re(t,"-")}`,n),bt.set(`-${re(t,"-")}`,n)}})):bt=j();return bt})().has(e),St=e=>{return void 0===(t=yt?process.env[e.toUpperCase().replaceAll("-","_")]:rt.getItem(e))?null:t;var t},kt=e=>wt("--"+e)||null!==St(e),Tt=(kt("production"),yt&&(Ot=process.env.FORCE_COLOR,["true","1","2"].includes(Ot)))||!wt("--no-colors")&&!kt("no-color")&&(!yt||process.stdout.isTTY)&&(!yt||wt("--color")||null!==St("COLORTERM")||(St("TERM")||"").includes("color")),xt=e=>new Uint8Array(e),Et=vt?e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=ee(e[n]);return btoa(t)}:e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),Ct=vt?e=>{const t=atob(e),n=xt(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}:e=>{const t=Buffer.from(e,"base64");return((e,t,n)=>new Uint8Array(e,t,n))(t.buffer,t.byteOffset,t.byteLength)},At=e=>(()=>{const t=le();return(t=>{we(t,e)})(t),ce(t)})();var Ot;class Mt{constructor(e,t){this.left=e,this.right=t}}const It=(e,t)=>new Mt(e,t),Dt="undefined"!=typeof document?document:{},jt=("undefined"!=typeof DOMParser&&new DOMParser,e=>((e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n})(e,(e,t)=>`${t}:${e};`).join("")),Pt=(Dt.ELEMENT_NODE,Dt.TEXT_NODE,Dt.CDATA_SECTION_NODE,Dt.COMMENT_NODE,Dt.DOCUMENT_NODE,Dt.DOCUMENT_TYPE_NODE,Dt.DOCUMENT_FRAGMENT_NODE,Symbol),Lt=Date.now,Nt=JSON.stringify,Rt=(JSON.parse,Pt()),Ut=Pt(),Bt=Pt(),Ft=Pt(),zt=Pt(),$t=Pt(),qt=Pt(),Ht=Pt(),Vt=Pt(),Wt=[zt,qt,Ht,Bt];let Gt=0,Kt=Lt();const Jt={[Rt]:It("font-weight","bold"),[Ut]:It("font-weight","normal"),[Bt]:It("color","blue"),[zt]:It("color","green"),[Ft]:It("color","grey"),[$t]:It("color","red"),[qt]:It("color","purple"),[Ht]:It("color","orange"),[Vt]:It("color","black")},Xt=Tt?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[],r=j();let i=[],s=0;for(;s<e.length;s++){const i=e[s],o=Jt[i];if(void 0!==o)r.set(o.left,o.right);else{if(void 0===i)break;if(i.constructor!==String&&i.constructor!==Number)break;{const e=jt(r);s>0||e.length>0?(t.push("%c"+i),n.push(e)):t.push(i)}}}for(s>0&&(i=n,i.unshift(t.join("")));s<e.length;s++){const t=e[s];t instanceof Symbol||i.push(t)}return i}:e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const n=e[r];if(void 0===n)break;if(n.constructor===String||n.constructor===Number)t.push(n);else if(n.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const t=e[r];t instanceof Symbol||n.push(t)}return n},Yt=(...e)=>{console.log(...Xt(e)),Zt.forEach(t=>t.print(e))},Qt=(...e)=>{console.warn(...Xt(e)),e.unshift(Ht),Zt.forEach(t=>t.print(e))},Zt=N(),en=e=>({[Symbol.iterator](){return this},next:e}),tn=(e,t)=>en(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class nn extends z{constructor(e,t){super(),this.doc=e,this.awareness=t}}class rn{constructor(e,t){this.clock=e,this.len=t}}class sn{constructor(){this.clients=new Map}}const on=(e,t,n)=>t.clients.forEach((t,r)=>{const i=e.doc.store.clients.get(r);if(null!=i){const r=i[i.length-1],s=r.id.clock+r.length;for(let r=0,o=t[r];r<t.length&&o.clock<s;o=t[++r])Mr(e,i,o.clock,o.len,n)}}),an=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const i=q((n+r)/2),s=e[i],o=s.clock;if(o<=t){if(t<o+s.len)return i;n=i+1}else r=i-1}return null})(n,t.clock)},ln=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){const r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=G(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n})},cn=e=>{const t=new sn;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,i)=>{if(!t.clients.has(i)){const s=r.slice();for(let t=n+1;t<e.length;t++)U(s,e[t].clients.get(i)||[]);t.clients.set(i,s)}});return ln(t),t},un=(e,t,n,r)=>{L(e.clients,t,()=>[]).push(new rn(n,r))},dn=()=>new sn,hn=e=>{const t=dn();return e.clients.forEach((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const i=n.id.clock;let s=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])s+=n.length;r.push(new rn(i,s))}}r.length>0&&t.clients.set(n,r)}),t},pn=(e,t)=>{he(e.restEncoder,t.clients.size),B(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,n])=>{e.resetDsCurVal(),he(e.restEncoder,t);const r=n.length;he(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}})},fn=e=>{const t=new sn,n=Ue(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=Ue(e.restDecoder),r=Ue(e.restDecoder);if(r>0){const i=L(t.clients,n,()=>[]);for(let t=0;t<r;t++)i.push(new rn(e.readDsClock(),e.readDsLen()))}}return t},mn=(e,t,n)=>{const r=new sn,i=Ue(e.restDecoder);for(let s=0;s<i;s++){e.resetDsCurVal();const i=Ue(e.restDecoder),s=Ue(e.restDecoder),o=n.clients.get(i)||[],a=kr(n,i);for(let n=0;n<s;n++){const n=e.readDsClock(),s=n+e.readDsLen();if(n<a){a<s&&un(r,i,a,s-a);let e=xr(o,n),l=o[e];for(!l.deleted&&l.id.clock<n&&(o.splice(e+1,0,zs(t,l,n-l.id.clock)),e++);e<o.length&&(l=o[e++],l.id.clock<s);)l.deleted||(s<l.id.clock+l.length&&o.splice(e,0,zs(t,l,s-l.id.clock)),l.delete(t))}else un(r,i,n,s-n)}}if(r.clients.size>0){const e=new En;return he(e.restEncoder,0),pn(e,r),e.toUint8Array()}return null},gn=(e,t)=>{if(e.clients.size!==t.clients.size)return!1;for(const[n,r]of e.clients.entries()){const e=t.clients.get(n);if(void 0===e||r.length!==e.length)return!1;for(let t=0;t<r.length;t++){const n=r[t],i=e[t];if(n.clock!==i.clock||n.len!==i.len)return!1}}return!0},yn=Xe;class vn extends z{constructor({guid:e=Qe(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:o=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=yn(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new wr,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Ze(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});const a=()=>Ze(e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){const e=this._item;null===e||this.shouldLoad||Br(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(B(this.subdocs).map(e=>e.guid))}transact(e,t=null){return Br(this,e,t)}get(e,t=xi){const n=L(this.share,e,()=>{const e=new t;return e._integrate(this,null),e}),r=n.constructor;if(t!==xi&&r!==t){if(r===xi){const r=new t;r._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=r}),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Wi)}getText(e=""){return this.get(e,ds)}getMap(e=""){return this.get(e,Ki)}getXmlElement(e=""){return this.get(e,fs)}getXmlFragment(e=""){return this.get(e,ps)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,B(this.subdocs).forEach(e=>e.destroy());const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new vn({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Br(e.parent.doc,n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class bn{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Ue(this.restDecoder)}readDsLen(){return Ue(this.restDecoder)}}class _n extends bn{readLeftID(){return Vn(Ue(this.restDecoder),Ue(this.restDecoder))}readRightID(){return Vn(Ue(this.restDecoder),Ue(this.restDecoder))}readClient(){return Ue(this.restDecoder)}readInfo(){return Re(this.restDecoder)}readString(){return Fe(this.restDecoder)}readParentInfo(){return 1===Ue(this.restDecoder)}readTypeRef(){return Ue(this.restDecoder)}readLen(){return Ue(this.restDecoder)}readAny(){return qe(this.restDecoder)}readBuf(){return(e=>{const t=xt(e.byteLength);return t.set(e),t})(Ne(this.restDecoder))}readJSON(){return JSON.parse(Fe(this.restDecoder))}readKey(){return Fe(this.restDecoder)}}class wn{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ue(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Ue(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Sn extends wn{constructor(e){super(e),this.keys=[],Ue(e),this.keyClockDecoder=new We(Ne(e)),this.clientDecoder=new Ve(Ne(e)),this.leftClockDecoder=new We(Ne(e)),this.rightClockDecoder=new We(Ne(e)),this.infoDecoder=new He(Ne(e),Re),this.stringDecoder=new Ge(Ne(e)),this.parentInfoDecoder=new He(Ne(e),Re),this.typeRefDecoder=new Ve(Ne(e)),this.lenDecoder=new Ve(Ne(e))}readLeftID(){return new qn(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new qn(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return qe(this.restDecoder)}readBuf(){return Ne(this.restDecoder)}readJSON(){return qe(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class kn{constructor(){this.restEncoder=le()}toUint8Array(){return ce(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){he(this.restEncoder,e)}writeDsLen(e){he(this.restEncoder,e)}}class Tn extends kn{writeLeftID(e){he(this.restEncoder,e.client),he(this.restEncoder,e.clock)}writeRightID(e){he(this.restEncoder,e.client),he(this.restEncoder,e.clock)}writeClient(e){he(this.restEncoder,e)}writeInfo(e){de(this.restEncoder,e)}writeString(e){ge(this.restEncoder,e)}writeParentInfo(e){he(this.restEncoder,e?1:0)}writeTypeRef(e){he(this.restEncoder,e)}writeLen(e){he(this.restEncoder,e)}writeAny(e){we(this.restEncoder,e)}writeBuf(e){ve(this.restEncoder,e)}writeJSON(e){ge(this.restEncoder,JSON.stringify(e))}writeKey(e){ge(this.restEncoder,e)}}class xn{constructor(){this.restEncoder=le(),this.dsCurrVal=0}toUint8Array(){return ce(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,he(this.restEncoder,t)}writeDsLen(e){0===e&&Me(),he(this.restEncoder,e-1),this.dsCurrVal+=e}}class En extends xn{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Ee,this.clientEncoder=new Te,this.leftClockEncoder=new Ee,this.rightClockEncoder=new Ee,this.infoEncoder=new Se(de),this.stringEncoder=new Ce,this.parentInfoEncoder=new Se(de),this.typeRefEncoder=new Te,this.lenEncoder=new Te}toUint8Array(){const e=le();return he(e,0),ve(e,this.keyClockEncoder.toUint8Array()),ve(e,this.clientEncoder.toUint8Array()),ve(e,this.leftClockEncoder.toUint8Array()),ve(e,this.rightClockEncoder.toUint8Array()),ve(e,ce(this.infoEncoder)),ve(e,this.stringEncoder.toUint8Array()),ve(e,ce(this.parentInfoEncoder)),ve(e,this.typeRefEncoder.toUint8Array()),ve(e,this.lenEncoder.toUint8Array()),ye(e,ce(this.restEncoder)),ce(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){we(this.restEncoder,e)}writeBuf(e){ve(this.restEncoder,e)}writeJSON(e){we(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const Cn=(e,t,n)=>{const r=new Map;n.forEach((e,n)=>{kr(t,n)>e&&r.set(n,e)}),Sr(t).forEach((e,t)=>{n.has(t)||r.set(t,0)}),he(e.restEncoder,r.size),B(r.entries()).sort((e,t)=>t[0]-e[0]).forEach(([n,r])=>{((e,t,n,r)=>{r=G(r,t[0].id.clock);const i=xr(t,r);he(e.restEncoder,t.length-i),e.writeClient(n),he(e.restEncoder,r);const s=t[i];s.write(e,r-s.id.clock);for(let n=i+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)})},An=(e,t,n,r=new Sn(e))=>Br(t,e=>{e.local=!1;let t=!1;const n=e.doc,i=n.store,s=((e,t)=>{const n=j(),r=Ue(e.restDecoder);for(let i=0;i<r;i++){const r=Ue(e.restDecoder),i=new Array(r),s=e.readClient();let o=Ue(e.restDecoder);n.set(s,{i:0,refs:i});for(let n=0;n<r;n++){const r=e.readInfo();switch(31&r){case 0:{const t=e.readLen();i[n]=new bs(Vn(s,o),t),o+=t;break}case 10:{const t=Ue(e.restDecoder);i[n]=new Gs(Vn(s,o),t),o+=t;break}default:{const a=!(192&r),l=new Hs(Vn(s,o),null,(r&X)===X?e.readLeftID():null,null,(r&J)===J?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,!a||32&~r?null:e.readString(),Vs(e,r));i[n]=l,o+=l.length}}}}return n})(r,n),o=((e,t,n)=>{const r=[];let i=B(n.keys()).sort((e,t)=>e-t);if(0===i.length)return null;const s=()=>{if(0===i.length)return null;let e=n.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=n.get(i[i.length-1])}return e};let o=s();if(null===o)return null;const a=new wr,l=new Map,c=(e,t)=>{const n=l.get(e);(null==n||n>t)&&l.set(e,t)};let u=o.refs[o.i++];const d=new Map,h=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,a.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):a.clients.set(t,[e]),i=i.filter(e=>e!==t)}r.length=0};for(;;){if(u.constructor!==Gs){const i=L(d,u.id.client,()=>kr(t,u.id.client))-u.id.clock;if(i<0)r.push(u),c(u.id.client,u.id.clock-1),h();else{const s=u.getMissing(e,t);if(null!==s){r.push(u);const e=n.get(s)||{refs:[],i:0};if(e.refs.length!==e.i){u=e.refs[e.i++];continue}c(s,kr(t,s)),h()}else(0===i||i<u.length)&&(u.integrate(e,i),d.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(null!==o&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=s(),null===o)break;u=o.refs[o.i++]}}if(a.clients.size>0){const e=new En;return Cn(e,a,new Map),he(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null})(e,i,s),a=i.pendingStructs;if(a){for(const[e,n]of a.missing)if(n<kr(i,e)){t=!0;break}if(o){for(const[e,t]of o.missing){const n=a.missing.get(e);(null==n||n>t)&&a.missing.set(e,t)}a.update=ni([a.update,o.update])}}else i.pendingStructs=o;const l=mn(r,e,i);if(i.pendingDs){const t=new Sn(Pe(i.pendingDs));Ue(t.restDecoder);const n=mn(t,e,i);i.pendingDs=l&&n?ni([l,n]):l||n}else i.pendingDs=l;if(t){const t=i.pendingStructs.update;i.pendingStructs=null,Mn(e.doc,t)}},n,!1),On=(e,t,n)=>An(e,t,n,new _n(e)),Mn=(e,t,n,r=Sn)=>{const i=Pe(t);An(i,e,n,new r(i))},In=(e,t,n)=>Mn(e,t,n,_n),Dn=(e,t=new Uint8Array([0]),n=new En)=>{((e,t,n=new Map)=>{Cn(e,t.store,n),pn(e,hn(t.store))})(n,e,Ln(t));const r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(ri(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===Tn)return Xr(r.map((e,t)=>0===t?e:pi(e)));if(n.constructor===En)return ni(r)}return r[0]},jn=(e,t)=>Dn(e,t,new Tn),Pn=e=>{const t=new Map,n=Ue(e.restDecoder);for(let r=0;r<n;r++){const n=Ue(e.restDecoder),r=Ue(e.restDecoder);t.set(n,r)}return t},Ln=e=>Pn(new bn(Pe(e))),Nn=(e,t)=>(he(e.restEncoder,t.size),B(t.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,n])=>{he(e.restEncoder,t),he(e.restEncoder,n)}),e),Rn=e=>((e,t=new xn)=>(e instanceof Map?Nn(t,e):((e,t)=>{Nn(e,Sr(t.store))})(t,e),t.toUint8Array()))(e,new kn);class Un{constructor(){this.l=[]}}const Bn=()=>new Un,Fn=(e,t)=>e.l.push(t),zn=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},$n=(e,t,n)=>pt(e.l,[t,n]);class qn{constructor(e,t){this.client=e,this.clock=t}}const Hn=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Vn=(e,t)=>new qn(e,t),Wn=(e,t)=>{he(e,t.client),he(e,t.clock)},Gn=e=>Vn(Ue(e),Ue(e)),Kn=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Me()},Jn=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},Xn=e=>{const t=[];let n=e._start;for(;n;)t.push(n),n=n.right;console.log("Children: ",t),console.log("Children content: ",t.filter(e=>!e.deleted).map(e=>e.content))};class Yn{constructor(e,t=e.getMap("users")){const n=new Map;this.yusers=t,this.doc=e,this.clients=new Map,this.dss=n;const r=(e,t)=>{const n=e.get("ds"),r=e.get("ids"),i=e=>this.clients.set(e,t);n.observe(e=>{e.changes.added.forEach(e=>{e.content.getContent().forEach(e=>{e instanceof Uint8Array&&this.dss.set(t,cn([this.dss.get(t)||dn(),fn(new bn(Pe(e)))]))})})}),this.dss.set(t,cn(n.map(e=>fn(new bn(Pe(e)))))),r.observe(e=>e.changes.added.forEach(e=>e.content.getContent().forEach(i))),r.forEach(i)};t.observe(e=>{e.keysChanged.forEach(e=>r(t.get(e),e))}),t.forEach(r)}setUserMapping(e,t,n,{filter:r=()=>!0}={}){const i=this.yusers;let s=i.get(n);s||(s=new Ki,s.set("ids",new Wi),s.set("ds",new Wi),i.set(n,s)),s.get("ids").push([t]),i.observe(e=>{setTimeout(()=>{const e=i.get(n);if(e!==s){s=e,this.clients.forEach((e,t)=>{n===e&&s.get("ids").push([t])});const t=new kn,r=this.dss.get(n);r&&(pn(t,r),s.get("ds").push([t.toUint8Array()]))}},0)}),e.on("afterTransaction",e=>{setTimeout(()=>{const t=s.get("ds"),n=e.deleteSet;if(e.local&&n.clients.size>0&&r(e,n)){const e=new kn;pn(e,n),t.push([e.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(const[t,n]of this.dss.entries())if(an(n,e))return t;return null}}class Qn{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const Zn=e=>{const t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),null!=e.assoc&&(t.assoc=e.assoc),t},er=e=>new Qn(null==e.type?null:Vn(e.type.client,e.type.clock),e.tname??null,null==e.item?null:Vn(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class tr{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const nr=(e,t,n)=>{let r=null,i=null;return null===e._item?i=Kn(e):r=Vn(e._item.id.client,e._item.id.clock),new Qn(r,i,t,n)},rr=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return nr(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return nr(e,Vn(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return nr(e,r.lastId,n);r=r.right}return nr(e,null,n)},ir=e=>{const t=le();return((e,t)=>{const{type:n,tname:r,item:i,assoc:s}=t;if(null!==i)he(e,0),Wn(e,i);else if(null!==r)de(e,1),ge(e,r);else{if(null===n)throw Me();de(e,2),Wn(e,n)}pe(e,s)})(t,e),ce(t)},sr=e=>(e=>{let t=null,n=null,r=null;switch(Ue(e)){case 0:r=Gn(e);break;case 1:n=Fe(e);break;case 2:t=Gn(e)}const i=Le(e)?Be(e):0;return new Qn(t,n,r,i)})(Pe(e)),or=(e,t,n=!0)=>{const r=t.store,i=e.item,s=e.type,o=e.tname,a=e.assoc;let l=null,c=0;if(null!==i){if(kr(r,i.client)<=i.clock)return null;const e=n?Bs(r,i):((e,t)=>{const n=Er(e,t);return{item:n,diff:t.clock-n.id.clock}})(r,i),t=e.item;if(!(t instanceof Hs))return null;if(l=t.parent,null===l._item||!l._item.deleted){c=t.deleted||!t.countable?0:e.diff+(a>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==o)l=t.get(o);else{if(null===s)throw Me();{if(kr(r,s.client)<=s.clock)return null;const{item:e}=n?Bs(r,s):{item:Er(r,s)};if(!(e instanceof Hs&&e.content instanceof Us))return null;l=e.content.type}}c=a>=0?l._length:0}return((e,t,n=0)=>new tr(e,t,n))(l,c,e.assoc)},ar=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&Hn(e.item,t.item)&&Hn(e.type,t.type)&&e.assoc===t.assoc;class lr{constructor(e,t){this.ds=e,this.sv=t}}const cr=(e,t)=>{const n=e.ds.clients,r=t.ds.clients,i=e.sv,s=t.sv;if(i.size!==s.size||n.size!==r.size)return!1;for(const[e,t]of i.entries())if(s.get(e)!==t)return!1;for(const[e,t]of n.entries()){const n=r.get(e)||[];if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++){const r=t[e],i=n[e];if(r.clock!==i.clock||r.len!==i.len)return!1}}return!0},ur=(e,t=new xn)=>(pn(t,e.ds),Nn(t,e.sv),t.toUint8Array()),dr=e=>ur(e,new kn),hr=(e,t=new wn(Pe(e)))=>new lr(fn(t),Pn(t)),pr=e=>hr(e,new bn(Pe(e))),fr=(e,t)=>new lr(e,t),mr=fr(dn(),new Map),gr=e=>fr(hn(e.store),Sr(e.store)),yr=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!an(t.ds,e.id),vr=(e,t)=>{const n=L(e.meta,vr,N),r=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<kr(r,n)&&Ar(e,Vn(n,t))}),on(e,t.ds,e=>{}),n.add(t))},br=(e,t,n=new vn)=>{if(e.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");const{sv:r,ds:i}=t,s=new En;return e.transact(t=>{let n=0;r.forEach(e=>{e>0&&n++}),he(s.restEncoder,n);for(const[n,i]of r){if(0===i)continue;i<kr(e.store,n)&&Ar(t,Vn(n,i));const r=e.store.clients.get(n)||[],o=xr(r,i-1);he(s.restEncoder,o+1),s.writeClient(n),he(s.restEncoder,0);for(let e=0;e<=o;e++)r[e].write(s,0)}pn(s,i)}),Mn(n,s.toUint8Array(),"snapshot"),n},_r=(e,t)=>((e,t,n=Sn)=>{const r=new n(Pe(t)),i=new Hr(r,!1);for(let t=i.curr;null!==t;t=i.next())if((e.sv.get(t.id.client)||0)<t.id.clock+t.length)return!1;const s=cn([e.ds,fn(r)]);return gn(e.ds,s)})(e,t,_n);class wr{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Sr=e=>{const t=new Map;return e.clients.forEach((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)}),t},kr=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Tr=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw Me()}n.push(t)},xr=(e,t)=>{let n=0,r=e.length-1,i=e[r],s=i.id.clock;if(s===t)return r;let o=q(t/(s+i.length-1)*r);for(;n<=r;){if(i=e[o],s=i.id.clock,s<=t){if(t<s+i.length)return o;n=o+1}else r=o-1;o=q((n+r)/2)}throw Me()},Er=(e,t)=>{const n=e.clients.get(t.client);return n[xr(n,t.clock)]},Cr=(e,t,n)=>{const r=xr(t,n),i=t[r];return i.id.clock<n&&i instanceof Hs?(t.splice(r+1,0,zs(e,i,n-i.id.clock)),r+1):r},Ar=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Cr(e,n,t.clock)]},Or=(e,t,n)=>{const r=t.clients.get(n.client),i=xr(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==bs&&r.splice(i+1,0,zs(e,s,n.clock-s.id.clock+1)),s},Mr=(e,t,n,r,i)=>{if(0===r)return;const s=n+r;let o,a=Cr(e,t,n);do{o=t[a++],s<o.id.clock+o.length&&Cr(e,t,s),i(o)}while(a<t.length&&t[a].id.clock<s)};class Ir{constructor(e,t,n){this.doc=e,this.deleteSet=new sn,this.beforeState=Sr(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Dr=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,(e,n)=>t.beforeState.get(n)!==e)||(ln(t.deleteSet),((e,t)=>{Cn(e,t.doc.store,t.beforeState)})(e,t),pn(e,t.deleteSet),0)),jr=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&L(e.changed,t,N).add(n)},Pr=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0&&r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n);n=r,r=e[--i-1])n instanceof Hs&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const s=t-i;return s&&e.splice(t+1-s,s),s},Lr=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const e=t.clients.get(r);for(let r=i.length-1;r>=0;r--){const s=i[r],o=s.clock+s.len;for(let r=xr(e,s.clock),i=e[r];r<e.length&&i.id.clock<o;i=e[++r]){const i=e[r];if(s.clock+s.len<=i.id.clock)break;i instanceof Hs&&i.deleted&&!i.keep&&n(i)&&i.gc(t,!1)}}}},Nr=(e,t)=>{e.clients.forEach((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=W(r.length-1,1+xr(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+Pr(r,e)}})},Rr=(e,t,n)=>{Lr(e,t,n),Nr(e,t)},Ur=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{ln(s),n.afterState=Sr(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach((t,r)=>e.push(()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})),e.push(()=>{n.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),$n(t._dEH,e,n))})}),e.push(()=>r.emit("afterTransaction",[n,r])),pt(e,[]),n._needFormattingCleanup&&ls(n)}finally{r.gc&&Lr(s,i,r.gcFilter),Nr(s,i),n.afterState.forEach((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=i.clients.get(t),n=G(xr(e,r),1);for(let t=e.length-1;t>=n;)t-=1+Pr(e,t)}});for(let e=o.length-1;e>=0;e--){const{client:t,clock:n}=o[e].id,r=i.clients.get(t),s=xr(r,n);s+1<r.length&&Pr(r,s+1)>1||s>0&&Pr(r,s)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(Yt(Ht,Rt,"[yjs] ",Ut,$t,"Changed the client-id because another client seems to be using it."),r.clientID=yn()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new Tn;Dr(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new En;Dr(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)}),c.forEach(e=>r.subdocs.delete(e)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(e=>e.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Ur(e,t+1)}}},Br=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let s=!1,o=null;null===e._transaction&&(s=!0,e._transaction=new Ir(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(s){const t=e._transaction===i[0];e._transaction=null,t&&Ur(i,0)}}return o};class Fr{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const zr=(e,t,n)=>{on(e,n.deletions,n=>{n instanceof Hs&&t.scope.some(t=>t===e.doc||Jn(t,n))&&Fs(n,!1)})},$r=(e,t,n)=>{let r=null;const i=e.doc,s=e.scope;Br(i,n=>{for(;t.length>0&&null===e.currStackItem;){const r=i.store,o=t.pop(),a=new Set,l=[];let c=!1;on(n,o.insertions,e=>{if(e instanceof Hs){if(null!==e.redone){let{item:t,diff:i}=Bs(r,e.id);i>0&&(t=Ar(n,Vn(t.id.client,t.id.clock+i))),e=t}!e.deleted&&s.some(t=>t===n.doc||Jn(t,e))&&l.push(e)}}),on(n,o.deletions,e=>{e instanceof Hs&&s.some(t=>t===n.doc||Jn(t,e))&&!an(o.insertions,e.id)&&a.add(e)}),a.forEach(t=>{c=null!==qs(n,t,a,o.insertions,e.ignoreRemoteMapChanges,e)||c});for(let t=l.length-1;t>=0;t--){const r=l[t];e.deleteFilter(r)&&(r.delete(n),c=!0)}e.currStackItem=c?o:null}n.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),r=n},e);const o=e.currStackItem;if(null!=o){const t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:o,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return o};class qr extends z{constructor(e,{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:o=(F(e)?e[0].doc:e instanceof vn?e:e.doc)}={}){super(),this.scope=[],this.doc=o,this.addToScope(e),this.deleteFilter=r,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const i=new sn;e.afterState.forEach((t,n)=>{const r=e.beforeState.get(n)||0,s=t-r;s>0&&un(i,n,r,s)});const s=Lt();let o=!1;if(this.lastChange>0&&s-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=cn([t.deletions,e.deleteSet]),t.insertions=cn([t.insertions,i])}else r.push(new Fr(e.deleteSet,i)),o=!0;t||n||(this.lastChange=s),on(e,e.deleteSet,t=>{t instanceof Hs&&this.scope.some(n=>n===e.doc||Jn(n,t))&&Fs(t,!0)});const a=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];o?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const t=new Set(this.scope);(e=F(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof xi?e.doc!==this.doc:e!==this.doc)&&Qt("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(e=>zr(n,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>zr(n,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=$r(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=$r(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class Hr{constructor(e,t){this.gen=function*(e){const t=Ue(e.restDecoder);for(let n=0;n<t;n++){const t=Ue(e.restDecoder),n=e.readClient();let r=Ue(e.restDecoder);for(let i=0;i<t;i++){const t=e.readInfo();if(10===t){const t=Ue(e.restDecoder);yield new Gs(Vn(n,r),t),r+=t}else if(31&t){const i=!(192&t),s=new Hs(Vn(n,r),null,(t&X)===X?e.readLeftID():null,null,(t&J)===J?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,!i||32&~t?null:e.readString(),Vs(e,t));yield s,r+=s.length}else{const t=e.readLen();yield new bs(Vn(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Gs);return this.curr}}const Vr=e=>Wr(e,_n),Wr=(e,t=Sn)=>{const n=[],r=new t(Pe(e)),i=new Hr(r,!1);for(let e=i.curr;null!==e;e=i.next())n.push(e);Yt("Structs: ",n);const s=fn(r);Yt("DeleteSet: ",s)},Gr=e=>Kr(e,_n),Kr=(e,t=Sn)=>{const n=[],r=new t(Pe(e)),i=new Hr(r,!1);for(let e=i.curr;null!==e;e=i.next())n.push(e);return{structs:n,ds:fn(r)}};class Jr{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Xr=e=>ni(e,_n,Tn),Yr=(e,t=xn,n=Sn)=>{const r=new t,i=new Hr(new n(Pe(e)),!1);let s=i.curr;if(null!==s){let e=0,t=s.id.client,n=0!==s.id.clock,o=n?0:s.id.clock+s.length;for(;null!==s;s=i.next())t!==s.id.client&&(0!==o&&(e++,he(r.restEncoder,t),he(r.restEncoder,o)),t=s.id.client,o=0,n=0!==s.id.clock),s.constructor===Gs&&(n=!0),n||(o=s.id.clock+s.length);0!==o&&(e++,he(r.restEncoder,t),he(r.restEncoder,o));const a=le();return he(a,e),((e,t)=>{ye(e,ce(t))})(a,r.restEncoder),r.restEncoder=a,r.toUint8Array()}return he(r.restEncoder,0),r.toUint8Array()},Qr=e=>Yr(e,kn,_n),Zr=(e,t=Sn)=>{const n=new Map,r=new Map,i=new Hr(new t(Pe(e)),!1);let s=i.curr;if(null!==s){let e=s.id.client,t=s.id.clock;for(n.set(e,t);null!==s;s=i.next())e!==s.id.client&&(r.set(e,t),n.set(s.id.client,s.id.clock),e=s.id.client),t=s.id.clock+s.length;r.set(e,t)}return{from:n,to:r}},ei=e=>Zr(e,_n),ti=(e,t)=>{if(e.constructor===bs){const{client:n,clock:r}=e.id;return new bs(Vn(n,r+t),e.length-t)}if(e.constructor===Gs){const{client:n,clock:r}=e.id;return new Gs(Vn(n,r+t),e.length-t)}{const n=e,{client:r,clock:i}=n.id;return new Hs(Vn(r,i+t),null,Vn(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},ni=(e,t=Sn,n=En)=>{if(1===e.length)return e[0];const r=e.map(e=>new t(Pe(e)));let i=r.map(e=>new Hr(e,!0)),s=null;const o=new n,a=new Jr(o);for(;i=i.filter(e=>null!==e.curr),i.sort((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===Gs?1:-1:n}return t.curr.id.client-e.curr.id.client}),0!==i.length;){const e=i[0],t=e.curr.id.client;if(null!==s){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=s.struct.id.clock+s.struct.length&&n.id.client>=s.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>s.struct.id.clock+s.struct.length)continue;if(t!==s.struct.id.client)oi(a,s.struct,s.offset),s={struct:n,offset:0},e.next();else if(s.struct.id.clock+s.struct.length<n.id.clock)if(s.struct.constructor===Gs)s.struct.length=n.id.clock+n.length-s.struct.id.clock;else{oi(a,s.struct,s.offset);const e=n.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Gs(Vn(t,s.struct.id.clock+s.struct.length),e),offset:0}}else{const t=s.struct.id.clock+s.struct.length-n.id.clock;t>0&&(s.struct.constructor===Gs?s.struct.length-=t:n=ti(n,t)),s.struct.mergeWith(n)||(oi(a,s.struct,s.offset),s={struct:n,offset:0},e.next())}}else s={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===s.struct.id.clock+s.struct.length&&n.constructor!==Gs;n=e.next())oi(a,s.struct,s.offset),s={struct:n,offset:0}}null!==s&&(oi(a,s.struct,s.offset),s=null),ai(a);const l=r.map(e=>fn(e)),c=cn(l);return pn(o,c),o.toUint8Array()},ri=(e,t,n=Sn,r=En)=>{const i=Ln(t),s=new r,o=new Jr(s),a=new n(Pe(e)),l=new Hr(a,!1);for(;l.curr;){const e=l.curr,t=e.id.client,n=i.get(t)||0;if(l.curr.constructor!==Gs)if(e.id.clock+e.length>n)for(oi(o,e,G(n-e.id.clock,0)),l.next();l.curr&&l.curr.id.client===t;)oi(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===t&&l.curr.id.clock+l.curr.length<=n;)l.next();else l.next()}ai(o);const c=fn(a);return pn(s,c),s.toUint8Array()},ii=(e,t)=>ri(e,t,_n,Tn),si=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:ce(e.encoder.restEncoder)}),e.encoder.restEncoder=le(),e.written=0)},oi=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&si(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),he(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},ai=e=>{si(e);const t=e.encoder.restEncoder;he(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];he(t,r.written),ye(t,r.restEncoder)}},li=(e,t,n,r)=>{const i=new n(Pe(e)),s=new Hr(i,!1),o=new r,a=new Jr(o);for(let e=s.curr;null!==e;e=s.next())oi(a,t(e),0);ai(a);const l=fn(i);return pn(o,l),o.toUint8Array()},ci=({formatting:e=!0,subdocs:t=!0,yxml:n=!0}={})=>{let r=0;const i=j(),s=j(),o=j(),a=j();return a.set(null,null),l=>{switch(l.constructor){case bs:case Gs:return l;case Hs:{const u=l,d=u.content;switch(d.constructor){case ws:break;case Us:if(n){const e=d.type;e instanceof fs&&(e.nodeName=L(s,e.nodeName,()=>"node-"+r)),e instanceof gs&&(e.hookName=L(s,e.hookName,()=>"hook-"+r))}break;case As:{const e=d;e.arr=e.arr.map(()=>r);break}case _s:d.content=new Uint8Array([r]);break;case ks:{const e=d;t&&(e.opts={},e.doc.guid=r+"");break}case Ts:d.embed={};break;case xs:{const t=d;e&&(t.key=L(o,t.key,()=>r+""),t.value=L(a,t.value,()=>({i:r})));break}case Es:{const e=d;e.arr=e.arr.map(()=>r);break}case Os:{const e=d;e.str=(c=r%10+"",((e,t)=>{const n=new Array(e);for(let r=0;r<e;r++)n[r]=t();return n})(e.str.length,()=>c).join(""));break}default:Me()}return u.parentSub&&(u.parentSub=L(i,u.parentSub,()=>r+"")),r++,l}default:Me()}var c}},ui=(e,t)=>li(e,ci(t),_n,Tn),di=(e,t)=>li(e,ci(t),Sn,En),hi=e=>li(e,mt,_n,En),pi=e=>li(e,mt,Sn,Tn),fi="You must not compute changes after the event-handler fired.";class mi{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=gi(this.currentTarget,this.target))}deletes(e){return an(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw Ae(fi);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(n=>{if(null!==n){const r=t._map.get(n);let i,s;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;i="delete",s=R(e.content.getContent())}else null!==e&&this.deletes(e)?(i="update",s=R(e.content.getContent())):(i="add",s=void 0)}else{if(!this.deletes(r))return;i="delete",s=R(r.content.getContent())}e.set(n,{action:i,oldValue:s})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw Ae(fi);const t=this.target,n=N(),r=N(),i=[];if(e={added:n,deleted:r,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null;const s=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==e&&void 0!==e.delete||(s(),e={delete:0}),e.delete+=i.length,r.add(i)):this.adds(i)?(null!==e&&void 0!==e.insert||(s(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),n.add(i)):(null!==e&&void 0!==e.retain||(s(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&s()}this._changes=e}return e}}const gi=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},yi=()=>{Qt("Invalid access: Add Yjs type to a document before reading data.")};let vi=0;class bi{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=vi++}}const _i=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=vi++},wi=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>H(t-e.index)<H(t-n.index)?e:n);let r=e._start,i=0;for(null!==n&&(r=n.p,i=n.index,(e=>{e.timestamp=vi++})(n));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&H(n.index-i)<r.parent.length/80?(_i(n,r,i),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return _i(r,t,n),r}{const r=new bi(t,n);return e.push(r),r}})(e._searchMarker,r,i)},Si=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}i.p=t,t.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=G(t,i.index+n))}},ki=e=>{e.doc??yi();let t=e._start;const n=[];for(;t;)n.push(t),t=t.right;return n},Ti=(e,t,n)=>{const r=e,i=t.changedParentTypes;for(;L(i,e,()=>[]).push(n),null!==e._item;)e=e._item.parent;$n(r._eH,n,t)};class xi{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Bn(),this._dEH=Bn(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Oe()}clone(){throw Oe()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Fn(this._eH,e)}observeDeep(e){Fn(this._dEH,e)}unobserve(e){zn(this._eH,e)}unobserveDeep(e){zn(this._dEH,e)}toJSON(){}}const Ei=(e,t,n)=>{e.doc??yi(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let s=e._start;for(;null!==s&&r>0;){if(s.countable&&!s.deleted){const e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)i.push(e[n]),r--;t=0}}s=s.right}return i},Ci=e=>{e.doc??yi();const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},Ai=(e,t)=>{const n=[];let r=e._start;for(;null!==r;){if(r.countable&&yr(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},Oi=(e,t)=>{let n=0,r=e._start;for(e.doc??yi();null!==r;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)t(i[r],n++,e)}r=r.right}},Mi=(e,t)=>{const n=[];return Oi(e,(r,i)=>{n.push(t(r,i,e))}),n},Ii=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},Di=(e,t)=>{e.doc??yi();const n=wi(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},ji=(e,t,n,r)=>{let i=n;const s=e.doc,o=s.clientID,a=s.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new Hs(Vn(o,kr(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new As(c)),i.integrate(e,0),c=[])};r.forEach(n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new Hs(Vn(o,kr(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new _s(new Uint8Array(n))),i.integrate(e,0);break;case vn:i=new Hs(Vn(o,kr(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new ks(n)),i.integrate(e,0);break;default:if(!(n instanceof xi))throw new Error("Unexpected content type in insert operation");i=new Hs(Vn(o,kr(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new Us(n)),i.integrate(e,0)}}}),u()},Pi=()=>Ae("Length exceeded!"),Li=(e,t,n,r)=>{if(n>t._length)throw Pi();if(0===n)return t._searchMarker&&Si(t._searchMarker,n,r.length),ji(e,t,null,r);const i=n,s=wi(t,n);let o=t._start;for(null!==s&&(o=s.p,0===(n-=s.index)&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));null!==o;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&Ar(e,Vn(o.id.client,o.id.clock+n));break}n-=o.length}return t._searchMarker&&Si(t._searchMarker,i,r.length),ji(e,t,o,r)},Ni=(e,t,n,r)=>{if(0===r)return;const i=n,s=r,o=wi(t,n);let a=t._start;for(null!==o&&(a=o.p,n-=o.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Ar(e,Vn(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&null!==a;)a.deleted||(r<a.length&&Ar(e,Vn(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw Pi();t._searchMarker&&Si(t._searchMarker,i,-s+r)},Ri=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},Ui=(e,t,n,r)=>{const i=t._map.get(n)||null,s=e.doc,o=s.clientID;let a;if(null==r)a=new As([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new As([r]);break;case Uint8Array:a=new _s(r);break;case vn:a=new ks(r);break;default:if(!(r instanceof xi))throw new Error("Unexpected content type");a=new Us(r)}new Hs(Vn(o,kr(s.store,o)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},Bi=(e,t)=>{e.doc??yi();const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Fi=e=>{const t={};return e.doc??yi(),e._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},zi=(e,t)=>{e.doc??yi();const n=e._map.get(t);return void 0!==n&&!n.deleted},$i=(e,t,n)=>{let r=e._map.get(t)||null;for(;null!==r&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return null!==r&&yr(r,n)?r.content.getContent()[r.length-1]:void 0},qi=(e,t)=>{const n={};return e._map.forEach((e,r)=>{let i=e;for(;null!==i&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;null!==i&&yr(i,t)&&(n[r]=i.content.getContent()[i.length-1])}),n},Hi=e=>(e.doc??yi(),((e,t)=>en(()=>{let n;do{n=e.next()}while(!n.done&&!t(n.value));return n}))(e._map.entries(),e=>!e[1].deleted));class Vi extends mi{}class Wi extends xi{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Wi;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Wi}clone(){const e=new Wi;return e.insert(0,this.toArray().map(e=>e instanceof xi?e.clone():e)),e}get length(){return this.doc??yi(),this._length}_callObserver(e,t){super._callObserver(e,t),Ti(this,e,new Vi(this,e))}insert(e,t){null!==this.doc?Br(this.doc,n=>{Li(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Br(this.doc,t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;ji(e,t,r,n)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Br(this.doc,n=>{Ni(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return Di(this,e)}toArray(){return Ci(this)}slice(e=0,t=this.length){return Ei(this,e,t)}toJSON(){return this.map(e=>e instanceof xi?e.toJSON():e)}map(e){return Mi(this,e)}forEach(e){Oi(this,e)}[Symbol.iterator](){return Ii(this)}_write(e){e.writeTypeRef(Is)}}class Gi extends mi{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Ki extends xi{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new Ki}clone(){const e=new Ki;return this.forEach((t,n)=>{e.set(n,t instanceof xi?t.clone():t)}),e}_callObserver(e,t){Ti(this,e,new Gi(this,e,t))}toJSON(){this.doc??yi();const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof xi?r.toJSON():r}}),e}get size(){return[...Hi(this)].length}keys(){return tn(Hi(this),e=>e[0])}values(){return tn(Hi(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return tn(Hi(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??yi(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Br(this.doc,t=>{Ri(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Br(this.doc,n=>{Ui(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return Bi(this,e)}has(e){return zi(this,e)}clear(){null!==this.doc?Br(this.doc,e=>{this.forEach(function(t,n,r){Ri(e,r,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Ds)}}const Ji=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&((e,t)=>e===t||at(e)===at(t)&&lt(e,(e,n)=>(void 0!==e||ct(t,n))&&t[n]===e))(e,t);class Xi{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){null===this.right&&Me(),this.right.content.constructor===xs?this.right.deleted||es(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}const Yi=(e,t,n)=>{for(;null!==t.right&&n>0;)t.right.content.constructor===xs?t.right.deleted||es(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&Ar(e,Vn(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},Qi=(e,t,n,r)=>{const i=new Map,s=r?wi(t,n):null;if(s){const t=new Xi(s.p.left,s.p,s.index,i);return Yi(e,t,n-s.index)}{const r=new Xi(null,t._start,0,i);return Yi(e,r,n)}},Zi=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===xs&&Ji(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,s=i.clientID;r.forEach((r,o)=>{const a=n.left,l=n.right,c=new Hs(Vn(s,kr(i.store,s)),a,a&&a.lastId,l,l&&l.id,t,null,new xs(o,r));c.integrate(e,0),n.right=c,n.forward()})},es=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},ts=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===xs&&Ji(t[e.right.content.key]??null,e.right.content.value));)e.forward()},ns=(e,t,n,r)=>{const i=e.doc,s=i.clientID,o=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!Ji(c,l)){o.set(a,c);const{left:r,right:u}=n;n.right=new Hs(Vn(s,kr(i.store,s)),r,r&&r.lastId,u,u&&u.id,t,null,new xs(a,l)),n.right.integrate(e,0),n.forward()}}return o},rs=(e,t,n,r,i)=>{n.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});const s=e.doc,o=s.clientID;ts(n,i);const a=ns(e,t,n,i),l=r.constructor===String?new Os(r):r instanceof xi?new Us(r):new Ts(r);let{left:c,right:u,index:d}=n;t._searchMarker&&Si(t._searchMarker,n.index,l.getLength()),u=new Hs(Vn(o,kr(s.store,o)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=d,n.forward(),Zi(e,t,n,a)},is=(e,t,n,r,i)=>{const s=e.doc,o=s.clientID;ts(n,i);const a=ns(e,t,n,i);e:for(;null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===xs));){if(!n.right.deleted)switch(n.right.content.constructor){case xs:{const{key:t,value:s}=n.right.content,o=i[t];if(void 0!==o){if(Ji(o,s))a.delete(t);else{if(0===r)break e;a.set(t,s)}n.right.delete(e)}else n.currentAttributes.set(t,s);break}default:r<n.right.length&&Ar(e,Vn(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new Hs(Vn(o,kr(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Os(i)),n.right.integrate(e,0),n.forward()}Zi(e,t,n,a)},ss=(e,t,n,r,i)=>{let s=t;const o=j();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===xs){const e=s.content;o.set(e.key,e)}s=s.right}let a=0,l=!1;for(;t!==s;){if(n===t&&(l=!0),!t.deleted){const n=t.content;switch(n.constructor){case xs:{const{key:s,value:c}=n,u=r.get(s)??null;o.get(s)===n&&u!==c||(t.delete(e),a++,l||(i.get(s)??null)!==c||u===c||(null===u?i.delete(s):i.set(s,u))),l||t.deleted||es(i,n);break}}}t=t.right}return a},as=e=>{let t=0;return Br(e.doc,n=>{let r=e._start,i=e._start,s=j();const o=P(s);for(;i;)!1===i.deleted&&(i.content.constructor===xs?es(o,i.content):(t+=ss(n,r,i,s,o),s=P(o),r=i)),i=i.right}),t},ls=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const s=e.beforeState.get(r)||0;i!==s&&Mr(e,n.store.clients.get(r),s,i,e=>{e.deleted||e.content.constructor!==xs||e.constructor===bs||t.add(e.parent)})}Br(n,n=>{on(e,e.deleteSet,e=>{if(e instanceof bs||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===xs?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===xs){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)});for(const e of t)as(e)})},cs=(e,t,n)=>{const r=n,i=P(t.currentAttributes),s=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case Us:case Ts:case Os:n<t.right.length&&Ar(e,Vn(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}s&&ss(e,s,t.right,i,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&Si(o._searchMarker,t.index,-r+n),t};class us extends mi{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Br(e,e=>{const n=new Map,r=new Map;let i=this.target._start,s=null;const o={};let a="",l=0,c=0;const u=()=>{if(null!==s){let e=null;switch(s){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof a||a.length>0)&&(e={insert:a},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)}))),a="";break;case"retain":l>0&&(e={retain:l},(e=>{for(const t in e)return!1;return!0})(o)||(e.attributes=it({},o))),l=0}e&&t.push(e),s=null}};for(;null!==i;){switch(i.content.constructor){case Us:case Ts:this.adds(i)?this.deletes(i)||(u(),s="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==s&&(u(),s="delete"),c+=1):i.deleted||("retain"!==s&&(u(),s="retain"),l+=1);break;case Os:this.adds(i)?this.deletes(i)||("insert"!==s&&(u(),s="insert"),a+=i.content.str):this.deletes(i)?("delete"!==s&&(u(),s="delete"),c+=i.length):i.deleted||("retain"!==s&&(u(),s="retain"),l+=i.length);break;case xs:{const{key:t,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const l=n.get(t)??null;Ji(l,a)?null!==a&&i.delete(e):("retain"===s&&u(),Ji(a,r.get(t)??null)?delete o[t]:o[t]=a)}}else if(this.deletes(i)){r.set(t,a);const e=n.get(t)??null;Ji(e,a)||("retain"===s&&u(),o[t]=e)}else if(!i.deleted){r.set(t,a);const n=o[t];void 0!==n&&(Ji(n,a)?null!==n&&i.delete(e):("retain"===s&&u(),null===a?delete o[t]:o[t]=a))}i.deleted||("insert"===s&&u(),es(n,i.content));break}}i=i.right}for(u();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class ds extends xi{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??yi(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new ds}clone(){const e=new ds;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new us(this,e,t);Ti(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??yi();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===Os&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Br(this.doc,n=>{const r=new Xi(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const s=e[i];if(void 0!==s.insert){const o=t||"string"!=typeof s.insert||i!==e.length-1||null!==r.right||"\n"!==s.insert.slice(-1)?s.insert:s.insert.slice(0,-1);("string"!=typeof o||o.length>0)&&rs(n,this,r,o,s.attributes||{})}else void 0!==s.retain?is(n,this,r,s.retain,s.attributes||{}):void 0!==s.delete&&cs(n,r,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc??yi();const r=[],i=new Map,s=this.doc;let o="",a=this._start;function l(){if(o.length>0){const e={};let t=!1;i.forEach((n,r)=>{t=!0,e[r]=n});const n={insert:o};t&&(n.attributes=e),r.push(n),o=""}}const c=()=>{for(;null!==a;){if(yr(a,e)||void 0!==t&&yr(a,t))switch(a.content.constructor){case Os:{const r=i.get("ychange");void 0===e||yr(a,e)?void 0===t||yr(a,t)?void 0!==r&&(l(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.type||(l(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.type||(l(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),o+=a.content.str;break}case Us:case Ts:{l();const e={insert:a.content.getContent()[0]};if(i.size>0){const t={};e.attributes=t,i.forEach((e,n)=>{t[n]=e})}r.push(e);break}case xs:yr(a,e)&&(l(),es(i,a.content))}a=a.right}l()};return e||t?Br(s,n=>{e&&vr(n,e),t&&vr(n,t),c()},"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?Br(r,r=>{const i=Qi(r,this,e,!n);n||(n={},i.currentAttributes.forEach((e,t)=>{n[t]=e})),rs(r,this,i,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const r=this.doc;null!==r?Br(r,r=>{const i=Qi(r,this,e,!n);rs(r,this,i,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?Br(n,n=>{cs(n,Qi(n,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?Br(r,r=>{const i=Qi(r,this,e,!1);null!==i.right&&is(r,this,i,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?Br(this.doc,t=>{Ri(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?Br(this.doc,n=>{Ui(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return Bi(this,e)}getAttributes(){return Fi(this)}_write(e){e.writeTypeRef(js)}}class hs{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??yi()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==fs&&t.constructor!==ps||null===t._start)for(;null!==e;){const t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ps extends xi{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ps}clone(){const e=new ps;return e.insert(0,this.toArray().map(e=>e instanceof xi?e.clone():e)),e}get length(){return this.doc??yi(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new hs(this,e)}querySelector(e){e=e.toUpperCase();const t=new hs(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),B(new hs(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){Ti(this,e,new ms(this,t,e))}toString(){return Mi(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Oi(this,i=>{r.insertBefore(i.toDOM(e,t,n),null)}),r}insert(e,t){null!==this.doc?Br(this.doc,n=>{Li(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Br(this.doc,n=>{const r=e&&e instanceof xi?e._item:e;ji(n,this,r,t)});else{const n=this._prelimContent,r=null===e?0:n.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw Ae("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?Br(this.doc,n=>{Ni(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return Ci(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Di(this,e)}slice(e=0,t=this.length){return Ei(this,e,t)}forEach(e){Oi(this,e)}_write(e){e.writeTypeRef(Ls)}}class fs extends ps{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new fs(this.nodeName)}clone(){const e=new fs(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),(t,n)=>{"string"==typeof t&&e.setAttribute(n,t)}),e.insert(0,this.toArray().map(e=>e instanceof xi?e.clone():e)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let i=0;i<r;i++){const r=n[i];t.push(r+'="'+e[r]+'"')}const i=this.nodeName.toLocaleLowerCase();return`<${i}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?Br(this.doc,t=>{Ri(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Br(this.doc,n=>{Ui(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return Bi(this,e)}hasAttribute(e){return zi(this,e)}getAttributes(e){return e?qi(this,e):Fi(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),i=this.getAttributes();for(const e in i){const t=i[e];"string"==typeof t&&r.setAttribute(e,t)}return Oi(this,i=>{r.appendChild(i.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(Ps),e.writeKey(this.nodeName)}}class ms extends mi{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class gs extends Ki{constructor(e){super(),this.hookName=e}_copy(){return new gs(this.hookName)}clone(){const e=new gs(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(e=document,t={},n){const r=t[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(e){e.writeTypeRef(Ns),e.writeKey(this.hookName)}}class ys extends ds{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new ys}clone(){const e=new ys;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const t=[];for(const n in e.attributes){const r=[];for(const t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:n,attrs:r})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let n="";for(let e=0;e<t.length;e++){const r=t[e];n+=`<${r.nodeName}`;for(let e=0;e<r.attrs.length;e++){const t=r.attrs[e];n+=` ${t.key}="${t.value}"`}n+=">"}n+=e.insert;for(let e=t.length-1;e>=0;e--)n+=`</${t[e].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Rs)}}class vs{constructor(e,t){this.id=e,this.length=t}get deleted(){throw Oe()}mergeWith(e){return!1}write(e,t,n){throw Oe()}integrate(e,t){throw Oe()}}class bs extends vs{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Tr(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class _s{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new _s(this.content)}splice(e){throw Oe()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class ws{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ws(this.len)}splice(e){const t=new ws(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){un(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const Ss=(e,t)=>new vn({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class ks{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ks(Ss(this.doc.guid,this.opts))}splice(e){throw Oe()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class Ts{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Ts(this.embed)}splice(e){throw Oe()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class xs{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new xs(this.key,this.value)}splice(e){throw Oe()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class Es{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Es(this.arr)}splice(e){const t=new Es(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const Cs="development"===St("node_env");class As{constructor(e){this.arr=e,Cs&&dt(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new As(this.arr)}splice(e){const t=new As(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class Os{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Os(this.str)}splice(e){const t=new Os(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const Ms=[e=>new Wi,e=>new Ki,e=>new ds,e=>new fs(e.readKey()),e=>new ps,e=>new gs(e.readKey()),e=>new ys],Is=0,Ds=1,js=2,Ps=3,Ls=4,Ns=5,Rs=6;class Us{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Us(this.type._copy())}splice(e){throw Oe()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Bs=(e,t)=>{let n,r=t,i=0;do{i>0&&(r=Vn(r.client,r.clock+i)),n=Er(e,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Hs);return{item:n,diff:i}},Fs=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},zs=(e,t,n)=>{const{client:r,clock:i}=t.id,s=new Hs(Vn(r,i+n),t,Vn(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),null!==t.redone&&(s.redone=Vn(t.redone.client,t.redone.clock+n)),t.right=s,null!==s.right&&(s.right.left=s),e._mergeStructs.push(s),null!==s.parentSub&&null===s.right&&s.parent._map.set(s.parentSub,s),t.length=n,s},$s=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n]))return!0;return!1})(e,e=>an(e.deletions,t)),qs=(e,t,n,r,i,s)=>{const o=e.doc,a=o.store,l=o.clientID,c=t.redone;if(null!==c)return Ar(e,c);let u,d=t.parent._item,h=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===qs(e,d,n,r,i,s)))return null;for(;null!==d.redone;)d=Ar(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(h=t.left,u=t;null!==h;){let t=h;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Ar(e,t.redone);if(null!==t&&t.parent._item===d){h=t;break}h=h.left}for(;null!==u;){let t=u;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Ar(e,t.redone);if(null!==t&&t.parent._item===d){u=t;break}u=u.right}}else if(u=null,t.right&&!i){for(h=t;null!==h&&null!==h.right&&(h.right.redone||an(r,h.right.id)||$s(s.undoStack,h.right.id)||$s(s.redoStack,h.right.id));)for(h=h.right;h.redone;)h=Ar(e,h.redone);if(h&&null!==h.right)return null}else h=p._map.get(t.parentSub)||null;const f=kr(a,l),m=Vn(l,f),g=new Hs(m,h,h&&h.lastId,u,u&&u.id,p,t.parentSub,t.content.copy());return t.redone=m,Fs(g,!0),g.integrate(e,0),g};class Hs extends vs{constructor(e,t,n,r,i,s,o,a){super(e,a.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=i,this.parent=s,this.parentSub=o,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=kr(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=kr(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===qn&&this.id.client!==this.parent.client&&this.parent.clock>=kr(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Or(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ar(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===bs||this.right&&this.right.constructor===bs)this.parent=null;else if(this.parent){if(this.parent.constructor===qn){const e=Er(t,this.parent);e.constructor===bs?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Hs?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Hs&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Or(e,e.doc.store,Vn(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),r.add(t),Hn(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Hn(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!i.has(Er(e.doc.store,t.origin)))break;r.has(Er(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Tr(e.doc.store,this),this.content.integrate(e,this),jr(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new bs(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Vn(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Hn(e.origin,this.lastId)&&this.right===e&&Hn(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),un(e.deleteSet,this.id.client,this.id.clock,this.length),jr(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Me();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[xr(r,t.id.clock)]=n})(e,this,new bs(this.id,this.length)):this.content=new ws(this.length)}write(e,t){const n=t>0?Vn(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,s=31&this.content.getRef()|(null===n?0:X)|(null===r?0:J)|(null===i?0:32);if(e.writeInfo(s),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=Kn(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===qn?(e.writeParentInfo(!1),e.writeLeftID(t)):Me();null!==i&&e.writeString(i)}this.content.write(e,t)}}const Vs=(e,t)=>Ws[31&t](e),Ws=[()=>{Me()},e=>new ws(e.readLen()),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new Es(n)},e=>new _s(e.readBuf()),e=>new Os(e.readString()),e=>new Ts(e.readJSON()),e=>new xs(e.readKey(),e.readJSON()),e=>new Us(Ms[e.readTypeRef()](e)),e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new As(n)},e=>new ks(Ss(e.readString(),e.readAny())),()=>{Me()}];class Gs extends vs{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){Me()}write(e,t){e.writeInfo(10),he(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const Ks="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},Js="__ $YJS$ __";async function Xs(e){return new Promise(t=>setTimeout(t,e))}function Ys(e,t){let n=t.delay;if(0===n)return 0;if(t.factor&&(n*=Math.pow(t.factor,e.attemptNum-1),0!==t.maxDelay&&(n=Math.min(n,t.maxDelay))),t.jitter){const e=Math.ceil(t.minDelay),r=Math.floor(n);n=Math.floor(Math.random()*(r-e+1))+e}return Math.round(n)}!0===Ks[Js]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Ks[Js]=!0;const Qs=Math.floor,Zs=128,eo=127,to=Number.MAX_SAFE_INTEGER,no=()=>new Set,ro=Array.from,io="undefined"!=typeof TextEncoder?new TextEncoder:null,so=io?e=>io.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r};let oo="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});oo&&1===oo.decode(new Uint8Array).length&&(oo=null);class ao{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const lo=()=>new ao,co=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},uo=e=>{const t=new Uint8Array(co(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},ho=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},po=(e,t)=>{for(;t>eo;)ho(e,Zs|eo&t),t=Qs(t/128);ho(e,eo&t)},fo=new Uint8Array(3e4),mo=fo.length/3,go=io&&io.encodeInto?(e,t)=>{if(t.length<mo){const n=io.encodeInto(t,fo).written||0;po(e,n);for(let t=0;t<n;t++)ho(e,fo[t])}else yo(e,so(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;po(e,r);for(let t=0;t<r;t++)ho(e,n.codePointAt(t))},yo=(e,t)=>{po(e,t.byteLength),((e,t)=>{const n=e.cbuf.length,r=e.cpos,i=(s=n-r)<(o=t.length)?s:o;var s,o;const a=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,a>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(((e,t)=>e>t?e:t)(2*n,a)),e.cbuf.set(t.subarray(i)),e.cpos=a)})(e,t)},vo=e=>new Error(e),bo=vo("Unexpected end of array"),_o=vo("Integer out of Range");class wo{constructor(e){this.arr=e,this.pos=0}}const So=e=>new wo(e),ko=e=>((e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n})(e,xo(e)),To=e=>e.arr[e.pos++],xo=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const r=e.arr[e.pos++];if(t+=(r&eo)*n,n*=128,r<Zs)return t;if(t>to)throw _o}throw bo},Eo=oo?e=>oo.decode(ko(e)):e=>{let t=xo(e);if(0===t)return"";{let n=String.fromCodePoint(To(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(To(e));else for(;t>0;){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},Co=Date.now,Ao=()=>new Map;class Oo{constructor(){this._observers=Ao()}on(e,t){((e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r})(this._observers,e,no).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return ro((this._observers.get(e)||Ao()).values()).forEach(e=>e(...t))}destroy(){this._observers=Ao()}}const Mo=Object.keys,Io=e=>Mo(e).length,Do=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),jo=(e,t)=>{if(null==e||null==t)return((e,t)=>e===t)(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!jo(e.get(n),t.get(n)))return!1;break;case Object:if(Io(e)!==Io(t))return!1;for(const n in e)if(!Do(e,n)||!jo(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!jo(e[n],t[n]))return!1;break;default:return!1}return!0};class Po extends Oo{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=Co();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach((n,r)=>{r!==this.clientID&&3e4<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)}),t.length>0&&Lo(this,t,"timeout")},Qs(3e3)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:Co()});const s=[],o=[],a=[],l=[];null===e?l.push(t):null==i?null!=e&&s.push(t):(o.push(t),jo(i,e)||a.push(t)),(s.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:s,updated:a,removed:l},"local"]),this.emit("update",[{added:s,updated:o,removed:l},"local"])}setLocalStateField(e,t){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const Lo=(e,t,n)=>{const r=[];for(let n=0;n<t.length;n++){const i=t[n];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){const t=e.meta.get(i);e.meta.set(i,{clock:t.clock+1,lastUpdated:Co()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},No=(e,t,n=e.states)=>{const r=t.length,i=lo();po(i,r);for(let s=0;s<r;s++){const r=t[s],o=n.get(r)||null,a=e.meta.get(r).clock;po(i,r),po(i,a),go(i,JSON.stringify(o))}return uo(i)};class Ro{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}class Uo{constructor(e){this.data=e,this.encoder=lo(),this.decoder=So(new Uint8Array(this.data))}peekVarString(){return(e=>{const t=e.pos,n=Eo(e);return e.pos=t,n})(this.decoder)}readVarUint(){return xo(this.decoder)}readVarString(){return Eo(this.decoder)}readVarUint8Array(){return ko(this.decoder)}writeVarUint(e){return po(this.encoder,e)}writeVarString(e){return go(this.encoder,e)}writeVarUint8Array(e){return yo(this.encoder,e)}length(){return co(this.encoder)}}var Bo,Fo;!function(e){e[e.Sync=0]="Sync",e[e.Awareness=1]="Awareness",e[e.Auth=2]="Auth",e[e.QueryAwareness=3]="QueryAwareness",e[e.Stateless=5]="Stateless",e[e.CLOSE=7]="CLOSE",e[e.SyncStatus=8]="SyncStatus"}(Bo||(Bo={})),function(e){e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected"}(Fo||(Fo={}));class zo{constructor(){this.encoder=lo()}get(e){return e.encoder}toUint8Array(){return uo(this.encoder)}}class $o extends zo{constructor(){super(...arguments),this.type=Bo.CLOSE,this.description="Ask the server to close the connection"}get(e){return go(this.encoder,e.documentName),po(this.encoder,this.type),this.encoder}}class qo extends Ro{constructor(e){super(),this.messageQueue=[],this.configuration={url:"",document:void 0,WebSocketPolyfill:void 0,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,providerMap:new Map},this.webSocket=null,this.webSocketHandlers={},this.shouldConnect=!0,this.status=Fo.Disconnected,this.lastMessageReceived=0,this.identifier=0,this.intervals={connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.closeTries=0,this.setConfiguration(e),this.configuration.WebSocketPolyfill=e.WebSocketPolyfill?e.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),this.shouldConnect&&this.connect()}async onOpen(e){this.cancelWebsocketRetry=void 0,this.receivedOnOpenPayload=e}attach(e){this.configuration.providerMap.set(e.configuration.name,e),this.status===Fo.Disconnected&&this.shouldConnect&&this.connect(),this.receivedOnOpenPayload&&this.status===Fo.Connected&&e.onOpen(this.receivedOnOpenPayload)}detach(e){this.configuration.providerMap.has(e.configuration.name)&&(e.send($o,{documentName:e.configuration.name}),this.configuration.providerMap.delete(e.configuration.name))}setConfiguration(e={}){this.configuration={...this.configuration,...e}}async connect(){if(this.status===Fo.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.receivedOnOpenPayload=void 0,this.shouldConnect=!0;const{retryPromise:e,cancelFunc:t}=(()=>{let e=!1;const t=async function(e,t){const n=function(e){return e||(e={}),{delay:void 0===e.delay?200:e.delay,initialDelay:void 0===e.initialDelay?0:e.initialDelay,minDelay:void 0===e.minDelay?0:e.minDelay,maxDelay:void 0===e.maxDelay?0:e.maxDelay,factor:void 0===e.factor?0:e.factor,maxAttempts:void 0===e.maxAttempts?3:e.maxAttempts,timeout:void 0===e.timeout?0:e.timeout,jitter:!0===e.jitter,initialJitter:!0===e.initialJitter,handleError:void 0===e.handleError?null:e.handleError,handleTimeout:void 0===e.handleTimeout?null:e.handleTimeout,beforeAttempt:void 0===e.beforeAttempt?null:e.beforeAttempt,calculateDelay:void 0===e.calculateDelay?null:e.calculateDelay}}(t);for(const e of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const t=n[e];if(!Number.isInteger(t)||t<0)throw new Error(`Value for ${e} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},i=n.calculateDelay||Ys,s=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;if(s&&await Xs(s),r.attemptNum<1&&n.initialJitter){const e=i(r,n);e&&await Xs(e)}return async function t(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const e=new Error("Attempt aborted");throw e.code="ATTEMPT_ABORTED",e}const s=async e=>{if(n.handleError&&await n.handleError(e,r,n),r.aborted||0===r.attemptsRemaining)throw e;r.attemptNum++;const s=i(r,n);return s&&await Xs(s),t()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise((t,i)=>{const o=setTimeout(()=>{if(n.handleTimeout)try{t(n.handleTimeout(r,n))}catch(e){i(e)}else{const e=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);e.code="ATTEMPT_TIMEOUT",i(e)}},n.timeout);e(r,n).then(e=>{clearTimeout(o),t(e)}).catch(e=>{clearTimeout(o),s(e).then(t).catch(i)})}):e(r,n).catch(s)}()}(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:t=>{this.shouldConnect&&!e||t.abort()}}).catch(e=>{if(e&&"ATTEMPT_ABORTED"!==e.code)throw e});return{retryPromise:t,cancelFunc:()=>{e=!0}}})();return this.cancelWebsocketRetry=t,e}attachWebSocketListeners(e,t){const{identifier:n}=e;this.webSocketHandlers[n]={message:e=>this.emit("message",e),close:e=>this.emit("close",{event:e}),open:e=>this.emit("open",e),error:e=>{t(e)}};const r=this.webSocketHandlers[e.identifier];Object.keys(r).forEach(t=>{e.addEventListener(t,r[t])})}cleanupWebSocket(){if(!this.webSocket)return;const{identifier:e}=this.webSocket,t=this.webSocketHandlers[e];Object.keys(t).forEach(n=>{var r;null===(r=this.webSocket)||void 0===r||r.removeEventListener(n,t[n]),delete this.webSocketHandlers[e]}),this.webSocket.close(),this.webSocket=null}createWebSocketConnection(){return new Promise((e,t)=>{this.webSocket&&(this.messageQueue=[],this.cleanupWebSocket()),this.lastMessageReceived=0,this.identifier+=1;const n=new this.configuration.WebSocketPolyfill(this.url);n.binaryType="arraybuffer",n.identifier=this.identifier,this.attachWebSocketListeners(n,t),this.webSocket=n,this.status=Fo.Connecting,this.emit("status",{status:Fo.Connecting}),this.connectionAttempt={resolve:e,reject:t}})}onMessage(e){var t;this.resolveConnectionAttempt(),this.lastMessageReceived=Co();const n=new Uo(e.data).peekVarString();null===(t=this.configuration.providerMap.get(n))||void 0===t||t.onMessage(e)}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=Fo.Connected,this.emit("status",{status:Fo.Connected}),this.emit("connect"),this.messageQueue.forEach(e=>this.send(e)),this.messageQueue=[])}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var e;null===(e=this.connectionAttempt)||void 0===e||e.reject(),this.connectionAttempt=null}checkConnection(){var e;this.status===Fo.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=Co()-this.lastMessageReceived||(this.closeTries+=1,this.closeTries>2?(this.onClose({event:{code:4408,reason:"forced"}}),this.closeTries=0):(null===(e=this.webSocket)||void 0===e||e.close(),this.messageQueue=[])))}get serverUrl(){for(;"/"===this.configuration.url[this.configuration.url.length-1];)return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){return this.serverUrl}disconnect(){if(this.shouldConnect=!1,null!==this.webSocket)try{this.webSocket.close(),this.messageQueue=[]}catch(e){console.error(e)}}send(e){var t;(null===(t=this.webSocket)||void 0===t?void 0:t.readyState)===D.Open?this.webSocket.send(e):this.messageQueue.push(e)}onClose({event:e}){this.closeTries=0,this.cleanupWebSocket(),this.connectionAttempt&&this.rejectConnectionAttempt(),this.status=Fo.Disconnected,this.emit("status",{status:Fo.Disconnected}),this.emit("disconnect",{event:e}),!this.cancelWebsocketRetry&&this.shouldConnect&&setTimeout(()=>{this.connect()},this.configuration.delay)}destroy(){this.emit("destroy"),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),this.cleanupWebSocket()}}const Ho=(e,t,n)=>{try{In(t,ko(e),n)}catch(e){console.error("Caught error while handling a Yjs update",e)}},Vo=Ho;class Wo{constructor(e){this.message=e}apply(e,t){const{message:n}=this,r=n.readVarUint(),i=n.length();switch(r){case Bo.Sync:this.applySyncMessage(e,t);break;case Bo.Awareness:this.applyAwarenessMessage(e);break;case Bo.Auth:this.applyAuthMessage(e);break;case Bo.QueryAwareness:this.applyQueryAwarenessMessage(e);break;case Bo.Stateless:e.receiveStateless(Eo(n.decoder));break;case Bo.SyncStatus:this.applySyncStatusMessage(e,1===(e=>{let t=e.arr[e.pos++],n=63&t,r=64;const i=(64&t)>0?-1:1;if(0===(t&Zs))return i*n;const s=e.arr.length;for(;e.pos<s;){if(t=e.arr[e.pos++],n+=(t&eo)*r,r*=128,t<Zs)return i*n;if(n>to)throw _o}throw bo})(n.decoder));break;case Bo.CLOSE:const i={code:1e3,reason:Eo(n.decoder),target:e.configuration.websocketProvider.webSocket,type:"close"};e.onClose(),e.configuration.onClose({event:i}),e.forwardClose(i);break;default:throw new Error(`Cant apply message of unknown type: ${r}`)}n.length()>i+1&&e.send(zo,{encoder:n.encoder})}applySyncMessage(e,t){const{message:n}=this;n.writeVarUint(Bo.Sync);const r=((e,t,n,r)=>{const i=xo(e);switch(i){case 0:((e,t,n)=>{((e,t,n)=>{po(e,1),yo(e,jn(t,n))})(t,n,ko(e))})(e,t,n);break;case 1:Ho(e,n,r);break;case 2:Vo(e,n,r);break;default:throw new Error("Unknown message type")}return i})(n.decoder,n.encoder,e.document,e);t&&1===r&&(e.synced=!0)}applySyncStatusMessage(e,t){t&&e.decrementUnsyncedChanges()}applyAwarenessMessage(e){if(!e.awareness)return;const{message:t}=this;((e,t,n)=>{const r=So(t),i=Co(),s=[],o=[],a=[],l=[],c=xo(r);for(let t=0;t<c;t++){const t=xo(r);let n=xo(r);const c=JSON.parse(Eo(r)),u=e.meta.get(t),d=e.states.get(t),h=void 0===u?0:u.clock;(h<n||h===n&&null===c&&e.states.has(t))&&(null===c?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,c),e.meta.set(t,{clock:n,lastUpdated:i}),void 0===u&&null!==c?s.push(t):void 0!==u&&null===c?l.push(t):null!==c&&(jo(c,d)||a.push(t),o.push(t)))}(s.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:s,updated:a,removed:l},n]),(s.length>0||o.length>0||l.length>0)&&e.emit("update",[{added:s,updated:o,removed:l},n])})(e.awareness,t.readVarUint8Array(),e)}applyAuthMessage(e){const{message:t}=this;((e,t,n)=>{switch(A(e)){case M.PermissionDenied:t(O(e));break;case M.Authenticated:n(O(e))}})(t.decoder,e.permissionDeniedHandler.bind(e),e.authenticatedHandler.bind(e))}applyQueryAwarenessMessage(e){if(!e.awareness)return;const{message:t}=this;t.writeVarUint(Bo.Awareness),t.writeVarUint8Array(No(e.awareness,Array.from(e.awareness.getStates().keys())))}}class Go{constructor(e,t={}){this.message=new e,this.encoder=this.message.get(t)}create(){return uo(this.encoder)}send(e){null==e||e.send(this.create())}}class Ko extends zo{constructor(){super(...arguments),this.type=Bo.Auth,this.description="Authentication"}get(e){if(void 0===e.token)throw new Error("The authentication message requires `token` as an argument.");var t,n;return go(this.encoder,e.documentName),po(this.encoder,this.type),t=this.encoder,n=e.token,b(t,M.Token),S(t,n),this.encoder}}class Jo extends zo{constructor(){super(...arguments),this.type=Bo.Awareness,this.description="Awareness states update"}get(e){if(void 0===e.awareness)throw new Error("The awareness message requires awareness as an argument");if(void 0===e.clients)throw new Error("The awareness message requires clients as an argument");let t;return go(this.encoder,e.documentName),po(this.encoder,this.type),t=void 0===e.states?No(e.awareness,e.clients):No(e.awareness,e.clients,e.states),yo(this.encoder,t),this.encoder}}class Xo extends zo{constructor(){super(...arguments),this.type=Bo.Stateless,this.description="A stateless message"}get(e){var t;return go(this.encoder,e.documentName),po(this.encoder,this.type),go(this.encoder,null!==(t=e.payload)&&void 0!==t?t:""),this.encoder}}class Yo extends zo{constructor(){super(...arguments),this.type=Bo.Sync,this.description="First sync step"}get(e){if(void 0===e.document)throw new Error("The sync step one message requires document as an argument");return go(this.encoder,e.documentName),po(this.encoder,this.type),((e,t)=>{po(e,0);const n=Rn(t);yo(e,n)})(this.encoder,e.document),this.encoder}}class Qo extends zo{constructor(){super(...arguments),this.type=Bo.Sync,this.description="A document update"}get(e){return go(this.encoder,e.documentName),po(this.encoder,this.type),t=this.encoder,n=e.update,po(t,2),yo(t,n),this.encoder;var t,n}}class Zo extends Error{constructor(){super(...arguments),this.code=1001}}class ea extends Ro{constructor(e){var t,n,r;super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,onUnsyncedChanges:()=>null},this.isSynced=!1,this.unsyncedChanges=0,this.isAuthenticated=!1,this.authorizedScope=void 0,this.manageSocket=!1,this._isAttached=!1,this.intervals={forceSync:null},this.boundDocumentUpdateHandler=this.documentUpdateHandler.bind(this),this.boundAwarenessUpdateHandler=this.awarenessUpdateHandler.bind(this),this.boundPageHide=this.pageHide.bind(this),this.boundOnOpen=this.onOpen.bind(this),this.boundOnClose=this.onClose.bind(this),this.forwardConnect=e=>this.emit("connect",e),this.forwardClose=e=>this.emit("close",e),this.forwardDisconnect=e=>this.emit("disconnect",e),this.forwardDestroy=e=>this.emit("destroy",e),this.setConfiguration(e),this.configuration.document=e.document?e.document:new vn,this.configuration.awareness=void 0!==e.awareness?e.awareness:new Po(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("unsyncedChanges",this.configuration.onUnsyncedChanges),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),null===(t=this.awareness)||void 0===t||t.on("update",()=>{this.emit("awarenessUpdate",{states:I(this.awareness.getStates())})}),null===(n=this.awareness)||void 0===n||n.on("change",()=>{this.emit("awarenessChange",{states:I(this.awareness.getStates())})}),this.document.on("update",this.boundDocumentUpdateHandler),null===(r=this.awareness)||void 0===r||r.on("update",this.boundAwarenessUpdateHandler),this.registerEventListeners(),this.configuration.forceSyncInterval&&"number"==typeof this.configuration.forceSyncInterval&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.manageSocket&&this.attach()}setConfiguration(e={}){if(!e.websocketProvider){const t=e;this.manageSocket=!0,this.configuration.websocketProvider=new qo({url:t.url})}this.configuration={...this.configuration,...e}}get document(){return this.configuration.document}get isAttached(){return this._isAttached}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}resetUnsyncedChanges(){this.unsyncedChanges=1,this.emit("unsyncedChanges",{number:this.unsyncedChanges})}incrementUnsyncedChanges(){this.unsyncedChanges+=1,this.emit("unsyncedChanges",{number:this.unsyncedChanges})}decrementUnsyncedChanges(){this.unsyncedChanges>0&&(this.unsyncedChanges-=1),0===this.unsyncedChanges&&(this.synced=!0),this.emit("unsyncedChanges",{number:this.unsyncedChanges})}forceSync(){this.resetUnsyncedChanges(),this.send(Yo,{document:this.document,documentName:this.configuration.name})}pageHide(){this.awareness&&Lo(this.awareness,[this.document.clientID],"page hide")}registerEventListeners(){"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener("pagehide",this.boundPageHide)}sendStateless(e){this.send(Xo,{documentName:this.configuration.name,payload:e})}documentUpdateHandler(e,t){t!==this&&(this.incrementUnsyncedChanges(),this.send(Qo,{update:e,documentName:this.configuration.name}))}awarenessUpdateHandler({added:e,updated:t,removed:n},r){const i=e.concat(t).concat(n);this.send(Jo,{awareness:this.awareness,clients:i,documentName:this.configuration.name})}get synced(){return this.isSynced}set synced(e){this.isSynced!==e&&(this.isSynced=e,e&&this.emit("synced",{state:e}))}receiveStateless(e){this.emit("stateless",{payload:e})}async connect(){if(this.manageSocket)return this.configuration.websocketProvider.connect();console.warn("HocuspocusProvider::connect() is deprecated and does not do anything. Please connect/disconnect on the websocketProvider, or attach/deattach providers.")}disconnect(){if(this.manageSocket)return this.configuration.websocketProvider.disconnect();console.warn("HocuspocusProvider::disconnect() is deprecated and does not do anything. Please connect/disconnect on the websocketProvider, or attach/deattach providers.")}async onOpen(e){let t;this.isAuthenticated=!1,this.emit("open",{event:e});try{t=await this.getToken()}catch(e){return void this.permissionDeniedHandler(`Failed to get token: ${e}`)}this.send(Ko,{token:null!=t?t:"",documentName:this.configuration.name}),this.startSync()}async getToken(){return"function"==typeof this.configuration.token?await this.configuration.token():this.configuration.token}startSync(){this.resetUnsyncedChanges(),this.send(Yo,{document:this.document,documentName:this.configuration.name}),this.awareness&&null!==this.awareness.getLocalState()&&this.send(Jo,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(e,t){if(!this._isAttached)return;const n=new Go(e,t);this.emit("outgoingMessage",{message:n.message}),n.send(this.configuration.websocketProvider)}onMessage(e){const t=new Uo(e.data),n=t.readVarString();t.writeVarString(n),this.emit("message",{event:e,message:new Uo(e.data)}),new Wo(t).apply(this,!0)}onClose(){this.isAuthenticated=!1,this.synced=!1,this.awareness&&Lo(this.awareness,Array.from(this.awareness.getStates().keys()).filter(e=>e!==this.document.clientID),this)}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),this.awareness&&(Lo(this.awareness,[this.document.clientID],"provider destroy"),this.awareness.off("update",this.boundAwarenessUpdateHandler),this.awareness.destroy()),this.document.off("update",this.boundDocumentUpdateHandler),this.removeAllListeners(),this.detach(),this.manageSocket&&this.configuration.websocketProvider.destroy(),"undefined"!=typeof window&&"removeEventListener"in window&&window.removeEventListener("pagehide",this.boundPageHide)}detach(){this.configuration.websocketProvider.off("connect",this.configuration.onConnect),this.configuration.websocketProvider.off("connect",this.forwardConnect),this.configuration.websocketProvider.off("open",this.boundOnOpen),this.configuration.websocketProvider.off("close",this.boundOnClose),this.configuration.websocketProvider.off("close",this.configuration.onClose),this.configuration.websocketProvider.off("close",this.forwardClose),this.configuration.websocketProvider.off("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.off("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.off("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.off("destroy",this.forwardDestroy),this.configuration.websocketProvider.detach(this),this._isAttached=!1}attach(){this._isAttached||(this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",this.forwardConnect),this.configuration.websocketProvider.on("open",this.boundOnOpen),this.configuration.websocketProvider.on("close",this.boundOnClose),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",this.forwardClose),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",this.forwardDestroy),this.configuration.websocketProvider.attach(this),this._isAttached=!0)}permissionDeniedHandler(e){this.emit("authenticationFailed",{reason:e}),this.isAuthenticated=!1}authenticatedHandler(e){this.isAuthenticated=!0,this.authorizedScope=e,this.emit("authenticated",{scope:e})}setAwarenessField(e,t){if(!this.awareness)throw new Zo(`Cannot set awareness field "${e}" to ${JSON.stringify(t)}. You have disabled Awareness for this provider by explicitly passing awareness: null in the provider configuration.`);this.awareness.setLocalStateField(e,t)}}const ta=e=>{if(e.shouldConnect&&null===e.ws){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=t=>{e.lastMessageReceived=Lt();const n=t.data,i="string"==typeof n?JSON.parse(n):n;i&&"pong"===i.type&&(clearTimeout(r),r=setTimeout(s,15e3)),e.emit("message",[i,e])};const i=t=>{null!==e.ws&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:t},e])):e.unsuccessfulReconnects++,setTimeout(ta,W(1200*V(e.unsuccessfulReconnects+1),2500),e)),clearTimeout(r)},s=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>i(null),t.onerror=e=>i(e),t.onopen=()=>{e.lastMessageReceived=Lt(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(s,15e3)}}};class na extends ${constructor(e,{binaryType:t}={}){super(),this.url=e,this.ws=null,this.binaryType=t||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&3e4<Lt()-this.lastMessageReceived&&this.ws.close()},15e3),ta(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||ta(this)}}const ra=new Map,ia="undefined"==typeof BroadcastChannel?class{constructor(e){var t;this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:Ct(t.newValue||"")}),t=this._onChange,nt||addEventListener("storage",t)}postMessage(e){rt.setItem(this.room,Et((e=>new Uint8Array(e))(e)))}close(){var e;e=this._onChange,nt||removeEventListener("storage",e)}}:BroadcastChannel,sa=e=>L(ra,e,()=>{const t=N(),n=new ia(e);return n.onmessage=e=>t.forEach(t=>t(e.data,"broadcastchannel")),{bc:n,subs:t}}),oa=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}};var aa=n(1736);const la=(e,t)=>{he(e,0);const n=Rn(t);ve(e,n)},ca=(e,t,n)=>{he(e,1),ve(e,jn(t,n))},ua=(e,t,n)=>{try{In(t,Ne(e),n)}catch(e){console.error("Caught error while handling a Yjs update",e)}},da=ua;class ha extends ${constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=Lt();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach((n,r)=>{r!==this.clientID&&3e4<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)}),t.length>0&&pa(this,t,"timeout")},q(3e3)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:Lt()});const s=[],o=[],a=[],l=[];null===e?l.push(t):null==i?null!=e&&s.push(t):(o.push(t),gt(i,e)||a.push(t)),(s.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:s,updated:a,removed:l},"local"]),this.emit("update",[{added:s,updated:o,removed:l},"local"])}setLocalStateField(e,t){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const pa=(e,t,n)=>{const r=[];for(let n=0;n<t.length;n++){const i=t[n];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){const t=e.meta.get(i);e.meta.set(i,{clock:t.clock+1,lastUpdated:Lt()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},fa=(e,t,n=e.states)=>{const r=t.length,i=le();he(i,r);for(let s=0;s<r;s++){const r=t[s],o=n.get(r)||null,a=e.meta.get(r).clock;he(i,r),he(i,a),ge(i,JSON.stringify(o))}return ce(i)},ma=(e,t)=>{if(!t)return et(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(e=>{const t=le();return ge(t,"AES-GCM"),ve(t,n),ve(t,new Uint8Array(e)),ce(t)})},ga=(e,t)=>{if(!t)return et(e);const n=Pe(e);var r;"AES-GCM"!==Fe(n)&&(r=Ae("Unknown encryption algorithm"),Promise.reject(r));const i=Ne(n),s=Ne(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,s).then(e=>new Uint8Array(e))},ya=((e,t)=>{const n=Wt[Gt],r=St("log"),i=null!==r&&("*"===r||"true"===r||new RegExp(r,"gi").test(t));return Gt=(Gt+1)%Wt.length,t+=": ",i?(...r)=>{1===r.length&&r[0]?.constructor===Function&&(r=r[0]());const i=Lt(),s=i-Kt;Kt=i,e(n,t,Vt,...r.map(e=>{switch(null!=e&&e.constructor===Uint8Array&&(e=Array.from(e)),typeof e){case"string":case"symbol":return e;default:return Nt(e)}}),n," +"+s+"ms")}:ft})(Yt,"y-webrtc"),va=new Map,ba=new Map,_a=e=>{let t=!0;e.webrtcConns.forEach(e=>{e.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),ya("synced ",Rt,e.name,Ut," with all peers"))},wa=(e,t,n)=>{const r=Pe(t),i=le(),s=Ue(r);if(void 0===e)return null;const o=e.awareness,a=e.doc;let l=!1;switch(s){case 0:{he(i,0);const t=((e,t,n,r)=>{const i=Ue(e);switch(i){case 0:((e,t,n)=>{ca(t,n,Ne(e))})(e,t,n);break;case 1:ua(e,n,r);break;case 2:da(e,n,r);break;default:throw new Error("Unknown message type")}return i})(r,i,a,e);1!==t||e.synced||n(),0===t&&(l=!0);break}case 3:he(i,1),ve(i,fa(o,Array.from(o.getStates().keys()))),l=!0;break;case 1:((e,t,n)=>{const r=Pe(t),i=Lt(),s=[],o=[],a=[],l=[],c=Ue(r);for(let t=0;t<c;t++){const t=Ue(r);let n=Ue(r);const c=JSON.parse(Fe(r)),u=e.meta.get(t),d=e.states.get(t),h=void 0===u?0:u.clock;(h<n||h===n&&null===c&&e.states.has(t))&&(null===c?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,c),e.meta.set(t,{clock:n,lastUpdated:i}),void 0===u&&null!==c?s.push(t):void 0!==u&&null===c?l.push(t):null!==c&&(gt(c,d)||a.push(t),o.push(t)))}(s.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:s,updated:a,removed:l},n]),(s.length>0||o.length>0||l.length>0)&&e.emit("update",[{added:s,updated:o,removed:l},n])})(o,Ne(r),e);break;case 4:{const t=1===Re(r),n=Fe(r);if(n!==e.peerId&&(e.bcConns.has(n)&&!t||!e.bcConns.has(n)&&t)){const r=[],i=[];t?(e.bcConns.add(n),i.push(n)):(e.bcConns.delete(n),r.push(n)),e.provider.emit("peers",[{added:i,removed:r,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Ca(e)}break}default:return console.error("Unable to compute message"),i}return l?i:null},Sa=(e,t)=>{ya("send message to ",Rt,e.remotePeerId,Ut,Ft," (",e.room.name,")",Vt);try{e.peer.send(ce(t))}catch(e){}};class ka{constructor(e,t,n,r){ya("establishing connection to ",Rt,n),this.room=r,this.remotePeerId=n,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new aa({initiator:t,...r.provider.peerOpts}),this.peer.on("signal",t=>{void 0===this.glareToken&&(this.glareToken=Date.now()+Math.random()),Oa(e,r,{to:n,from:r.peerId,type:"signal",token:this.glareToken,signal:t})}),this.peer.on("connect",()=>{ya("connected to ",Rt,n),this.connected=!0;const e=r.provider.doc,t=r.awareness,i=le();he(i,0),la(i,e),Sa(this,i);const s=t.getStates();if(s.size>0){const e=le();he(e,1),ve(e,fa(t,Array.from(s.keys()))),Sa(this,e)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),_a(r),this.peer.destroy(),ya("closed connection to ",Rt,n),Ea(r)}),this.peer.on("error",e=>{ya("Error in connection to ",Rt,n,": ",e),Ea(r)}),this.peer.on("data",e=>{const t=((e,t)=>{const n=e.room;return ya("received message from ",Rt,e.remotePeerId,Ft," (",n.name,")",Ut,Vt),wa(n,t,()=>{e.synced=!0,ya("synced ",Rt,n.name,Ut," with ",Rt,e.remotePeerId),_a(n)})})(this,e);null!==t&&Sa(this,t)})}destroy(){this.peer.destroy()}}const Ta=(e,t)=>ma(t,e.key).then(t=>e.mux(()=>((e,t,n=null)=>{const r=sa(e);r.bc.postMessage(t),r.subs.forEach(e=>e(t,n))})(e.name,t))),xa=(e,t)=>{e.bcconnected&&Ta(e,t),((e,t)=>{ya("broadcast message in ",Rt,e.name,Ut),e.webrtcConns.forEach(e=>{try{e.peer.send(t)}catch(e){}})})(e,t)},Ea=e=>{va.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Oa(t,e,{type:"announce",from:e.peerId}))})},Ca=e=>{if(e.provider.filterBcConns){const t=le();he(t,4),de(t,1),ge(t,e.peerId),Ta(e,ce(t))}};class Aa{constructor(e,t,n,r){this.peerId=Qe(),this.doc=e,this.awareness=t.awareness,this.provider=t,this.synced=!1,this.name=n,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=oa(),this.bcconnected=!1,this._bcSubscriber=e=>ga(new Uint8Array(e),r).then(e=>this.mux(()=>{const t=wa(this,e,()=>{});t&&Ta(this,ce(t))})),this._docUpdateHandler=(e,t)=>{const n=le();he(n,0),((e,t)=>{he(e,2),ve(e,t)})(n,e),xa(this,ce(n))},this._awarenessUpdateHandler=({added:e,updated:t,removed:n},r)=>{const i=e.concat(t).concat(n),s=le();he(s,1),ve(s,fa(this.awareness,i)),xa(this,ce(s))},this._beforeUnloadHandler=()=>{pa(this.awareness,[e.clientID],"window unload"),ba.forEach(e=>{e.disconnect()})},"undefined"!=typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!=typeof process&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Ea(this);var e,t;e=this.name,t=this._bcSubscriber,sa(e).subs.add(t),this.bcconnected=!0,Ca(this);const n=le();he(n,0),la(n,this.doc),Ta(this,ce(n));const r=le();he(r,0),ca(r,this.doc),Ta(this,ce(r));const i=le();he(i,3),Ta(this,ce(i));const s=le();he(s,1),ve(s,fa(this.awareness,[this.doc.clientID])),Ta(this,ce(s))}disconnect(){va.forEach(e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})}),pa(this.awareness,[this.doc.clientID],"disconnect");const e=le();he(e,4),de(e,0),ge(e,this.peerId),Ta(this,ce(e)),((e,t)=>{const n=sa(e);n.subs.delete(t)&&0===n.subs.size&&(n.bc.close(),ra.delete(e))})(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(e=>e.destroy())}destroy(){this.disconnect(),"undefined"!=typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!=typeof process&&process.off("exit",this._beforeUnloadHandler)}}const Oa=(e,t,n)=>{t.key?((e,t)=>{const n=le();return we(n,e),ma(ce(n),t)})(n,t.key).then(n=>{e.send({type:"publish",topic:t.name,data:Et(n)})}):e.send({type:"publish",topic:t.name,data:n})};class Ma extends na{constructor(e){super(e),this.providers=new Set,this.on("connect",()=>{ya(`connected (${e})`);const t=Array.from(ba.keys());this.send({type:"subscribe",topics:t}),ba.forEach(e=>Oa(this,e,{type:"announce",from:e.peerId}))}),this.on("message",e=>{if("publish"===e.type){const r=e.topic,i=ba.get(r);if(null==i||"string"!=typeof r)return;const s=e=>{const t=i.webrtcConns,n=i.peerId;if(null==e||e.from===n||void 0!==e.to&&e.to!==n||i.bcConns.has(e.from))return;const r=t.has(e.from)?()=>{}:()=>i.provider.emit("peers",[{removed:[],added:[e.from],webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]);switch(e.type){case"announce":t.size<i.provider.maxConns&&(L(t,e.from,()=>new ka(this,!0,e.from,i)),r());break;case"signal":if("offer"===e.signal.type){const n=t.get(e.from);if(n){const t=e.token,r=n.glareToken;if(r&&r>t)return void ya("offer rejected: ",e.from);n.glareToken=void 0}}"answer"===e.signal.type&&(ya("offer answered by: ",e.from),t.get(e.from).glareToken=void 0),e.to===n&&(L(t,e.from,()=>new ka(this,!1,e.from,i)).peer.signal(e.signal),r())}};i.key?"string"==typeof e.data&&(t=Ct(e.data),n=i.key,ga(t,n).then(e=>qe(Pe(new Uint8Array(e))))).then(s):s(e.data)}var t,n}),this.on("disconnect",()=>ya(`disconnect (${e})`))}}const Ia=e=>{e.emit("status",[{connected:e.connected}])},Da=e=>Ze((t,n)=>{e.onerror=e=>n(new Error(e.target.error)),e.onsuccess=e=>t(e.target.result)}),ja=(e,t,n="readwrite")=>{const r=e.transaction(t,n);return t.map(e=>Ua(r,e))},Pa=(e,t)=>Da(e.count(t)),La=(e,t)=>Da(e.delete(t)),Na=(e,t)=>Da(e.add(t)),Ra=(e,t,n,r="next")=>((e,t)=>Ze((n,r)=>{e.onerror=r,e.onsuccess=async e=>{const r=e.target.result;if(null===r||!1===await t(r))return n();r.continue()}}))(e.openKeyCursor(t,r),e=>n(e.key)),Ua=(e,t)=>e.objectStore(t),Ba="custom",Fa="updates",za=(e,t=()=>{},n=()=>{})=>{const[r]=ja(e.db,[Fa]);return(i=r,a=e._dbref,s=IDBKeyRange.lowerBound(a,!1),Da(i.getAll(s,o))).then(i=>{e._destroyed||(t(r),Br(e.doc,()=>{i.forEach(t=>In(e.doc,t))},e,!1),n(r))}).then(()=>((e,t=null)=>((e,t,n)=>{let r=null;return Ra(e,t,e=>(r=e,!1),n).then(()=>r)})(e,t,"prev"))(r).then(t=>{e._dbref=t+1})).then(()=>Pa(r).then(t=>{e._dbsize=t})).then(()=>r);var i,s,o,a};var $a=n(4617);function qa(e){this.content=e}qa.prototype={constructor:qa,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return-1==i?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new qa(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new qa(n)},addToStart:function(e,t){return new qa([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new qa(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(-1==s?i.length:s,0,t,n),new qa(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=qa.from(e)).size?new qa(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=qa.from(e)).size?new qa(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=qa.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},qa.from=function(e){if(e instanceof qa)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new qa(t)};const Ha=qa;function Va(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let e=0;i.text[e]==s.text[e];e++)n++;return n}if(i.content.size||s.content.size){let e=Va(i.content,s.content,n+1);if(null!=e)return e}n+=i.nodeSize}else n+=i.nodeSize}}function Wa(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(0==i||0==s)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let e=0,t=Math.min(o.text.length,a.text.length);for(;e<t&&o.text[o.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let e=Wa(o.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}class Ga{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,i){for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;if(l>e&&!1!==n(a,r+o,i||null,s)&&a.content.size){let i=o+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}o=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",s=!0;return this.nodesBetween(e,t,(o,a)=>{let l=o.isText?o.text.slice(Math.max(e,a)-a,t-a):o.isLeaf?r?"function"==typeof r?r(o):r:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&n&&(s?s=!1:i+=n),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new Ga(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,s=0;s<t;i++){let o=this.content[i],a=s+o.nodeSize;a>e&&((s<e||a>t)&&(o=o.isText?o.cut(Math.max(0,e-s),Math.min(o.text.length,t-s)):o.cut(Math.max(0,e-s-1),Math.min(o.content.size,t-s-1))),n.push(o),r+=o.nodeSize),s=a}return new Ga(n,r)}cutByIndex(e,t){return e==t?Ga.empty:0==e&&t==this.content.length?this:new Ga(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new Ga(r,i)}addToStart(e){return new Ga([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ga(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return Va(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return Wa(this,e,t,n)}findIndex(e,t=-1){if(0==e)return Ja(0,e);if(e==this.size)return Ja(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e)return i==e||t>0?Ja(n+1,i):Ja(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ga.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ga(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ga.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new Ga(t||e,n)}static from(e){if(!e)return Ga.empty;if(e instanceof Ga)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ga([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ga.empty=new Ga([],0);const Ka={index:0,offset:0};function Ja(e,t){return Ka.index=e,Ka.offset=t,Ka}function Xa(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!Xa(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!Xa(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class Ya{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Xa(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return Ya.none;if(e instanceof Ya)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}Ya.none=[];class Qa extends Error{}class Za{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=tl(this.content,e+this.openStart,t);return n&&new Za(n,this.openStart,this.openEnd)}removeBetween(e,t){return new Za(el(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Za.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Za(Ga.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new Za(e,n,r)}}function el(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(el(s.content,t-i-1,n-i-1)))}function tl(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=tl(o.content,t-s-1,n);return a&&e.replaceChild(i,o.copy(a))}function nl(e,t,n){if(n.openStart>e.depth)throw new Qa("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Qa("Inconsistent open depths");return rl(e,t,n,0)}function rl(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=rl(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:o}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(Ga.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return ll(s,cl(e,i,o,t,r))}{let r=e.parent,i=r.content;return ll(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}return ll(s,ul(e,t,r))}function il(e,t){if(!t.type.compatibleContent(e.type))throw new Qa("Cannot join "+t.type.name+" onto "+e.type.name)}function sl(e,t,n){let r=e.node(n);return il(r,t.node(n)),r}function ol(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function al(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(ol(e.nodeAfter,r),s++));for(let e=s;e<o;e++)ol(i.child(e),r);t&&t.depth==n&&t.textOffset&&ol(t.nodeBefore,r)}function ll(e,t){return e.type.checkContent(t),e.copy(t)}function cl(e,t,n,r,i){let s=e.depth>i&&sl(e,t,i+1),o=r.depth>i&&sl(n,r,i+1),a=[];return al(null,e,i,a),s&&o&&t.index(i)==n.index(i)?(il(s,o),ol(ll(s,cl(e,t,n,r,i+1)),a)):(s&&ol(ll(s,ul(e,t,i+1)),a),al(t,n,i,a),o&&ol(ll(o,ul(n,r,i+1)),a)),al(r,null,i,a),new Ga(a)}function ul(e,t,n){let r=[];return al(null,e,n,r),e.depth>n&&ol(ll(sl(e,t,n+1),ul(e,t,n+1)),r),al(t,null,n,r),new Ga(r)}Za.empty=new Za(Ga.empty,0,0);class dl{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return Ya.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new ml(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:s}=t.content.findIndex(i),o=i-s;if(n.push(t,e,r+s),!o)break;if(t=t.child(e),t.isText)break;i=o-1,r+=s+1}return new dl(t,n,i)}static resolveCached(e,t){let n=fl.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else fl.set(e,n=new hl);let r=n.elts[n.i]=dl.resolve(e,t);return n.i=(n.i+1)%pl,r}}class hl{constructor(){this.elts=[],this.i=0}}const pl=12,fl=new WeakMap;class ml{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const gl=Object.create(null);class yl{constructor(e,t,n,r=Ya.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||Ga.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&Xa(this.attrs,t||e.defaultAttrs||gl)&&Ya.sameSet(this.marks,n||Ya.none)}copy(e=null){return e==this.content?this:new yl(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new yl(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return Za.empty;let r=this.resolve(e),i=this.resolve(t),s=n?0:r.sharedDepth(t),o=r.start(s),a=r.node(s).content.cut(r.pos-o,i.pos-o);return new Za(a,r.depth-s,i.depth-s)}replace(e,t,n){return nl(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return dl.resolveCached(this,e)}resolveNoCache(e){return dl.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),bl(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=Ga.empty,r=0,i=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,r,i),o=s&&s.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let e=r;e<i;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),s=i&&i.matchFragment(this.content,t);return!!s&&s.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ya.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Ya.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=Ga.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}}yl.prototype.text=void 0;class vl extends yl{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):bl(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new vl(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new vl(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function bl(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class _l{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new wl(e,t);if(null==n.next)return _l.empty;let r=Sl(n);n.next&&n.err("Unexpected trailing text");let i=function(e){let t=Object.create(null);return function n(r){let i=[];r.forEach(t=>{e[t].forEach(({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<i.length;e++)i[e][0]==t&&(r=i[e][1]);Al(e,n).forEach(e=>{r||i.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)})})});let s=t[r.join(",")]=new _l(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(Cl);s.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return s}(Al(e,0))}(function(e){let t=[[]];return i(function e(t,s){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,s)),[]);if("seq"!=t.type){if("star"==t.type){let o=n();return r(s,o),i(e(t.expr,o),o),[r(o)]}if("plus"==t.type){let o=n();return i(e(t.expr,s),o),i(e(t.expr,o),o),[r(o)]}if("opt"==t.type)return[r(s)].concat(e(t.expr,s));if("range"==t.type){let o=s;for(let r=0;r<t.min;r++){let r=n();i(e(t.expr,o),r),o=r}if(-1==t.max)i(e(t.expr,o),o);else for(let s=t.min;s<t.max;s++){let s=n();r(o,s),i(e(t.expr,o),s),o=s}return[r(o)]}if("name"==t.type)return[r(s,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let o=e(t.exprs[r],s);if(r==t.exprs.length-1)return o;i(o,s=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,s=[];for(let t=0;t<e.next.length;t++){let{type:n,next:o}=e.next[t];s.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(o)&&r.push(o)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function i(s,o){let a=s.matchFragment(e,n);if(a&&(!t||a.validEnd))return Ga.from(o.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:n}=s.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=i(n,o.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:s,next:o}=i.next[e];s.isLeaf||s.hasRequiredAttrs()||s.name in t||r.type&&!o.validEnd||(n.push({match:s.contentMatch,type:s,via:r}),t[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}}_l.empty=new _l(!0);class wl{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Sl(e){let t=[];do{t.push(kl(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function kl(e){let t=[];do{t.push(Tl(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Tl(e){let t=function(e){if(e.eat("(")){let t=Sl(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=El(e,t)}return t}function xl(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function El(e,t){let n=xl(e),r=n;return e.eat(",")&&(r="}"!=e.next?xl(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Cl(e,t){return t-e}function Al(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:s}=i[e];r||-1!=n.indexOf(s)||t(s)}}(t),n.sort(Cl)}function Ol(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Ml(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=t.default}n[r]=i}return n}function Il(e,t,n,r){for(let r in t)if(!(r in e))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function Dl(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new Pl(e,r,t[r]);return n}class jl{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Dl(e,n.attrs),this.defaultAttrs=Ol(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==_l.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ml(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yl(this,this.computeAttrs(e),Ga.from(t),Ya.setFrom(n))}createChecked(e=null,t,n){return t=Ga.from(t),this.checkContent(t),new yl(this,this.computeAttrs(e),t,Ya.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=Ga.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(Ga.empty,!0);return i?new yl(this,e,t.append(i),Ya.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Il(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:Ya.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new jl(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Pl{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Ll{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=Dl(e,r.attrs),this.excluded=null;let i=Ol(this.attrs);this.instance=i?new Ya(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Ya(this,Ml(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new Ll(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Il(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Nl{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=Ha.from(e.nodes),t.marks=Ha.from(e.marks||{}),this.nodes=jl.compile(this.spec.nodes,this),this.marks=Ll.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw new RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=_l.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?Rl(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:Rl(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof jl))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new vl(n,n.defaultAttrs,e,Ya.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return yl.fromJSON(this,e)}markFromJSON(e){return Ya.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Rl(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=r)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class Ul{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new Hl(this,t,!1);return n.addAll(e,Ya.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Hl(this,t,!0);return n.addAll(e,Ya.none,t.from,t.to),Za.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(Vl(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],s=r.style;if(!(0!=s.indexOf(e)||r.context&&!n.matchesContext(r.context)||s.length>e.length&&(61!=s.charCodeAt(e.length)||s.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=Wl(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=Wl(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ul(e,Ul.schemaRules(e)))}}const Bl={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fl={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},zl={ol:!0,ul:!0};function $l(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class ql{constructor(e,t,n,r,i,s){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=s,this.content=[],this.activeMarks=Ya.none,this.match=i||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ga.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=Ga.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ga.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Bl.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Hl{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r,i=t.topNode,s=$l(null,t.preserveWhitespace,0)|(n?4:0);r=i?new ql(i.type,i.attrs,Ya.none,!0,t.topMatch||i.type.contentMatch,s):new ql(n?null:e.schema.topNodeType,null,Ya.none,!0,null,s),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)n="full"!==i?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s,o=e.nodeName.toLowerCase();zl.hasOwnProperty(o)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&zl.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,n));e:if(a?a.ignore:Fl.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,r=this.needsBlock;if(Bl.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let s=a&&a.skip?t:this.readStyles(e,t);s&&this.addAll(e,s),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?s:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1!==n.consuming)break;e=n}}return t}addElementByRule(e,t,n,r){let i,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(s,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(o)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=null==r?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,t);this.findAtPoint(e,i)}findPlace(e,t,n){let r,i;for(let t=this.open,s=0;t>=0;t--){let o=this.nodes[t],a=o.findWrapping(e);if(a&&(!r||r.length>a.length+s)&&(r=a,i=o,!a.length))break;if(o.solid){if(n)break;s+=2}}if(!r)return null;this.sync(i);for(let e=0;e<r.length;e++)t=this.enterInner(r[e],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t,n);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=Ya.none;for(let i of r.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):Gl(i.type,e.type))&&(n=i.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n,!1);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n,r=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let o=$l(e,i,s.options);4&s.options&&0==s.content.length&&(o|=4);let a=Ya.none;return n=n.filter(t=>!(s.type?s.type.allowsMarkType(t.type):Gl(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new ql(e,t,a,r,null,o)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),s=(e,o)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;o>=i;o--)if(s(e-1,o))return!0;return!1}{let e=o>0||0==o&&r?this.nodes[o].type:n&&o>=i?n.node(o-i).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;o--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function Vl(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Wl(e){let t={};for(let n in e)t[n]=e[n];return t}function Gl(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=e=>{s.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t)return!0;if(s.indexOf(i)<0&&o(i))return!0}};if(o(i.contentMatch))return!0}}class Kl{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Xl(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,s=0;for(;n<i.length&&s<e.marks.length;){let t=e.marks[s];if(this.marks[t.type.name]){if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,s++}else s++}for(;n<i.length;)r=i.pop()[1];for(;s<e.marks.length;){let n=e.marks[s++],o=this.serializeMark(n,e.isInline,t);o&&(i.push([n,r]),r.appendChild(o.dom),r=o.contentDOM||o.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=Ql(Xl(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&Ql(Xl(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return Ql(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Kl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Jl(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Jl(e.marks)}}function Jl(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Xl(e){return e.document||window.document}const Yl=new WeakMap;function Ql(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,s=t[0];if("string"!=typeof s)throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=function(e){let t=Yl.get(e);return void 0===t&&Yl.set(e,t=function(e){let t=null;return function e(n){if(n&&"object"==typeof n)if(Array.isArray(n))if("string"==typeof n[0])t||(t=[]),t.push(n);else for(let t=0;t<n.length;t++)e(n[t]);else for(let t in n)e(n[t])}(e),t}(e)),t}(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o,a=s.indexOf(" ");a>0&&(n=s.slice(0,a),s=s.slice(a+1));let l=n?e.createElementNS(n,s):e.createElement(s),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):l.setAttribute(e,c[e])}}for(let i=u;i<t.length;i++){let s=t[i];if(0===s){if(i<t.length-1||i>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:i}=Ql(e,s,n,r);if(l.appendChild(t),i){if(o)throw new RangeError("Multiple content holes");o=i}}}return{dom:l,contentDOM:o}}const Zl=Math.pow(2,16);function ec(e,t){return e+t*Zl}function tc(e){return 65535&e}class nc{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class rc{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&rc.empty)return rc.empty}recover(e){let t=0,n=tc(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Zl}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[o+i],c=this.ranges[o+s],u=a+l;if(e<=u){let i=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return i;let s=e==(t<0?a:u)?null:ec(o/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new nc(i,d,s)}r+=c-l}return n?e+r:new nc(e+r,0,null)}touches(e,t){let n=0,r=tc(t),i=this.inverted?2:1,s=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let o=this.ranges[t]-(this.inverted?n:0);if(o>e)break;let a=this.ranges[t+i];if(e<=o+a&&t==3*r)return!0;n+=this.ranges[t+s]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let s=this.ranges[r],o=s-(this.inverted?i:0),a=s+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(o,o+l,a,a+c),i+=c-l}}invert(){return new rc(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?rc.empty:new rc(e<0?[0,-e,0]:[0,0,e])}}rc.empty=new rc([]);class ic{constructor(e,t,n=0,r=(e?e.length:0)){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ic(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new ic;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this._maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this._maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new nc(e,r,null)}}const sc=Object.create(null);class oc{getMap(){return rc.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=sc[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in sc)throw new RangeError("Duplicate use of step JSON ID "+e);return sc[e]=t,t.prototype.jsonID=e,t}}class ac{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ac(e,null)}static fail(e){return new ac(null,e)}static fromReplace(e,t,n,r){try{return ac.ok(e.replace(t,n,r))}catch(e){if(e instanceof Qa)return ac.fail(e.message);throw e}}}function lc(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(lc(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return Ga.fromArray(r)}class cc extends oc{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new Za(lc(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return ac.fromReplace(e,this.from,this.to,i)}invert(){return new uc(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new cc(t.pos,n.pos,this.mark)}merge(e){return e instanceof cc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cc(t.from,t.to,e.markFromJSON(t.mark))}}oc.jsonID("addMark",cc);class uc extends oc{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new Za(lc(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return ac.fromReplace(e,this.from,this.to,n)}invert(){return new cc(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new uc(t.pos,n.pos,this.mark)}merge(e){return e instanceof uc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new uc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new uc(t.from,t.to,e.markFromJSON(t.mark))}}oc.jsonID("removeMark",uc);class dc extends oc{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ac.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ac.fromReplace(e,this.pos,this.pos+1,new Za(Ga.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new dc(this.pos,t.marks[n]);return new dc(this.pos,this.mark)}}return new hc(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new dc(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new dc(t.pos,e.markFromJSON(t.mark))}}oc.jsonID("addNodeMark",dc);class hc extends oc{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ac.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ac.fromReplace(e,this.pos,this.pos+1,new Za(Ga.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new dc(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hc(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new hc(t.pos,e.markFromJSON(t.mark))}}oc.jsonID("removeNodeMark",hc);class pc extends oc{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&mc(e,this.from,this.to)?ac.fail("Structure replace would overwrite content"):ac.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new rc([this.from,this.to-this.from,this.slice.size])}invert(e){return new pc(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new pc(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof pc)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?Za.empty:new Za(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new pc(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?Za.empty:new Za(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new pc(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new pc(t.from,t.to,Za.fromJSON(e,t.slice),!!t.structure)}}oc.jsonID("replace",pc);class fc extends oc{constructor(e,t,n,r,i,s,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=s,this.structure=o}apply(e){if(this.structure&&(mc(e,this.from,this.gapFrom)||mc(e,this.gapTo,this.to)))return ac.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ac.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?ac.fromReplace(e,this.from,this.to,n):ac.fail("Content does not fit in gap")}getMap(){return new rc([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new fc(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new fc(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fc(t.from,t.to,t.gapFrom,t.gapTo,Za.fromJSON(e,t.slice),t.insert,!!t.structure)}}function mc(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let e=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function gc(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let t=0;t<s.childCount;t++){let l=s.child(t),c=a+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new uc(a,c,l.marks[t]));if(i&&l.isText&&"pre"!=n.whitespace){let e,t,r=/\r?\n|\r/g;for(;e=r.exec(l.text);)t||(t=new Za(Ga.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),o.push(new pc(a+e.index,a+e.index+e[0].length,t))}}else o.push(new pc(a,c,Za.empty));a=c}if(!r.validEnd){let t=r.fillBefore(Ga.empty,!0);e.replace(a,a,new Za(t,0,0))}for(let t=o.length-1;t>=0;t--)e.step(o[t])}function yc(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function vc(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),s=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,s,t))return n;if(0==n||r.type.spec.isolating||!yc(r,i,s))break}return null}function bc(e,t,n=null,r=e){let i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}(e,t),s=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:t).contentMatch;for(let e=r;a&&e<i;e++)a=a.matchType(n.child(e).type);return a&&a.validEnd?o:null}(r,t);return s?i.map(_c).concat({type:t,attrs:n}).concat(s.map(_c)):null}function _c(e){return{type:e,attrs:null}}function wc(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let i=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function Sc(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+s);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function kc(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>s;e--,t--){let n=i.node(e),s=i.index(e);if(n.type.spec.isolating)return!1;let o=n.content.cutByIndex(s,n.childCount),a=r&&r[t+1];a&&(o=o.replaceChild(0,a.type.create(a.attrs)));let l=r&&r[t]||n;if(!n.canReplace(s+1,n.childCount)||!l.type.validContent(o))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Tc(e,t){let n=e.resolve(t),r=n.index();return xc(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function xc(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n)return!1;if(!e.type.allowsMarks(s.marks))return!1}return n.validEnd}(e,t))}function Ec(e,t,n=-1){let r=e.resolve(t);for(let e=r.depth;;e--){let i,s,o=r.index(e);if(e==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(e+1),o++,s=r.node(e).maybeChild(o)):(i=r.node(e).maybeChild(o-1),s=r.node(e+1)),i&&!i.isTextblock&&xc(i,s)&&r.node(e).canReplace(o,o+1))return t;if(0==e)break;t=n<0?r.before(e):r.after(e)}}function Cc(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,s=r.index(t)+(n>0?1:0),o=r.node(t),a=!1;if(1==e)a=o.canReplace(s,s,i);else{let e=o.contentMatchAt(s).findWrapping(i.firstChild.type);a=e&&o.canReplaceWith(s,s,e[0])}if(a)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}function Ac(e,t,n=t,r=Za.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return Oc(i,s,r)?new pc(t,n,r):new Mc(i,s,r).fit()}function Oc(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}oc.jsonID("replaceAround",fc);class Mc{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=Ga.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=Ga.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,s=n.depth,o=r.depth;for(;s&&o&&1==i.childCount;)i=i.firstChild.content,s--,o--;let a=new Za(i,s,o);return e>-1?new fc(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new pc(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=jc(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let i=e.firstChild;for(let e=this.depth;e>=0;e--){let s,{type:o,match:a}=this.frontier[e],l=null;if(1==t&&(i?a.matchType(i.type)||(l=a.fillBefore(Ga.from(i),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:e,parent:r,inject:l};if(2==t&&i&&(s=a.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:r,wrap:s};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=jc(e,t);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new Za(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),0))}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=jc(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new Za(Ic(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new Za(Ic(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let s=this.unplaced,o=n?n.content:s.content,a=s.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=o.size+e-(s.content.size-s.openEnd);for(;l<o.childCount;){let e=o.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(u=t,c.push(Pc(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==o.childCount?h:-1)))}let p=l==o.childCount;p||(h=-1),this.placed=Dc(this.placed,t,Ga.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=o;e<h;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=p?0==e?Za.empty:new Za(Ic(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new Za(Ic(s.content,e,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Lc(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Lc(e,t,r,n,i);if(s){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=Lc(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Dc(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Dc(this.placed,this.depth,Ga.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Ga.empty,!0);e.childCount&&(this.placed=Dc(this.placed,this.frontier.length,e))}}function Ic(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Ic(e.firstChild.content,t-1,n)))}function Dc(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Dc(e.lastChild.content,t-1,n)))}function jc(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Pc(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,Pc(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Ga.empty,!0)))),e.copy(r)}function Lc(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,s.content,o)?a:null}function Nc(e){return e.spec.defining||e.spec.definingForContent}function Rc(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(Rc(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(Ga.empty,!0))}return e}function Uc(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(i==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==i-1)&&n.push(r)}return n}class Bc extends oc{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return ac.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return ac.fromReplace(e,this.pos,this.pos+1,new Za(Ga.from(r),0,t.isLeaf?0:1))}getMap(){return rc.empty}invert(e){return new Bc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Bc(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Bc(t.pos,t.attr,t.value)}}oc.jsonID("attr",Bc);class Fc extends oc{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return ac.ok(n)}getMap(){return rc.empty}invert(e){return new Fc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Fc(t.attr,t.value)}}oc.jsonID("docAttr",Fc);let zc=class extends Error{};zc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(zc.prototype=Object.create(Error.prototype)).constructor=zc,zc.prototype.name="TransformError";class $c{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ic}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new zc(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=Za.empty){let r=Ac(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new Za(Ga.from(n),0,0))}delete(e,t){return this.replace(e,t,Za.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(Oc(i,s,r))return e.step(new pc(t,n,r));let o=Uc(i,e.doc.resolve(n));0==o[o.length-1]&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;o.indexOf(e)>-1?a=e:i.before(e)==t&&o.splice(1,0,-e)}let l=o.indexOf(a),c=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){let t=c[e],n=Nc(t.type);if(n&&!t.sameMarkup(i.node(Math.abs(a)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let a=(t+u+1)%(r.openStart+1),d=c[a];if(d)for(let t=0;t<o.length;t++){let c=o[(t+l)%o.length],u=!0;c<0&&(u=!1,c=-c);let h=i.node(c-1),p=i.index(c-1);if(h.canReplaceWith(p,p,d.type,d.marks))return e.replace(i.before(c),u?s.after(c):n,new Za(Rc(r.content,0,r.openStart,a),a,r.openEnd))}}let d=e.steps.length;for(let a=o.length-1;a>=0&&(e.replace(t,n,r),!(e.steps.length>d));a--){let e=o[a];e<0||(t=i.before(e),n=s.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)return null}return null}(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new Za(Ga.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=Uc(r,i);for(let t=0;t<s.length;t++){let n=s[t],o=t==s.length-1;if(o&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(o||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return e.delete(r.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Ga.empty,d=0;for(let e=s,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=Ga.from(r.node(e).copy(u)),d++):l--;let h=Ga.empty,p=0;for(let e=s,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,h=Ga.from(i.node(e).copy(h)),p++):c++;e.step(new fc(l,c,o,a,new Za(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let e="pre"==o.whitespace,t=!!o.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);Sc(e,r.node(),r.before(),a)}o.inlineContent&&gc(e,t+n-1,o,s.node().contentMatchAt(s.index()),null==r);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new pc(c,l.map(t+n,-1),Za.empty,!0)),!0===r){let t=e.doc.resolve(c);wc(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=Ga.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ga.from(n[e].type.create(n[e].attrs,r))}let i=t.start,s=t.end;e.step(new fc(i,s,i,s,new Za(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let o="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,o)&&function(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(e.doc,e.mapping.slice(s).map(n),r)){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&Sc(e,t,n,s),gc(e,e.mapping.slice(s).map(n,1),r,void 0,null===i);let a=e.mapping.slice(s),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new fc(l,c,l+1,c-1,new Za(Ga.from(r.create(o,null,t.marks)),0,0),1,!0)),!0===i&&wc(e,t,n,s),!1}})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new fc(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Za(Ga.from(o),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new Bc(e,t,n)),this}setDocAttribute(e,t){return this.step(new Fc(e,t)),this}addNodeMark(e,t){return this.step(new dc(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof Ya)t.isInSet(n.marks)&&this.step(new hc(e,t));else{let r,i=n.marks,s=[];for(;r=t.isInSet(i);)s.push(new hc(e,r)),i=r.removeFromSet(i);for(let e=s.length-1;e>=0;e--)this.step(s[e])}return this}split(e,t=1,n){return function(e,t,n=1,r){let i=e.doc.resolve(t),s=Ga.empty,o=Ga.empty;for(let e=i.depth,t=i.depth-n,a=n-1;e>t;e--,a--){s=Ga.from(i.node(e).copy(s));let t=r&&r[a];o=Ga.from(t?t.type.create(t.attrs,o):i.node(e).copy(o))}e.step(new pc(t,t,new Za(s.append(o),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let i,s,o=[],a=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:o.push(i=new uc(c,d,u[e])));s&&s.to==c?s.to=d:a.push(s=new cc(c,d,r))}}),o.forEach(t=>e.step(t)),a.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(e,o)=>{if(!e.isInline)return;s++;let a=null;if(r instanceof Ll){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(o+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==s-1&&l.eq(i[e].style)&&(n=t)}n?(n.to=r,n.step=s):i.push({style:l,from:Math.max(o,t),to:r,step:s})}}}),i.forEach(t=>e.step(new uc(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return gc(this,e,t,n),this}}const qc=Object.create(null);class Hc{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Vc(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Za.empty){let n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let i=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:l}=s[o],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),o?Za.empty:t),0==o&&tu(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:s,$to:o}=r[i],a=e.mapping.slice(n),l=a.map(s.pos),c=a.map(o.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),tu(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new Kc(e):eu(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?eu(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):eu(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Qc(e.node(0))}static atStart(e){return eu(e,e,0,0,1)||new Qc(e)}static atEnd(e){return eu(e,e,e.content.size,e.childCount,-1)||new Qc(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=qc[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in qc)throw new RangeError("Duplicate use of selection JSON ID "+e);return qc[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Kc.between(this.$anchor,this.$head).getBookmark()}}Hc.prototype.visible=!0;class Vc{constructor(e,t){this.$from=e,this.$to=t}}let Wc=!1;function Gc(e){Wc||e.parent.inlineContent||(Wc=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Kc extends Hc{constructor(e,t=e){Gc(e),Gc(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Hc.near(n);let r=e.resolve(t.map(this.anchor));return new Kc(r.parent.inlineContent?r:n,n)}replace(e,t=Za.empty){if(super.replace(e,t),t==Za.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof Kc&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Jc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Kc(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=Hc.findFrom(t,n,!0)||Hc.findFrom(t,-n,!0);if(!e)return Hc.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(Hc.findFrom(e,-n,!0)||Hc.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new Kc(e,t)}}Hc.jsonID("text",Kc);class Jc{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Jc(e.map(this.anchor),e.map(this.head))}resolve(e){return Kc.between(e.resolve(this.anchor),e.resolve(this.head))}}class Xc extends Hc{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?Hc.near(i):new Xc(i)}content(){return new Za(Ga.from(this.node),0,0)}eq(e){return e instanceof Xc&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Yc(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Xc(e.resolve(t.anchor))}static create(e,t){return new Xc(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}Xc.prototype.visible=!1,Hc.jsonID("node",Xc);class Yc{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new Jc(n,n):new Yc(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Xc.isSelectable(n)?new Xc(t):Hc.near(t)}}class Qc extends Hc{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Za.empty){if(t==Za.empty){e.delete(0,e.doc.content.size);let t=Hc.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Qc(e)}map(e){return new Qc(e)}eq(e){return e instanceof Qc}getBookmark(){return Zc}}Hc.jsonID("all",Qc);const Zc={map(){return this},resolve:e=>new Qc(e)};function eu(e,t,n,r,i,s=!1){if(t.inlineContent)return Kc.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let r=t.child(o);if(r.isAtom){if(!s&&Xc.isSelectable(r))return Xc.create(e,n-(i<0?r.nodeSize:0))}else{let t=eu(e,r,n+i,i<0?r.childCount:0,i,s);if(t)return t}n+=r.nodeSize*i}return null}function tu(e,t,n){let r=e.steps.length-1;if(r<t)return;let i,s=e.steps[r];(s instanceof pc||s instanceof fc)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==i&&(i=r)}),e.setSelection(Hc.near(e.doc.resolve(i),n)))}class nu extends $c{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return Ya.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Ya.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(Hc.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function ru(e,t){return t&&e?e.bind(t):e}class iu{constructor(e,t,n){this.name=e,this.init=ru(t.init,n),this.apply=ru(t.apply,n)}}const su=[new iu("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new iu("selection",{init:(e,t)=>e.selection||Hc.atStart(t.doc),apply:e=>e.selection}),new iu("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new iu("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class ou{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=su.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new iu(e.key,e.spec.state,e))})}}class au{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let a=r?r[s].n:0,l=r?r[s].state:this,c=a<t.length&&o.spec.appendTransaction.call(o,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<s?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[s]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new au(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new nu(this)}static create(e){let t=new ou(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new au(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new ou(this.schema,e.plugins),n=t.fields,r=new au(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new ou(e.schema,e.plugins),i=new au(r);return r.fields.forEach(r=>{if("doc"==r.name)i.doc=yl.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=Hc.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let s in n){let o=n[s],a=o.spec.state;if(o.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,s))return void(i[r.name]=a.fromJSON.call(o,e,t[s],i))}i[r.name]=r.init(e,i)}}),i}}function lu(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=lu(i,t,{})),n[r]=i}return n}class cu{constructor(e){this.spec=e,this.props={},e.props&&lu(e.props,this,this.props),this.key=e.key?e.key.key:du("plugin")}getState(e){return e[this.key]}}const uu=Object.create(null);function du(e){return e in uu?e+"$"+ ++uu[e]:(uu[e]=0,e+"$")}class hu{constructor(e="key"){this.key=du(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const pu=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},fu=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let mu=null;const gu=function(e,t,n){let r=mu||(mu=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},yu=function(e,t,n,r){return n&&(bu(e,t,n,r,-1)||bu(e,t,n,r,1))},vu=/^(img|br|input|textarea|hr)$/i;function bu(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:_u(e))){let n=e.parentNode;if(!n||1!=n.nodeType||wu(e)||vu.test(e.nodeName)||"false"==e.contentEditable)return!1;t=pu(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;{let n=e.childNodes[t+(i<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable){if(!(null===(s=n.pmViewDesc)||void 0===s?void 0:s.ignoreForSelection))return!1;t+=i}else e=n,t=i<0?_u(e):0}}}}function _u(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function wu(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Su=function(e){return e.focusNode&&yu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ku(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const Tu="undefined"!=typeof navigator?navigator:null,xu="undefined"!=typeof document?document:null,Eu=Tu&&Tu.userAgent||"",Cu=/Edge\/(\d+)/.exec(Eu),Au=/MSIE \d/.exec(Eu),Ou=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Eu),Mu=!!(Au||Ou||Cu),Iu=Au?document.documentMode:Ou?+Ou[1]:Cu?+Cu[1]:0,Du=!Mu&&/gecko\/(\d+)/i.test(Eu);Du&&(/Firefox\/(\d+)/.exec(Eu)||[0,0])[1];const ju=!Mu&&/Chrome\/(\d+)/.exec(Eu),Pu=!!ju,Lu=ju?+ju[1]:0,Nu=!Mu&&!!Tu&&/Apple Computer/.test(Tu.vendor),Ru=Nu&&(/Mobile\/\w+/.test(Eu)||!!Tu&&Tu.maxTouchPoints>2),Uu=Ru||!!Tu&&/Mac/.test(Tu.platform),Bu=!!Tu&&/Win/.test(Tu.platform),Fu=/Android \d/.test(Eu),zu=!!xu&&"webkitFontSmoothing"in xu.documentElement.style,$u=zu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function qu(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Hu(e,t){return"number"==typeof e?e:e[t]}function Vu(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Wu(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(1!=o.nodeType){o=fu(o);continue}let e=o,n=e==s.body,a=n?qu(s):Vu(e),l=0,c=0;if(t.top<a.top+Hu(r,"top")?c=-(a.top-t.top+Hu(i,"top")):t.bottom>a.bottom-Hu(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+Hu(i,"top")-a.top:t.bottom-a.bottom+Hu(i,"bottom")),t.left<a.left+Hu(r,"left")?l=-(a.left-t.left+Hu(i,"left")):t.right>a.right-Hu(r,"right")&&(l=t.right-a.right+Hu(i,"right")),l||c)if(n)s.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,s=e.scrollTop-r;t={left:t.left-i,top:t.top-s,right:t.right-i,bottom:t.bottom-s}}let u=n?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(u))break;o="absolute"==u?o.offsetParent:fu(o)}}function Gu(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=fu(r));return t}function Ku(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ju=null;function Xu(e,t){let n,r,i,s,o=2e8,a=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=gu(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<o){n=u,o=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(a=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!i&&p.left<=t.left&&p.right>=t.left&&(i=u,s={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=d+1)}}return!n&&i&&(n=i,r=s,o=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=td(r,1);if(n.top!=n.bottom&&Yu(t,n))return{node:e,offset:i+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:a}:Xu(n,r)}function Yu(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Qu(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let n=e.childNodes[s];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(Yu(t,i))return Qu(n,t,i)}}if((s=(s+1)%r)==i)break}return e}function Zu(e,t){let n,r=e.dom.ownerDocument,i=0,s=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(_u(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(_u(r.startContainer),r.startOffset)}}}(r,t.left,t.top);s&&({node:n,offset:i}=s);let o,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!Yu(t,n))return null;if(a=Qu(e.dom,t,n),!a)return null}if(Nu)for(let e=a;n&&e;e=fu(e))e.draggable&&(n=void 0);if(a=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(a,t),n){if(Du&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let e,r=n.childNodes[i];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&i++}let r;zu&&i&&1==n.nodeType&&1==(r=n.childNodes[i-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(o=function(e,t,n,r){let i=-1;for(let n=t,s=!1;n!=e.dom;){let t,o=e.docView.nearestDesc(n,!0);if(!o)return null;if(1==o.dom.nodeType&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((t=o.dom.getBoundingClientRect()).width||t.height)&&(o.node.isBlock&&o.parent&&(!s&&t.left>r.left||t.top>r.top?i=o.posBefore:(!s&&t.right<r.left||t.bottom<r.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2)?o.posBefore:o.posAfter;n=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,n,i,t))}null==o&&(o=function(e,t,n){let{node:r,offset:i}=Xu(t,n),s=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();s=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function ed(e){return e.top<e.bottom||e.left<e.right}function td(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(ed(e))return e}return Array.prototype.find.call(n,ed)||e.getBoundingClientRect()}const nd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rd(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=zu||Du;if(3==r.nodeType){if(!o||!nd.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let e=i,t=i,s=n<0?1:-1;return n<0&&!i?(t++,s=-1):n>=0&&i==r.nodeValue.length?(e--,s=1):n<0?e--:t++,id(td(gu(r,e,t),s),s<0)}{let e=td(gu(r,i,i),n);if(Du&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=td(gu(r,i-1,i-1),-1);if(t.top==e.top){let n=td(gu(r,i,i+1),-1);if(n.top!=e.top)return id(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(null==s&&i&&(n<0||i==_u(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return sd(e.getBoundingClientRect(),!1)}if(null==s&&i<_u(r)){let e=r.childNodes[i];if(1==e.nodeType)return sd(e.getBoundingClientRect(),!0)}return sd(r.getBoundingClientRect(),n>=0)}if(null==s&&i&&(n<0||i==_u(r))){let e=r.childNodes[i-1],t=3==e.nodeType?gu(e,_u(e)-(o?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return id(td(t,1),!1)}if(null==s&&i<_u(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?gu(e,0,o?0:1):1==e.nodeType?e:null:null;if(t)return id(td(t,-1),!0)}return id(td(3==r.nodeType?gu(r):r,-n),n>=0)}function id(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function sd(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function od(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}const ad=/[\u0590-\u08ac]/;let ld=null,cd=null,ud=!1;class dd{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>pu(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let i,s=this.getDesc(r);if(s&&(!t||s.node)){if(!n||!(i=s.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return s;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let t=0;n<this.children.length;n++){let i=this.children[n],s=t+i.size;if(s>e||i instanceof vd){r=e-t;break}t=s}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof hd&&e.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?pu(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?pu(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let s=n,o=0;;o++){let n=this.children[o],a=s+n.size;if(-1==r&&e<=a){let i=s+n.border;if(e>=i&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=s;for(let t=o;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=pu(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||o==this.children.length-1)){t=a;for(let e=o+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=pu(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}s=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let i=Math.min(e,t),s=Math.max(e,t);for(let o=0,a=0;o<this.children.length;o++){let l=this.children[o],c=a+l.size;if(i>a&&s<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}let o=this.domFromPos(e,e?-1:1),a=t==e?o:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((Du||Nu)&&e==t){let{node:e,offset:t}=o;if(3==e.nodeType){if(u=!(!t||"\n"!=e.nodeValue[t-1]),u&&t==e.nodeValue.length)for(let t,n=e;n;n=n.parentNode){if(t=n.nextSibling){"BR"==t.nodeName&&(o=a={node:t.parentNode,offset:pu(t)+1});break}let e=n.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(Du&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&Nu)&&yu(o.node,o.offset,c.anchorNode,c.anchorOffset)&&yu(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&!u){l.collapse(o.node,o.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(e){}}if(!d){if(e>t){let e=o;o=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(n==s?e<=s&&t>=n:e<s&&t>n){let r=n+i.border,o=s-i.border;if(e>=r&&t<=o)return this.dirty=e==n||t==s?2:1,void(e!=r||t!=o||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-r,t-r):i.dirty=3);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=s}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class hd extends dd{constructor(e,t,n,r){let i,s=t.type.toDOM;if("function"==typeof s&&(s=s(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!t.type.spec.raw){if(1!=s.nodeType){let e=document.createElement("span");e.appendChild(s),s=e}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class pd extends dd{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class fd extends dd{constructor(e,t,n,r,i){super(e,[],n,r),this.mark=t,this.spec=i}static create(e,t,n,r){let i=r.nodeViews[t.type.name],s=i&&i(t,r,n);return s&&s.dom||(s=Kl.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new fd(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=fd.create(this.parent,this.mark,!0,n),i=this.children,s=this.size;t<s&&(i=Id(i,t,s,n)),e>0&&(i=Id(i,0,e,n));for(let e=0;e<i.length;e++)i[e].parent=r;return r.children=i,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class md extends dd{constructor(e,t,n,r,i,s,o,a,l){super(e,[],i,s),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=o}static create(e,t,n,r,i,s){let o,a=i.nodeViews[t.type.name],l=a&&a(t,i,()=>o?o.parent?o.parent.posBeforeChild(o):void 0:s,n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=Kl.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Ed(c,n,t),l?o=new bd(e,t,n,r,c,u||null,d,l,i,s+1):t.isText?new yd(e,t,n,r,c,d,i):new md(e,t,n,r,c,u||null,d,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ga.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Cd(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,o=i&&i.pos<0,a=new Od(this,s&&s.node,e);!function(e,t,n,r){let i=t.locals(e),s=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let o=e.child(n);r(o,i,t.forChild(s,o),n),s+=o.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d,h,p;for(;o<i.length&&i[o].to==s;){let e=i[o++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(Md);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=s&&a.splice(e--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let f=s+h.nodeSize;if(h.isText){let e=f;o<i.length&&i[o].from<e&&(e=i[o].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-s),h=h.cut(0,e-s),f=e,p=-1)}else for(;o<i.length&&i[o].to<f;)o++;r(h,h.isInline&&!h.isLeaf?a.filter(e=>!e.inline):a.slice(),t.forChild(s,h),p),s=f}}(this.node,this.innerDeco,(t,i,s)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!s&&a.syncToMarks(i==this.node.childCount?Ya.none:this.node.child(i).marks,n,e),a.placeWidget(t,e,r)},(t,s,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,s,l,c)||o&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,s,l,u,e)||a.updateNextNode(t,s,l,e,c,r)||a.addNode(t,s,l,e,r),r+=t.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),_d(this.contentDOM,this.children,e),Ru&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof Kc)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,s=function(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let t=e.child(i++);if(s+=t.nodeSize,!t.isText)break;l+=t.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return s<0?null:{node:i,pos:s,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new pd(this,i,t,r);e.input.compositionNodes.push(s),this.children=Id(this.children,n,n+r.length,e,s)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Cd(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Td(this.dom,this.nodeDOM,kd(this.outerDeco,this.node,t),kd(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function gd(e,t,n,r,i){Ed(r,t,e);let s=new md(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class yd extends md{constructor(e,t,n,r,i,s,o){super(e,t,n,r,i,null,s,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new yd(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class vd extends dd{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class bd extends md{constructor(e,t,n,r,i,s,o,a,l,c){super(e,t,n,r,i,s,o,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _d(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=Ad(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(o instanceof fd){let t=r?r.previousSibling:e.lastChild;_d(o.contentDOM,o.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=Ad(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const wd=function(e){e&&(this.nodeName=e)};wd.prototype=Object.create(null);const Sd=[new wd];function kd(e,t,n){if(0==e.length)return Sd;let r=n?Sd[0]:new wd,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new wd(o.nodeName));for(let e in o){let s=o[e];null!=s&&(n&&1==i.length&&i.push(r=new wd(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+s:"style"==e?r.style=(r.style?r.style+";":"")+s:"nodeName"!=e&&(r[e]=s))}}}return i}function Td(e,t,n,r){if(n==Sd&&r==Sd)return t;let i=t;for(let t=0;t<r.length;t++){let s=r[t],o=n[t];if(t){let t;o&&o.nodeName==s.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==s.nodeName||(t=document.createElement(s.nodeName),t.pmIsDeco=!0,t.appendChild(i),o=Sd[0]),i=t}xd(i,o||Sd[0],s)}return i}function xd(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function Ed(e,t,n){return Td(e,e,Sd,kd(t,n,1!=e.nodeType))}function Cd(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Ad(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Od{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof fd)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;r<s&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=fd.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i,s=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,n))s=this.top.children.indexOf(i,this.index);else for(let r=this.index,i=Math.min(this.top.children.length,r+5);r<i;r++){let i=this.top.children[r];if(i.matchesNode(e,t,n)&&!this.preMatch.matched.has(i)){s=r;break}}return!(s<0||(this.destroyBetween(this.index,s),this.index++,0))}updateNodeAt(e,t,n,r,i){let s=this.top.children[r];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,i,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof md){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&Cd(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,o),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,n,r,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,s+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Cd(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let o=md.create(this.top,t,n,r,i,s);if(o.contentDOM){o.children=e.children,e.children=[];for(let e of o.children)e.parent=o}return e.destroy(),o}addNode(e,t,n,r,i){let s=md.create(this.top,e,t,n,r,i);s.contentDOM&&s.updateChildren(r,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new hd(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof fd;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof yd)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Nu||Pu)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new vd(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Md(e,t){return e.type.side-t.type.side}function Id(e,t,n,r,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],c=a,u=a+=l.size;c>=n||u<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Dd(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&0==i.size,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a,l,c=r.resolve(o);if(Su(n)){for(a=o;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&Xc.isSelectable(e)&&i.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,i=t==_u(e);r||i;){if(e==n)return!0;let t=pu(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==_u(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;l=new Xc(o==e?c:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=o,i=o;for(let r=0;r<n.rangeCount;r++){let s=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(s.startContainer,s.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(s.endContainer,s.endOffset,-1))}if(t<0)return null;[a,o]=i==e.state.selection.anchor?[i,t]:[t,i],c=r.resolve(o)}else a=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);return l||(l=zd(e,u,c,"pointer"==t||e.state.selection.head<c.pos&&!s?1:-1)),l}function jd(e){return e.editable?e.hasFocus():qd(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Pd(e,t=!1){let n=e.state.selection;if(Bd(e,n),jd(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Pu){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&yu(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,pu(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&Mu&&Iu<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,i,{anchor:s,head:o}=n;!Ld||n instanceof Kc||(n.$from.parent.inlineContent||(r=Nd(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=Nd(e,n.to))),e.docView.setSelection(s,o,e,t),Ld&&(r&&Ud(r),i&&Ud(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{jd(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Ld=Nu||Pu&&Lu<63;function Nd(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Nu&&i&&"false"==i.contentEditable)return Rd(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return Rd(i);if(s)return Rd(s)}}function Rd(e){return e.contentEditable="true",Nu&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Ud(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Bd(e,t){if(t instanceof Xc){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Fd(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Fd(e)}function Fd(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function zd(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||Kc.between(t,n,r)}function $d(e){return!(e.editable&&!e.hasFocus())&&qd(e)}function qd(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Hd(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Hc.findFrom(s,t)}function Vd(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Wd(e,t,n){let r=e.state.selection;if(!(r instanceof Kc)){if(r instanceof Xc&&r.node.isInline)return Vd(e,new Kc(t>0?r.$to:r.$from));{let n=Hd(e.state,t);return!!n&&Vd(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return Vd(e,new Kc(r.$anchor,s))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=Hd(e.state,t);return!!(n&&n instanceof Xc)&&Vd(e,n)}if(!(Uu&&n.indexOf("m")>-1)){let n,i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText)return!1;let o=t<0?i.pos-s.nodeSize:i.pos;return!!(s.isAtom||(n=e.docView.descAt(o))&&!n.contentDOM)&&(Xc.isSelectable(s)?Vd(e,new Xc(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):!!zu&&Vd(e,new Kc(e.state.doc.resolve(t<0?o:o+s.nodeSize))))}}function Gd(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Kd(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function Jd(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(Du&&1==n.nodeType&&r<Gd(n)&&Kd(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(Kd(e,-1))i=n,s=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(Xd(n))break;{let t=n.previousSibling;for(;t&&Kd(t,-1);)i=n.parentNode,s=pu(t),t=t.previousSibling;if(t)n=t,r=Gd(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?Yd(e,n,r):i&&Yd(e,i,s)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=Gd(n);for(;;)if(r<o){if(1!=n.nodeType)break;if(!Kd(n.childNodes[r],1))break;i=n,s=++r}else{if(Xd(n))break;{let t=n.nextSibling;for(;t&&Kd(t,1);)i=t.parentNode,s=pu(t)+1,t=t.nextSibling;if(t)n=t,r=0,o=Gd(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}}i&&Yd(e,i,s)}(e)}function Xd(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Yd(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!wu(e);)t=pu(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!wu(e);)t=pu(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Su(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Pd(e)},50)}function Qd(e,t){let n=e.state.doc.resolve(t);if(!Pu&&!Bu&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function Zd(e,t,n){let r=e.state.selection;if(r instanceof Kc&&!r.empty||n.indexOf("s")>-1)return!1;if(Uu&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Hd(e.state,t);if(n&&n instanceof Xc)return Vd(e,n)}if(!i.parent.inlineContent){let n=t<0?i:s,o=r instanceof Qc?Hc.near(n,t):Hc.findFrom(n,t);return!!o&&Vd(e,o)}return!1}function eh(e,t){if(!(e.state.selection instanceof Kc))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=e.state.tr;return t<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),e.dispatch(r),!0}return!1}function th(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function nh(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let o=e.someProp("clipboardSerializer")||Kl.fromSchema(e.state.schema),a=hh(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=uh[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function rh(e,t,n,r,i){let s,o,a=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,a||r,e)}),a)return t?new Za(Ga.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):Za.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,r,e));if(n)o=n;else{let n=i.marks(),{schema:r}=e.state,o=Kl.fromSchema(r);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=s.appendChild(document.createElement("p"));e&&t.appendChild(o.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),s=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=hh().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);if((n=i&&uh[i[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join("")),r.innerHTML=function(e){let t=window.trustedTypes;return t?(ph||(ph=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),ph.createHTML(e)):e}(e),n)for(let e=0;e<n.length;e++)r=r.querySelector(n[e])||r;return r}(n),zu&&function(e){let t=e.querySelectorAll(Pu?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let e=+u[3];e>0;e--){let e=s.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;s=e}if(!o){let t=e.someProp("clipboardParser")||e.someProp("domParser")||Ul.fromSchema(e.state.schema);o=t.parseSlice(s,{preserveWhitespace:!(!l&&!u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||ih.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)o=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}let{content:i,openStart:s,openEnd:o}=e;for(let e=n.length-2;e>=0;e-=2){let t=r.nodes[n[e]];if(!t||t.hasRequiredAttrs())break;i=Ga.from(t.create(n[e+1],i)),s++,o++}return new Za(i,s,o)}(ch(o,+u[1],+u[2]),u[4]);else if(o=Za.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,i=t.node(n).contentMatchAt(t.index(n)),s=[];if(e.forEach(e=>{if(!s)return;let t,n=i.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&r.length&&oh(n,r,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=ah(s[s.length-1],r.length));let t=sh(e,n);s.push(t),i=i.matchType(t.type),r=n}}),s)return Ga.from(s)}return e}(o.content,i),!0),o.openStart||o.openEnd){let e=0,t=0;for(let t=o.content.firstChild;e<o.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=o.content.lastChild;t<o.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);o=ch(o,e,t)}return e.someProp("transformPasted",t=>{o=t(o,e)}),o}const ih=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function sh(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Ga.from(e));return e}function oh(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=oh(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(Ga.from(sh(n,e,i+1))))}}function ah(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,ah(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Ga.empty,!0);return e.copy(n.append(r))}function lh(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<r-1&&(a=lh(a,t,n,r,i+1,s)),i>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ga.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function ch(e,t,n){return t<e.openStart&&(e=new Za(lh(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Za(lh(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const uh={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let dh=null;function hh(){return dh||(dh=document.implementation.createHTMLDocument("title"))}let ph=null;const fh={},mh={},gh={touchstart:!0,touchmove:!0};class yh{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function vh(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function bh(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>_h(e,t))})}function _h(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function wh(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Sh(e){return{left:e.clientX,top:e.clientY}}function kh(e,t,n,r,i){if(-1==r)return!1;let s=e.state.doc.resolve(r);for(let r=s.depth+1;r>0;r--)if(e.someProp(t,t=>r>s.depth?t(e,n,s.nodeAfter,s.before(r),i,!0):t(e,n,s.node(r),s.before(r),i,!1)))return!0;return!1}function Th(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function xh(e,t,n,r){return kh(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function Eh(e,t,n,r){return kh(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(Th(e,Kc.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let t=i.depth+1;t>0;t--){let n=t>i.depth?i.nodeAfter:i.node(t),s=i.before(t);if(n.inlineContent)Th(e,Kc.create(r,s+1,s+1+n.content.size),"pointer");else{if(!Xc.isSelectable(n))continue;Th(e,Xc.create(r,s),"pointer")}return!0}}(e,n,r)}function Ch(e){return Ph(e)}mh.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!Mh(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Fu||!Pu||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!Ru||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||function(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||Uu&&72==n&&"c"==r)return eh(e,-1)||Jd(e,-1);if(46==n&&!t.shiftKey||Uu&&68==n&&"c"==r)return eh(e,1)||Jd(e,1);if(13==n||27==n)return!0;if(37==n||Uu&&66==n&&"c"==r){let t=37==n?"ltr"==Qd(e,e.state.selection.from)?-1:1:-1;return Wd(e,t,r)||Jd(e,t)}if(39==n||Uu&&70==n&&"c"==r){let t=39==n?"ltr"==Qd(e,e.state.selection.from)?1:-1:1;return Wd(e,t,r)||Jd(e,t)}return 38==n||Uu&&80==n&&"c"==r?Zd(e,-1,r)||Jd(e,-1):40==n||Uu&&78==n&&"c"==r?function(e){if(!Nu||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;th(e,n,"true"),setTimeout(()=>th(e,n,"false"),20)}return!1}(e)||Zd(e,1,r)||Jd(e,1):r==(Uu?"m":"c")&&(66==n||73==n||89==n||90==n)}(e,n)?n.preventDefault():vh(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,ku(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},mh.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},mh.keypress=(e,t)=>{let n=t;if(Mh(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Uu&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof Kc&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode),i=()=>e.state.tr.insertText(t).scrollIntoView();/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t,i))||e.dispatch(i()),n.preventDefault()}};const Ah=Uu?"metaKey":"ctrlKey";fh.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=Ch(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[Ah]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?s="doubleClick":"doubleClick"==e.input.lastClick.type&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(Sh(n));o&&("singleClick"==s?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Oh(e,o,n,!!r)):("doubleClick"==s?xh:Eh)(e,o.pos,o.inside,n)?n.preventDefault():vh(e,"pointer"))};class Oh{constructor(e,t,n,r){let i,s;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Ah],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,s=n.depth?n.before():0}const o=r?null:n.target,a=o?e.docView.nearestDesc(o,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof Xc&&l.from<=s&&l.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Du||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),vh(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Pd(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Sh(e))),this.updateAllowDefault(e),this.allowDefault||!t?vh(this.view,"pointer"):function(e,t,n,r,i){return kh(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(i?function(e,t){if(-1==t)return!1;let n,r,i=e.state.selection;i instanceof Xc&&(n=i.node);let s=e.state.doc.resolve(t);for(let e=s.depth+1;e>0;e--){let t=e>s.depth?s.nodeAfter:s.node(e);if(Xc.isSelectable(t)){r=n&&i.$from.depth>0&&e>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(e);break}}return null!=r&&(Th(e,Xc.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Xc.isSelectable(r))&&(Th(e,new Xc(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Nu&&this.mightDrag&&!this.mightDrag.node.isAtom||Pu&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Th(this.view,Hc.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):vh(this.view,"pointer")}move(e){this.updateAllowDefault(e),vh(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function Mh(e,t){return!!e.composing||!!(Nu&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}fh.touchstart=e=>{e.input.lastTouch=Date.now(),Ch(e),vh(e,"pointer")},fh.touchmove=e=>{e.input.lastTouch=Date.now(),vh(e,"pointer")},fh.contextmenu=e=>Ch(e);const Ih=Fu?5e3:-1;function Dh(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Ph(e),t))}function jh(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Ph(e,t=!1){if(!(Fu&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),jh(e),t||e.docView&&e.docView.dirty){let n=Dd(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}mh.compositionstart=mh.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Kc&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),Ph(e,!0),e.markCursor=null;else if(Ph(e,!t.selection.empty),Du&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}Dh(e,Ih)},mh.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,Dh(e,20))};const Lh=Mu&&Iu<15||Ru&&$u<604;function Nh(e,t,n,r,i){let s=rh(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,s||Za.empty)))return!0;if(!s)return!1;let o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(s),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Rh(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}fh.copy=mh.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let s=Lh?null:n.clipboardData,o=r.content(),{dom:a,text:l}=nh(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},mh.paste=(e,t)=>{let n=t;if(e.composing&&!Fu)return;let r=Lh?null:n.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Nh(e,Rh(r),r.getData("text/html"),i,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Nh(e,r.value,null,i,t):Nh(e,r.textContent,r.innerHTML,i,t)},50)}(e,n)};class Uh{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Bh=Uu?"altKey":"ctrlKey";function Fh(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[Bh]}fh.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i,s=e.state.selection,o=s.empty?null:e.posAtCoords(Sh(n));if(o&&o.pos>=s.from&&o.pos<=(s instanceof Xc?s.to-1:s.to));else if(r&&r.mightDrag)i=Xc.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(i=Xc.create(e.state.doc,t.posBefore))}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=nh(e,a);(!n.dataTransfer.files.length||!Pu||Lu>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Lh?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Lh||n.dataTransfer.setData("text/plain",c),e.dragging=new Uh(u,Fh(e,n),i)},fh.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},mh.dragover=mh.dragenter=(e,t)=>t.preventDefault(),mh.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Sh(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",t=>{o=t(o,e)}):o=rh(e,Rh(n.dataTransfer),Lh?null:n.dataTransfer.getData("text/html"),!1,s);let a=!(!r||!Fh(e,n));if(e.someProp("handleDrop",t=>t(e,n,o||Za.empty,a)))return void n.preventDefault();if(!o)return;n.preventDefault();let l=o?Cc(e.state.doc,s.pos,o):s.pos;null==l&&(l=s.pos);let c=e.state.tr;if(a){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&Xc.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Xc(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),c.setSelection(zd(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},fh.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Pd(e)},20))},fh.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},fh.beforeinput=(e,t)=>{if(Pu&&Fu&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,ku(8,"Backspace"))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let e in mh)fh[e]=mh[e];function zh(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class $h{constructor(e,t){this.toDOM=e,this.spec=t||Gh,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:s}=e.mapResult(t.from+r,this.side<0?-1:1);return s?null:new Vh(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof $h&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&zh(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class qh{constructor(e,t){this.attrs=e,this.spec=t||Gh}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,s=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=s?null:new Vh(i,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof qh&&zh(this.attrs,e.attrs)&&zh(this.spec,e.spec)}static is(e){return e.type instanceof qh}destroy(){}}class Hh{constructor(e,t){this.attrs=e,this.spec=t||Gh}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let s=e.mapResult(t.to+r,-1);return s.deleted||s.pos<=i.pos?null:new Vh(i.pos-n,s.pos-n,this)}valid(e,t){let n,{index:r,offset:i}=e.content.findIndex(t.from);return i==t.from&&!(n=e.child(r)).isText&&i+n.nodeSize==t.to}eq(e){return this==e||e instanceof Hh&&zh(this.attrs,e.attrs)&&zh(this.spec,e.spec)}destroy(){}}class Vh{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Vh(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Vh(e,e,new $h(t,n))}static inline(e,t,n,r){return new Vh(e,t,new qh(n,r))}static node(e,t,n,r){return new Vh(e,t,new Hh(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof qh}get widget(){return this.type instanceof $h}}const Wh=[],Gh={};class Kh{constructor(e,t){this.local=e.length?e:Wh,this.children=t.length?t:Wh}static create(e,t){return t.length?ep(t,e,0,Gh):Jh}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=t&&o.to>=e&&(!i||i(o.spec))&&n.push(o.copy(o.from+r,o.to+r))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let o=this.children[s]+1;this.children[s+2].findInner(e-o,t-o,n,r+o,i)}}map(e,t,n){return this==Jh||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Gh)}mapInner(e,t,n,r,i){let s;for(let o=0;o<this.local.length;o++){let a=this.local[o].map(e,n,r);a&&a.type.valid(t,a)?(s||(s=[])).push(a):i.onRemove&&i.onRemove(this.local[o].spec)}return this.children.length?function(e,t,n,r,i,s,o){let a=e.slice();for(let e=0,t=s;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,s)=>{let o=s-i-(n-e);for(let i=0;i<a.length;i+=3){let s=a[i+1];if(s<0||e>s+t-r)continue;let l=a[i]+t-r;n>=l?a[i+1]=e<=l?-2:-1:e>=t&&o&&(a[i]+=o,a[i+1]+=o)}r+=o}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<a.length;t+=3)if(a[t+1]<0){if(-2==a[t+1]){l=!0,a[t+1]=-1;continue}let c=n.map(e[t]+s),u=c-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[t+1]+s,-1)-i,{index:h,offset:p}=r.content.findIndex(u),f=r.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let r=a[t+2].mapInner(n,f,c+1,e[t]+s+1,o);r!=Jh?(a[t]=u,a[t+1]=d,a[t+2]=r):(a[t+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,i,s,o){function a(e,t){for(let s=0;s<e.local.length;s++){let a=e.local[s].map(r,i,t);a?n.push(a):o.onRemove&&o.onRemove(e.local[s].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let n=0;n<e.length;n+=3)-1==e[n+1]&&a(e[n+2],t[n]+s+1);return n}(a,e,t,n,i,s,o),c=ep(l,r,0,o);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Kh(t.sort(tp),a)}(this.children,s||[],e,t,n,r,i):s?new Kh(s.sort(tp),Wh):Jh}add(e,t){return t.length?this==Jh?Kh.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach((e,s)=>{let o,a=s+n;if(o=Qh(t,e,a)){for(r||(r=this.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(e,o,a+1):r.splice(i,0,s,s+e.nodeSize,ep(o,e,a+1,Gh)),i+=3}});let s=Yh(i?Zh(t):t,-n);for(let t=0;t<s.length;t++)s[t].type.valid(e,s[t])||s.splice(t--,1);return new Kh(s.length?this.local.concat(s).sort(tp):this.local,r||this.children)}remove(e){return 0==e.length||this==Jh?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let i,s=n[r]+t,o=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>s&&t.to<o&&(e[n]=null,(i||(i=[])).push(t));if(!i)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(i,s+1);a!=Jh?n[r+2]=a:(n.splice(r,3),r-=3)}if(r.length)for(let n,i=0;i<e.length;i++)if(n=e[i])for(let e=0;e<r.length;e++)r[e].eq(n,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Kh(r,n):Jh}forChild(e,t){if(this==Jh)return this;if(t.isLeaf)return Kh.empty;let n,r;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let i=e+1,s=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<s&&t.to>i&&t.type instanceof qh){let e=Math.max(i,t.from)-i,n=Math.min(s,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new Kh(r.sort(tp),Wh);return n?new Xh([e,n]):e}return n||Jh}eq(e){if(this==e)return!0;if(!(e instanceof Kh)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return np(this.localsInner(e))}localsInner(e){if(this==Jh)return Wh;if(e.inlineContent||!this.local.some(qh.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof qh||t.push(this.local[e]);return t}forEachSet(e){e(this)}}Kh.empty=new Kh([],[]),Kh.removeOverlap=np;const Jh=Kh.empty;class Xh{constructor(e){this.members=e}map(e,t){const n=this.members.map(n=>n.map(e,t,Gh));return Xh.from(n)}forChild(e,t){if(t.isLeaf)return Kh.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=Jh&&(i instanceof Xh?n=n.concat(i.members):n.push(i))}return Xh.from(n)}eq(e){if(!(e instanceof Xh)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?np(n?t:t.sort(tp)):Wh}static from(e){switch(e.length){case 0:return Jh;case 1:return e[0];default:return new Xh(e.every(e=>e instanceof Kh)?e:e.reduce((e,t)=>e.concat(t instanceof Kh?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Yh(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Vh(i.from+t,i.to+t,i.type))}return n}function Qh(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let t,s=0;s<e.length;s++)(t=e[s])&&t.from>n&&t.to<r&&((i||(i=[])).push(t),e[s]=null);return i}function Zh(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function ep(e,t,n,r){let i=[],s=!1;t.forEach((t,o)=>{let a=Qh(e,t,o+n);if(a){s=!0;let e=ep(a,t,n+o+1,r);e!=Jh&&i.push(o,o+t.nodeSize,e)}});let o=Yh(s?Zh(e):e,-n).sort(tp);for(let e=0;e<o.length;e++)o[e].type.valid(t,o[e])||(r.onRemove&&r.onRemove(o[e].spec),o.splice(e--,1));return o.length||i.length?new Kh(o,i):Jh}function tp(e,t){return e.from-t.from||e.to-t.to}function np(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from!=r.from){s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),rp(t,i,r.copy(s.from,r.to)));break}s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),rp(t,i+1,s.copy(r.to,s.to)))}}return t}function rp(e,t,n){for(;t<e.length&&tp(n,e[t])>0;)t++;e.splice(t,0,n)}function ip(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Jh&&t.push(r)}),e.cursorWrapper&&t.push(Kh.create(e.state.doc,[e.cursorWrapper.deco])),Xh.from(t)}const sp={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},op=Mu&&Iu<=11;class ap{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class lp{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ap,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);Mu&&Iu<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),op&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,sp)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if($d(this.view)){if(this.suppressingSelectionUpdates)return Pd(this.view);if(Mu&&Iu<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&yu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let t=e.focusNode;t;t=fu(t))n.add(t);for(let r=e.anchorNode;r;r=fu(r))if(n.has(r)){t=r;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&$d(e)&&!this.ignoreSelectionChange(n),i=-1,s=-1,o=!1,a=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],a);n&&(i=i<0?n.from:Math.min(n.from,i),s=s<0?n.to:Math.max(n.to,s),n.typeOver&&(o=!0))}if(Du&&a.length){let t=a.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;!t||"LI"!=t.nodeName||n&&hp(e,n)==t||r.remove()}}}let l=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Su(n)&&(l=Dd(e))&&l.eq(Hc.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Pd(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,s),function(e){if(!cp.has(e)&&(cp.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=Du,up)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),up=!0}}(e)),this.handleDOMChange(i,s,o,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Pd(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(Mu&&Iu<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:s}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!s||Array.prototype.indexOf.call(e.addedNodes,s)<0)&&(i=s)}let s=r&&r.parentNode==e.target?pu(r)+1:0,o=n.localPosFromDOM(e.target,s,-1),a=i&&i.parentNode==e.target?pu(i):e.target.childNodes.length;return{from:o,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cp=new WeakMap,up=!1;function dp(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return yu(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function hp(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function pp(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Nu&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||Nu&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const fp=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mp(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:zd(e,t.resolve(n.anchor),t.resolve(n.head))}function gp(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function yp(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class vp{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new yh,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(kp),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=wp(this),_p(this),this.nodeViews=Sp(this),this.docView=gd(this.state.doc,bp(this),ip(this),this.dom,this),this.domObserver=new lp(this,(e,t,n,r)=>function(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Dd(e,t);if(n&&!e.state.selection.eq(n)){if(Pu&&Fu&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,ku(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),s&&r.setMeta("composition",s),e.dispatch(r)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,u=e.state.selection,d=function(e,t,n){let r,{node:i,fromOffset:s,toOffset:o,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],Su(c)||r.push({node:c.focusNode,offset:c.focusOffset})),Pu&&8===e.input.lastKeyCode)for(let e=o;e>s;e--){let t=i.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){o=e;break}if(!n||n.size)break}let d=e.state.doc,h=e.someProp("domParser")||Ul.fromSchema(e.state.schema),p=d.resolve(a),f=null,m=h.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:o,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:pp,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,i){let s=e.findDiffStart(t,n);if(null==s)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i&&(r-=o+Math.max(0,s-Math.min(o,a))-s),o<s&&e.size<t.size){let e=r<=s&&r>=o?s-r:0;s-=e,s&&s<t.size&&yp(t.textBetween(s-1,s+1))&&(s+=e?1:-1),a=s+(a-o),o=s}else if(a<s){let t=r<=s&&r>=a?s-r:0;s-=t,s&&s<e.size&&yp(e.textBetween(s-1,s+1))&&(s+=t?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}(p.content,d.doc.content,d.from,l,c);if(f&&e.input.domChangeCount++,(Ru&&e.input.lastIOSEnter>Date.now()-225||Fu)&&i.some(e=>1==e.nodeType&&!fp.test(e.nodeName))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",t=>t(e,ku(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof Kc&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=mp(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);s&&n.setMeta("composition",s),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof Kc&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),Mu&&Iu<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&" "==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),y=d.doc.resolveNoCache(f.endB-d.from),v=h.resolve(f.start),b=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=f.endA;if((Ru&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!b&&g.pos<d.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(g.pos,y.pos,"",""))&&(m=Hc.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head>g.pos)&&e.someProp("handleKeyDown",t=>t(e,ku(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,i){if(n-t<=i.pos-r.pos||gp(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let e=s.nodeAfter;return null!=e&&n==t+e.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(gp(s,!0,!0));return!(!o.parent.isTextblock||o.pos>n||gp(o,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(o.parent.content)}(h,f.start,f.endA,g,y)&&e.someProp("handleKeyDown",t=>t(e,ku(8,"Backspace"))))return void(Fu&&Pu&&e.domObserver.suppressSelectionUpdates());Pu&&f.endB==f.start&&(e.input.lastChromeDelete=Date.now()),Fu&&!b&&g.start()!=y.start()&&0==y.parentOffset&&g.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,y=d.doc.resolveNoCache(f.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,ku(13,"Enter"))})},20));let _,w=f.start,S=f.endA,k=t=>{let n=t||e.state.tr.replace(w,S,d.doc.slice(f.start-d.from,f.endB-d.from));if(d.sel){let t=mp(e,n.doc,d.sel);t&&!(Pu&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==w||t.head==n.mapping.map(S)-1)||Mu&&t.empty&&t.head==w)&&n.setSelection(t)}return s&&n.setMeta("composition",s),n.scrollIntoView()};if(b){if(g.pos==y.pos){Mu&&Iu<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Pd(e),20));let t=k(e.state.tr.delete(w,S)),n=h.resolve(f.start).marksAcross(h.resolve(f.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(f.endA==f.endB&&(_=function(e,t){let n,r,i,s=e.firstChild.marks,o=t.firstChild.marks,a=s,l=o;for(let e=0;e<o.length;e++)a=o[e].removeFromSet(a);for(let e=0;e<s.length;e++)l=s[e].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",i=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",i=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(i(t.child(e)));if(Ga.from(c).eq(e))return{mark:r,type:n}}(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,f.endA-v.start())))){let t=k(e.state.tr);"add"==_.type?t.addMark(w,S,_.mark):t.removeMark(w,S,_.mark),e.dispatch(t)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,y.parentOffset),n=()=>k(e.state.tr.insertText(t,w,S));e.someProp("handleTextInput",r=>r(e,w,S,t,n))||e.dispatch(n())}}else e.dispatch(k())}(this,e,t,n,r)),this.domObserver.start(),function(e){for(let t in fh){let n=fh[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!wh(e,t)||_h(e,t)||!e.editable&&t.type in mh||n(e,t)},gh[t]?{passive:!0}:void 0)}Nu&&e.dom.addEventListener("input",()=>null),bh(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&bh(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(kp),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(jh(this),s=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=Sp(this);(function(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&bh(this),this.editable=wp(this),_p(this);let a=ip(this),l=bp(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",u=i||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(r.selection)||(s=!0);let d="preserve"==c&&s&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let s=(r.left+r.right)/2,o=i+1;o<Math.min(innerHeight,r.bottom);o+=5){let r=e.root.elementFromPoint(s,o);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:Gu(e.dom)}}(this);if(s){this.domObserver.stop();let t=u&&(Mu||Pu)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(u){let n=Pu?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=_u(e=e.childNodes[t-1])}else{if(!e.parentNode||wu(e))return null;t=pu(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||wu(e))return null;t=pu(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return r}}return n||r}(this)),!i&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=gd(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return yu(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Pd(this,t):(Bd(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Ku(n,0==r?0:r-t)}(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof Xc){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&Wu(this,t.getBoundingClientRect(),e)}else Wu(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new Uh(e.slice,e.move,r<0?void 0:Xc.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let r=0;r<this.directPlugins.length;r++){let i=this.directPlugins[r].props[e];if(null!=i&&(n=t?t(i):i))return n}let i=this.state.plugins;if(i)for(let r=0;r<i.length;r++){let s=i[r].props[e];if(null!=s&&(n=t?t(s):s))return n}}hasFocus(){if(Mu){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Ju)return e.focus(Ju);let t=Gu(e);e.focus(null==Ju?{get preventScroll(){return Ju={preventScroll:!0},!0}}:void 0),Ju||(Ju=!1,Ku(t,0))}(this.dom),Pd(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return e||document}updateRoot(){this._root=null}posAtCoords(e){return Zu(this,e)}coordsAtPos(e,t=1){return rd(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return function(e,t,n){return ld==t&&cd==n?ud:(ld=t,cd=n,ud="up"==n||"down"==n?function(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return od(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=rd(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=gu(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0})}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=e.domSelection();return a?ad.test(r.parent.textContent)&&a.modify?od(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:s,anchorOffset:o}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{a.collapse(s,o),t&&(t!=s||i!=o)&&a.extend&&a.extend(t,i)}catch(e){}return null!=l&&(a.caretBidiLevel=l),h}):"left"==n||"backward"==n?s:o:r.pos==r.start()||r.pos==r.end()}(e,t,n))}(this,t||this.state,e)}pasteHTML(e,t){return Nh(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Nh(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return nh(this,e)}destroy(){this.docView&&(function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ip(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,mu=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){_h(e,t)||!fh[t.type]||!e.editable&&t.type in mh||fh[t.type](e,t)}(this,e)}domSelectionRange(){let e=this.domSelection();return e?Nu&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return dp(e,n)}let n;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?dp(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function bp(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[Vh.node(0,e.state.doc.content.size,t)]}function _p(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Vh.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function wp(e){return!e.someProp("editable",t=>!1===t(e.state))}function Sp(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function kp(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}vp.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var Tp={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},xp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ep="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Cp="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ap=0;Ap<10;Ap++)Tp[48+Ap]=Tp[96+Ap]=String(Ap);for(Ap=1;Ap<=24;Ap++)Tp[Ap+111]="F"+Ap;for(Ap=65;Ap<=90;Ap++)Tp[Ap]=String.fromCharCode(Ap+32),xp[Ap]=String.fromCharCode(Ap);for(var Op in Tp)xp.hasOwnProperty(Op)||(xp[Op]=Tp[Op]);const Mp="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Ip="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function Dp(e){let t,n,r,i,s=e.split(/-(?!$)/),o=s[s.length-1];"Space"==o&&(o=" ");for(let e=0;e<s.length-1;e++){let o=s[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else if(/^s(hift)?$/i.test(o))r=!0;else{if(!/^mod$/i.test(o))throw new Error("Unrecognized modifier name: "+o);Mp?i=!0:n=!0}}return t&&(o="Alt-"+o),n&&(o="Ctrl-"+o),i&&(o="Meta-"+o),r&&(o="Shift-"+o),o}function jp(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Pp(e){let t=function(e){let t=Object.create(null);for(let n in e)t[Dp(n)]=e[n];return t}(e);return function(e,n){let r,i=function(e){var t=!(Ep&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Cp&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?xp:Tp)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),s=t[jp(i,n)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){let r=t[jp(i,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(Ip&&n.ctrlKey&&n.altKey)&&(r=Tp[n.keyCode])&&r!=i){let i=t[jp(r,n)];if(i&&i(e.state,e.dispatch,e))return!0}}return!1}}const Lp=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Np(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const Rp=(e,t,n)=>{let r=Np(e,n);if(!r)return!1;let i=zp(r);if(!i){let n=r.blockRange(),i=n&&vc(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let s=i.nodeBefore;if(Qp(e,i,t,-1))return!0;if(0==r.parent.content.size&&(Bp(s,"end")||Xc.isSelectable(s)))for(let n=r.depth;;n--){let o=Ac(e.doc,r.before(n),r.after(n),Za.empty);if(o&&o.slice.size<o.to-o.from){if(t){let n=e.tr.step(o);n.setSelection(Bp(s,"end")?Hc.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):Xc.create(n.doc,i.pos-s.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!(!s.isAtom||i.depth!=r.depth-1||(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),0))};function Up(e,t,n){let r=t.nodeBefore,i=t.pos-1;for(;!r.isTextblock;i--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let s=t.nodeAfter,o=t.pos+1;for(;!s.isTextblock;o++){if(s.type.spec.isolating)return!1;let e=s.firstChild;if(!e)return!1;s=e}let a=Ac(e.doc,i,o,Za.empty);if(!a||a.from!=i||a instanceof pc&&a.slice.size>=o-i)return!1;if(n){let t=e.tr.step(a);t.setSelection(Kc.create(t.doc,i)),n(t.scrollIntoView())}return!0}function Bp(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const Fp=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=zp(r)}let o=s&&s.nodeBefore;return!(!o||!Xc.isSelectable(o)||(t&&t(e.tr.setSelection(Xc.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),0))};function zp(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function $p(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const qp=(e,t,n)=>{let r=$p(e,n);if(!r)return!1;let i=Vp(r);if(!i)return!1;let s=i.nodeAfter;if(Qp(e,i,t,1))return!0;if(0==r.parent.content.size&&(Bp(s,"start")||Xc.isSelectable(s))){let n=Ac(e.doc,r.before(),r.after(),Za.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Bp(s,"start")?Hc.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):Xc.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!(!s.isAtom||i.depth!=r.depth-1||(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),0))},Hp=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=Vp(r)}let o=s&&s.nodeAfter;return!(!o||!Xc.isSelectable(o)||(t&&t(e.tr.setSelection(Xc.create(e.doc,s.pos)).scrollIntoView()),0))};function Vp(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Wp=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))};function Gp(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Kp=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Gp(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,o.createAndFill());i.setSelection(Hc.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},Jp=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Qc||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Gp(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=e.tr.insert(n,s.createAndFill());o.setSelection(Kc.create(o.doc,n+1)),t(o.scrollIntoView())}return!0},Xp=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(kc(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&vc(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};var Yp;function Qp(e,t,n,r){let i,s,o=t.nodeBefore,a=t.nodeAfter,l=o.type.spec.isolating||a.type.spec.isolating;if(!l&&function(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!(!(r&&i&&r.type.compatibleContent(i.type))||(!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(s,s+1)||!i.isTextblock&&!Tc(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(s=o.contentMatchAt(o.childCount)).findWrapping(a.type))&&s.matchType(i[0]||a.type).validEnd){if(n){let r=t.pos+a.nodeSize,s=Ga.empty;for(let e=i.length-1;e>=0;e--)s=Ga.from(i[e].create(null,s));s=Ga.from(o.copy(s));let l=e.tr.step(new fc(t.pos-1,r,t.pos,r,new Za(s,1,0),i.length,!0)),c=l.doc.resolve(r+2*i.length);c.nodeAfter&&c.nodeAfter.type==o.type&&Tc(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&l?null:Hc.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),h=d&&vc(d);if(null!=h&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(c&&Bp(a,"start",!0)&&Bp(o,"end")){let r=o,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let s=a,l=1;for(;!s.isTextblock;s=s.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,s.content)){if(n){let r=Ga.empty;for(let e=i.length-1;e>=0;e--)r=Ga.from(i[e].copy(r));n(e.tr.step(new fc(t.pos-i.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new Za(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Zp(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(n&&n(t.tr.setSelection(Kc.create(t.doc,e<0?i.start(s):i.end(s)))),!0)}}const ef=Zp(-1),tf=Zp(1);function nf(e,t=null){return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[r];n.doc.nodesBetween(s,o,(r,s)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)i=!0;else{let t=n.doc.resolve(s),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[r];i.setBlockType(s,o,e,t)}r(i.scrollIntoView())}return!0}}function rf(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}let sf=rf(Lp,Rp,Fp),of=rf(Lp,qp,Hp);const af={Enter:rf(Wp,Jp,Xp,(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof Xc&&e.selection.node.isBlock)return!(!n.parentOffset||!kc(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.depth)return!1;let i,s,o=[],a=!1,l=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){a=n.end(e)==n.pos+(n.depth-e),l=n.start(e)==n.pos-(n.depth-e),s=Gp(n.node(e-1).contentMatchAt(n.indexAfter(e-1)));let t=Yp;o.unshift(t||(a&&s?{type:s}:null)),i=e;break}if(1==e)return!1;o.unshift(null)}let c=e.tr;(e.selection instanceof Kc||e.selection instanceof Qc)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=kc(c.doc,u,o.length,o);if(d||(o[0]=s?{type:s}:null,d=kc(c.doc,u,o.length,o)),!d)return!1;if(c.split(u,o.length,o),!a&&l&&n.node(i).type!=s){let e=c.mapping.map(n.before(i)),t=c.doc.resolve(e);s&&n.node(i-1).canReplaceWith(t.index(),t.index()+1,s)&&c.setNodeMarkup(c.mapping.map(n.before(i)),s)}return t&&t(c.scrollIntoView()),!0}),"Mod-Enter":Kp,Backspace:sf,"Mod-Backspace":sf,"Shift-Backspace":sf,Delete:of,"Mod-Delete":of,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new Qc(e.doc))),!0)},lf={"Ctrl-h":af.Backspace,"Alt-Backspace":af["Mod-Backspace"],"Ctrl-d":af.Delete,"Ctrl-Alt-Backspace":af["Mod-Delete"],"Alt-Delete":af["Mod-Delete"],"Alt-d":af["Mod-Delete"],"Ctrl-a":ef,"Ctrl-e":tf};for(let e in af)lf[e]=af[e];function cf(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();var uf=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{const n=t(...e)(s);return i.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(i),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!e,l=e||i.tr,c={...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>{const r=this.buildProps(l,t),i=n(...e)(r);return o.push(i),c}])),run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(l),o.every(e=>!0===e))};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r),o=Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...s,dispatch:void 0})]));return{...o,chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:cf({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([e,t])=>[e,(...e)=>t(...e)(o)]))}};return o}},df=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function hf(e,t){const n=new $c(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}var pf=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&pf(r)}return e};function ff(e){if("undefined"==typeof window)throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return pf(n)}function mf(e,t,n){if(e instanceof yl||e instanceof Ga)return e;n={slice:!0,parseOptions:{},...n};const r="string"==typeof e;if("object"==typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return Ga.fromArray(e.map(e=>t.nodeFromJSON(e)));const r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),mf("",t,n)}if(r){if(n.errorOnInvalidContent){let r=!1,i="";const s=new Nl({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?Ul.fromSchema(s).parseSlice(ff(e),n.parseOptions):Ul.fromSchema(s).parse(ff(e),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${i}`)})}const r=Ul.fromSchema(t);return n.slice?r.parseSlice(ff(e),n.parseOptions).content:r.parse(ff(e),n.parseOptions)}return mf("",t,n)}function gf(e,t,n={},r={}){return mf(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function yf(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function vf(e){return t=>yf(t.$from,e)}function bf(e,t,n){return void 0===e.config[t]&&e.parent?bf(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?bf(e.parent,t,n):null}):e.config[t]}function _f(e){return e.map(e=>{const t=bf(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,..._f(t())]:e}).flat(10)}function wf(e,t){const n=Kl.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function Sf(e){return"function"==typeof e}function kf(e,t=void 0,...n){return Sf(e)?t?e.bind(t)(...n):e(...n):e}function Tf(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function xf(e){const t=[],{nodeExtensions:n,markExtensions:r}=Tf(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{const n=bf(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:i});n&&n().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...s,...r}})})})})}),i.forEach(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=bf(e,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach(([n,r])=>{const i={...s,...r};"function"==typeof(null==i?void 0:i.default)&&(i.default=i.default()),(null==i?void 0:i.isRequired)&&void 0===(null==i?void 0:i.default)&&delete i.default,t.push({type:e.name,name:n,attribute:i})})}),t}function Ef(...e){return e.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([e,t])=>{if(n[e])if("class"===e){const r=t?String(t).split(" "):[],i=n[e]?n[e].split(" "):[],s=r.filter(e=>!i.includes(e));n[e]=[...i,...s].join(" ")}else if("style"===e){const r=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],i=n[e]?n[e].split(";").map(e=>e.trim()).filter(Boolean):[],s=new Map;i.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());s.set(t,n)}),r.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());s.set(t,n)}),n[e]=Array.from(s.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else n[e]=t;else n[e]=t}),n},{})}function Cf(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>Ef(e,t),{})}function Af(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const i=t.reduce((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null==r?e:{...e,[t.name]:r}},{});return{...r,...i}}}}function Of(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>("attrs"!==e||!function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function Mf(e,t){var n;const r=xf(e),{nodeExtensions:i,markExtensions:s}=Tf(e),o=null==(n=i.find(e=>bf(e,"topNode")))?void 0:n.name,a=Object.fromEntries(i.map(n=>{const i=r.filter(e=>e.type===n.name),s={name:n.name,options:n.options,storage:n.storage,editor:t},o=Of({...e.reduce((e,t)=>{const r=bf(t,"extendNodeSchema",s);return{...e,...r?r(n):{}}},{}),content:kf(bf(n,"content",s)),marks:kf(bf(n,"marks",s)),group:kf(bf(n,"group",s)),inline:kf(bf(n,"inline",s)),atom:kf(bf(n,"atom",s)),selectable:kf(bf(n,"selectable",s)),draggable:kf(bf(n,"draggable",s)),code:kf(bf(n,"code",s)),whitespace:kf(bf(n,"whitespace",s)),linebreakReplacement:kf(bf(n,"linebreakReplacement",s)),defining:kf(bf(n,"defining",s)),isolating:kf(bf(n,"isolating",s)),attrs:Object.fromEntries(i.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),a=kf(bf(n,"parseHTML",s));a&&(o.parseDOM=a.map(e=>Af(e,i)));const l=bf(n,"renderHTML",s);l&&(o.toDOM=e=>l({node:e,HTMLAttributes:Cf(e,i)}));const c=bf(n,"renderText",s);return c&&(o.toText=c),[n.name,o]})),l=Object.fromEntries(s.map(n=>{const i=r.filter(e=>e.type===n.name),s={name:n.name,options:n.options,storage:n.storage,editor:t},o=Of({...e.reduce((e,t)=>{const r=bf(t,"extendMarkSchema",s);return{...e,...r?r(n):{}}},{}),inclusive:kf(bf(n,"inclusive",s)),excludes:kf(bf(n,"excludes",s)),group:kf(bf(n,"group",s)),spanning:kf(bf(n,"spanning",s)),code:kf(bf(n,"code",s)),attrs:Object.fromEntries(i.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),a=kf(bf(n,"parseHTML",s));a&&(o.parseDOM=a.map(e=>Af(e,i)));const l=bf(n,"renderHTML",s);return l&&(o.toDOM=e=>l({mark:e,HTMLAttributes:Cf(e,i)})),[n.name,o]}));return new Nl({topNode:o,nodes:a,marks:l})}function If(e){return e.sort((e,t)=>{const n=bf(e,"priority")||100,r=bf(t,"priority")||100;return n>r?-1:n<r?1:0})}function Df(e){const t=If(_f(e)),n=function(e){const t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}(t.map(e=>e.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),t}function jf(e,t,n){const{from:r,to:i}=t,{blockSeparator:s="\n\n",textSerializers:o={}}=n||{};let a="";return e.nodesBetween(r,i,(e,n,l,c)=>{var u;e.isBlock&&n>r&&(a+=s);const d=null==o?void 0:o[e.type.name];if(d)return l&&(a+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(a+=null==(u=null==e?void 0:e.text)?void 0:u.slice(Math.max(r,n)-n,i-n))}),a}function Pf(e,t){return jf(e,{from:0,to:e.content.size},t)}function Lf(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function Nf(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Rf(e,t){const n=Nf(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,e=>{o.push(...e.marks)});const a=o.find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function Uf(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Bf(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Ff(e,t){const n=Bf("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=Uf(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,e=>{s.push(e)});const o=s.reverse().find(e=>e.type.name===n.name);return o?{...o.attrs}:{}}(e,t):"mark"===n?Rf(e,t):{}}function zf(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((e,i)=>{const s=[];if(e.ranges.length)e.forEach((e,t)=>{s.push({from:e,to:t})});else{const{from:e,to:t}=n[i];if(void 0===e||void 0===t)return;s.push({from:e,to:t})}s.forEach(({from:e,to:n})=>{const s=t.slice(i).map(e,-1),o=t.slice(i).map(n),a=t.invert().map(s,-1),l=t.invert().map(o);r.push({oldRange:{from:a,to:l},newRange:{from:s,to:o}})})}),function(e){const t=function(e,t=JSON.stringify){const n={};return e.filter(e=>{const r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(e);return 1===t.length?t:t.filter((e,n)=>{const r=t.filter((e,t)=>t!==n);return!r.some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to)})}(r)}function $f(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function qf(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:$f(t[r])?t[r].test(e[r]):t[r]===e[r])}function Hf(e,t,n={}){return e.find(e=>e.type===t&&qf(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function Vf(e,t,n={}){return!!Hf(e,t,n)}function Wf(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===t)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===t))return;if(n=n||(null==(r=i.node.marks[0])?void 0:r.attrs),!Hf([...i.node.marks],t,n))return;let s=i.index,o=e.start()+i.offset,a=s+1,l=o+i.node.nodeSize;for(;s>0&&Vf([...e.parent.child(s-1).marks],t,n);)s-=1,o-=e.parent.child(s).nodeSize;for(;a<e.parent.childCount&&Vf([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Gf(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(t=>{const i=Wf(n.resolve(e),t.type);i&&r.push({mark:t,...i})}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function Kf(e,t){return t.nodes[e]||t.marks[e]||null}function Jf(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}function Xf(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Nf(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!s||s.name===e.type.name).find(e=>qf(e.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:t,$to:n})=>{const r=t.pos,i=n.pos;e.doc.nodesBetween(r,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),s=Math.min(i,t+e.nodeSize);o+=s-n,a.push(...e.marks.map(e=>({mark:e,from:n,to:s})))})}),0===o)return!1;const l=a.filter(e=>!s||s.name===e.mark.type.name).filter(e=>qf(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=a.filter(e=>!s||e.mark.type!==s&&e.mark.type.excludes(s)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=o}function Yf(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Uf(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(e,t)=>{if(e.isText)return;const n=Math.max(r,t),s=Math.min(i,t+e.nodeSize);a.push({node:e,from:n,to:s})});const l=i-r,c=a.filter(e=>!o||o.name===e.node.type.name).filter(e=>qf(e.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function Qf(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function Zf(e,t){const{nodeExtensions:n}=Tf(t),r=n.find(t=>t.name===e);if(!r)return!1;const i=kf(bf(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof i&&i.split(" ").includes("list")}function em(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(r=e.text)?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach(e=>{!1!==r&&(em(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))}),r}return!1}function tm(e){return e instanceof Xc}function nm(e){return e instanceof Kc}function rm(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function im(e,t,n){const r=e.state.doc.content.size,i=rm(t,0,r),s=rm(n,0,r),o=e.coordsAtPos(i),a=e.coordsAtPos(s,-1),l=Math.min(o.top,a.top),c=Math.max(o.bottom,a.bottom),u=Math.min(o.left,a.left),d=Math.max(o.right,a.right),h={top:l,bottom:c,left:u,right:d,width:d-u,height:c-l,x:u,y:l};return{...h,toJSON:()=>h}}function sm(e,t=null){if(!t)return null;const n=Hc.atStart(e),r=Hc.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const i=n.from,s=r.to;return"all"===t?Kc.create(e,rm(0,i,s),rm(e.content.size,i,s)):Kc.create(e,rm(t,i,s),rm(t,i,s))}var om=class{constructor(e){this.find=e.find,this.handler=e.handler}};function am(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null==(t=c.nodeBefore||c.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let u=!1;const d=((e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,i,s)=>{var o,a;const l=(null==(a=(o=e.type.spec).toText)?void 0:a.call(o,{node:e,pos:t,parent:i,index:s}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n})(c)+s;return o.forEach(e=>{if(u)return;const t=((e,t)=>{if($f(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r})(d,e.find);if(!t)return;const o=l.state.tr,c=cf({state:l.state,transaction:o}),h={from:r-(t[0].length-s.length),to:i},{commands:p,chain:f,can:m}=new uf({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&o.steps.length&&(o.setMeta(a,{transform:o,from:r,to:i,text:s}),l.dispatch(o),u=!0)}),u}function lm(e){const{editor:t,rules:n}=e,r=new cu({state:{init:()=>null,apply(e,i,s){const o=e.getMeta(r);if(o)return o;const a=e.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:e}=a;"string"==typeof e||(e=wf(Ga.from(e),s.schema));const{from:i}=a,o=i+e.length;am({editor:t,from:i,to:o,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput:(e,i,s,o)=>am({editor:t,from:i,to:s,text:o,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:i}=e.state.selection;i&&am({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;const{$cursor:s}=e.state.selection;return!!s&&am({editor:t,from:s.pos,to:s.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function cm(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function um(e,t){const n={...e};return cm(e)&&cm(t)&&Object.keys(t).forEach(r=>{cm(t[r])&&cm(e[r])?n[r]=um(e[r],t[r]):n[r]=t[r]}),n}var dm=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...kf(bf(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...kf(bf(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>um(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},hm=class e extends dm{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const i=r.marks();if(!i.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;const s=i.find(e=>(null==e?void 0:e.type.name)===t.name);return s&&n.removeStoredMark(s),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}},pm=class{constructor(e){this.find=e.find,this.handler=e.handler}};var fm=null;function mm(e){const{editor:t,rules:n}=e;let r,i=null,s=!1,o=!1,a="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{r="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{r=null}const l=({state:e,from:n,to:i,rule:s,pasteEvt:o})=>{const l=e.tr,c=cf({state:e,transaction:l});if(function(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:c,can:u}=new uf({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const h=Math.max(r,t),p=Math.min(i,t+e.content.size);((e,t,n)=>{if($f(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]})(e.textBetween(h-t,p-t,void 0,""),s.find,o).forEach(e=>{if(void 0===e.index)return;const t=h+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=s.handler({state:n,range:i,match:e,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(p)})}),d.every(e=>null!==e)}({editor:t,state:c,from:Math.max(n-1,0),to:i.b-1,rule:s,pasteEvent:o,dropEvent:r})&&l.steps.length){try{r="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{r=null}return a="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return n.map(e=>new cu({view(e){const n=n=>{var r;i=(null==(r=e.dom.parentElement)?void 0:r.contains(n.target))?e.dom.parentElement:null,i&&(fm=t)},r=()=>{fm&&(fm=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(o=i===e.dom.parentElement,r=t,!o){const e=fm;(null==e?void 0:e.isEditable)&&setTimeout(()=>{const t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;const r=null==(n=t.clipboardData)?void 0:n.getData("text/html");return a=t,s=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{const i=t[0],c="paste"===i.getMeta("uiEvent")&&!s,u="drop"===i.getMeta("uiEvent")&&!o,d=i.getMeta("applyPasteRules"),h=!!d;if(!c&&!u&&!h)return;if(h){let{text:t}=d;"string"==typeof t||(t=wf(Ga.from(t),r.schema));const{from:n}=d,i=n+t.length,s=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(t=n.clipboardData)||t.setData("text/html",e),n})(t);return l({rule:e,state:r,from:n,to:{b:i},pasteEvt:s})}const p=n.doc.content.findDiffStart(r.doc.content),f=n.doc.content.findDiffEnd(r.doc.content);return"number"==typeof p&&f&&p!==f.b?l({rule:e,state:r,from:p,to:f,pasteEvt:a}):void 0}}))}var gm=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Df(e),this.schema=Mf(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n=bf(t,"addCommands",{name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Kf(t.name,this.schema)});return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this,t=If([...this.extensions].reverse()),n=[],r=[],i=t.map(t=>{const i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:Kf(t.name,this.schema)},s=[],o=bf(t,"addKeyboardShortcuts",i);let a={};if("mark"===t.type&&bf(t,"exitable",i)&&(a.ArrowRight=()=>hm.handleExit({editor:e,mark:t})),o){const t=Object.fromEntries(Object.entries(o()).map(([t,n])=>[t,()=>n({editor:e})]));a={...a,...t}}const l=new cu({props:{handleKeyDown:Pp(a)}});s.push(l);const c=bf(t,"addInputRules",i);Qf(t,e.options.enableInputRules)&&c&&n.push(...c());const u=bf(t,"addPasteRules",i);Qf(t,e.options.enablePasteRules)&&u&&r.push(...u());const d=bf(t,"addProseMirrorPlugins",i);if(d){const e=d();s.push(...e)}return s}).flat();return[lm({editor:e,rules:n}),...mm({editor:e,rules:r}),...i]}get attributes(){return xf(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Tf(this.extensions);return Object.fromEntries(t.filter(e=>!!bf(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:Uf(t.name,this.schema)},i=bf(t,"addNodeView",r);return i?[t.name,(r,s,o,a,l)=>{const c=Cf(r,n);return i()({node:r,view:s,getPos:o,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]:[]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Tf(this.extensions);return Object.fromEntries(t.filter(e=>!!bf(e,"addMarkView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:Nf(t.name,this.schema)},i=bf(t,"addMarkView",r);return i?[t.name,(r,s,o)=>{const a=Cf(r,n);return i()({mark:r,view:s,inline:o,editor:e,extension:t,HTMLAttributes:a})}]:[]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(e=>[e.name,e.storage])),e.forEach(e=>{var t;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Kf(e.name,this.schema)};"mark"===e.type&&(null==(t=kf(bf(e,"keepOnSplit",n)))||t)&&this.splittableMarks.push(e.name);const r=bf(e,"onBeforeCreate",n),i=bf(e,"onCreate",n),s=bf(e,"onUpdate",n),o=bf(e,"onSelectionUpdate",n),a=bf(e,"onTransaction",n),l=bf(e,"onFocus",n),c=bf(e,"onBlur",n),u=bf(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),i&&this.editor.on("create",i),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)})}};gm.resolve=Df,gm.sort=If,gm.flatten=_f,(0,$a.VA)({},{ClipboardTextSerializer:()=>vm,Commands:()=>Mg,Delete:()=>Ig,Drop:()=>Dg,Editable:()=>jg,FocusEvents:()=>Lg,Keymap:()=>Ng,Paste:()=>Rg,Tabindex:()=>Ug,focusEventsPluginKey:()=>Pg});var ym=class e extends dm{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}},vm=ym.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new cu({key:new hu("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(e=>e.$from.pos)),a=Math.max(...s.map(e=>e.$to.pos)),l=Lf(n);return jf(r,{from:o,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),bm={};(0,$a.VA)(bm,{blur:()=>_m,clearContent:()=>wm,clearNodes:()=>Sm,command:()=>km,createParagraphNear:()=>Tm,cut:()=>xm,deleteCurrentNode:()=>Em,deleteNode:()=>Cm,deleteRange:()=>Am,deleteSelection:()=>Om,enter:()=>Mm,exitCode:()=>Im,extendMarkRange:()=>Dm,first:()=>jm,focus:()=>Lm,forEach:()=>Nm,insertContent:()=>Rm,insertContentAt:()=>Um,joinBackward:()=>zm,joinDown:()=>Fm,joinForward:()=>$m,joinItemBackward:()=>qm,joinItemForward:()=>Hm,joinTextblockBackward:()=>Vm,joinTextblockForward:()=>Wm,joinUp:()=>Bm,keyboardShortcut:()=>Km,lift:()=>Jm,liftEmptyBlock:()=>Xm,liftListItem:()=>Ym,newlineInCode:()=>Qm,resetAttributes:()=>eg,scrollIntoView:()=>tg,selectAll:()=>ng,selectNodeBackward:()=>rg,selectNodeForward:()=>ig,selectParentNode:()=>sg,selectTextblockEnd:()=>og,selectTextblockStart:()=>ag,setContent:()=>lg,setMark:()=>cg,setMeta:()=>ug,setNode:()=>dg,setNodeSelection:()=>hg,setTextSelection:()=>pg,sinkListItem:()=>fg,splitBlock:()=>gg,splitListItem:()=>yg,toggleList:()=>_g,toggleMark:()=>wg,toggleNode:()=>Sg,toggleWrap:()=>kg,undoInputRule:()=>Tg,unsetAllMarks:()=>xg,unsetMark:()=>Eg,updateAttributes:()=>Cg,wrapIn:()=>Ag,wrapInList:()=>Og});var _m=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null==(n=null==window?void 0:window.getSelection())||n.removeAllRanges())}),!0),wm=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),Sm=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return!n||(i.forEach(({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,(e,n)=>{if(e.type.isText)return;const{doc:r,mapping:i}=t,s=r.resolve(i.map(n)),o=r.resolve(i.map(n+e.nodeSize)),a=s.blockRange(o);if(!a)return;const l=vc(a);if(e.type.isTextblock){const{defaultType:e}=s.parent.contentMatchAt(s.index());t.setNodeMarkup(a.start,e)}(l||0===l)&&t.lift(a,l)})}),!0)},km=e=>t=>e(t),Tm=()=>({state:e,dispatch:t})=>Jp(e,t),xm=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Kc(r.doc.resolve(Math.max(o-1,0)))),!0},Em=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let n=i.depth;n>0;n-=1)if(i.node(n).type===r.type){if(t){const t=i.before(n),r=i.after(n);e.delete(t,r).scrollIntoView()}return!0}return!1},Cm=e=>({tr:t,state:n,dispatch:r})=>{const i=Uf(e,n.schema),s=t.selection.$anchor;for(let e=s.depth;e>0;e-=1)if(s.node(e).type===i){if(r){const n=s.before(e),r=s.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},Am=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Om=()=>({state:e,dispatch:t})=>Lp(e,t),Mm=()=>({commands:e})=>e.keyboardShortcut("Enter"),Im=()=>({state:e,dispatch:t})=>Kp(e,t),Dm=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Nf(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const e=Wf(l,s,t);if(e&&e.from<=c&&e.to>=u){const t=Kc.create(o,e.from,e.to);n.setSelection(t)}}return!0},jm=e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};function Pm(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Lm=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(Pm()||"Android"===navigator.platform||/android/i.test(navigator.userAgent))&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!nm(n.state.selection))return o(),!0;const a=sm(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Nm=(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),Rm=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),Um=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){let i;n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const{selection:a}=s.state,l=e=>{s.emit("contentError",{editor:s,error:e,disableCollaboration:()=>{"collaboration"in s.storage&&"object"==typeof s.storage.collaboration&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{mf(t,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(e){l(e)}try{i=mf(t,s.schema,{parseOptions:c,errorOnInvalidContent:null!=(o=n.errorOnInvalidContent)?o:s.options.enableContentCheck})}catch(e){return l(e),!1}let u,{from:d,to:h}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},p=!0,f=!0;if(("type"in i?[i]:i).forEach(e=>{e.check(),p=!!p&&e.isText&&0===e.marks.length,f=!!f&&e.isBlock}),d===h&&f){const{parent:e}=r.doc.resolve(d);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(d-=1,h+=1)}if(p){if(Array.isArray(t))u=t.map(e=>e.text||"").join("");else if(t instanceof Ga){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),u=e}else u="object"==typeof t&&t&&t.text?t.text:t;r.insertText(u,d,h)}else{u=i;const e=0===a.$from.parentOffset,t=a.$from.node().isText||a.$from.node().isTextblock,n=a.$from.node().content.size>0;e&&t&&n&&(d=Math.max(0,d-1)),r.replaceWith(d,h,u)}n.updateSelection&&function(e,t){const n=e.steps.length-1;if(n<t)return;const r=e.steps[n];if(!(r instanceof pc||r instanceof fc))return;const i=e.mapping.maps[n];let s=0;i.forEach((e,t,n,r)=>{0===s&&(s=r)}),e.setSelection(Hc.near(e.doc.resolve(s),-1))}(r,r.steps.length-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:u}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:u})}return!0},Bm=()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection,i=r instanceof Xc;if(i){if(r.node.isTextblock||!Tc(e.doc,r.from))return!1;n=r.from}else if(n=Ec(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);i&&r.setSelection(Xc.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(e,t),Fm=()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection;if(r instanceof Xc){if(r.node.isTextblock||!Tc(e.doc,r.to))return!1;n=r.to}else if(n=Ec(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(e,t),zm=()=>({state:e,dispatch:t})=>Rp(e,t),$m=()=>({state:e,dispatch:t})=>qp(e,t),qm=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Ec(e.doc,e.selection.$from.pos,-1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},Hm=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Ec(e.doc,e.selection.$from.pos,1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},Vm=()=>({state:e,dispatch:t})=>((e,t)=>{let n=Np(e,void 0);if(!n)return!1;let r=zp(n);return!!r&&Up(e,r,t)})(e,t),Wm=()=>({state:e,dispatch:t})=>((e,t)=>{let n=$p(e,void 0);if(!n)return!1;let r=Vp(n);return!!r&&Up(e,r,t)})(e,t);function Gm(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var Km=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=function(e){const t=e.split(/-(?!$)/);let n,r,i,s,o=t[t.length-1];"Space"===o&&(o=" ");for(let e=0;e<t.length-1;e+=1){const o=t[e];if(/^(cmd|meta|m)$/i.test(o))s=!0;else if(/^a(lt)?$/i.test(o))n=!0;else if(/^(c|ctrl|control)$/i.test(o))r=!0;else if(/^s(hift)?$/i.test(o))i=!0;else{if(!/^mod$/i.test(o))throw new Error(`Unrecognized modifier name: ${o}`);Pm()||Gm()?s=!0:r=!0}}return n&&(o=`Alt-${o}`),r&&(o=`Ctrl-${o}`),s&&(o=`Meta-${o}`),i&&(o=`Shift-${o}`),o}(e).split(/-(?!$)/),o=s.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===o?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,a))});return null==l||l.steps.forEach(e=>{const t=e.map(r.mapping);t&&i&&r.maybeStep(t)}),!0},Jm=(e,t={})=>({state:n,dispatch:r})=>!!Yf(n,Uf(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&vc(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)})(n,r),Xm=()=>({state:e,dispatch:t})=>Xp(e,t),Ym=e=>({state:t,dispatch:n})=>{return(r=Uf(e,t.schema),function(e,t){let{$from:n,$to:i}=e.selection,s=n.blockRange(i,e=>e.childCount>0&&e.firstChild.type==r);return!!s&&(!t||(n.node(s.depth-1).type==r?function(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new fc(s-1,o,s,o,new Za(Ga.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ml(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=vc(r);if(null==a)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Tc(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}(e,t,r,s):function(e,t,n){let r=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,s=n.startIndex;t>s;t--)e-=i.child(t).nodeSize,r.delete(e-1,e+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Ga.empty:Ga.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new fc(d-(a?1:0),h+(l?1:0),d+1,h-1,new Za((a?Ga.empty:Ga.from(i.copy(Ga.empty))).append(l?Ga.empty:Ga.from(i.copy(Ga.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(e,t,s)))})(t,n);var r},Qm=()=>({state:e,dispatch:t})=>Wp(e,t);function Zm(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}var eg=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Bf("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(s=Uf(e,r.schema)),"mark"===a&&(o=Nf(e,r.schema)),i&&n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{s&&s===e.type&&n.setNodeMarkup(r,void 0,Zm(e.attrs,t)),o&&e.marks.length&&e.marks.forEach(i=>{o===i.type&&n.addMark(r,r+e.nodeSize,o.create(Zm(i.attrs,t)))})})}),!0)},tg=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),ng=()=>({tr:e,dispatch:t})=>{if(t){const t=new Qc(e.doc);e.setSelection(t)}return!0},rg=()=>({state:e,dispatch:t})=>Fp(e,t),ig=()=>({state:e,dispatch:t})=>Hp(e,t),sg=()=>({state:e,dispatch:t})=>((e,t)=>{let n,{$from:r,to:i}=e.selection,s=r.sharedDepth(i);return 0!=s&&(n=r.before(s),t&&t(e.tr.setSelection(Xc.create(e.doc,n))),!0)})(e,t),og=()=>({state:e,dispatch:t})=>tf(e,t),ag=()=>({state:e,dispatch:t})=>ef(e,t),lg=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if("full"!==r.preserveWhitespace){const a=gf(e,i.schema,r,{errorOnInvalidContent:null!=t?t:i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,a).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:null!=t?t:i.options.enableContentCheck})},cg=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Nf(e,r.schema);if(i)if(o){const e=Rf(r,l);n.addStoredMark(l.create({...e,...t}))}else a.forEach(e=>{const i=e.$from.pos,s=e.$to.pos;r.doc.nodesBetween(i,s,(e,r)=>{const o=Math.max(r,i),a=Math.min(r+e.nodeSize,s);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&n.addMark(o,a,l.create({...e.attrs,...t}))}):n.addMark(o,a,l.create(t))})});return function(e,t,n){var r;const{selection:i}=t;let s=null;if(nm(i)&&(s=i.$cursor),s){const t=null!=(r=e.storedMarks)?r:s.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:t,$to:r})=>{let i=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,r.pos,(e,t,r)=>{if(i)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),s=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));i=t&&s}return!i}),i})}(r,n,l)},ug=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),dg=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Uf(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:e})=>!!nf(s,{...o,...t})(n)||e.clearNodes()).command(({state:e})=>nf(s,{...o,...t})(e,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},hg=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,r=rm(e,0,n.content.size),i=Xc.create(n,r);t.setSelection(i)}return!0},pg=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:r,to:i}="number"==typeof e?{from:e,to:e}:e,s=Kc.atStart(n).from,o=Kc.atEnd(n).to,a=rm(r,s,o),l=rm(i,s,o),c=Kc.create(n,a,l);t.setSelection(c)}return!0},fg=e=>({state:t,dispatch:n})=>{const r=Uf(e,t.schema);return(i=r,function(e,t){let{$from:n,$to:r}=e.selection,s=n.blockRange(r,e=>e.childCount>0&&e.firstChild.type==i);if(!s)return!1;let o=s.startIndex;if(0==o)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=i)return!1;if(t){let n=l.lastChild&&l.lastChild.type==a.type,r=Ga.from(n?i.create():null),o=new Za(Ga.from(i.create(null,Ga.from(a.type.create(null,r)))),n?3:1,0),c=s.start,u=s.end;t(e.tr.step(new fc(c-(n?3:1),u,c,u,o,1,!0)).scrollIntoView())}return!0})(t,n);var i};function mg(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}var gg=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,c=Jf(i.extensionManager.attributes,a.node().type.name,a.node().attrs);if(s instanceof Xc&&s.node.isBlock)return!(!a.parentOffset||!kc(o,a.pos)||(r&&(e&&mg(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),0));if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,d=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=u&&d?[{type:d,attrs:c}]:void 0,p=kc(t.doc,t.mapping.map(a.pos),1,h);if(h||p||!kc(t.doc,t.mapping.map(a.pos),1,d?[{type:d}]:void 0)||(p=!0,h=d?[{type:d,attrs:c}]:void 0),r){if(p&&(s instanceof Kc&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),d&&!u&&!a.parentOffset&&a.parent.type!==d)){const e=t.mapping.map(a.before()),n=t.doc.resolve(e);a.node(-1).canReplaceWith(n.index(),n.index()+1,d)&&t.setNodeMarkup(t.mapping.map(a.before()),d)}e&&mg(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return p},yg=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Uf(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let e=Ga.empty;const r=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-r;t>=l.depth-3;t-=1)e=Ga.from(l.node(t).copy(e));const i=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,s={...Jf(h,l.node().type.name,l.node().attrs),...t},c=(null==(o=a.contentMatch.defaultType)?void 0:o.createAndFill(s))||void 0;e=e.append(Ga.from(a.createAndFill(null,c)||void 0));const u=l.before(l.depth-(r-1));n.replace(u,l.after(-i),new Za(e,4-r,0));let d=-1;n.doc.nodesBetween(u,n.doc.content.size,(e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)}),d>-1&&n.setSelection(Kc.near(n.doc.resolve(d))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,f={...Jf(h,d.type.name,d.attrs),...t},m={...Jf(h,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const g=p?[{type:a,attrs:f},{type:p,attrs:m}]:[{type:a,attrs:f}];if(!kc(n.doc,l.pos,2))return!1;if(i){const{selection:e,storedMarks:t}=r,{splittableMarks:o}=s.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();if(n.split(l.pos,2,g).scrollIntoView(),!a||!i)return!0;const c=a.filter(e=>o.includes(e.type.name));n.ensureMarks(c)}return!0},vg=(e,t)=>{const n=vf(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r);return n.node.type!==(null==i?void 0:i.type)||!Tc(e.doc,n.pos)||(e.join(n.pos),!0)},bg=(e,t)=>{const n=vf(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r);return n.node.type!==(null==i?void 0:i.type)||!Tc(e.doc,r)||(e.join(r),!0)},_g=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,p=Uf(e,o.schema),f=Uf(t,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:v}=m,b=y.blockRange(v),_=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=vf(e=>Zf(e.type.name,d))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===p)return c.liftListItem(f);if(Zf(w.node.type.name,d)&&p.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,p),!0)).command(()=>vg(s,p)).command(()=>bg(s,p)).run()}return n&&_&&a?l().command(()=>{const e=u().wrapInList(p,r),t=_.filter(e=>h.includes(e.type.name));return s.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(p,r).command(()=>vg(s,p)).command(()=>bg(s,p)).run():l().command(()=>!!u().wrapInList(p,r)||c.clearNodes()).wrapInList(p,r).command(()=>vg(s,p)).command(()=>bg(s,p)).run()},wg=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Nf(e,r.schema);return Xf(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},Sg=(e,t,n={})=>({state:r,commands:i})=>{const s=Uf(e,r.schema),o=Uf(t,r.schema),a=Yf(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},kg=(e,t={})=>({state:n,commands:r})=>{const i=Uf(e,n.schema);return Yf(n,i,t)?r.lift(i):r.wrapIn(i,t)},Tg=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const t=e.tr,n=s.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(s.text){const n=t.doc.resolve(s.from).marks();t.replaceWith(s.from,s.to,e.schema.text(s.text,n))}else t.delete(s.from,s.to)}return!0}}return!1},xg=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0},Eg=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=Nf(e,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:e,to:t}=a;const r=null==(s=c.marks().find(e=>e.type===l))?void 0:s.attrs,i=Wf(c,l,r);i&&(e=i.from,t=i.to),n.removeMark(e,t,l)}else d.forEach(e=>{n.removeMark(e.$from.pos,e.$to.pos,l)});return n.removeStoredMark(l),!0},Cg=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Bf("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(s=Uf(e,r.schema)),"mark"===a&&(o=Nf(e,r.schema)),i&&n.selection.ranges.forEach(e=>{const i=e.$from.pos,a=e.$to.pos;let l,c,u,d;n.selection.empty?r.doc.nodesBetween(i,a,(e,t)=>{s&&s===e.type&&(u=Math.max(t,i),d=Math.min(t+e.nodeSize,a),l=t,c=e)}):r.doc.nodesBetween(i,a,(e,r)=>{r<i&&s&&s===e.type&&(u=Math.max(r,i),d=Math.min(r+e.nodeSize,a),l=r,c=e),r>=i&&r<=a&&(s&&s===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),o&&e.marks.length&&e.marks.forEach(s=>{if(o===s.type){const l=Math.max(r,i),c=Math.min(r+e.nodeSize,a);n.addMark(l,c,o.create({...s.attrs,...t}))}}))}),c&&(void 0!==l&&n.setNodeMarkup(l,void 0,{...c.attrs,...t}),o&&c.marks.length&&c.marks.forEach(e=>{o===e.type&&n.addMark(u,d,o.create({...e.attrs,...t}))}))}),!0)},Ag=(e,t={})=>({state:n,dispatch:r})=>function(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&bc(o,e,t);return!!a&&(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0)}}(Uf(e,n.schema),t)(n,r),Og=(e,t={})=>({state:n,dispatch:r})=>function(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return!!function(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=o.resolve(t.start-2);s=new ml(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new ml(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=bc(s,n,r,t);return!!a&&(e&&function(e,t,n,r,i){let s=Ga.empty;for(let e=n.length-1;e>=0;e--)s=Ga.from(n[e].type.create(n[e].attrs,s));e.step(new fc(t.start-(r?2:0),t.end,t.start,t.end,new Za(s,0,0),n.length,!0));let o=0;for(let e=0;e<n.length;e++)n[e].type==i&&(o=e+1);let a=n.length-o,l=t.start+n.length-(r?2:0),c=t.parent;for(let n=t.startIndex,r=t.endIndex,i=!0;n<r;n++,i=!1)!i&&kc(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(n).nodeSize}(e,t,a,i,n),!0)}(a,o,e,t)&&(r&&r(a.scrollIntoView()),!0)}}(Uf(e,n.schema),t)(n,r),Mg=ym.create({name:"commands",addCommands:()=>({...bm})}),Ig=ym.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var n,r,i,s;if(null!=(s=null==(i=null==(r=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:r.filterTransaction)?void 0:i.call(r,e))?s:e.getMeta("y-sync$"))return;const o=hf(e.before,[e,...t]);zf(o).forEach(t=>{o.mapping.mapResult(t.oldRange.from).deletedAfter&&o.mapping.mapResult(t.oldRange.to).deletedBefore&&o.before.nodesBetween(t.oldRange.from,t.oldRange.to,(n,r)=>{const i=r+n.nodeSize-2,s=t.oldRange.from<=r&&i<=t.oldRange.to;this.editor.emit("delete",{type:"node",node:n,from:r,to:i,newFrom:o.mapping.map(r),newTo:o.mapping.map(i),deletedRange:t.oldRange,newRange:t.newRange,partial:!s,editor:this.editor,transaction:e,combinedTransform:o})})});const a=o.mapping;o.steps.forEach((t,n)=>{var r,i;if(t instanceof uc){const s=a.slice(n).map(t.from,-1),l=a.slice(n).map(t.to),c=a.invert().map(s,-1),u=a.invert().map(l),d=null==(r=o.doc.nodeAt(s-1))?void 0:r.marks.some(e=>e.eq(t.mark)),h=null==(i=o.doc.nodeAt(l))?void 0:i.marks.some(e=>e.eq(t.mark));this.editor.emit("delete",{type:"mark",mark:t.mark,from:t.from,to:t.to,deletedRange:{from:c,to:u},newRange:{from:s,to:l},partial:Boolean(h||d),editor:this.editor,transaction:e,combinedTransform:o})}})};null==(i=null==(r=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:r.async)||i?setTimeout(s,0):s()}}),Dg=ym.create({name:"drop",addProseMirrorPlugins(){return[new cu({key:new hu("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),jg=ym.create({name:"editable",addProseMirrorPlugins(){return[new cu({key:new hu("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Pg=new hu("focusEvents"),Lg=ym.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new cu({key:Pg,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Ng=ym.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{const{selection:n,doc:r}=t,{empty:i,$anchor:s}=n,{pos:o,parent:a}=s,l=s.parent.isTextblock&&o>0?t.doc.resolve(o-1):s,c=l.parent.type.spec.isolating,u=s.pos-s.parentOffset,d=c&&1===l.parent.childCount?u===s.pos:Hc.atStart(r).from===o;return!(!i||!a.type.isTextblock||a.textContent.length||!d||d&&"paragraph"===s.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Pm()||Gm()?i:r},addProseMirrorPlugins(){return[new cu({key:new hu("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;const r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=t.selection,l=Hc.atStart(t.doc).from,c=Hc.atEnd(t.doc).to;if(s||o!==l||a!==c)return;if(!em(n.doc))return;const u=n.tr,d=cf({state:n,transaction:u}),{commands:h}=new uf({editor:this.editor,state:d});return h.clearNodes(),u.steps.length?u:void 0}})]}}),Rg=ym.create({name:"paste",addProseMirrorPlugins(){return[new cu({key:new hu("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),Ug=ym.create({name:"tabindex",addProseMirrorPlugins(){return[new cu({key:new hu("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Bg=class e{constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new e(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new e(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),t.push(new e(a,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){const e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];if(e[i]!==t[i])break}}else n=r;r=r.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let r=[];if(!this.children||0===this.children.length)return r;const i=Object.keys(t);return this.children.forEach(s=>{n&&r.length>0||(s.node.type.name===e&&i.every(e=>t[e]===s.node.attrs[e])&&r.push(s),n&&r.length>0||(r=r.concat(s.querySelectorAll(e,t,n))))}),r}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},Fg=class extends df{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:"undefined"!=typeof document?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,enableDevTools:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:n})=>this.options.onDrop(e,t,n)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=sm(t,this.options.autofocus);this.editorState=au.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if("undefined"==typeof document)throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){var e;if(this.editorView){const e=this.editorView.dom;(null==e?void 0:e.editor)&&delete e.editor,this.editorView.destroy()}this.editorView=null,this.isInitialized=!1,null==(e=this.css)||e.remove(),this.css=null}applyDevTools(){"undefined"!=typeof window&&this.options.enableDevTools&&Promise.resolve().then(n.bind(n,4422)).then(({default:e})=>{this.editorView&&e(this.editorView)}).catch(()=>{console.warn("[Tiptap warning]: Devtools are enabled but `prosemirror-dev-tools` is not installed."),console.warn("Install 'prosemirror-dev-tools' as a dev dependency to use the dev tools.")})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&"undefined"!=typeof document&&(this.css=function(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style",""),r.innerHTML='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}',document.getElementsByTagName("head")[0].appendChild(r),r}(0,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.editorView&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.editorState=this.state.apply(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if("state"===t)return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=Sf(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(e=>{const t="string"==typeof e?`${e}$`:e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[jg,vm.configure({blockSeparator:null==(t=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:t.blockSeparator}),Mg,Lg,Ng,Ug,Dg,Rg,Ig].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new gm(n,this)}createCommandManager(){this.commandManager=new uf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=gf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message)))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&"object"==typeof this.storage.collaboration&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),e=gf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new vp(e,{...this.options.editorProps,attributes:{role:"textbox",...null==(t=this.options.editorProps)?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState}),this.options.enableDevTools&&this.applyDevTools();const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.injectCSS(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null==(t=this.capturedTransaction)?void 0:t.step(e)}):void(this.capturedTransaction=e);const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(e=>e.getMeta("focus")||e.getMeta("blur")),a=null==o?void 0:o.getMeta("focus"),l=null==o?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),e.getMeta("preventUpdate")||!n.some(e=>e.docChanged)||s.doc.eq(t.doc)||this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return Ff(this.state,e)}isActive(e,t){const n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return Yf(e,null,n)||Xf(e,null,n);const r=Bf(t,e.schema);return"node"===r?Yf(e,t,n):"mark"===r&&Xf(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return wf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return Pf(this.state.doc,{blockSeparator:t,textSerializers:{...Lf(this.schema),...n}})}get isEmpty(){return em(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return null==(t=null==(e=this.editorView)?void 0:e.isDestroyed)||t}$node(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Bg(t,this)}get $doc(){return this.$pos(0)}};function zg(e){return new om({find:e.find,handler:({state:t,range:n,match:r})=>{const i=kf(e.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:s}=t,o=r[r.length-1],a=r[0];if(o){const r=a.search(/\S/),l=n.from+a.indexOf(o),c=l+o.length;if(Gf(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>l).length)return null;c<n.to&&s.delete(c,n.to),l>n.from&&s.delete(n.from+r,l);const u=n.from+r+o.length;s.addMark(n.from+r,u,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function $g(e){return new om({find:e.find,handler:({state:t,range:n,match:r})=>{const i=kf(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let a=n.to;const l=e.type.create(i);if(r[1]){let e=o+r[0].lastIndexOf(r[1]);e>a?e=a:a=e+r[1].length;const t=r[0][r[0].length-1];s.insertText(t,o+r[0].length-1),s.replaceWith(e,a,l)}else if(r[0]){const t=e.type.isInline?o:o-1;s.insert(t,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function qg(e){return new om({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=kf(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)}})}function Hg(e){return new om({find:e.find,handler:({state:t,range:n,match:r})=>{let i=e.replace,s=n.from;const o=n.to;if(r[1]){const e=r[0].lastIndexOf(r[1]);i+=r[0].slice(e+r[1].length),s+=e;const t=s-o;t>0&&(i=r[0].slice(e-t,e)+i,s=o)}t.tr.insertText(i,s,o)}})}function Vg(e){return new om({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=kf(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),l=a&&bc(a,e.type,s);if(!l)return null;if(o.wrap(a,l),e.keepMarks&&e.editor){const{selection:n,storedMarks:r}=t,{splittableMarks:i}=e.editor.extensionManager,s=r||n.$to.parentOffset&&n.$from.marks();if(s){const e=s.filter(e=>i.includes(e.type.name));o.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&Tc(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&o.join(n.from-1)}})}var Wg=class e extends dm{constructor(){super(...arguments),this.type="node"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}};function Gg(e){return new pm({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=kf(e.getAttributes,void 0,r,i);if(!1===s||null===s)return null;const{tr:o}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const r=l.search(/\S/),i=n.from+l.indexOf(a),u=i+a.length;if(Gf(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;u<n.to&&o.delete(u,n.to),i>n.from&&o.delete(n.from+r,i),c=n.from+r+a.length,o.addMark(n.from+r,c,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function Kg(e){return new pm({find:e.find,handler({match:t,chain:n,range:r,pasteEvent:i}){const s=kf(e.getAttributes,void 0,t,i),o=kf(e.getContent,void 0,s);if(!1===s||null===s)return null;const a={type:e.type.name,attrs:s};o&&(a.content=o),t.input&&n().deleteRange(r).insertContentAt(r.from,a)}})}function Jg(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}const Xg={},Yg=[],Qg=()=>{},Zg=()=>!1,ey=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ty=e=>e.startsWith("onUpdate:"),ny=Object.assign,ry=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},iy=Object.prototype.hasOwnProperty,sy=(e,t)=>iy.call(e,t),oy=Array.isArray,ay=e=>"[object Map]"===fy(e),ly=e=>"function"==typeof e,cy=e=>"string"==typeof e,uy=e=>"symbol"==typeof e,dy=e=>null!==e&&"object"==typeof e,hy=e=>(dy(e)||ly(e))&&ly(e.then)&&ly(e.catch),py=Object.prototype.toString,fy=e=>py.call(e),my=e=>cy(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,gy=Jg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yy=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},vy=/-(\w)/g,by=yy(e=>e.replace(vy,(e,t)=>t?t.toUpperCase():"")),_y=/\B([A-Z])/g,wy=yy(e=>e.replace(_y,"-$1").toLowerCase()),Sy=yy(e=>e.charAt(0).toUpperCase()+e.slice(1)),ky=yy(e=>e?`on${Sy(e)}`:""),Ty=(e,t)=>!Object.is(e,t),xy=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ey=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Cy=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ay;const Oy=()=>Ay||(Ay="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});function My(e){if(oy(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=cy(r)?Py(r):My(r);if(i)for(const e in i)t[e]=i[e]}return t}if(cy(e)||dy(e))return e}const Iy=/;(?![^(]*\))/g,Dy=/:([^]+)/,jy=/\/\*[^]*?\*\//g;function Py(e){const t={};return e.replace(jy,"").split(Iy).forEach(e=>{if(e){const n=e.split(Dy);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ly(e){let t="";if(cy(e))t=e;else if(oy(e))for(let n=0;n<e.length;n++){const r=Ly(e[n]);r&&(t+=r+" ")}else if(dy(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ny=Jg("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Ry(e){return!!e||""===e}let Uy,By;class Fy{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Uy,!e&&Uy&&(this.index=(Uy.scopes||(Uy.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Uy;try{return Uy=this,e()}finally{Uy=t}}}on(){1===++this._on&&(this.prevScope=Uy,Uy=this)}off(){this._on>0&&0===--this._on&&(Uy=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}const zy=new WeakSet;class $y{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Uy&&Uy.active&&Uy.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,zy.has(this)&&(zy.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||Wy(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,sv(this),Jy(this);const e=By,t=tv;By=this,tv=!0;try{return this.fn()}finally{Xy(this),By=e,tv=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)Zy(e);this.deps=this.depsTail=void 0,sv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?zy.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yy(this)&&this.run()}get dirty(){return Yy(this)}}let qy,Hy,Vy=0;function Wy(e,t=!1){if(e.flags|=8,t)return e.next=Hy,void(Hy=e);e.next=qy,qy=e}function Gy(){Vy++}function Ky(){if(--Vy>0)return;if(Hy){let e=Hy;for(Hy=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;qy;){let t=qy;for(qy=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,1&t.flags)try{t.trigger()}catch(t){e||(e=t)}t=n}}if(e)throw e}function Jy(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Xy(e){let t,n=e.depsTail,r=n;for(;r;){const e=r.prevDep;-1===r.version?(r===n&&(n=e),Zy(r),ev(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function Yy(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qy(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qy(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===ov)return;if(e.globalVersion=ov,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!Yy(e)))return;e.flags|=2;const t=e.dep,n=By,r=tv;By=e,tv=!0;try{Jy(e);const n=e.fn(e._value);(0===t.version||Ty(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{By=n,tv=r,Xy(e),e.flags&=-3}}function Zy(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)Zy(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function ev(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let tv=!0;const nv=[];function rv(){nv.push(tv),tv=!1}function iv(){const e=nv.pop();tv=void 0===e||e}function sv(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=By;By=void 0;try{t()}finally{By=e}}}let ov=0;class av{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class lv{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!By||!tv||By===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==By)t=this.activeLink=new av(By,this),By.deps?(t.prevDep=By.depsTail,By.depsTail.nextDep=t,By.depsTail=t):By.deps=By.depsTail=t,cv(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=By.depsTail,t.nextDep=void 0,By.depsTail.nextDep=t,By.depsTail=t,By.deps===t&&(By.deps=e)}return t}trigger(e){this.version++,ov++,this.notify(e)}notify(e){Gy();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Ky()}}}function cv(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)cv(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const uv=new WeakMap,dv=Symbol(""),hv=Symbol(""),pv=Symbol("");function fv(e,t,n){if(tv&&By){let t=uv.get(e);t||uv.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new lv),r.map=t,r.key=n),r.track()}}function mv(e,t,n,r,i,s){const o=uv.get(e);if(!o)return void ov++;const a=e=>{e&&e.trigger()};if(Gy(),"clear"===t)o.forEach(a);else{const i=oy(e),s=i&&my(n);if(i&&"length"===n){const e=Number(r);o.forEach((t,n)=>{("length"===n||n===pv||!uy(n)&&n>=e)&&a(t)})}else switch((void 0!==n||o.has(void 0))&&a(o.get(n)),s&&a(o.get(pv)),t){case"add":i?s&&a(o.get("length")):(a(o.get(dv)),ay(e)&&a(o.get(hv)));break;case"delete":i||(a(o.get(dv)),ay(e)&&a(o.get(hv)));break;case"set":ay(e)&&a(o.get(dv))}}Ky()}function gv(e){const t=Qv(e);return t===e?t:(fv(t,0,pv),Xv(e)?t:t.map(eb))}function yv(e){return fv(e=Qv(e),0,pv),e}const vv={__proto__:null,[Symbol.iterator](){return bv(this,Symbol.iterator,eb)},concat(...e){return gv(this).concat(...e.map(e=>oy(e)?gv(e):e))},entries(){return bv(this,"entries",e=>(e[1]=eb(e[1]),e))},every(e,t){return wv(this,"every",e,t,void 0,arguments)},filter(e,t){return wv(this,"filter",e,t,e=>e.map(eb),arguments)},find(e,t){return wv(this,"find",e,t,eb,arguments)},findIndex(e,t){return wv(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return wv(this,"findLast",e,t,eb,arguments)},findLastIndex(e,t){return wv(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return wv(this,"forEach",e,t,void 0,arguments)},includes(...e){return kv(this,"includes",e)},indexOf(...e){return kv(this,"indexOf",e)},join(e){return gv(this).join(e)},lastIndexOf(...e){return kv(this,"lastIndexOf",e)},map(e,t){return wv(this,"map",e,t,void 0,arguments)},pop(){return Tv(this,"pop")},push(...e){return Tv(this,"push",e)},reduce(e,...t){return Sv(this,"reduce",e,t)},reduceRight(e,...t){return Sv(this,"reduceRight",e,t)},shift(){return Tv(this,"shift")},some(e,t){return wv(this,"some",e,t,void 0,arguments)},splice(...e){return Tv(this,"splice",e)},toReversed(){return gv(this).toReversed()},toSorted(e){return gv(this).toSorted(e)},toSpliced(...e){return gv(this).toSpliced(...e)},unshift(...e){return Tv(this,"unshift",e)},values(){return bv(this,"values",eb)}};function bv(e,t,n){const r=yv(e),i=r[t]();return r===e||Xv(e)||(i._next=i.next,i.next=()=>{const e=i._next();return e.value&&(e.value=n(e.value)),e}),i}const _v=Array.prototype;function wv(e,t,n,r,i,s){const o=yv(e),a=o!==e&&!Xv(e),l=o[t];if(l!==_v[t]){const t=l.apply(e,s);return a?eb(t):t}let c=n;o!==e&&(a?c=function(t,r){return n.call(this,eb(t),r,e)}:n.length>2&&(c=function(t,r){return n.call(this,t,r,e)}));const u=l.call(o,c,r);return a&&i?i(u):u}function Sv(e,t,n,r){const i=yv(e);let s=n;return i!==e&&(Xv(e)?n.length>3&&(s=function(t,r,i){return n.call(this,t,r,i,e)}):s=function(t,r,i){return n.call(this,t,eb(r),i,e)}),i[t](s,...r)}function kv(e,t,n){const r=Qv(e);fv(r,0,pv);const i=r[t](...n);return-1!==i&&!1!==i||!Yv(n[0])?i:(n[0]=Qv(n[0]),r[t](...n))}function Tv(e,t,n=[]){rv(),Gy();const r=Qv(e)[t].apply(e,n);return Ky(),iv(),r}const xv=Jg("__proto__,__v_isRef,__isVue"),Ev=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(uy));function Cv(e){uy(e)||(e=String(e));const t=Qv(this);return fv(t,0,e),t.hasOwnProperty(e)}class Av{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(r?i?Hv:qv:i?$v:zv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const s=oy(e);if(!r){let e;if(s&&(e=vv[t]))return e;if("hasOwnProperty"===t)return Cv}const o=Reflect.get(e,t,nb(e)?e:n);return(uy(t)?Ev.has(t):xv(t))?o:(r||fv(e,0,t),i?o:nb(o)?s&&my(t)?o:o.value:dy(o)?r?Wv(o):Vv(o):o)}}class Ov extends Av{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const t=Jv(i);if(Xv(n)||Jv(n)||(i=Qv(i),n=Qv(n)),!oy(e)&&nb(i)&&!nb(n))return!t&&(i.value=n,!0)}const s=oy(e)&&my(t)?Number(t)<e.length:sy(e,t),o=Reflect.set(e,t,n,nb(e)?e:r);return e===Qv(r)&&(s?Ty(n,i)&&mv(e,"set",t,n):mv(e,"add",t,n)),o}deleteProperty(e,t){const n=sy(e,t),r=(e[t],Reflect.deleteProperty(e,t));return r&&n&&mv(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return uy(t)&&Ev.has(t)||fv(e,0,t),n}ownKeys(e){return fv(e,0,oy(e)?"length":dv),Reflect.ownKeys(e)}}class Mv extends Av{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Iv=new Ov,Dv=new Mv,jv=new Ov(!0),Pv=e=>e,Lv=e=>Reflect.getPrototypeOf(e);function Nv(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function Rv(e,t){const n=function(e,t){const n={get(n){const r=this.__v_raw,i=Qv(r),s=Qv(n);e||(Ty(n,s)&&fv(i,0,n),fv(i,0,s));const{has:o}=Lv(i),a=t?Pv:e?tb:eb;return o.call(i,n)?a(r.get(n)):o.call(i,s)?a(r.get(s)):void(r!==i&&r.get(n))},get size(){const t=this.__v_raw;return!e&&fv(Qv(t),0,dv),Reflect.get(t,"size",t)},has(t){const n=this.__v_raw,r=Qv(n),i=Qv(t);return e||(Ty(t,i)&&fv(r,0,t),fv(r,0,i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){const i=this,s=i.__v_raw,o=Qv(s),a=t?Pv:e?tb:eb;return!e&&fv(o,0,dv),s.forEach((e,t)=>n.call(r,a(e),a(t),i))}};return ny(n,e?{add:Nv("add"),set:Nv("set"),delete:Nv("delete"),clear:Nv("clear")}:{add(e){t||Xv(e)||Jv(e)||(e=Qv(e));const n=Qv(this);return Lv(n).has.call(n,e)||(n.add(e),mv(n,"add",e,e)),this},set(e,n){t||Xv(n)||Jv(n)||(n=Qv(n));const r=Qv(this),{has:i,get:s}=Lv(r);let o=i.call(r,e);o||(e=Qv(e),o=i.call(r,e));const a=s.call(r,e);return r.set(e,n),o?Ty(n,a)&&mv(r,"set",e,n):mv(r,"add",e,n),this},delete(e){const t=Qv(this),{has:n,get:r}=Lv(t);let i=n.call(t,e);i||(e=Qv(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&mv(t,"delete",e,void 0),s},clear(){const e=Qv(this),t=0!==e.size,n=e.clear();return t&&mv(e,"clear",void 0,void 0),n}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=function(e,t,n){return function(...r){const i=this.__v_raw,s=Qv(i),o=ay(s),a="entries"===e||e===Symbol.iterator&&o,l="keys"===e&&o,c=i[e](...r),u=n?Pv:t?tb:eb;return!t&&fv(s,0,l?hv:dv),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(r,e,t)}),n}(e,t);return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(sy(n,r)&&r in t?n:t,r,i)}const Uv={get:Rv(!1,!1)},Bv={get:Rv(!1,!0)},Fv={get:Rv(!0,!1)},zv=new WeakMap,$v=new WeakMap,qv=new WeakMap,Hv=new WeakMap;function Vv(e){return Jv(e)?e:Gv(e,!1,Iv,Uv,zv)}function Wv(e){return Gv(e,!0,Dv,Fv,qv)}function Gv(e,t,n,r,i){if(!dy(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=function(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>fy(e).slice(8,-1))(e))}(e);if(0===s)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,2===s?r:n);return i.set(e,a),a}function Kv(e){return Jv(e)?Kv(e.__v_raw):!(!e||!e.__v_isReactive)}function Jv(e){return!(!e||!e.__v_isReadonly)}function Xv(e){return!(!e||!e.__v_isShallow)}function Yv(e){return!!e&&!!e.__v_raw}function Qv(e){const t=e&&e.__v_raw;return t?Qv(t):e}function Zv(e){return!sy(e,"__v_skip")&&Object.isExtensible(e)&&Ey(e,"__v_skip",!0),e}const eb=e=>dy(e)?Vv(e):e,tb=e=>dy(e)?Wv(e):e;function nb(e){return!!e&&!0===e.__v_isRef}function rb(e){return ib(e,!1)}function ib(e,t){return nb(e)?e:new sb(e,t)}class sb{constructor(e,t){this.dep=new lv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Qv(e),this._value=t?e:eb(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Xv(e)||Jv(e);e=n?e:Qv(e),Ty(e,t)&&(this._rawValue=e,this._value=n?e:eb(e),this.dep.trigger())}}function ob(e){return nb(e)?e.value:e}const ab={get:(e,t,n)=>"__v_raw"===t?e:ob(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return nb(i)&&!nb(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function lb(e){return Kv(e)?e:new Proxy(e,ab)}class cb{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new lv,{get:n,set:r}=e(t.track.bind(t),t.trigger.bind(t));this._get=n,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}class ub{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new lv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ov-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags||By===this))return Wy(this,!0),!0}get value(){const e=this.dep.track();return Qy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const db={},hb=new WeakMap;let pb;function fb(e,t=1/0,n){if(t<=0||!dy(e)||e.__v_skip)return e;if((n=n||new Set).has(e))return e;if(n.add(e),t--,nb(e))fb(e.value,t,n);else if(oy(e))for(let r=0;r<e.length;r++)fb(e[r],t,n);else if("[object Set]"===fy(e)||ay(e))e.forEach(e=>{fb(e,t,n)});else if((e=>"[object Object]"===fy(e))(e)){for(const r in e)fb(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&fb(e[r],t,n)}return e}function mb(e,t,n,r){try{return r?e(...r):e()}catch(e){yb(e,t,n)}}function gb(e,t,n,r){if(ly(e)){const i=mb(e,t,n,r);return i&&hy(i)&&i.catch(e=>{yb(e,t,n)}),i}if(oy(e)){const i=[];for(let s=0;s<e.length;s++)i.push(gb(e[s],t,n,r));return i}}function yb(e,t,n,r=!0){t&&t.vnode;const{errorHandler:i,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||Xg;if(t){let r=t.parent;const s=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,s,o))return;r=r.parent}if(i)return rv(),mb(i,null,10,[e,s,o]),void iv()}!function(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}(e,0,0,r,s)}const vb=[];let bb=-1;const _b=[];let wb=null,Sb=0;const kb=Promise.resolve();let Tb=null;function xb(e){const t=Tb||kb;return e?t.then(this?e.bind(this):e):t}function Eb(e){if(!(1&e.flags)){const t=Mb(e),n=vb[vb.length-1];!n||!(2&e.flags)&&t>=Mb(n)?vb.push(e):vb.splice(function(e){let t=bb+1,n=vb.length;for(;t<n;){const r=t+n>>>1,i=vb[r],s=Mb(i);s<e||s===e&&2&i.flags?t=r+1:n=r}return t}(t),0,e),e.flags|=1,Cb()}}function Cb(){Tb||(Tb=kb.then(Ib))}function Ab(e,t,n=bb+1){for(;n<vb.length;n++){const t=vb[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;vb.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function Ob(e){if(_b.length){const e=[...new Set(_b)].sort((e,t)=>Mb(e)-Mb(t));if(_b.length=0,wb)return void wb.push(...e);for(wb=e,Sb=0;Sb<wb.length;Sb++){const e=wb[Sb];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}wb=null,Sb=0}}const Mb=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Ib(e){try{for(bb=0;bb<vb.length;bb++){const e=vb[bb];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),mb(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;bb<vb.length;bb++){const e=vb[bb];e&&(e.flags&=-2)}bb=-1,vb.length=0,Ob(),Tb=null,(vb.length||_b.length)&&Ib(e)}}let Db,jb=[],Pb=!1;function Lb(e,...t){Db?Db.emit(e,...t):Pb||jb.push({event:e,args:t})}function Nb(e,t){var n,r;Db=e,Db?(Db.enabled=!0,jb.forEach(({event:e,args:t})=>Db.emit(e,...t)),jb=[]):"undefined"!=typeof window&&window.HTMLElement&&!(null==(r=null==(n=window.navigator)?void 0:n.userAgent)?void 0:r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(e=>{Nb(e,t)}),setTimeout(()=>{Db||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Pb=!0,jb=[])},3e3)):(Pb=!0,jb=[])}const Rb=Fb("component:added"),Ub=Fb("component:updated"),Bb=Fb("component:removed");function Fb(e){return t=>{Lb(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}let zb=null,$b=null;function qb(e){const t=zb;return zb=e,$b=e&&e.type.__scopeId||null,t}function Hb(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(rv(),gb(l,n,8,[e.el,a,e,t]),iv())}}const Vb=Symbol("_vte");Symbol("_leaveCb"),Symbol("_enterCb");function Wb(e,t){6&e.shapeFlag&&e.component?(e.transition=t,Wb(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Gb(e,t){return ly(e)?(()=>ny({name:e.name},t,{setup:e}))():e}function Kb(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Jb(e,t,n,r,i=!1){if(oy(e))return void e.forEach((e,s)=>Jb(e,t&&(oy(t)?t[s]:t),n,r,i));if(Xb(r)&&!i)return void(512&r.shapeFlag&&r.type.__asyncResolved&&r.component.subTree.component&&Jb(e,t,n,r.component.subTree));const s=4&r.shapeFlag?Yw(r.component):r.el,o=i?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Xg?a.refs={}:a.refs,d=a.setupState,h=Qv(d),p=d===Xg?()=>!1:e=>sy(h,e);if(null!=c&&c!==l&&(cy(c)?(u[c]=null,p(c)&&(d[c]=null)):nb(c)&&(c.value=null)),ly(l))mb(l,a,12,[o,u]);else{const t=cy(l),r=nb(l);if(t||r){const a=()=>{if(e.f){const n=t?p(l)?d[l]:u[l]:l.value;i?oy(n)&&ry(n,s):oy(n)?n.includes(s)||n.push(s):t?(u[l]=[s],p(l)&&(d[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else t?(u[l]=o,p(l)&&(d[l]=o)):r&&(l.value=o,e.k&&(u[e.k]=o))};o?(a.id=-1,X_(a,n)):a()}}}Boolean,Boolean,Oy().requestIdleCallback,Oy().cancelIdleCallback;const Xb=e=>!!e.type.__asyncLoader,Yb=e=>e.type.__isKeepAlive;function Qb(e,t){e_(e,"a",t)}function Zb(e,t){e_(e,"da",t)}function e_(e,t,n=Bw){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(n_(t,r,n),n){let e=n.parent;for(;e&&e.parent;)Yb(e.parent.vnode)&&t_(r,t,n,e),e=e.parent}}function t_(e,t,n,r){const i=n_(t,e,r,!0);c_(()=>{ry(r[t],i)},n)}function n_(e,t,n=Bw,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...r)=>{rv();const i=$w(n),s=gb(t,n,e,r);return i(),iv(),s});return r?i.unshift(s):i.push(s),s}}RegExp,RegExp;const r_=e=>(t,n=Bw)=>{Gw&&"sp"!==e||n_(e,(...e)=>t(...e),n)},i_=r_("bm"),s_=r_("m"),o_=r_("bu"),a_=r_("u"),l_=r_("bum"),c_=r_("um"),u_=r_("sp"),d_=r_("rtg"),h_=r_("rtc");function p_(e,t=Bw){n_("ec",e,t)}const f_=Symbol.for("v-ndc"),m_=e=>e?Hw(e)?Yw(e):m_(e.parent):null,g_=ny(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>m_(e.parent),$root:e=>m_(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?k_(e):e.type,$forceUpdate:e=>e.f||(e.f=()=>{Eb(e.update)}),$nextTick:e=>e.n||(e.n=xb.bind(e.proxy)),$watch:e=>__VUE_OPTIONS_API__?aw.bind(e):Qg}),y_=(e,t)=>e!==Xg&&!e.__isScriptSetup&&sy(e,t),v_={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=e;let c;if("$"!==t[0]){const a=o[t];if(void 0!==a)switch(a){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(y_(r,t))return o[t]=1,r[t];if(i!==Xg&&sy(i,t))return o[t]=2,i[t];if((c=e.propsOptions[0])&&sy(c,t))return o[t]=3,s[t];if(n!==Xg&&sy(n,t))return o[t]=4,n[t];__VUE_OPTIONS_API__&&!__||(o[t]=0)}}const u=g_[t];let d,h;return u?("$attrs"===t&&fv(e.attrs,0,""),u(e)):(d=a.__cssModules)&&(d=d[t])?d:n!==Xg&&sy(n,t)?(o[t]=4,n[t]):(h=l.config.globalProperties,sy(h,t)?h[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return y_(i,t)?(i[t]=n,!0):r!==Xg&&sy(r,t)?(r[t]=n,!0):!(sy(e.props,t)||"$"===t[0]&&t.slice(1)in e||(s[t]=n,0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||e!==Xg&&sy(e,o)||y_(t,o)||(a=s[0])&&sy(a,o)||sy(r,o)||sy(g_,o)||sy(i.config.globalProperties,o)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:sy(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function b_(e){return oy(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let __=!0;function w_(e,t,n){gb(oy(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function S_(e,t,n,r){let i=r.includes(".")?lw(n,r):()=>n[r];if(cy(e)){const n=t[e];ly(n)&&sw(i,n)}else if(ly(e))sw(i,e.bind(n));else if(dy(e))if(oy(e))e.forEach(e=>S_(e,t,n,r));else{const r=ly(e.handler)?e.handler.bind(n):t[e.handler];ly(r)&&sw(i,r,e)}}function k_(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:i.length||n||r?(l={},i.length&&i.forEach(e=>T_(l,e,o,!0)),T_(l,t,o)):l=t,dy(t)&&s.set(t,l),l}function T_(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&T_(e,s,n,!0),i&&i.forEach(t=>T_(e,t,n,!0));for(const i in t)if(r&&"expose"===i);else{const r=x_[i]||n&&n[i];e[i]=r?r(e[i],t[i]):t[i]}return e}const x_={data:E_,props:M_,emits:M_,methods:O_,computed:O_,beforeCreate:A_,created:A_,beforeMount:A_,mounted:A_,beforeUpdate:A_,updated:A_,beforeDestroy:A_,beforeUnmount:A_,destroyed:A_,unmounted:A_,activated:A_,deactivated:A_,errorCaptured:A_,serverPrefetch:A_,components:O_,directives:O_,watch:function(e,t){if(!e)return t;if(!t)return e;const n=ny(Object.create(null),e);for(const r in t)n[r]=A_(e[r],t[r]);return n},provide:E_,inject:function(e,t){return O_(C_(e),C_(t))}};function E_(e,t){return t?e?function(){return ny(ly(e)?e.call(this,this):e,ly(t)?t.call(this,this):t)}:t:e}function C_(e){if(oy(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function A_(e,t){return e?[...new Set([].concat(e,t))]:t}function O_(e,t){return e?ny(Object.create(null),e,t):t}function M_(e,t){return e?oy(e)&&oy(t)?[...new Set([...e,...t])]:ny(Object.create(null),b_(e),b_(null!=t?t:{})):t}function I_(){return{app:null,config:{isNativeTag:Zg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let D_=0;function j_(e,t){return function(n,r=null){ly(n)||(n=ny({},n)),null==r||dy(r)||(r=null);const i=I_(),s=new WeakSet,o=[];let a=!1;const l=i.app={_uid:D_++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:eS,get config(){return i.config},set config(e){},use:(e,...t)=>(s.has(e)||(e&&ly(e.install)?(s.add(e),e.install(l,...t)):ly(e)&&(s.add(e),e(l,...t))),l),mixin:e=>(__VUE_OPTIONS_API__&&(i.mixins.includes(e)||i.mixins.push(e)),l),component:(e,t)=>t?(i.components[e]=t,l):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,l):i.directives[e],mount(s,o,c){if(!a){const u=l._ceVNode||Mw(n,r);return u.appContext=i,!0===c?c="svg":!1===c&&(c=void 0),o&&t?t(u,s):e(u,s,c),a=!0,l._container=s,s.__vue_app__=l,__VUE_PROD_DEVTOOLS__&&(l._instance=u.component,function(e,t){Lb("app:init",e,t,{Fragment:vw,Text:bw,Comment:_w,Static:ww})}(l,eS)),Yw(u.component)}},onUnmount(e){o.push(e)},unmount(){a&&(gb(o,l._instance,16),e(null,l._container),__VUE_PROD_DEVTOOLS__&&(l._instance=null,function(e){Lb("app:unmount",e)}(l)),delete l._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,l),runWithContext(e){const t=P_;P_=l;try{return e()}finally{P_=t}}};return l}}let P_=null;function L_(e,t,n=!1){const r=Bw||zb;if(r||P_){let i=P_?P_._context.provides:r?null==r.parent||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ly(t)?t.call(r&&r.proxy):t}}const N_={},R_=()=>Object.create(N_),U_=e=>Object.getPrototypeOf(e)===N_;function B_(e,t,n,r){const[i,s]=e.propsOptions;let o,a=!1;if(t)for(let l in t){if(gy(l))continue;const c=t[l];let u;i&&sy(i,u=by(l))?s&&s.includes(u)?(o||(o={}))[u]=c:n[u]=c:hw(e.emitsOptions,l)||l in r&&c===r[l]||(r[l]=c,a=!0)}if(s){const t=Qv(n),r=o||Xg;for(let o=0;o<s.length;o++){const a=s[o];n[a]=F_(i,t,a,r[a],e,!sy(r,a))}}return a}function F_(e,t,n,r,i,s){const o=e[n];if(null!=o){const e=sy(o,"default");if(e&&void 0===r){const e=o.default;if(o.type!==Function&&!o.skipFactory&&ly(e)){const{propsDefaults:s}=i;if(n in s)r=s[n];else{const o=$w(i);r=s[n]=e.call(null,t),o()}}else r=e;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!e?r=!1:!o[1]||""!==r&&r!==wy(n)||(r=!0))}return r}const z_=new WeakMap;function $_(e,t,n=!1){const r=__VUE_OPTIONS_API__&&n?z_:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},a=[];let l=!1;if(__VUE_OPTIONS_API__&&!ly(e)){const r=e=>{l=!0;const[n,r]=$_(e,t,!0);ny(o,n),r&&a.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!l)return dy(e)&&r.set(e,Yg),Yg;if(oy(s))for(let e=0;e<s.length;e++){const t=by(s[e]);q_(t)&&(o[t]=Xg)}else if(s)for(const e in s){const t=by(e);if(q_(t)){const n=s[e],r=o[t]=oy(n)||ly(n)?{type:n}:ny({},n),i=r.type;let l=!1,c=!0;if(oy(i))for(let e=0;e<i.length;++e){const t=i[e],n=ly(t)&&t.name;if("Boolean"===n){l=!0;break}"String"===n&&(c=!1)}else l=ly(i)&&"Boolean"===i.name;r[0]=l,r[1]=c,(l||sy(r,"default"))&&a.push(t)}}const c=[o,a];return dy(e)&&r.set(e,c),c}function q_(e){return"$"!==e[0]&&!gy(e)}const H_=e=>"_"===e[0]||"$stable"===e,V_=e=>oy(e)?e.map(jw):[jw(e)],W_=(e,t,n)=>{if(t._n)return t;const r=function(e,t=zb){if(!t)return e;if(e._n)return e;const n=(...r)=>{n._d&&xw(-1);const i=qb(t);let s;try{s=e(...r)}finally{qb(i),n._d&&xw(1)}return __VUE_PROD_DEVTOOLS__&&Ub(t),s};return n._n=!0,n._c=!0,n._d=!0,n}((...e)=>V_(t(...e)),n);return r._c=!1,r},G_=(e,t,n)=>{const r=e._ctx;for(const n in e){if(H_(n))continue;const i=e[n];if(ly(i))t[n]=W_(0,i,r);else if(null!=i){const e=V_(i);t[n]=()=>e}}},K_=(e,t)=>{const n=V_(t);e.slots.default=()=>n},J_=(e,t,n)=>{for(const r in t)!n&&H_(r)||(e[r]=t[r])},X_=function(e,t){t&&t.pendingBranch?oy(e)?t.effects.push(...e):t.effects.push(e):(n=e,oy(n)?_b.push(...n):wb&&-1===n.id?wb.splice(Sb+1,0,n):1&n.flags||(_b.push(n),n.flags|=1),Cb());var n};function Y_(e,t){"boolean"!=typeof __VUE_OPTIONS_API__&&(Oy().__VUE_OPTIONS_API__=!0),"boolean"!=typeof __VUE_PROD_DEVTOOLS__&&(Oy().__VUE_PROD_DEVTOOLS__=!1),"boolean"!=typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&(Oy().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1);const n=Oy();n.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&Nb(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=Qg,insertStaticContent:f}=e,m=(e,t,n,r=null,i=null,s=null,o=void 0,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Cw(e,t)&&(r=z(e),N(e,i,s,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case bw:g(e,t,n,r);break;case _w:y(e,t,n,r);break;case ww:null==e&&v(t,n,r,o);break;case vw:E(e,t,n,r,i,s,o,a,l);break;default:1&d?b(e,t,n,r,i,s,o,a,l):6&d?C(e,t,n,r,i,s,o,a,l):(64&d||128&d)&&c.process(e,t,n,r,i,s,o,a,l,H)}null!=u&&i?Jb(u,e&&e.ref,s,t||e,!t):null==u&&e&&null!=e.ref&&Jb(e.ref,null,s,e,!0)},g=(e,t,n,i)=>{if(null==e)r(t.el=a(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&c(n,t.children)}},y=(e,t,n,i)=>{null==e?r(t.el=l(t.children||""),n,i):t.el=e.el},v=(e,t,n,r)=>{[e.el,e.anchor]=f(e.children,t,n,r,e.el,e.anchor)},b=(e,t,n,r,i,s,o,a,l)=>{"svg"===t.type?o="svg":"math"===t.type&&(o="mathml"),null==e?_(t,n,r,i,s,o,a,l):k(e,t,i,s,o,a,l)},_=(e,t,n,i,a,l,c,d)=>{let h,p;const{props:f,shapeFlag:m,transition:g,dirs:y}=e;if(h=e.el=o(e.type,l,f&&f.is,f),8&m?u(h,e.children):16&m&&S(e.children,h,null,i,a,Q_(e,l),c,d),y&&Hb(e,null,i,"created"),w(h,e,e.scopeId,c,i),f){for(const e in f)"value"===e||gy(e)||s(h,e,null,f[e],l,i);"value"in f&&s(h,"value",null,f.value,l),(p=f.onVnodeBeforeMount)&&Nw(p,i,e)}__VUE_PROD_DEVTOOLS__&&(Ey(h,"__vnode",e,!0),Ey(h,"__vueParentComponent",i,!0)),y&&Hb(e,null,i,"beforeMount");const v=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(a,g);v&&g.beforeEnter(h),r(h,t,n),((p=f&&f.onVnodeMounted)||v||y)&&X_(()=>{p&&Nw(p,i,e),v&&g.enter(h),y&&Hb(e,null,i,"mounted")},a)},w=(e,t,n,r,i)=>{if(n&&p(e,n),r)for(let t=0;t<r.length;t++)p(e,r[t]);if(i){let n=i.subTree;if(t===n||yw(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=i.vnode;w(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},S=(e,t,n,r,i,s,o,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?Pw(e[c]):jw(e[c]);m(null,l,t,n,r,i,s,o,a)}},k=(e,t,n,r,i,o,a)=>{const l=t.el=e.el;__VUE_PROD_DEVTOOLS__&&(l.__vnode=t);let{patchFlag:c,dynamicChildren:d,dirs:h}=t;c|=16&e.patchFlag;const p=e.props||Xg,f=t.props||Xg;let m;if(n&&Z_(n,!1),(m=f.onVnodeBeforeUpdate)&&Nw(m,n,t,e),h&&Hb(t,e,n,"beforeUpdate"),n&&Z_(n,!0),(p.innerHTML&&null==f.innerHTML||p.textContent&&null==f.textContent)&&u(l,""),d?T(e.dynamicChildren,d,l,n,r,Q_(t,i),o):a||D(e,t,l,null,n,r,Q_(t,i),o,!1),c>0){if(16&c)x(l,p,f,n,i);else if(2&c&&p.class!==f.class&&s(l,"class",null,f.class,i),4&c&&s(l,"style",p.style,f.style,i),8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t],o=p[r],a=f[r];a===o&&"value"!==r||s(l,r,o,a,i,n)}}1&c&&e.children!==t.children&&u(l,t.children)}else a||null!=d||x(l,p,f,n,i);((m=f.onVnodeUpdated)||h)&&X_(()=>{m&&Nw(m,n,t,e),h&&Hb(t,e,n,"updated")},r)},T=(e,t,n,r,i,s,o)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],u=l.el&&(l.type===vw||!Cw(l,c)||198&l.shapeFlag)?d(l.el):n;m(l,c,u,null,r,i,s,o,!0)}},x=(e,t,n,r,i)=>{if(t!==n){if(t!==Xg)for(const o in t)gy(o)||o in n||s(e,o,t[o],null,i,r);for(const o in n){if(gy(o))continue;const a=n[o],l=t[o];a!==l&&"value"!==o&&s(e,o,l,a,i,r)}"value"in n&&s(e,"value",t.value,n.value,i)}},E=(e,t,n,i,s,o,l,c,u)=>{const d=t.el=e?e.el:a(""),h=t.anchor=e?e.anchor:a("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(r(d,n,i),r(h,n,i),S(t.children||[],n,h,s,o,l,c,u)):p>0&&64&p&&f&&e.dynamicChildren?(T(e.dynamicChildren,f,n,s,o,l,c),(null!=t.key||s&&t===s.subTree)&&ew(e,t,!0)):D(e,t,n,h,s,o,l,c,u)},C=(e,t,n,r,i,s,o,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,o,l):A(t,n,r,i,s,o,l):O(e,t,l)},A=(e,t,n,r,i,s,o)=>{const a=e.component=function(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Rw,s={uid:Uw++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$_(r,i),emitsOptions:dw(r,i),emit:null,emitted:null,propsDefaults:Xg,inheritAttrs:r.inheritAttrs,ctx:Xg,data:Xg,props:Xg,attrs:Xg,slots:Xg,refs:Xg,setupState:Xg,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=uw.bind(null,s),e.ce&&e.ce(s),s}(e,r,i);if(Yb(e)&&(a.ctx.renderer=H),function(e,t=!1,n=!1){t&&zw(t);const{props:r,children:i}=e.vnode,s=Hw(e);(function(e,t,n,r=!1){const i={},s=R_();e.propsDefaults=Object.create(null),B_(e,t,i,s);for(const t in e.propsOptions[0])t in i||(i[t]=void 0);n?e.props=r?i:Gv(i,!1,jv,Bv,$v):e.type.props?e.props=i:e.props=s,e.attrs=s})(e,r,s,t),((e,t,n)=>{const r=e.slots=R_();if(32&e.vnode.shapeFlag){const e=t.__;e&&Ey(r,"__",e,!0);const i=t._;i?(J_(r,t,n),n&&Ey(r,"_",i,!0)):G_(t,r)}else t&&K_(e,t)})(e,i,n||t);const o=s?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,v_);const{setup:r}=n;if(r){rv();const n=e.setupContext=r.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Xw),slots:e.slots,emit:e.emit,expose:t}}(e):null,i=$w(e),s=mb(r,e,0,[e.props,n]),o=hy(s);if(iv(),i(),!o&&!e.sp||Xb(e)||Kb(e),o){if(s.then(qw,qw),t)return s.then(n=>{Kw(e,n,t)}).catch(t=>{yb(t,e,0)});e.asyncDep=s}else Kw(e,s,t)}else Jw(e,t)}(e,t):void 0;t&&zw(!1)}(a,!1,o),a.asyncDep){if(i&&i.registerDep(a,M,o),!e.el){const e=a.subTree=Mw(_w);y(null,e,t,n)}}else M(a,e,t,n,i,s,o)},O=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!a||a&&a.$stable)||r!==o&&(r?!o||gw(r,o,c):!!o);if(1024&l)return!0;if(16&l)return r?gw(r,o,c):!!o;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!hw(c,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void I(r,t,n);r.next=t,r.update()}else t.el=e.el,r.vnode=t},M=(e,t,n,r,i,s,o)=>{const a=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:l,vnode:c}=e;{const n=tw(e);if(n)return t&&(t.el=c.el,I(e,t,o)),void n.asyncDep.then(()=>{e.isUnmounted||a()})}let u,h=t;Z_(e,!1),t?(t.el=c.el,I(e,t,o)):t=c,n&&xy(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&Nw(u,l,t,c),Z_(e,!0);const p=pw(e),f=e.subTree;e.subTree=p,m(f,p,d(f.el),z(f),e,i,s),t.el=p.el,null===h&&function({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,p.el),r&&X_(r,i),(u=t.props&&t.props.onVnodeUpdated)&&X_(()=>Nw(u,l,t,c),i),__VUE_PROD_DEVTOOLS__&&Ub(e)}else{let o;const{el:a,props:l}=t,{bm:c,m:u,parent:d,root:h,type:p}=e,f=Xb(t);if(Z_(e,!1),c&&xy(c),!f&&(o=l&&l.onVnodeBeforeMount)&&Nw(o,d,t),Z_(e,!0),a&&W){const t=()=>{e.subTree=pw(e),W(a,e.subTree,e,i,null)};f&&p.__asyncHydrate?p.__asyncHydrate(a,e,t):t()}else{h.ce&&!1!==h.ce._def.shadowRoot&&h.ce._injectChildStyle(p);const o=e.subTree=pw(e);m(null,o,n,r,e,i,s),t.el=o.el}if(u&&X_(u,i),!f&&(o=l&&l.onVnodeMounted)){const e=t;X_(()=>Nw(o,d,e),i)}(256&t.shapeFlag||d&&Xb(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&X_(e.a,i),e.isMounted=!0,__VUE_PROD_DEVTOOLS__&&Rb(e),t=n=r=null}};e.scope.on();const l=e.effect=new $y(a);e.scope.off();const c=e.update=l.run.bind(l),u=e.job=l.runIfDirty.bind(l);u.i=e,u.id=e.uid,l.scheduler=()=>Eb(u),Z_(e,!0),c()},I=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=Qv(i),[l]=e.propsOptions;let c=!1;if(!(r||o>0)||16&o){let r;B_(e,t,i,s)&&(c=!0);for(const s in a)t&&(sy(t,s)||(r=wy(s))!==s&&sy(t,r))||(l?!n||void 0===n[s]&&void 0===n[r]||(i[s]=F_(l,a,s,void 0,e,!0)):delete i[s]);if(s!==a)for(const e in s)t&&sy(t,e)||(delete s[e],c=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(hw(e.emitsOptions,o))continue;const u=t[o];if(l)if(sy(s,o))u!==s[o]&&(s[o]=u,c=!0);else{const t=by(o);i[t]=F_(l,a,t,u,e,!1)}else u!==s[o]&&(s[o]=u,c=!0)}}c&&mv(e.attrs,"set","")}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=Xg;if(32&r.shapeFlag){const e=t._;e?n&&1===e?s=!1:J_(i,t,n):(s=!t.$stable,G_(t,i)),o=t}else t&&(K_(e,t),o={default:1});if(s)for(const e in i)H_(e)||null!=o[e]||delete i[e]})(e,t.children,n),rv(),Ab(e),iv()},D=(e,t,n,r,i,s,o,a,l=!1)=>{const c=e&&e.children,d=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void P(c,h,n,r,i,s,o,a,l);if(256&p)return void j(c,h,n,r,i,s,o,a,l)}8&f?(16&d&&F(c,i,s),h!==c&&u(n,h)):16&d?16&f?P(c,h,n,r,i,s,o,a,l):F(c,i,s,!0):(8&d&&u(n,""),16&f&&S(h,n,r,i,s,o,a,l))},j=(e,t,n,r,i,s,o,a,l)=>{t=t||Yg;const c=(e=e||Yg).length,u=t.length,d=Math.min(c,u);let h;for(h=0;h<d;h++){const r=t[h]=l?Pw(t[h]):jw(t[h]);m(e[h],r,n,null,i,s,o,a,l)}c>u?F(e,i,s,!0,!1,d):S(t,n,r,i,s,o,a,l,d)},P=(e,t,n,r,i,s,o,a,l)=>{let c=0;const u=t.length;let d=e.length-1,h=u-1;for(;c<=d&&c<=h;){const r=e[c],u=t[c]=l?Pw(t[c]):jw(t[c]);if(!Cw(r,u))break;m(r,u,n,null,i,s,o,a,l),c++}for(;c<=d&&c<=h;){const r=e[d],c=t[h]=l?Pw(t[h]):jw(t[h]);if(!Cw(r,c))break;m(r,c,n,null,i,s,o,a,l),d--,h--}if(c>d){if(c<=h){const e=h+1,d=e<u?t[e].el:r;for(;c<=h;)m(null,t[c]=l?Pw(t[c]):jw(t[c]),n,d,i,s,o,a,l),c++}}else if(c>h)for(;c<=d;)N(e[c],i,s,!0),c++;else{const p=c,f=c,g=new Map;for(c=f;c<=h;c++){const e=t[c]=l?Pw(t[c]):jw(t[c]);null!=e.key&&g.set(e.key,c)}let y,v=0;const b=h-f+1;let _=!1,w=0;const S=new Array(b);for(c=0;c<b;c++)S[c]=0;for(c=p;c<=d;c++){const r=e[c];if(v>=b){N(r,i,s,!0);continue}let u;if(null!=r.key)u=g.get(r.key);else for(y=f;y<=h;y++)if(0===S[y-f]&&Cw(r,t[y])){u=y;break}void 0===u?N(r,i,s,!0):(S[u-f]=c+1,u>=w?w=u:_=!0,m(r,t[u],n,null,i,s,o,a,l),v++)}const k=_?function(e){const t=e.slice(),n=[0];let r,i,s,o,a;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<l?s=a+1:o=a;l<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}(S):Yg;for(y=k.length-1,c=b-1;c>=0;c--){const e=f+c,d=t[e],h=e+1<u?t[e+1].el:r;0===S[c]?m(null,d,n,h,i,s,o,a,l):_&&(y<0||c!==k[y]?L(d,n,h,2):y--)}}},L=(e,t,n,s,o=null)=>{const{el:a,type:l,transition:c,children:u,shapeFlag:d}=e;if(6&d)L(e.component.subTree,t,n,s);else if(128&d)e.suspense.move(t,n,s);else if(64&d)l.move(e,t,n,H);else if(l!==vw)if(l!==ww)if(2!==s&&1&d&&c)if(0===s)c.beforeEnter(a),r(a,t,n),X_(()=>c.enter(a),o);else{const{leave:s,delayLeave:o,afterLeave:l}=c,u=()=>{e.ctx.isUnmounted?i(a):r(a,t,n)},d=()=>{s(a,()=>{u(),l&&l()})};o?o(a,u,d):d()}else r(a,t,n);else(({el:e,anchor:t},n,i)=>{let s;for(;e&&e!==t;)s=h(e),r(e,n,i),e=s;r(t,n,i)})(e,t,n);else{r(a,t,n);for(let e=0;e<u.length;e++)L(u[e],t,n,s);r(e.anchor,t,n)}},N=(e,t,n,r=!1,i=!1)=>{const{type:s,props:o,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h,cacheIndex:p}=e;if(-2===d&&(i=!1),null!=a&&(rv(),Jb(a,null,n,e,!0),iv()),null!=p&&(t.renderCache[p]=void 0),256&u)return void t.ctx.deactivate(e);const f=1&u&&h,m=!Xb(e);let g;if(m&&(g=o&&o.onVnodeBeforeUnmount)&&Nw(g,t,e),6&u)B(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);f&&Hb(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,H,r):c&&!c.hasOnce&&(s!==vw||d>0&&64&d)?F(c,t,n,!1,!0):(s===vw&&384&d||!i&&16&u)&&F(l,t,n),r&&R(e)}(m&&(g=o&&o.onVnodeUnmounted)||f)&&X_(()=>{g&&Nw(g,t,e),f&&Hb(e,null,t,"unmounted")},n)},R=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===vw)return void U(n,r);if(t===ww)return void(({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),i(e),e=n;i(t)})(e);const o=()=>{i(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,i=()=>t(n,o);r?r(e.el,o,i):i()}else o()},U=(e,t)=>{let n;for(;e!==t;)n=h(e),i(e),e=n;i(t)},B=(e,t,n)=>{const{bum:r,scope:i,job:s,subTree:o,um:a,m:l,a:c,parent:u,slots:{__:d}}=e;var h;nw(l),nw(c),r&&xy(r),u&&oy(d)&&d.forEach(e=>{u.renderCache[e]=void 0}),i.stop(),s&&(s.flags|=8,N(o,e,t,n)),a&&X_(a,t),X_(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve()),__VUE_PROD_DEVTOOLS__&&(h=e,Db&&"function"==typeof Db.cleanupBuffer&&!Db.cleanupBuffer(h)&&Bb(h))},F=(e,t,n,r=!1,i=!1,s=0)=>{for(let o=s;o<e.length;o++)N(e[o],t,n,r,i)},z=e=>{if(6&e.shapeFlag)return z(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=h(e.anchor||e.el),n=t&&t[Vb];return n?h(n):t};let $=!1;const q=(e,t,n)=>{null==e?t._vnode&&N(t._vnode,null,null,!0):m(t._vnode||null,e,t,null,null,null,n),t._vnode=e,$||($=!0,Ab(),Ob(),$=!1)},H={p:m,um:N,m:L,r:R,mt:A,mc:S,pc:D,pbc:T,n:z,o:e};let V,W;return t&&([V,W]=t(H)),{render:q,hydrate:V,createApp:j_(q,V)}}function Q_({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Z_({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ew(e,t,n=!1){const r=e.children,i=t.children;if(oy(r)&&oy(i))for(let e=0;e<r.length;e++){const t=r[e];let s=i[e];1&s.shapeFlag&&!s.dynamicChildren&&((s.patchFlag<=0||32===s.patchFlag)&&(s=i[e]=Pw(i[e]),s.el=t.el),n||-2===s.patchFlag||ew(t,s)),s.type===bw&&(s.el=t.el),s.type!==_w||s.el||(s.el=t.el)}}function tw(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tw(t)}function nw(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const rw=Symbol.for("v-scx"),iw=()=>L_(rw);function sw(e,t,n){return ow(e,t,n)}function ow(e,t,n=Xg){const{immediate:r,deep:i,flush:s,once:o}=n,a=ny({},n),l=t&&r||!t&&"post"!==s;let c;if(Gw)if("sync"===s){const e=iw();c=e.__watcherHandles||(e.__watcherHandles=[])}else if(!l){const e=()=>{};return e.stop=Qg,e.resume=Qg,e.pause=Qg,e}const u=Bw;a.call=(e,t,n)=>gb(e,u,t,n);let d=!1;"post"===s?a.scheduler=e=>{X_(e,u&&u.suspense)}:"sync"!==s&&(d=!0,a.scheduler=(e,t)=>{t?e():Eb(e)}),a.augmentJob=e=>{t&&(e.flags|=4),d&&(e.flags|=2,u&&(e.id=u.uid,e.i=u))};const h=function(e,t,n=Xg){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=e=>i?e:Xv(e)||!1===i||0===i?fb(e,1):fb(e);let u,d,h,p,f=!1,m=!1;if(nb(e)?(d=()=>e.value,f=Xv(e)):Kv(e)?(d=()=>c(e),f=!0):oy(e)?(m=!0,f=e.some(e=>Kv(e)||Xv(e)),d=()=>e.map(e=>nb(e)?e.value:Kv(e)?c(e):ly(e)?l?l(e,2):e():void 0)):d=ly(e)?t?l?()=>l(e,2):e:()=>{if(h){rv();try{h()}finally{iv()}}const t=pb;pb=u;try{return l?l(e,3,[p]):e(p)}finally{pb=t}}:Qg,t&&i){const e=d,t=!0===i?1/0:i;d=()=>fb(e(),t)}const g=Uy,y=()=>{u.stop(),g&&g.active&&ry(g.effects,u)};if(s&&t){const e=t;t=(...t)=>{e(...t),y()}}let v=m?new Array(e.length).fill(db):db;const b=e=>{if(1&u.flags&&(u.dirty||e))if(t){const e=u.run();if(i||f||(m?e.some((e,t)=>Ty(e,v[t])):Ty(e,v))){h&&h();const n=pb;pb=u;try{const n=[e,v===db?void 0:m&&v[0]===db?[]:v,p];v=e,l?l(t,3,n):t(...n)}finally{pb=n}}}else u.run()};return a&&a(b),u=new $y(d),u.scheduler=o?()=>o(b,!1):b,p=e=>function(e,t=!1,n=pb){if(n){let t=hb.get(n);t||hb.set(n,t=[]),t.push(e)}}(e,!1,u),h=u.onStop=()=>{const e=hb.get(u);if(e){if(l)l(e,4);else for(const t of e)t();hb.delete(u)}},t?r?b(!0):v=u.run():o?o(b.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}(e,t,a);return Gw&&(c?c.push(h):l&&h()),h}function aw(e,t,n){const r=this.proxy,i=cy(e)?e.includes(".")?lw(r,e):()=>r[e]:e.bind(r,r);let s;ly(t)?s=t:(s=t.handler,n=t);const o=$w(this),a=ow(i,s.bind(r),n);return o(),a}function lw(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const cw=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${by(t)}Modifiers`]||e[`${wy(t)}Modifiers`];function uw(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Xg;let i=n;const s=t.startsWith("update:"),o=s&&cw(r,t.slice(7));let a;o&&(o.trim&&(i=n.map(e=>cy(e)?e.trim():e)),o.number&&(i=n.map(Cy))),__VUE_PROD_DEVTOOLS__&&function(e,t,n){Lb("component:emit",e.appContext.app,e,t,n)}(e,t,i);let l=r[a=ky(t)]||r[a=ky(by(t))];!l&&s&&(l=r[a=ky(wy(t))]),l&&gb(l,e,6,i);const c=r[a+"Once"];if(c){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0,gb(c,e,6,i)}}function dw(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const s=e.emits;let o={},a=!1;if(__VUE_OPTIONS_API__&&!ly(e)){const r=e=>{const n=dw(e,t,!0);n&&(a=!0,ny(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return s||a?(oy(s)?s.forEach(e=>o[e]=null):ny(o,s),dy(e)&&r.set(e,o),o):(dy(e)&&r.set(e,null),null)}function hw(e,t){return!(!e||!ey(t))&&(t=t.slice(2).replace(/Once$/,""),sy(e,t[0].toLowerCase()+t.slice(1))||sy(e,wy(t))||sy(e,t))}function pw(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:p,ctx:f,inheritAttrs:m}=e,g=qb(e);let y,v;try{if(4&n.shapeFlag){const e=i||r,t=e;y=jw(c.call(t,e,u,d,p,h,f)),v=a}else{const e=t;y=jw(e.length>1?e(d,{attrs:a,slots:o,emit:l}):e(d,null)),v=t.props?a:fw(a)}}catch(t){Sw.length=0,yb(t,e,1),y=Mw(_w)}let b=y;if(v&&!1!==m){const e=Object.keys(v),{shapeFlag:t}=b;e.length&&7&t&&(s&&e.some(ty)&&(v=mw(v,s)),b=Iw(b,v,!1,!0))}return n.dirs&&(b=Iw(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&Wb(b,n.transition),y=b,qb(g),y}const fw=e=>{let t;for(const n in e)("class"===n||"style"===n||ey(n))&&((t||(t={}))[n]=e[n]);return t},mw=(e,t)=>{const n={};for(const r in e)ty(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function gw(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!hw(n,s))return!0}return!1}const yw=e=>e.__isSuspense;const vw=Symbol.for("v-fgt"),bw=Symbol.for("v-txt"),_w=Symbol.for("v-cmt"),ww=Symbol.for("v-stc"),Sw=[];let kw=null,Tw=1;function xw(e,t=!1){Tw+=e,e<0&&kw&&t&&(kw.hasOnce=!0)}function Ew(e){return!!e&&!0===e.__v_isVNode}function Cw(e,t){return e.type===t.type&&e.key===t.key}const Aw=({key:e})=>null!=e?e:null,Ow=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?cy(e)||nb(e)||ly(e)?{i:zb,r:e,k:t,f:!!n}:e:null);const Mw=function(e,t=null,n=null,r=0,i=null,s=!1){if(e&&e!==f_||(e=_w),Ew(e)){const r=Iw(e,t,!0);return n&&Lw(r,n),Tw>0&&!s&&kw&&(6&r.shapeFlag?kw[kw.indexOf(e)]=r:kw.push(r)),r.patchFlag=-2,r}if(function(e){return ly(e)&&"__vccOpts"in e}(e)&&(e=e.__vccOpts),t){t=function(e){return e?Yv(e)||U_(e)?ny({},e):e:null}(t);let{class:e,style:n}=t;e&&!cy(e)&&(t.class=Ly(e)),dy(n)&&(Yv(n)&&!oy(n)&&(n=ny({},n)),t.style=My(n))}return function(e,t=null,n=null,r=0,i=null,s=(e===vw?0:1),o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Aw(t),ref:t&&Ow(t),scopeId:$b,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:zb};return a?(Lw(l,n),128&s&&e.normalize(l)):n&&(l.shapeFlag|=cy(n)?8:16),Tw>0&&!o&&kw&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&kw.push(l),l}(e,t,n,r,i,cy(e)?1:yw(e)?128:(e=>e.__isTeleport)(e)?64:dy(e)?4:ly(e)?2:0,s,!0)};function Iw(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=e,c=t?function(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=Ly([t.class,r.class]));else if("style"===e)t.style=My([t.style,r.style]);else if(ey(e)){const n=t[e],i=r[e];!i||n===i||oy(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Aw(c),ref:t&&t.ref?n&&s?oy(s)?s.concat(Ow(t)):[s,Ow(t)]:Ow(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==vw?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Iw(e.ssContent),ssFallback:e.ssFallback&&Iw(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Wb(u,l.clone(u)),u}function Dw(e=" ",t=0){return Mw(bw,null,e,t)}function jw(e){return null==e||"boolean"==typeof e?Mw(_w):oy(e)?Mw(vw,null,e.slice()):Ew(e)?Pw(e):Mw(bw,null,String(e))}function Pw(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Iw(e)}function Lw(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(oy(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),Lw(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||U_(t)?3===r&&zb&&(1===zb.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=zb}}else ly(t)?(t={default:t,_ctx:zb},n=32):(t=String(t),64&r?(n=16,t=[Dw(t)]):n=8);e.children=t,e.shapeFlag|=n}function Nw(e,t,n,r=null){gb(e,t,7,[n,r])}const Rw=I_();let Uw=0;let Bw=null;let Fw,zw;{const e=Oy(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};Fw=t("__VUE_INSTANCE_SETTERS__",e=>Bw=e),zw=t("__VUE_SSR_SETTERS__",e=>Gw=e)}const $w=e=>{const t=Bw;return Fw(e),e.scope.on(),()=>{e.scope.off(),Fw(t)}},qw=()=>{Bw&&Bw.scope.off(),Fw(null)};function Hw(e){return 4&e.vnode.shapeFlag}let Vw,Ww,Gw=!1;function Kw(e,t,n){ly(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:dy(t)&&(__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t),e.setupState=lb(t)),Jw(e,n)}function Jw(e,t,n){const r=e.type;if(!e.render){if(!t&&Vw&&!r.render){const t=r.template||__VUE_OPTIONS_API__&&k_(e).template;if(t){const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:s,compilerOptions:o}=r,a=ny(ny({isCustomElement:n,delimiters:s},i),o);r.render=Vw(t,a)}}e.render=r.render||Qg,Ww&&Ww(e)}if(__VUE_OPTIONS_API__){const t=$w(e);rv();try{!function(e){const t=k_(e),n=e.proxy,r=e.ctx;__=!1,t.beforeCreate&&w_(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:f,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:v,destroyed:b,unmounted:_,render:w,renderTracked:S,renderTriggered:k,errorCaptured:T,serverPrefetch:x,expose:E,inheritAttrs:C,components:A,directives:O,filters:M}=t;if(c&&function(e,t){oy(e)&&(e=C_(e));for(const n in e){const r=e[n];let i;i=dy(r)?"default"in r?L_(r.from||n,r.default,!0):L_(r.from||n):L_(r),nb(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}(c,r),o)for(const e in o){const t=o[e];ly(t)&&(r[e]=t.bind(n))}if(i){const t=i.call(n,n);dy(t)&&(e.data=Vv(t))}if(__=!0,s)for(const e in s){const t=s[e],i=ly(t)?t.bind(n,n):ly(t.get)?t.get.bind(n,n):Qg,o=!ly(t)&&ly(t.set)?t.set.bind(n):Qg,a=Qw({get:i,set:o});Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(a)for(const e in a)S_(a[e],r,n,e);if(l){const e=ly(l)?l.call(n):l;Reflect.ownKeys(e).forEach(t=>{!function(e,t){if(Bw){let n=Bw.provides;const r=Bw.parent&&Bw.parent.provides;r===n&&(n=Bw.provides=Object.create(r)),n[e]=t}}(t,e[t])})}function I(e,t){oy(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(u&&w_(u,e,"c"),I(i_,d),I(s_,h),I(o_,p),I(a_,f),I(Qb,m),I(Zb,g),I(p_,T),I(h_,S),I(d_,k),I(l_,v),I(c_,_),I(u_,x),oy(E))if(E.length){const t=e.exposed||(e.exposed={});E.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={});w&&e.render===Qg&&(e.render=w),null!=C&&(e.inheritAttrs=C),A&&(e.components=A),O&&(e.directives=O),x&&Kb(e)}(e)}finally{iv(),t()}}}const Xw={get:(e,t)=>(fv(e,0,""),e[t])};function Yw(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(lb(Zv(e.exposed)),{get:(t,n)=>n in t?t[n]:n in g_?g_[n](e):void 0,has:(e,t)=>t in e||t in g_})):e.proxy}const Qw=(e,t)=>{const n=function(e,t,n=!1){let r,i;return ly(e)?r=e:(r=e.get,i=e.set),new ub(r,i,n)}(e,0,Gw);return n};function Zw(e,t,n){const r=arguments.length;return 2===r?dy(t)&&!oy(t)?Ew(t)?Mw(e,null,[t]):Mw(e,t):Mw(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Ew(n)&&(n=[n]),Mw(e,t,n))}const eS="3.5.17";let tS;const nS="undefined"!=typeof window&&window.trustedTypes;if(nS)try{tS=nS.createPolicy("vue",{createHTML:e=>e})}catch(e){}const rS=tS?e=>tS.createHTML(e):e=>e,iS="undefined"!=typeof document?document:null,sS=iS&&iS.createElement("template"),oS={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i="svg"===t?iS.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?iS.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?iS.createElement(e,{is:n}):iS.createElement(e);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>iS.createTextNode(e),createComment:e=>iS.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>iS.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==s&&(i=i.nextSibling););else{sS.innerHTML=rS("svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e);const i=sS.content;if("svg"===r||"mathml"===r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},aS=Symbol("_vtc");Boolean;const lS=Symbol("_vod"),cS=Symbol("_vsh"),uS=Symbol(""),dS=/(^|;)\s*display\s*:/,hS=/\s*!important$/;function pS(e,t,n){if(oy(n))n.forEach(n=>pS(e,t,n));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=mS[t];if(n)return n;let r=by(t);if("filter"!==r&&r in e)return mS[t]=r;r=Sy(r);for(let n=0;n<fS.length;n++){const i=fS[n]+r;if(i in e)return mS[t]=i}return t}(e,t);hS.test(n)?e.setProperty(wy(r),n.replace(hS,""),"important"):e[r]=n}}const fS=["Webkit","Moz","ms"],mS={},gS="http://www.w3.org/1999/xlink";function yS(e,t,n,r,i,s=Ny(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(gS,t.slice(6,t.length)):e.setAttributeNS(gS,t,n):null==n||s&&!Ry(n)?e.removeAttribute(t):e.setAttribute(t,s?"":uy(n)?String(n):n)}function vS(e,t,n,r,i){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?rS(n):n));const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){const r="OPTION"===s?e.getAttribute("value")||"":e.value,i=null==n?"checkbox"===e.type?"on":"":String(n);return r===i&&"_value"in e||(e.value=i),null==n&&e.removeAttribute(t),void(e._value=n)}let o=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=Ry(n):null==n&&"string"===r?(n="",o=!0):"number"===r&&(n=0,o=!0)}try{e[t]=n}catch(e){}o&&e.removeAttribute(i||t)}const bS=Symbol("_vei");const _S=/(?:Once|Passive|Capture)$/;let wS=0;const SS=Promise.resolve(),kS=()=>wS||(SS.then(()=>wS=0),wS=Date.now()),TS=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;"undefined"!=typeof HTMLElement&&HTMLElement,Symbol("_moveCb"),Symbol("_enterCb"),Symbol("_assign");const xS=ny({patchProp:(e,t,n,r,i,s)=>{const o="svg"===i;"class"===t?function(e,t,n){const r=e[aS];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,o):"style"===t?function(e,t,n){const r=e.style,i=cy(n);let s=!1;if(n&&!i){if(t)if(cy(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&pS(r,t,"")}else for(const e in t)null==n[e]&&pS(r,e,"");for(const e in n)"display"===e&&(s=!0),pS(r,e,n[e])}else if(i){if(t!==n){const e=r[uS];e&&(n+=";"+e),r.cssText=n,s=dS.test(n)}}else t&&e.removeAttribute("style");lS in e&&(e[lS]=s?r.display:"",e[cS]&&(r.display="none"))}(e,n,r):ey(t)?ty(t)||function(e,t,n,r,i=null){const s=e[bS]||(e[bS]={}),o=s[t];if(r&&o)o.value=r;else{const[n,a]=function(e){let t;if(_S.test(e)){let n;for(t={};n=e.match(_S);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):wy(e.slice(2)),t]}(t);if(r){const o=s[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();gb(function(e,t){if(oy(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=kS(),n}(r,i);!function(e,t,n,r){e.addEventListener(t,n,r)}(e,n,o,a)}else o&&(function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,o,a),s[t]=void 0)}}(e,t,0,r,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&TS(t)&&ly(n));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!TS(t)||!cy(n))&&t in e}(e,t,r,o))?(vS(e,t,r),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||yS(e,t,r,o,0,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&cy(r)?("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),yS(e,t,r,o)):vS(e,by(t),r,0,t)}},oS);let ES;const CS=(...e)=>{(ES||(ES=Y_(xS))).render(...e)};function AS(e){return t=(t,n)=>({get:()=>(t(),e),set(t){e=t,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}),new cb(t);var t}var OS=class extends Fg{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=AS(this.view.state),this.reactiveExtensionStorage=AS(this.extensionStorage),this.on("beforeTransaction",({nextState:e})=>{this.reactiveState.value=e,this.reactiveExtensionStorage.value=this.extensionStorage}),Zv(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){const n=super.registerPlugin(e,t);return this.reactiveState&&(this.reactiveState.value=n),n}unregisterPlugin(e){const t=super.unregisterPlugin(e);return this.reactiveState&&t&&(this.reactiveState.value=t),t}},MS=Gb({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=rb(),n=Bw||zb;return ow(()=>{const r=e.editor;r&&r.options.element&&t.value&&xb(()=>{var e;if(!t.value||!(null==(e=r.options.element)?void 0:e.firstChild))return;const i=ob(t.value);t.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:i}),r.createNodeViews()})},null,void 0),l_(()=>{const t=e.editor;t&&(t.contentComponent=null,t.appContext=null)}),{rootEl:t}},render(){return Zw("div",{ref:e=>{this.rootEl=e}})}}),IS=(Gb({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return Zw(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),Gb({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var e,t;return Zw(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},null==(t=(e=this.$slots).default)?void 0:t.call(e))}}),class{constructor(e,{props:t={},editor:n}){this.editor=n,this.component=Zv(e),this.el=document.createElement("div"),this.props=Vv(t),this.renderedComponent=this.renderComponent()}get element(){return this.renderedComponent.el}get ref(){var e,t,n,r;return(null==(t=null==(e=this.renderedComponent.vNode)?void 0:e.component)?void 0:t.exposed)?this.renderedComponent.vNode.component.exposed:null==(r=null==(n=this.renderedComponent.vNode)?void 0:n.component)?void 0:r.proxy}renderComponent(){let e=Zw(this.component,this.props);return this.editor.appContext&&(e.appContext=this.editor.appContext),"undefined"!=typeof document&&this.el&&CS(e,this.el),{vNode:e,destroy:()=>{this.el&&CS(null,this.el),this.el=null,e=null},el:this.el?this.el.firstElementChild:null}}updateProps(e={}){Object.entries(e).forEach(([e,t])=>{this.props[e]=t}),this.renderComponent()}destroy(){this.renderedComponent.destroy()}});Boolean,Gb({name:"MarkViewContent",props:{as:{type:String,default:"span"}},render(){return Zw(this.as,{style:{whiteSpace:"inherit"},"data-mark-view-content":""})}}),Boolean;var DS=(e,t)=>{if("slot"===e)return 0;if(e instanceof Function)return e(t);const{children:n,...r}=null!=t?t:{};if("svg"===e)throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},jS=/^\s*>\s$/,PS=Wg.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return DS("blockquote",{...Ef(this.options.HTMLAttributes,e),children:DS("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Vg({find:jS,type:this.type})]}}),LS=PS,NS=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,RS=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,US=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,BS=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,FS=hm.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return DS("strong",{...Ef(this.options.HTMLAttributes,e),children:DS("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[zg({find:NS,type:this.type}),zg({find:US,type:this.type})]},addPasteRules(){return[Gg({find:RS,type:this.type}),Gg({find:BS,type:this.type})]}}),zS=FS,$S=/(^|[^`])`([^`]+)`(?!`)/,qS=/(^|[^`])`([^`]+)`(?!`)/g,HS=hm.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[zg({find:$S,type:this.type})]},addPasteRules(){return[Gg({find:qS,type:this.type})]}}),VS=HS,WS=/^```([a-z]+)?[\s\n]$/,GS=/^~~~([a-z]+)?[\s\n]$/,KS=Wg.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;return[...(null==(t=e.firstElementChild)?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",Ef(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith("\n\n");return!(!s||!o)&&e.chain().command(({tr:e})=>(e.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type)return!1;if(i.parentOffset!==i.parent.nodeSize-2)return!1;const o=i.after();return void 0!==o&&(r.nodeAt(o)?e.commands.command(({tr:e})=>(e.setSelection(Hc.near(r.resolve(o))),!0)):e.commands.exitCode())}}},addInputRules(){return[qg({find:WS,type:this.type,getAttributes:e=>({language:e[1]})}),qg({find:GS,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new cu({key:new hu("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=null==i?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,"\n"));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Kc.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),JS=KS,XS=Wg.create({name:"doc",topNode:!0,content:"block+"}),YS=XS,QS=Wg.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",Ef(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:e,storedMarks:i}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=r.extensionManager,a=i||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&a&&s){const t=a.filter(e=>o.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ZS=QS,ek=Wg.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ef(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>qg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),tk=ek,nk=Wg.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",Ef(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!function(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Xc){const e=r.index();return r.parent.canReplaceWith(e,e+1,t)}let i=r.depth;for(;i>=0;){const e=r.index(i);if(r.node(i).contentMatchAt(e).matchType(t))return!0;i-=1}return!1}(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return tm(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:e,dispatch:t})=>{var n;if(t){const{$to:t}=e.selection,r=t.end();if(t.nodeAfter)t.nodeAfter.isTextblock?e.setSelection(Kc.create(e.doc,t.pos+1)):t.nodeAfter.isBlock?e.setSelection(Xc.create(e.doc,t.pos)):e.setSelection(Kc.create(e.doc,t.pos));else{const i=null==(n=t.parent.type.contentMatch.defaultType)?void 0:n.create();i&&(e.insert(r,i),e.setSelection(Kc.create(e.doc,r+1)))}e.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$g({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rk=nk,ik=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,sk=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ok=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ak=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,lk=hm.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[zg({find:ik,type:this.type}),zg({find:ok,type:this.type})]},addPasteRules(){return[Gg({find:sk,type:this.type}),Gg({find:ak,type:this.type})]}}),ck=lk;const uk=(e,t)=>{for(const n in t)e[n]=t[n];return e},dk="numeric",hk="ascii",pk="alpha",fk="asciinumeric",mk="alphanumeric",gk="domain",yk="emoji",vk="scheme",bk="slashscheme",_k="whitespace";function wk(e,t){return e in t||(t[e]=[]),t[e]}function Sk(e,t,n){t[dk]&&(t[fk]=!0,t[mk]=!0),t[hk]&&(t[fk]=!0,t[pk]=!0),t[fk]&&(t[mk]=!0),t[pk]&&(t[mk]=!0),t[mk]&&(t[gk]=!0),t[yk]&&(t[gk]=!0);for(const r in t){const t=wk(r,n);t.indexOf(e)<0&&t.push(e)}}function kk(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}kk.groups={},kk.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let n=0;n<t.jr.length;n++){const r=t.jr[n][0],i=t.jr[n][1];if(i&&r.test(e))return i}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){let i;return r=r||kk.groups,t&&t.j?i=t:(i=new kk(t),n&&r&&Sk(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let t=0;t<s-1;t++)i=i.tt(e[t]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||kk.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,a=i.go(e);if(a?(o=new kk,uk(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new kk,s){if(r)if(o.t&&"string"==typeof o.t){const e=uk(function(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(o.t,r),n);Sk(s,e,r)}else n&&Sk(s,n,r);o.t=s}return i.j[e]=o,o}};const Tk=(e,t,n,r,i)=>e.ta(t,n,r,i),xk=(e,t,n,r,i)=>e.tr(t,n,r,i),Ek=(e,t,n,r,i)=>e.ts(t,n,r,i),Ck=(e,t,n,r,i)=>e.tt(t,n,r,i),Ak="WORD",Ok="UWORD",Mk="ASCIINUMERICAL",Ik="ALPHANUMERICAL",Dk="LOCALHOST",jk="TLD",Pk="UTLD",Lk="SCHEME",Nk="SLASH_SCHEME",Rk="NUM",Uk="WS",Bk="NL",Fk="OPENBRACE",zk="CLOSEBRACE",$k="OPENBRACKET",qk="CLOSEBRACKET",Hk="OPENPAREN",Vk="CLOSEPAREN",Wk="OPENANGLEBRACKET",Gk="CLOSEANGLEBRACKET",Kk="FULLWIDTHLEFTPAREN",Jk="FULLWIDTHRIGHTPAREN",Xk="LEFTCORNERBRACKET",Yk="RIGHTCORNERBRACKET",Qk="LEFTWHITECORNERBRACKET",Zk="RIGHTWHITECORNERBRACKET",eT="FULLWIDTHLESSTHAN",tT="FULLWIDTHGREATERTHAN",nT="AMPERSAND",rT="APOSTROPHE",iT="ASTERISK",sT="AT",oT="BACKSLASH",aT="BACKTICK",lT="CARET",cT="COLON",uT="COMMA",dT="DOLLAR",hT="DOT",pT="EQUALS",fT="EXCLAMATION",mT="HYPHEN",gT="PERCENT",yT="PIPE",vT="PLUS",bT="POUND",_T="QUERY",wT="QUOTE",ST="FULLWIDTHMIDDLEDOT",kT="SEMI",TT="SLASH",xT="TILDE",ET="UNDERSCORE",CT="EMOJI",AT="SYM";var OT=Object.freeze({__proto__:null,ALPHANUMERICAL:Ik,AMPERSAND:nT,APOSTROPHE:rT,ASCIINUMERICAL:Mk,ASTERISK:iT,AT:sT,BACKSLASH:oT,BACKTICK:aT,CARET:lT,CLOSEANGLEBRACKET:Gk,CLOSEBRACE:zk,CLOSEBRACKET:qk,CLOSEPAREN:Vk,COLON:cT,COMMA:uT,DOLLAR:dT,DOT:hT,EMOJI:CT,EQUALS:pT,EXCLAMATION:fT,FULLWIDTHGREATERTHAN:tT,FULLWIDTHLEFTPAREN:Kk,FULLWIDTHLESSTHAN:eT,FULLWIDTHMIDDLEDOT:ST,FULLWIDTHRIGHTPAREN:Jk,HYPHEN:mT,LEFTCORNERBRACKET:Xk,LEFTWHITECORNERBRACKET:Qk,LOCALHOST:Dk,NL:Bk,NUM:Rk,OPENANGLEBRACKET:Wk,OPENBRACE:Fk,OPENBRACKET:$k,OPENPAREN:Hk,PERCENT:gT,PIPE:yT,PLUS:vT,POUND:bT,QUERY:_T,QUOTE:wT,RIGHTCORNERBRACKET:Yk,RIGHTWHITECORNERBRACKET:Zk,SCHEME:Lk,SEMI:kT,SLASH:TT,SLASH_SCHEME:Nk,SYM:AT,TILDE:xT,TLD:jk,UNDERSCORE:ET,UTLD:Pk,UWORD:Ok,WORD:Ak,WS:Uk});const MT=/[a-z]/,IT=/\p{L}/u,DT=/\p{Emoji}/u,jT=/\d/,PT=/\s/;let LT=null,NT=null;function RT(e,t){const n=function(e){const t=[],n=e.length;let r=0;for(;r<n;){let i,s=e.charCodeAt(r),o=s<55296||s>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=e,l=null,c=0,u=null,d=-1,h=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=n[o].length,h++),c+=n[o].length,s+=n[o].length,o++;s-=d,o-=h,c-=d,i.push({t:u.t,v:t.slice(s-c,s),s:s-c,e:s})}return i}function UT(e,t,n,r,i){let s;const o=t.length;for(let n=0;n<o-1;n++){const o=t[n];e.j[o]?s=e.j[o]:(s=new kk(r),s.jr=i.slice(),e.j[o]=s),e=s}return s=new kk(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function BT(e){const t=[],n=[];let r=0;for(;r<e.length;){let i=0;for(;"0123456789".indexOf(e[r+i])>=0;)i++;if(i>0){t.push(n.join(""));for(let t=parseInt(e.substring(r,r+i),10);t>0;t--)n.pop();r+=i}else n.push(e[r]),r++}return t}const FT={defaultProtocol:"http",events:null,format:$T,formatHref:$T,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function zT(e,t=null){let n=uk({},FT);e&&(n=uk(n,e instanceof zT?e.o:e));const r=n.ignoreTags,i=[];for(let e=0;e<r.length;e++)i.push(r[e].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}function $T(e){return e}function qT(e,t){this.t="token",this.v=e,this.tk=t}function HT(e,t){class n extends qT{constructor(t,n){super(t,n),this.t=e}}for(const e in t)n.prototype[e]=t[e];return n.t=e,n}zT.prototype={o:FT,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=null!=t;let i=this.o[e];return i?("object"==typeof i?(i=n.t in i?i[n.t]:FT[e],"function"==typeof i&&r&&(i=i(t,n))):"function"==typeof i&&r&&(i=i(t,n.t,n)),i):i},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},qT.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=FT.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&uk(o,u),{tagName:i,attributes:o,content:s,eventListeners:d}}};const VT=HT("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),WT=HT("text"),GT=HT("nl"),KT=HT("url",{isLink:!0,toHref(e=FT.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Dk&&e[1].t===cT}}),JT=e=>new kk(e);function XT(e,t,n){const r=n[0].s,i=n[n.length-1].e;return new e(t.slice(r,i),n)}const YT="undefined"!=typeof console&&console&&console.warn||(()=>{}),QT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ZT(e,t=!1){if(QT.initialized&&YT(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');QT.customSchemes.push([e,t])}function ex(e){return QT.initialized||function(){QT.scanner=function(e=[]){const t={};kk.groups=t;const n=new kk;null==LT&&(LT=BT("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==NT&&(NT=BT("121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222")),Ck(n,"'",rT),Ck(n,"{",Fk),Ck(n,"}",zk),Ck(n,"[",$k),Ck(n,"]",qk),Ck(n,"(",Hk),Ck(n,")",Vk),Ck(n,"<",Wk),Ck(n,">",Gk),Ck(n,"",Kk),Ck(n,"",Jk),Ck(n,"",Xk),Ck(n,"",Yk),Ck(n,"",Qk),Ck(n,"",Zk),Ck(n,"",eT),Ck(n,"",tT),Ck(n,"&",nT),Ck(n,"*",iT),Ck(n,"@",sT),Ck(n,"`",aT),Ck(n,"^",lT),Ck(n,":",cT),Ck(n,",",uT),Ck(n,"$",dT),Ck(n,".",hT),Ck(n,"=",pT),Ck(n,"!",fT),Ck(n,"-",mT),Ck(n,"%",gT),Ck(n,"|",yT),Ck(n,"+",vT),Ck(n,"#",bT),Ck(n,"?",_T),Ck(n,'"',wT),Ck(n,"/",TT),Ck(n,";",kT),Ck(n,"~",xT),Ck(n,"_",ET),Ck(n,"\\",oT),Ck(n,"",ST);const r=xk(n,jT,Rk,{[dk]:!0});xk(r,jT,r);const i=xk(r,MT,Mk,{[fk]:!0}),s=xk(r,IT,Ik,{[mk]:!0}),o=xk(n,MT,Ak,{[hk]:!0});xk(o,jT,i),xk(o,MT,o),xk(i,jT,i),xk(i,MT,i);const a=xk(n,IT,Ok,{[pk]:!0});xk(a,MT),xk(a,jT,s),xk(a,IT,a),xk(s,jT,s),xk(s,MT),xk(s,IT,s);const l=Ck(n,"\n",Bk,{[_k]:!0}),c=Ck(n,"\r",Uk,{[_k]:!0}),u=xk(n,PT,Uk,{[_k]:!0});Ck(n,"",u),Ck(c,"\n",l),Ck(c,"",u),xk(c,PT,u),Ck(u,"\r"),Ck(u,"\n"),xk(u,PT,u),Ck(u,"",u);const d=xk(n,DT,CT,{[yk]:!0});Ck(d,"#"),xk(d,DT,d),Ck(d,"",d);const h=Ck(d,"");Ck(h,"#"),xk(h,DT,d);const p=[[MT,o],[jT,i]],f=[[MT,null],[IT,a],[jT,s]];for(let e=0;e<LT.length;e++)UT(n,LT[e],jk,Ak,p);for(let e=0;e<NT.length;e++)UT(n,NT[e],Pk,Ok,f);Sk(jk,{tld:!0,ascii:!0},t),Sk(Pk,{utld:!0,alpha:!0},t),UT(n,"file",Lk,Ak,p),UT(n,"mailto",Lk,Ak,p),UT(n,"http",Nk,Ak,p),UT(n,"https",Nk,Ak,p),UT(n,"ftp",Nk,Ak,p),UT(n,"ftps",Nk,Ak,p),Sk(Lk,{scheme:!0,ascii:!0},t),Sk(Nk,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let t=0;t<e.length;t++){const r=e[t][0],i=e[t][1]?{[vk]:!0}:{[bk]:!0};r.indexOf("-")>=0?i[gk]=!0:MT.test(r)?jT.test(r)?i[fk]=!0:i[hk]=!0:i[dk]=!0,Ek(n,r,r,i)}return Ek(n,"localhost",Dk,{ascii:!0}),n.jd=new kk(AT),{start:n,tokens:uk({groups:t},OT)}}(QT.customSchemes);for(let e=0;e<QT.tokenQueue.length;e++)QT.tokenQueue[e][1]({scanner:QT.scanner});QT.parser=function({groups:e}){const t=e.domain.concat([nT,iT,sT,oT,aT,lT,dT,pT,mT,Rk,gT,yT,vT,bT,TT,AT,xT,ET]),n=[rT,cT,uT,hT,fT,gT,_T,wT,kT,Wk,Gk,Fk,zk,qk,$k,Hk,Vk,Kk,Jk,Xk,Yk,Qk,Zk,eT,tT],r=[nT,rT,iT,oT,aT,lT,dT,pT,mT,Fk,zk,gT,yT,vT,bT,_T,TT,AT,xT,ET],i=JT(),s=Ck(i,xT);Tk(s,r,s),Tk(s,e.domain,s);const o=JT(),a=JT(),l=JT();Tk(i,e.domain,o),Tk(i,e.scheme,a),Tk(i,e.slashscheme,l),Tk(o,r,s),Tk(o,e.domain,o);const c=Ck(o,sT);Ck(s,sT,c),Ck(a,sT,c),Ck(l,sT,c);const u=Ck(s,hT);Tk(u,r,s),Tk(u,e.domain,s);const d=JT();Tk(c,e.domain,d),Tk(d,e.domain,d);const h=Ck(d,hT);Tk(h,e.domain,d);const p=JT(VT);Tk(h,e.tld,p),Tk(h,e.utld,p),Ck(c,Dk,p);const f=Ck(d,mT);Ck(f,mT,f),Tk(f,e.domain,d),Tk(p,e.domain,d),Ck(p,hT,h),Ck(p,mT,f);const m=Ck(p,cT);Tk(m,e.numeric,VT);const g=Ck(o,mT),y=Ck(o,hT);Ck(g,mT,g),Tk(g,e.domain,o),Tk(y,r,s),Tk(y,e.domain,o);const v=JT(KT);Tk(y,e.tld,v),Tk(y,e.utld,v),Tk(v,e.domain,o),Tk(v,r,s),Ck(v,hT,y),Ck(v,mT,g),Ck(v,sT,c);const b=Ck(v,cT),_=JT(KT);Tk(b,e.numeric,_);const w=JT(KT),S=JT();Tk(w,t,w),Tk(w,n,S),Tk(S,t,w),Tk(S,n,S),Ck(v,TT,w),Ck(_,TT,w);const k=Ck(a,cT),T=Ck(l,cT),x=Ck(T,TT),E=Ck(x,TT);Tk(a,e.domain,o),Ck(a,hT,y),Ck(a,mT,g),Tk(l,e.domain,o),Ck(l,hT,y),Ck(l,mT,g),Tk(k,e.domain,w),Ck(k,TT,w),Ck(k,_T,w),Tk(E,e.domain,w),Tk(E,t,w),Ck(E,TT,w);const C=[[Fk,zk],[$k,qk],[Hk,Vk],[Wk,Gk],[Kk,Jk],[Xk,Yk],[Qk,Zk],[eT,tT]];for(let e=0;e<C.length;e++){const[r,i]=C[e],s=Ck(w,r);Ck(S,r,s),Ck(s,i,w);const o=JT(KT);Tk(s,t,o);const a=JT();Tk(s,n),Tk(o,t,o),Tk(o,n,a),Tk(a,t,o),Tk(a,n,a),Ck(o,i,w),Ck(a,i,w)}return Ck(i,Dk,v),Ck(i,Bk,GT),{start:i,tokens:OT}}(QT.scanner.tokens);for(let e=0;e<QT.pluginQueue.length;e++)QT.pluginQueue[e][1]({scanner:QT.scanner,parser:QT.parser});QT.initialized=!0}(),function(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=e,l=null,c=null,u=0,d=null,h=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=l||a.go(n[i].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,i++,u++;if(h<0)i-=u,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(XT(WT,t,o)),o=[]),i-=h,u-=h;const e=d.t,r=n.slice(i-u,i);s.push(XT(e,t,r))}}return o.length>0&&s.push(XT(WT,t,o)),s}(QT.parser.start,e,RT(QT.scanner.start,e))}function tx(e,t=null,n=null){if(t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new zT(n),i=ex(e),s=[];for(let e=0;e<i.length;e++){const n=i[e];!n.isLink||t&&n.t!==t||!r.check(n)||s.push(n.toFormattedObject(r))}return s}ex.scan=RT;var nx="[\0- -\u2029]",rx=new RegExp(nx),ix=new RegExp(`${nx}$`),sx=new RegExp(nx,"g");function ox(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{const t="string"==typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(sx,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var ax=hm.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{"string"!=typeof e?ZT(e.scheme,e.optionalSlashes):ZT(e)})},onDestroy(){kk.groups={},QT.scanner=null,QT.parser=null,QT.tokenQueue=[],QT.pluginQueue=[],QT.customSchemes=[],QT.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!ox(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!(!t||!this.options.isAllowedUri(t,{defaultValidate:e=>!!ox(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:e=>!!ox(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ef(this.options.HTMLAttributes,e),0]:["a",Ef(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!ox(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>({chain:t})=>{const{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!ox(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Gg({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=tx(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!ox(e,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:null==(t=e.data)?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push((r={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!ox(e,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink},new cu({key:new hu("autolink"),appendTransaction:(e,t,n)=>{const i=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),s=e.some(e=>e.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=n;return zf(hf(t.doc,[...e])).forEach(({newRange:e})=>{const t=function(e,t){const n=[];return e.nodesBetween(t.from,t.to,(e,t)=>{(e=>e.isTextblock)(e)&&n.push({node:e,pos:t})}),n}(n.doc,e);let i,s;if(t.length>1)i=t[0],s=n.doc.textBetween(i.pos,i.pos+i.node.nodeSize,void 0," ");else if(t.length){const r=n.doc.textBetween(e.from,e.to," "," ");if(!ix.test(r))return;i=t[0],s=n.doc.textBetween(i.pos,e.to,void 0," ")}if(i&&s){const e=s.split(rx).filter(Boolean);if(e.length<=0)return!1;const t=e[e.length-1],l=i.pos+s.lastIndexOf(t);if(!t)return!1;const c=ex(t).map(e=>e.toObject(r.defaultProtocol));if(!(1===(a=c).length?a[0].isLink:3===a.length&&a[1].isLink&&["()","[]"].includes(a[0].value+a[2].value)))return!1;c.filter(e=>e.isLink).map(e=>({...e,from:l+e.start+1,to:l+e.end+1})).filter(e=>!n.schema.marks.code||!n.doc.rangeHasMark(e.from,e.to,n.schema.marks.code)).filter(e=>r.validate(e.value)).filter(e=>r.shouldAutoLink(e.value)).forEach(e=>{Gf(e.from,e.to,n.doc).some(e=>e.mark.type===r.type)||o.addMark(e.from,e.to,r.type.create({href:e.href}))})}var a}),o.steps.length?o:void 0}}))),!0===this.options.openOnClick&&e.push(function(e){return new cu({key:new hu("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(0!==r.button)return!1;if(!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let e=r.target;const t=[];for(;"DIV"!==e.nodeName;)t.push(e),e=e.parentNode;o=t.find(e=>"A"===e.nodeName)}if(!o)return!1;const a=Ff(t.state,e.type.name),l=null!=(i=null==o?void 0:o.href)?i:a.href,c=null!=(s=null==o?void 0:o.target)?s:a.target;return!(!o||!l||(window.open(l,c),0))}}})}({type:this.type})),this.options.linkOnPaste&&e.push(function(e){return new cu({key:new hu("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let a="";r.content.forEach(e=>{a+=e.textContent});const l=tx(a,{defaultProtocol:e.defaultProtocol}).find(e=>e.isLink&&e.value===a);return!(!a||!l)&&e.editor.commands.setMark(e.type,{href:l.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e;var r}}),lx=ax,cx=Object.defineProperty,ux="textStyle",dx=/^\s*([-+*])\s$/,hx=Wg.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(ux)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Vg({find:dx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Vg({find:dx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ux),editor:this.editor})),[e]}}),px=Wg.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",Ef(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});((e,t)=>{for(var n in t)cx(e,n,{get:t[n],enumerable:!0})})({},{findListItemPos:()=>fx,getNextListDepth:()=>mx,handleBackspace:()=>bx,handleDelete:()=>Sx,hasListBefore:()=>gx,hasListItemAfter:()=>kx,hasListItemBefore:()=>yx,listItemHasSubList:()=>vx,nextListIsDeeper:()=>_x,nextListIsHigher:()=>wx});var fx=(e,t)=>{const{$from:n}=t.selection,r=Uf(e,t.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&null===a;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return null===a?null:{$pos:t.doc.resolve(o),depth:a}},mx=(e,t)=>{const n=fx(e,t);if(!n)return!1;const[,r]=((e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&null===o;){const e=i.node(s);(null==e?void 0:e.type.name)===t?o=e:s-=1}return[o,s]})(t,e,n.$pos.pos+4);return r},gx=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},yx=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return 0!==i.index()&&(null==(n=i.nodeBefore)?void 0:n.type.name)===e},vx=(e,t,n)=>{if(!n)return!1;const r=Uf(e,t.schema);let i=!1;return n.descendants(e=>{e.type===r&&(i=!0)}),i},bx=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Yf(e.state,t)&&gx(e.state,t,n)){const{$anchor:n}=e.state.selection,r=e.state.doc.resolve(n.before()-1),i=[];r.node().descendants((e,n)=>{e.type.name===t&&i.push({node:e,pos:n})});const s=i.at(-1);if(!s)return!1;const o=e.state.doc.resolve(r.start()+s.pos+1);return e.chain().cut({from:n.start()-1,to:n.end()+1},o.end()).joinForward().run()}if(!Yf(e.state,t))return!1;if(!(e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)})(e.state))return!1;const r=fx(t,e.state);if(!r)return!1;const i=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=vx(t,e.state,i);return yx(t,e.state)&&!s?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},_x=(e,t)=>{const n=mx(e,t),r=fx(e,t);return!(!r||!n)&&n>r.depth},wx=(e,t)=>{const n=mx(e,t),r=fx(e,t);return!(!r||!n)&&n<r.depth},Sx=(e,t)=>{if(!Yf(e.state,t))return!1;if(!((e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const n=vf(e=>e.type.name===t)(e.selection);if(!n)return!1;const r=e.doc.resolve(n.pos+1);return i.pos+1===r.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)})(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!(!n.empty&&r.sameParent(i))&&(_x(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():wx(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward())},kx=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return i.index()!==i.parent.childCount-1&&(null==(n=i.nodeAfter)?void 0:n.type.name)===e},Tx=ym.create({name:"listKeymap",addOptions:()=>({listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}),addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{void 0!==e.state.schema.nodes[n]&&Sx(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{void 0!==e.state.schema.nodes[n]&&Sx(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{void 0!==e.state.schema.nodes[n]&&bx(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{void 0!==e.state.schema.nodes[n]&&bx(e,n,r)&&(t=!0)}),t}}}}),xx="textStyle",Ex=/^(\d+)\.\s$/,Cx=Wg.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",Ef(this.options.HTMLAttributes,n),0]:["ol",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(xx)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Vg({find:Ex,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Vg({find:Ex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(xx)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),Ax=/^\s*(\[([( |x])?\])\s$/,Ox=Wg.create({name:"taskItem",addOptions:()=>({nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}),content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return""===t||"true"===t},renderHTML:e=>({"data-checked":e.checked})}}),parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ef(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",e=>e.preventDefault()),a.addEventListener("change",t=>{if(!r.isEditable&&!this.options.onReadOnlyChecked)return void(a.checked=!a.checked);const{checked:i}=t.target;r.isEditable&&"function"==typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:e})=>{const t=n();if("number"!=typeof t)return!1;const r=e.doc.nodeAt(t);return e.setNodeMarkup(t,void 0,{...null==r?void 0:r.attrs,checked:i}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,i)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([e,t])=>{i.setAttribute(e,t)}),i.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(t).forEach(([e,t])=>{i.setAttribute(e,t)}),{dom:i,contentDOM:l,update:e=>e.type===this.type&&(i.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,!0)}}},addInputRules(){return[Vg({find:Ax,type:this.type,getAttributes:e=>({checked:"x"===e[e.length-1]})})]}}),Mx=Wg.create({name:"taskList",addOptions:()=>({itemTypeName:"taskItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ef(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),Ix=(ym.create({name:"listKit",addExtensions(){const e=[];return!1!==this.options.bulletList&&e.push(hx.configure(this.options.bulletList)),!1!==this.options.listItem&&e.push(px.configure(this.options.listItem)),!1!==this.options.listKeymap&&e.push(Tx.configure(this.options.listKeymap)),!1!==this.options.orderedList&&e.push(Cx.configure(this.options.orderedList)),!1!==this.options.taskItem&&e.push(Ox.configure(this.options.taskItem)),!1!==this.options.taskList&&e.push(Mx.configure(this.options.taskList)),e}}),Wg.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}})),Dx=Ix,jx=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Px=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Lx=hm.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[zg({find:jx,type:this.type})]},addPasteRules(){return[Gg({find:Px,type:this.type})]}}),Nx=Lx,Rx=Wg.create({name:"text",group:"inline"}),Ux=Rx,Bx=hm.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML({HTMLAttributes:e}){return["u",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Fx=Bx;function zx(e={}){return new cu({view:t=>new $x(t,e)})}class $x{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r=this.editorView.dom,i=r.getBoundingClientRect(),s=i.width/r.offsetWidth,o=i.height/r.offsetHeight;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let i=t.getBoundingClientRect(),s=n?i.bottom:i.top;n&&r&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let a=this.width/2*o;e={left:i.left,right:i.right,top:s-a,bottom:s+a}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos),n=this.width/2*s;e={left:t.left-n,right:t.left+n,top:t.top,bottom:t.bottom}}let a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{let e=c.getBoundingClientRect(),t=e.width/c.offsetWidth,n=e.height/c.offsetHeight;a=e.left-c.scrollLeft*t,l=e.top-c.scrollTop*n}this.element.style.left=(e.left-a)/s+"px",this.element.style.top=(e.top-l)/o+"px",this.element.style.width=(e.right-e.left)/s+"px",this.element.style.height=(e.bottom-e.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,t,e):r;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=Cc(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class qx extends Hc{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return qx.valid(n)?new qx(n):Hc.near(n)}content(){return Za.empty}eq(e){return e instanceof qx&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new qx(e.resolve(t.pos))}getBookmark(){return new Hx(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&qx.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let s=e.node(n);if(t>0?e.indexAfter(n)<s.childCount:e.index(n)>0){i=s.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let o=e.doc.resolve(r);if(qx.valid(o))return o}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!Xc.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=s,r+=t;let o=e.doc.resolve(r);if(qx.valid(o))return o}return null}}}qx.prototype.visible=!1,qx.findFrom=qx.findGapCursorFrom,Hc.jsonID("gapcursor",qx);class Hx{constructor(e){this.pos=e}map(e){return new Hx(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return qx.valid(t)?new qx(t):Hc.near(t)}}const Vx=Pp({ArrowLeft:Wx("horiz",-1),ArrowRight:Wx("horiz",1),ArrowUp:Wx("vert",-1),ArrowDown:Wx("vert",1)});function Wx(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let s=e.selection,o=t>0?s.$to:s.$from,a=s.empty;if(s instanceof Kc){if(!i.endOfTextblock(n)||0==o.depth)return!1;a=!1,o=e.doc.resolve(t>0?o.after():o.before())}let l=qx.findGapCursorFrom(o,t,a);return!!l&&(r&&r(e.tr.setSelection(new qx(l))),!0)}}function Gx(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!qx.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&Xc.isSelectable(e.state.doc.nodeAt(i.inside))||(e.dispatch(e.state.tr.setSelection(new qx(r))),0))}function Kx(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof qx))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=Ga.empty;for(let e=r.length-1;e>=0;e--)i=Ga.from(r[e].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new Za(i,0,0));return s.setSelection(Kc.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function Jx(e){if(!(e.selection instanceof qx))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Kh.create(e.doc,[Vh.widget(e.selection.head,t,{key:"gapcursor"})])}var Xx=200,Yx=function(){};Yx.prototype.append=function(e){return e.length?(e=Yx.from(e),!this.length&&e||e.length<Xx&&this.leafAppend(e)||this.length<Xx&&e.leafPrepend(this)||this.appendInner(e)):this},Yx.prototype.prepend=function(e){return e.length?Yx.from(e).append(this):this},Yx.prototype.appendInner=function(e){return new Zx(this,e)},Yx.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Yx.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Yx.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Yx.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},Yx.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},Yx.from=function(e){return e instanceof Yx?e:e&&e.length?new Qx(e):Yx.empty};var Qx=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=Xx)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=Xx)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Yx);Yx.empty=new Qx([]);var Zx=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Yx);const eE=Yx;class tE{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}t&&(n=this.remapping(i,this.items.length),r=n.maps.length);let s,o,a=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(i,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new nE(e.map));let t,i=e.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new nE(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(s=n?e.selection.map(n.slice(r)):e.selection,o=new tE(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:o,transform:a,selection:s}}addTransform(e,t,n,r){let i=[],s=this.eventCount,o=this.items,a=!r&&o.length?o.get(o.length-1):null;for(let n=0;n<e.steps.length;n++){let l,c=e.steps[n].invert(e.docs[n]),u=new nE(e.mapping.maps[n],c,t);(l=a&&a.merge(u))&&(u=l,n?i.pop():o=o.slice(0,o.length-1)),i.push(u),t&&(s++,t=void 0),r||(a=u)}let l=s-n.depth;return l>iE&&(o=function(e,t){let n;return e.forEach((e,r)=>{if(e.selection&&0==t--)return n=r,!1}),e.slice(n)}(o,l),s-=l),new tE(o.append(i),s)}remapping(e,t){let n=new ic;return this.items.forEach((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)},e,t),n}addMaps(e){return 0==this.eventCount?this:new tE(this.items.append(e.map(e=>new nE(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach(e=>{e.selection&&o--},r);let a=t;this.items.forEach(t=>{let r=i.getMirror(--a);if(null==r)return;s=Math.min(s,r);let l=i.maps[r];if(t.step){let s=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(a+1,r));c&&o++,n.push(new nE(l,s,c))}else n.push(new nE(l))},r);let l=[];for(let e=t;e<s;e++)l.push(new nE(i.maps[e]));let c=this.items.slice(0,r).append(l).append(n),u=new tE(c,o);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach((s,o)=>{if(o>=e)r.push(s),s.selection&&i++;else if(s.step){let e=s.step.map(t.slice(n)),o=e&&e.getMap();if(n--,o&&t.appendMap(o,n),e){let a=s.selection&&s.selection.map(t.slice(n));a&&i++;let l,c=new nE(o.invert(),e,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else s.map&&n--},this.items.length,0),new tE(eE.from(r.reverse()),i)}}tE.empty=new tE(eE.empty,0);class nE{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new nE(t.getMap().invert(),t,this.selection)}}}class rE{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const iE=20;function sE(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,i)=>t.push(r,i));return t}function oE(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}let aE=!1,lE=null;function cE(e){let t=e.plugins;if(lE!=t){aE=!1,lE=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){aE=!0;break}}return aE}const uE=new hu("history"),dE=new hu("closeHistory");function hE(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new cu({key:uE,state:{init:()=>new rE(tE.empty,tE.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let i,s=n.getMeta(uE);if(s)return s.historyState;n.getMeta(dE)&&(e=new rE(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(o&&o.getMeta(uE))return o.getMeta(uE).redo?new rE(e.done.addTransform(n,void 0,r,cE(t)),e.undone,sE(n.mapping.maps),e.prevTime,e.prevComposition):new rE(e.done,e.undone.addTransform(n,void 0,r,cE(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new rE(e.done.rebased(n,i),e.undone.rebased(n,i),oE(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new rE(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),oE(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),s=0==e.prevTime||!o&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)}),n}(n,e.prevRanges)),a=o?oE(e.prevRanges,n.mapping):sE(n.mapping.maps);return new rE(e.done.addTransform(n,s?t.selection.getBookmark():void 0,r,cE(t)),tE.empty,a,n.time,null==i?e.prevComposition:i)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?fE:"historyRedo"==n?mE:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function pE(e,t){return(n,r)=>{let i=uE.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(r){let s=function(e,t,n){let r=cE(t),i=uE.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),l=new rE(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(uE,{redo:n,historyState:l})}(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const fE=pE(!1,!0),mE=pE(!0,!0);pE(!1,!1),pE(!0,!1);var gE=ym.create({name:"characterCount",addOptions:()=>({limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(e=>""!==e).length}),addStorage:()=>({characters:()=>0,words:()=>0}),onBeforeCreate(){this.storage.characters=e=>{const t=(null==e?void 0:e.node)||this.editor.state.doc;if("textSize"===((null==e?void 0:e.mode)||this.options.mode)){const e=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(e)}return t.nodeSize},this.storage.words=e=>{const t=(null==e?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new cu({key:new hu("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(null==i||0===i)return void(e=!0);const s=this.storage.characters({node:r.doc});if(s>i){const t=0,n=s-i;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const o=r.tr.deleteRange(t,n);return e=!0,o}e=!0},filterTransaction:(e,t)=>{const n=this.options.limit;if(!e.docChanged||0===n||null==n)return!0;const r=this.storage.characters({node:t.doc}),i=this.storage.characters({node:e.doc});if(i<=n)return!0;if(r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r)return!1;if(!e.getMeta("paste"))return!1;const s=e.selection.$head.pos,o=s-(i-n),a=s;return e.deleteRange(o,a),!(this.storage.characters({node:e.doc})>n)}})]}}),yE=ym.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[zx(this.options)]}}),vE=(ym.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new cu({key:new hu("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Kh.create(e,[]);let o=0;"deepest"===this.options.mode&&e.descendants((e,t)=>{if(!e.isText)return i>=t&&i<=t+e.nodeSize-1&&void(o+=1)});let a=0;return e.descendants((e,t)=>!e.isText&&(i>=t&&i<=t+e.nodeSize-1&&(a+=1,"deepest"===this.options.mode&&o-a>0||"shallowest"===this.options.mode&&a>1?"deepest"===this.options.mode:void s.push(Vh.node(t,t+e.nodeSize,{class:this.options.className}))))),Kh.create(e,s)}}})]}}),ym.create({name:"gapCursor",addProseMirrorPlugins:()=>[new cu({props:{decorations:Jx,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&qx.valid(n)?new qx(n):null,handleClick:Gx,handleKeyDown:Vx,handleDOMEvents:{beforeinput:Kx}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!=(t=kf(bf(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))?t:null}}})),bE=ym.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new cu({key:new hu("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((e,t)=>{const n=r>=t&&r<=t+e.nodeSize,o=!e.isLeaf&&em(e);if((n||!this.options.showOnlyCurrent)&&o){const r=[this.options.emptyNodeClass];s&&r.push(this.options.emptyEditorClass);const o=Vh.node(t,t+e.nodeSize,{class:r.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});i.push(o)}return this.options.includeChildren}),Kh.create(e,i)}}})]}});function _E({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(null==t?void 0:t.type)===e}ym.create({name:"selection",addOptions:()=>({className:"selection"}),addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new cu({key:new hu("selection"),props:{decorations:n=>n.selection.empty||e.isFocused||!e.isEditable||tm(n.selection)?null:Kh.create(n.doc,[Vh.inline(n.selection.from,n.selection.to,{class:t.className})])}})]}});var wE=ym.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:[]}),addProseMirrorPlugins(){const e=new hu(this.name),t=Object.entries(this.editor.schema.nodes).map(([,e])=>e).filter(e=>(this.options.notAfter||[]).concat(this.options.node).includes(e.name));return[new cu({key:e,appendTransaction:(t,n,r)=>{const{doc:i,tr:s,schema:o}=r,a=e.getState(r),l=i.content.size,c=o.nodes[this.options.node];if(a)return s.insert(l,c.create())},state:{init:(e,n)=>!_E({node:n.tr.doc.lastChild,types:t}),apply:(e,n)=>e.docChanged?!_E({node:e.doc.lastChild,types:t}):n}})]}}),SE=ym.create({name:"undoRedo",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>fE(e,t),redo:()=>({state:e,dispatch:t})=>mE(e,t)}),addProseMirrorPlugins(){return[hE(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),kE=ym.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return!1!==this.options.bold&&i.push(FS.configure(this.options.bold)),!1!==this.options.blockquote&&i.push(PS.configure(this.options.blockquote)),!1!==this.options.bulletList&&i.push(hx.configure(this.options.bulletList)),!1!==this.options.code&&i.push(HS.configure(this.options.code)),!1!==this.options.codeBlock&&i.push(KS.configure(this.options.codeBlock)),!1!==this.options.document&&i.push(XS.configure(this.options.document)),!1!==this.options.dropcursor&&i.push(yE.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&i.push(vE.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&i.push(QS.configure(this.options.hardBreak)),!1!==this.options.heading&&i.push(ek.configure(this.options.heading)),!1!==this.options.undoRedo&&i.push(SE.configure(this.options.undoRedo)),!1!==this.options.horizontalRule&&i.push(nk.configure(this.options.horizontalRule)),!1!==this.options.italic&&i.push(lk.configure(this.options.italic)),!1!==this.options.listItem&&i.push(px.configure(this.options.listItem)),!1!==this.options.listKeymap&&i.push(Tx.configure(null==(e=this.options)?void 0:e.listKeymap)),!1!==this.options.link&&i.push(ax.configure(null==(t=this.options)?void 0:t.link)),!1!==this.options.orderedList&&i.push(Cx.configure(this.options.orderedList)),!1!==this.options.paragraph&&i.push(Ix.configure(this.options.paragraph)),!1!==this.options.strike&&i.push(Lx.configure(this.options.strike)),!1!==this.options.text&&i.push(Rx.configure(this.options.text)),!1!==this.options.underline&&i.push(Bx.configure(null==(n=this.options)?void 0:n.underline)),!1!==this.options.trailingNode&&i.push(wE.configure(null==(r=this.options)?void 0:r.trailingNode)),i}});const TE=/[\uD800-\uDBFF]/,xE=/[\uDC00-\uDFFF]/,EE=e=>class{constructor(e){this._=e}destroy(){e(this._)}},CE=EE(clearTimeout),AE=(e,t)=>new CE(setTimeout(t,e)),OE=(EE(clearInterval),EE(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),EE(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)),(e,t)=>e>>>t|e<<32-t),ME=e=>OE(e,2)^OE(e,13)^OE(e,22),IE=e=>OE(e,6)^OE(e,11)^OE(e,25),DE=e=>OE(e,7)^OE(e,18)^e>>>3,jE=e=>OE(e,17)^OE(e,19)^e>>>10,PE=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),LE=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class NE{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(LE),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,t=this._W;for(let e=16;e<64;e++)t[e]=jE(t[e-2])+t[e-7]+DE(t[e-15])+t[e-16];let n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7];for(let e,u,d=0;d<64;d++)e=c+IE(o)+(o&a^~o&l)+PE[d]+t[d]>>>0,u=ME(n)+(n&r^n&i^r&i)>>>0,c=l,l=a,a=o,o=s+e>>>0,s=i,i=r,r=n,n=e+u>>>0;e[0]+=n,e[1]+=r,e[2]+=i,e[3]+=s,e[4]+=o,e[5]+=a,e[6]+=l,e[7]+=c}digest(e){let t=0;for(;t+56<=e.length;){let n=0;for(;n<16&&t+3<e.length;n++)this._W[n]=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];if(t%64!=0){for(this._W.fill(0,n,16);t<e.length;)this._W[n]|=e[t]<<8*(3-t%4),t++;this._W[n]|=X<<8*(3-t%4)}this._updateHash()}const n=t%64!=0;this._W.fill(0,0,16);let r=0;for(;t<e.length;r++)for(let n=3;n>=0&&t<e.length;n--)this._W[r]|=e[t++]<<8*n;n||(this._W[r-(t%4==0?0:1)]|=X<<8*(3-t%4)),this._W[14]=e.byteLength/536870912,this._W[15]=8*e.byteLength,this._updateHash();const i=new Uint8Array(32);for(let e=0;e<this._H.length;e++)for(let t=0;t<4;t++)i[4*e+t]=this._H[e]>>>8*(3-t);return i}}const RE=new hu("y-sync"),UE=new hu("y-undo"),BE=new hu("yjs-cursor"),FE=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!an(t.ds,e.id),zE=[{light:"#ecd44433",dark:"#ecd444"}],$E=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const n=N();e.forEach(e=>n.add(e)),t=t.filter(e=>!n.has(e))}e.set(n,(r=t)[q(Je()*r.length)])}var r;return e.get(n)},qE=(e,t)=>({type:t.selection.jsonID,anchor:dC(t.selection.anchor,e.type,e.mapping),head:dC(t.selection.head,e.type,e.mapping)});class HE{constructor(e,t=new Map){this.type=e,this.prosemirrorView=null,this.mux=oa(),this.mapping=t,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&null!=this.prosemirrorView&&(this.beforeTransactionSelection=qE(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(vt&&null===this._domSelectionInView&&(AE(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(null==e||null==e.anchorNode)return!1;const t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);const n=t.getBoundingClientRect(),r=Dt.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}renderSnapshot(e,t){t||(t=fr(dn(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(RE,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(e=>WE(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Za(Ga.from(e),0,0));t.setMeta(RE,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=null!==this.beforeTransactionSelection?null:this.prosemirrorView.state.selection,t=this.type.toArray().map(e=>WE(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Za(Ga.from(t),0,0));if(e){const t=W(G(e.anchor,0),n.doc.content.size),r=W(G(e.head,0),n.doc.content.size);n.setSelection(Kc.create(n.doc,t,r))}this.prosemirrorView.dispatch(n.setMeta(RE,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,t,n){let r=this.doc,i=this.type;if(e||(e=gr(this.doc)),e instanceof Uint8Array||t instanceof Uint8Array)if(e instanceof Uint8Array&&t instanceof Uint8Array||Me(),r=new vn({gc:!1}),Mn(r,t),t=gr(r),Mn(r,e),e=gr(r),null===i._item){const e=Array.from(this.doc.share.keys()).find(e=>this.doc.share.get(e)===this.type);i=r.getXmlFragment(e)}else{const e=r.store.clients.get(i._item.id.client)??[],t=e[xr(e,i._item.id.clock)].content;i=t.type}this.mapping.clear(),this.mux(()=>{r.transact(r=>{const s=n.permanentUserData;s&&s.dss.forEach(e=>{on(r,e,e=>{})});const o=(e,t)=>{const r="added"===e?s.getUserByClientId(t.client):s.getUserByDeletedId(t);return{user:r,type:e,color:$E(n.colorMapping,n.colors,r)}},a=Ai(i,new lr(t.ds,e.sv)).map(n=>!n._item.deleted||FE(n._item,e)||FE(n._item,t)?WE(n,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,t,o):null).filter(e=>null!==e),l=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Za(Ga.from(a),0,0));this.prosemirrorView.dispatch(l.setMeta(RE,{isChangeOrigin:!0}))},RE)})}_typeChanged(e,t){if(null==this.prosemirrorView)return;const n=RE.getState(this.prosemirrorView.state);0!==e.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{const e=(e,t)=>this.mapping.delete(t);on(t,t.deleteSet,e=>{if(e.constructor===Hs){const t=e.content.type;t&&this.mapping.delete(t)}}),t.changed.forEach(e),t.changedParentTypes.forEach(e);const n=this.type.toArray().map(e=>VE(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e);let r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Za(Ga.from(n),0,0));((e,t,n)=>{if(null!==t&&null!==t.anchor&&null!==t.head)if("all"===t.type)e.setSelection(new Qc(e.doc));else if("node"===t.type){const r=pC(n.doc,n.type,t.anchor,n.mapping);e.setSelection(Xc.create(e.doc,r))}else{const r=pC(n.doc,n.type,t.anchor,n.mapping),i=pC(n.doc,n.type,t.head,n.mapping);null!==r&&null!==i&&e.setSelection(Kc.between(e.doc.resolve(r),e.doc.resolve(i)))}})(r,this.beforeTransactionSelection,this),r=r.setMeta(RE,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof qr}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(e){this.doc.transact(()=>{aC(this.doc,this.type,e,this),this.beforeTransactionSelection=qE(this,this.prosemirrorView.state)},RE)}initView(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const VE=(e,t,n,r,i,s)=>{const o=n.mapping.get(e);if(void 0===o){if(e instanceof fs)return WE(e,t,n,r,i,s);throw Oe()}return o},WE=(e,t,n,r,i,s)=>{const o=[],a=e=>{if(e instanceof fs){const a=VE(e,t,n,r,i,s);null!==a&&o.push(a)}else{const a=(e._item.right?.content)?.type;a instanceof ds&&!a._item.deleted&&a._item.id.client===a.doc.clientID&&(e.applyDelta([{retain:e.length},...a.toDelta()]),a.doc.transact(e=>{a._item.delete(e)}));const l=GE(e,t,n,r,i,s);null!==l&&l.forEach(e=>{null!==e&&o.push(e)})}};void 0===r||void 0===i?e.toArray().forEach(a):Ai(e,new lr(i.ds,r.sv)).forEach(a);try{const a=e.getAttributes(r);void 0!==r&&(FE(e._item,r)?FE(e._item,i)||(a.ychange=s?s("added",e._item.id):{type:"added"}):a.ychange=s?s("removed",e._item.id):{type:"removed"});const l=t.node(e.nodeName,a,o);return n.mapping.set(e,l),l}catch(t){return e.doc.transact(t=>{e._item.delete(t)},RE),n.mapping.delete(e),null}},GE=(e,t,n,r,i,s)=>{const o=[],a=e.toDelta(r,i,s);try{for(let e=0;e<a.length;e++){const n=a[e];o.push(t.text(n.insert,sC(n.attributes,t)))}}catch(t){return e.doc.transact(t=>{e._item.delete(t)},RE),null}return o},KE=(e,t)=>e instanceof Array?((e,t)=>{const n=new ys,r=e.map(e=>({insert:e.text,attributes:oC(e.marks,t)}));return n.applyDelta(r),t.mapping.set(n,e),n})(e,t):((e,t)=>{const n=new fs(e.type.name);for(const t in e.attrs){const r=e.attrs[t];null!==r&&"ychange"!==t&&n.setAttribute(t,r)}return n.insert(0,YE(e).map(e=>KE(e,t))),t.mapping.set(n,e),n})(e,t),JE=e=>"object"==typeof e&&null!==e,XE=(e,t)=>{const n=Object.keys(e).filter(t=>null!==e[t]);let r=n.length===Object.keys(t).filter(e=>null!==t[e]).length;for(let i=0;i<n.length&&r;i++){const s=n[i],o=e[s],a=t[s];r="ychange"===s||o===a||JE(o)&&JE(a)&&XE(o,a)}return r},YE=e=>{const t=e.content.content,n=[];for(let e=0;e<t.length;e++){const r=t[e];if(r.isText){const r=[];for(let n=t[e];e<t.length&&n.isText;n=t[++e])r.push(n);e--,n.push(r)}else n.push(r)}return n},QE=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every((e,n)=>e.insert===t[n].text&&st(e.attributes||{}).length===t[n].marks.length&&lt(e.attributes,(e,r)=>{const i=iC(r),s=t[n].marks;return XE(e,s.find(e=>e.type.name===i)?.attrs)}))},ZE=(e,t)=>{if(e instanceof fs&&!(t instanceof Array)&&lC(e,t)){const n=YE(t);return e._length===n.length&&XE(e.getAttributes(),t.attrs)&&e.toArray().every((e,t)=>ZE(e,n[t]))}return e instanceof ys&&t instanceof Array&&QE(e,t)},eC=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((e,n)=>t[n]===e),tC=(e,t,n)=>{const r=e.toArray(),i=YE(t),s=i.length,o=r.length,a=W(o,s);let l=0,c=0,u=!1;for(;l<a;l++){const e=r[l],t=i[l];if(eC(n.mapping.get(e),t))u=!0;else if(!ZE(e,t))break}for(;l+c<a;c++){const e=r[o-c-1],t=i[s-c-1];if(eC(n.mapping.get(e),t))u=!0;else if(!ZE(e,t))break}return{equalityFactor:l+c,foundMappedChild:u}},nC=(e,t,n)=>{n.mapping.set(e,t);const{nAttrs:r,str:i}=(e=>{let t="",n=e._start;const r={};for(;null!==n;)n.deleted||(n.countable&&n.content instanceof Os?t+=n.content.str:n.content instanceof xs&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}})(e),s=t.map(e=>({insert:e.text,attributes:Object.assign({},r,oC(e.marks,n))})),{insert:o,remove:a,index:l}=((e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&TE.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&xE.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}})(i,s.map(e=>e.insert).join(""));e.delete(l,a),e.insert(l,o),e.applyDelta(s.map(e=>({retain:e.insert.length,attributes:e.attributes})))},rC=/(.*)(--[a-zA-Z0-9+/=]{8})$/,iC=e=>rC.exec(e)?.[1]??e,sC=(e,t)=>{const n=[];for(const r in e)n.push(t.mark(iC(r),e[r]));return n},oC=(e,t)=>{const n={};return e.forEach(e=>{if("ychange"!==e.type.name){const s=L(t.isOMark,e.type,()=>!e.type.excludes(e.type));n[s?`${e.type.name}--${r=e.toJSON(),Et((e=>{for(let t=6;t<e.length;t++)e[t%6]=e[t%6]^e[t];return e.slice(0,6)})((i=At(r),(new NE).digest(i))))}`:e.type.name]=e.attrs}var r,i}),n},aC=(e,t,n,r)=>{if(t instanceof fs&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(t,n),t instanceof fs){const e=t.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?e[n]!==r[n]&&"ychange"!==n&&t.setAttribute(n,r[n]):t.removeAttribute(n);for(const n in e)void 0===r[n]&&t.removeAttribute(n)}const i=YE(n),s=i.length,o=t.toArray(),a=o.length,l=W(s,a);let c=0,u=0;for(;c<l;c++){const e=o[c],t=i[c];if(!eC(r.mapping.get(e),t)){if(!ZE(e,t))break;r.mapping.set(e,t)}}for(;u+c+1<l;u++){const e=o[a-u-1],t=i[s-u-1];if(!eC(r.mapping.get(e),t)){if(!ZE(e,t))break;r.mapping.set(e,t)}}e.transact(()=>{for(;a-c-u>0&&s-c-u>0;){const n=o[c],l=i[c],d=o[a-u-1],h=i[s-u-1];if(n instanceof ys&&l instanceof Array)QE(n,l)||nC(n,l,r),c+=1;else{let i=n instanceof fs&&lC(n,l),s=d instanceof fs&&lC(d,h);if(i&&s){const e=tC(n,l,r),t=tC(d,h,r);e.foundMappedChild&&!t.foundMappedChild?s=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?i=!1:s=!1}i?(aC(e,n,l,r),c+=1):s?(aC(e,d,h,r),u+=1):(r.mapping.delete(t.get(c)),t.delete(c,1),t.insert(c,[KE(l,r)]),c+=1)}}const n=a-c-u;if(1===a&&0===s&&o[0]instanceof ys?(r.mapping.delete(o[0]),o[0].delete(0,o[0].length)):n>0&&(t.slice(c,c+n).forEach(e=>r.mapping.delete(e)),t.delete(c,n)),c+u<s){const e=[];for(let t=c;t<s-u;t++)e.push(KE(i[t],r));t.insert(c,e)}},RE)},lC=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name;let cC=null;const uC=()=>{const e=cC;cC=null,e.forEach((e,t)=>{const n=t.state.tr,r=RE.getState(t.state);r&&r.binding&&!r.binding.isDestroyed&&(e.forEach((e,t)=>{n.setMeta(t,e)}),t.dispatch(n))})},dC=(e,t,n)=>{if(0===e)return rr(t,0,-1);let r=null===t._first?null:t._first.content.type;for(;null!==r&&t!==r;){if(r instanceof ys){if(r._length>=e)return rr(r,e,-1);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,e--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<i)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&i>1)return new Qn(null===r._item?null:r._item.id,null===r._item?Kn(r):null,null);if(e-=i,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new Qn(null===r._item?null:r._item.id,null===r._item?Kn(r):null,null);do{r=r._item.parent,e--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw Me();if(0===e&&r.constructor!==ys&&r!==t)return hC(r._item.parent,r._item)}return rr(t,t._length,-1)},hC=(e,t)=>{let n=null,r=null;return null===e._item?r=Kn(e):n=Vn(e._item.id.client,e._item.id.clock),new Qn(n,r,t.id)},pC=(e,t,n,r)=>{const i=or(n,e);if(null===i||i.type!==t&&!Jn(t,i.type._item))return null;let s=i.type,o=0;if(s.constructor===ys)o=i.index;else if(null===s._item||!s._item.deleted){let e=s._first,t=0;for(;t<s._length&&t<i.index&&null!==e;){if(!e.deleted){const n=e.content.type;t++,o+=n instanceof ys?n._length:r.get(n).nodeSize}e=e.right}o+=1}for(;s!==t&&null!==s._item;){const e=s._item.parent;if(null===e._item||!e._item.deleted){o+=1;let t=e._first;for(;null!==t;){const e=t.content.type;if(e===s)break;t.deleted||(o+=e instanceof ys?e._length:r.get(e).nodeSize),t=t.right}}s=e}return o-1};const fC=(e,t,n)=>e!==t,mC=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);const r=document.createTextNode(""),i=document.createTextNode("");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(i,null),t},gC=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),yC=/^#[0-9a-fA-F]{6}$/,vC=(e,t,n,r,i)=>{const s=RE.getState(e),o=s.doc,a=[];return null!=s.snapshot||null!=s.prevSnapshot||0===s.binding.mapping.size?Kh.create(e.doc,[]):(t.getStates().forEach((t,l)=>{if(n(o.clientID,l,t)&&null!=t.cursor){const n=t.user||{};null==n.color?n.color="#ffa500":yC.test(n.color)||console.warn("A user uses an unsupported color format",n),null==n.name&&(n.name=`User: ${l}`);let c=pC(o,s.type,er(t.cursor.anchor),s.binding.mapping),u=pC(o,s.type,er(t.cursor.head),s.binding.mapping);if(null!==c&&null!==u){const t=G(e.doc.content.size-1,0);c=W(c,t),u=W(u,t),a.push(Vh.widget(u,()=>r(n,l),{key:l+"",side:10}));const s=W(c,u),o=G(c,u);a.push(Vh.inline(s,o,i(n,l),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Kh.create(e.doc,a))},bC=(e,{awarenessStateFilter:t=fC,cursorBuilder:n=mC,selectionBuilder:r=gC,getSelection:i=e=>e.selection}={},s="cursor")=>new cu({key:BE,state:{init:(i,s)=>vC(s,e,t,n,r),apply(i,s,o,a){const l=RE.getState(a),c=i.getMeta(BE);return l&&l.isChangeOrigin||c&&c.awarenessUpdated?vC(a,e,t,n,r):s.map(i.mapping,i.doc)}},props:{decorations:e=>BE.getState(e)},view:t=>{const n=()=>{t.docView&&((e,t)=>{cC||(cC=new Map,AE(0,uC)),L(cC,e,j).set(t,{awarenessUpdated:!0})})(t,BE)},r=()=>{const n=RE.getState(t.state),r=e.getLocalState()||{};if(t.hasFocus()){const o=i(t.state),a=dC(o.anchor,n.type,n.binding.mapping),l=dC(o.head,n.type,n.binding.mapping);null!=r.cursor&&ar(er(r.cursor.anchor),a)&&ar(er(r.cursor.head),l)||e.setLocalStateField(s,{anchor:a,head:l})}else null!=r.cursor&&null!==pC(n.doc,n.type,er(r.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(s,null)};return e.on("change",n),t.dom.addEventListener("focusin",r),t.dom.addEventListener("focusout",r),{update:r,destroy:()=>{t.dom.removeEventListener("focusin",r),t.dom.removeEventListener("focusout",r),e.off("change",n),e.setLocalStateField(s,null)}}}}),_C=new Set(["paragraph"]);var wC=ym.create({name:"collaboration",priority:1e3,addOptions:()=>({document:null,field:"default",fragment:null}),addStorage:()=>({isDisabled:!1}),onCreate(){this.editor.extensionManager.extensions.find(e=>"undoRedo"===e.name)&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands:()=>({undo:()=>({tr:e,state:t,dispatch:n})=>(e.setMeta("preventDispatch",!0),0!==UE.getState(t).undoManager.undoStack.length&&(!n||(e=>{const t=UE.getState(e).undoManager;if(null!=t)return t.undo(),!0})(t))),redo:()=>({tr:e,state:t,dispatch:n})=>(e.setMeta("preventDispatch",!0),0!==UE.getState(t).undoManager.redoStack.length&&(!n||(e=>{const t=UE.getState(e).undoManager;if(null!=t)return t.redo(),!0})(t)))}),addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){var e;const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),n=(({protectedNodes:e=_C,trackedOrigins:t=[],undoManager:n=null}={})=>new cu({key:UE,state:{init:(r,i)=>{const s=RE.getState(i),o=n||new qr(s.type,{trackedOrigins:new Set([RE].concat(t)),deleteFilter:t=>((e,t)=>!(e instanceof Hs&&e.content instanceof Us&&(e.content.type instanceof ds||e.content.type instanceof fs&&t.has(e.content.type.nodeName))&&0!==e.content.type._length))(t,e),captureTransaction:e=>!1!==e.meta.get("addToHistory")});return{undoManager:o,prevSel:null,hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}},apply:(e,t,n,r)=>{const i=RE.getState(r).binding,s=t.undoManager,o=s.undoStack.length>0,a=s.redoStack.length>0;return i?{undoManager:s,prevSel:qE(i,n),hasUndoOps:o,hasRedoOps:a}:o!==t.hasUndoOps||a!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}):t}},view:e=>{const t=RE.getState(e.state),n=UE.getState(e.state).undoManager;return n.on("stack-item-added",({stackItem:n})=>{const r=t.binding;r&&n.meta.set(r,UE.getState(e.state).prevSel)}),n.on("stack-item-popped",({stackItem:e})=>{const n=t.binding;n&&(n.beforeTransactionSelection=e.meta.get(n)||n.beforeTransactionSelection)}),{destroy:()=>{n.destroy()}}}}))(this.options.yUndoOptions),r=n.spec.view;n.spec.view=e=>{const{undoManager:t}=UE.getState(e.state);t.restore&&(t.restore(),t.restore=()=>{});const n=r?r(e):void 0;return{destroy:()=>{const e=t.trackedOrigins.has(t),r=t._observers;t.restore=()=>{e&&t.trackedOrigins.add(t),t.doc.on("afterTransaction",t.afterTransactionHandler),t._observers=r},(null==n?void 0:n.destroy)&&n.destroy()}}};const i={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender},s=((e,{colors:t=zE,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:i=()=>{},mapping:s}={})=>{let o=!1;const a=new HE(e,s),l=new cu({props:{editable:e=>{const t=RE.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:RE,state:{init:(i,s)=>({type:e,doc:e.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:r}),apply:(e,t)=>{const n=e.getMeta(RE);if(void 0!==n){t=Object.assign({},t);for(const e in n)t[e]=n[e]}return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==a.prosemirrorView&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||AE(0,()=>{null!=a.prosemirrorView&&(null==n.restore?a._renderSnapshot(n.snapshot,n.prevSnapshot,t):(a._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))})),t}},view:e=>(a.initView(e),null==s&&a._forceRerender(),i(),{update:()=>{const t=l.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(o||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(o=!0,!1===t.addToHistory&&!t.isChangeOrigin){const t=UE.getState(e.state),n=t&&t.undoManager;n&&n.stopCapturing()}a.mux(()=>{t.doc.transact(n=>{n.meta.set("addToHistory",t.addToHistory),a._prosemirrorChanged(e.state.doc)},RE)})}},destroy:()=>{a.destroy()}})});return l})(t,i);return this.editor.options.enableContentCheck&&(null==(e=t.doc)||e.on("beforeTransaction",()=>{try{const e=function(e){const t=e.toArray(),n=e=>{let t;if(e instanceof ys)t=e.toDelta().map(e=>{const t={type:"text",text:e.insert};return e.attributes&&(t.marks=Object.keys(e.attributes).map(t=>{const n=e.attributes[t],r={type:iC(t)};return Object.keys(n)&&(r.attrs=n),r})),t});else if(e instanceof fs){t={type:e.nodeName};const r=e.getAttributes();Object.keys(r).length&&(t.attrs=r);const i=e.toArray();i.length&&(t.content=i.map(n).flat())}else Me();return t};return{type:"doc",content:t.map(n)}}(t);if(0===e.content.length)return;this.editor.schema.nodeFromJSON(e).check()}catch(e){return this.editor.emit("contentError",{error:e,editor:this.editor,disableCollaboration:()=>{var e;null==(e=t.doc)||e.destroy(),this.storage.isDisabled=!0}}),!1}})),[s,n,this.editor.options.enableContentCheck&&new cu({key:new hu("filterInvalidContent"),filterTransaction:()=>{var e;return!1===this.storage.isDisabled||(null==(e=t.doc)||e.destroy(),!0)}})].filter(Boolean)}}),SC=wC,kC=e=>Array.from(e.entries()).map(([e,t])=>({clientId:e,...t.user})),TC=()=>null,xC=ym.create({name:"collaborationCaret",priority:999,addOptions:()=>({provider:null,user:{name:null,color:null},render:e=>{const t=document.createElement("span");t.classList.add("collaboration-carets__caret"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");return n.classList.add("collaboration-carets__label"),n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null),t.insertBefore(n,null),t},selectionRender:gC,onUpdate:TC}),onCreate(){if(this.options.onUpdate!==TC&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCaret.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-caret'),!this.options.provider)throw new Error('The "provider" option is required for the CollaborationCaret extension')},addStorage:()=>({users:[]}),addCommands(){return{updateUser:e=>()=>(this.options.user=e,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:e=>({editor:t})=>(console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-caret'),t.commands.updateUser(e))}},addProseMirrorPlugins(){return[bC((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=kC(this.options.provider.awareness.states),this.options.provider.awareness.on("update",()=>{this.storage.users=kC(this.options.provider.awareness.states)}),this.options.provider.awareness))(),{cursorBuilder:this.options.render,selectionBuilder:this.options.selectionRender})]}}),EC=ym.create({name:"typography",addOptions:()=>({closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}),addInputRules(){const e=[];var t;return!1!==this.options.emDash&&e.push(Hg({find:/--$/,replace:null!=(t=this.options.emDash)?t:""})),!1!==this.options.ellipsis&&e.push((e=>Hg({find:/\.\.\.$/,replace:null!=e?e:""}))(this.options.ellipsis)),!1!==this.options.openDoubleQuote&&e.push((e=>Hg({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:null!=e?e:""}))(this.options.openDoubleQuote)),!1!==this.options.closeDoubleQuote&&e.push((e=>Hg({find:/"$/,replace:null!=e?e:""}))(this.options.closeDoubleQuote)),!1!==this.options.openSingleQuote&&e.push((e=>Hg({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:null!=e?e:""}))(this.options.openSingleQuote)),!1!==this.options.closeSingleQuote&&e.push((e=>Hg({find:/'$/,replace:null!=e?e:""}))(this.options.closeSingleQuote)),!1!==this.options.leftArrow&&e.push((e=>Hg({find:/<-$/,replace:null!=e?e:""}))(this.options.leftArrow)),!1!==this.options.rightArrow&&e.push((e=>Hg({find:/->$/,replace:null!=e?e:""}))(this.options.rightArrow)),!1!==this.options.copyright&&e.push((e=>Hg({find:/\(c\)$/,replace:null!=e?e:""}))(this.options.copyright)),!1!==this.options.trademark&&e.push((e=>Hg({find:/\(tm\)$/,replace:null!=e?e:""}))(this.options.trademark)),!1!==this.options.servicemark&&e.push((e=>Hg({find:/\(sm\)$/,replace:null!=e?e:""}))(this.options.servicemark)),!1!==this.options.registeredTrademark&&e.push((e=>Hg({find:/\(r\)$/,replace:null!=e?e:""}))(this.options.registeredTrademark)),!1!==this.options.oneHalf&&e.push((e=>Hg({find:/(?:^|\s)(1\/2)\s$/,replace:null!=e?e:""}))(this.options.oneHalf)),!1!==this.options.plusMinus&&e.push((e=>Hg({find:/\+\/-$/,replace:null!=e?e:""}))(this.options.plusMinus)),!1!==this.options.notEqual&&e.push((e=>Hg({find:/!=$/,replace:null!=e?e:""}))(this.options.notEqual)),!1!==this.options.laquo&&e.push((e=>Hg({find:/<<$/,replace:null!=e?e:""}))(this.options.laquo)),!1!==this.options.raquo&&e.push((e=>Hg({find:/>>$/,replace:null!=e?e:""}))(this.options.raquo)),!1!==this.options.multiplication&&e.push((e=>Hg({find:/\d+\s?([*x])\s?\d+$/,replace:null!=e?e:""}))(this.options.multiplication)),!1!==this.options.superscriptTwo&&e.push((e=>Hg({find:/\^2$/,replace:null!=e?e:""}))(this.options.superscriptTwo)),!1!==this.options.superscriptThree&&e.push((e=>Hg({find:/\^3$/,replace:null!=e?e:""}))(this.options.superscriptThree)),!1!==this.options.oneQuarter&&e.push((e=>Hg({find:/(?:^|\s)(1\/4)\s$/,replace:null!=e?e:""}))(this.options.oneQuarter)),!1!==this.options.threeQuarters&&e.push((e=>Hg({find:/(?:^|\s)(3\/4)\s$/,replace:null!=e?e:""}))(this.options.threeQuarters)),e}});function CC(e){var t;const{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:s,startOfLine:o,$position:a}=e,l=r&&!i,c=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),u=new RegExp(`\\s${c}$`),d=o?"^":"",h=i?"":c,p=l?new RegExp(`${d}${c}.*?(?=\\s${h}|$)`,"gm"):new RegExp(`${d}(?:^)?${c}[^\\s${h}]*`,"gm"),f=(null==(t=a.nodeBefore)?void 0:t.isText)&&a.nodeBefore.text;if(!f)return null;const m=a.pos-f.length,g=Array.from(f.matchAll(p)).pop();if(!g||void 0===g.input||void 0===g.index)return null;const y=g.input.slice(Math.max(0,g.index-1),g.index),v=new RegExp(`^[${null==s?void 0:s.join("")}\0]?$`).test(y);if(null!==s&&!v)return null;const b=m+g.index;let _=b+g[0].length;return l&&u.test(f.slice(_-1,_+1))&&(g[0]+=" ",_+=1),b<a.pos&&_>=a.pos?{range:{from:b,to:_},query:g[0].slice(n.length),text:g[0]}:null}var AC=new hu("suggestion"),OC=function({pluginKey:e=AC,editor:t,char:n="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:s=[" "],startOfLine:o=!1,decorationTag:a="span",decorationClass:l="suggestion",command:c=()=>null,items:u=()=>[],render:d=()=>({}),allow:h=()=>!0,findSuggestionMatch:p=CC}){let f;const m=null==d?void 0:d(),g=new cu({key:e,view(){return{update:async(e,n)=>{var r,i,s,o,a,l,d;const h=null==(r=this.key)?void 0:r.getState(n),p=null==(i=this.key)?void 0:i.getState(e.state),g=h.active&&p.active&&h.range.from!==p.range.from,y=!h.active&&p.active,v=h.active&&!p.active,b=!y&&!v&&h.query!==p.query,_=y||g&&b,w=b||g,S=v||g&&b;if(!_&&!w&&!S)return;const k=S&&!_?h:p,T=e.dom.querySelector(`[data-decoration-id="${k.decorationId}"]`);f={editor:t,range:k.range,query:k.query,text:k.text,items:[],command:e=>c({editor:t,range:k.range,props:e}),decorationNode:T,clientRect:T?()=>{var n;const{decorationId:r}=null==(n=this.key)?void 0:n.getState(t.state),i=e.dom.querySelector(`[data-decoration-id="${r}"]`);return(null==i?void 0:i.getBoundingClientRect())||null}:null},_&&(null==(s=null==m?void 0:m.onBeforeStart)||s.call(m,f)),w&&(null==(o=null==m?void 0:m.onBeforeUpdate)||o.call(m,f)),(w||_)&&(f.items=await u({editor:t,query:k.query})),S&&(null==(a=null==m?void 0:m.onExit)||a.call(m,f)),w&&(null==(l=null==m?void 0:m.onUpdate)||l.call(m,f)),_&&(null==(d=null==m?void 0:m.onStart)||d.call(m,f))},destroy:()=>{var e;f&&(null==(e=null==m?void 0:m.onExit)||e.call(m,f))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(e,a,l,c){const{isEditable:u}=t,{composing:d}=t.view,{selection:f}=e,{empty:m,from:g}=f,y={...a};if(y.composing=d,u&&(m||t.view.composing)){!(g<a.range.from||g>a.range.to)||d||a.composing||(y.active=!1);const e=p({char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:s,startOfLine:o,$position:f.$from}),l=`id_${Math.floor(4294967295*Math.random())}`;e&&h({editor:t,state:c,range:e.range,isActive:a.active})?(y.active=!0,y.decorationId=a.decorationId?a.decorationId:l,y.range=e.range,y.query=e.query,y.text=e.text):y.active=!1}else y.active=!1;return y.active||(y.decorationId=null,y.range={from:0,to:0},y.query=null,y.text=null),y}},props:{handleKeyDown(e,t){var n;const{active:r,range:i}=g.getState(e.state);return r&&(null==(n=null==m?void 0:m.onKeyDown)?void 0:n.call(m,{view:e,event:t,range:i}))||!1},decorations(e){const{active:t,range:n,decorationId:r}=g.getState(e);return t?Kh.create(e.doc,[Vh.inline(n.from,n.to,{nodeName:a,class:l,"data-decoration-id":r})]):null}}});return g};function MC(e){return(e.options.suggestions.length?e.options.suggestions:[e.options.suggestion]).map(t=>function({editor:e,overrideSuggestionOptions:t,extensionName:n,char:r="@"}){const i=new hu;return{editor:e,char:r,pluginKey:i,command:({editor:e,range:t,props:i})=>{var s,o,a;const l=e.view.state.selection.$to.nodeAfter;(null==(s=null==l?void 0:l.text)?void 0:s.startsWith(" "))&&(t.to+=1),e.chain().focus().insertContentAt(t,[{type:n,attrs:{...i,mentionSuggestionChar:r}},{type:"text",text:" "}]).run(),null==(a=null==(o=e.view.dom.ownerDocument.defaultView)?void 0:o.getSelection())||a.collapseToEnd()},allow:({state:e,range:t})=>{const r=e.doc.resolve(t.from),i=e.schema.nodes[n];return!!r.parent.type.contentMatch.matchType(i)},...t}}({editor:e.editor,overrideSuggestionOptions:t,extensionName:e.name,char:t.char}))}function IC(e,t){const n=MC(e);return n.find(e=>e.char===t)||(n.length?n[0]:null)}var DC,jC,PC=Wg.create({name:"mention",priority:101,addOptions:()=>({HTMLAttributes:{},renderText({node:e,suggestion:t}){var n,r;return`${null!=(n=null==t?void 0:t.char)?n:"@"}${null!=(r=e.attrs.label)?r:e.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:e,node:t,suggestion:n}){var r,i;return["span",Ef(this.HTMLAttributes,e.HTMLAttributes),`${null!=(r=null==n?void 0:n.char)?r:"@"}${null!=(i=t.attrs.label)?i:t.attrs.id}`]},suggestions:[],suggestion:{}}),group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:e=>e.getAttribute("data-mention-suggestion-char"),renderHTML:e=>({"data-mention-suggestion-char":e.mentionSuggestionChar})}}),parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:t}){const n=IC(this,e.attrs.mentionSuggestionChar);if(void 0!==this.options.renderLabel)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",Ef({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e,suggestion:n})];const r={...this.options};r.HTMLAttributes=Ef({"data-type":this.name},this.options.HTMLAttributes,t);const i=this.options.renderHTML({options:r,node:e,suggestion:n});return"string"==typeof i?["span",Ef({"data-type":this.name},this.options.HTMLAttributes,t),i]:i},renderText({node:e}){const t={options:this.options,node:e,suggestion:IC(this,e.attrs.mentionSuggestionChar)};return void 0!==this.options.renderLabel?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(t)):this.options.renderText(t)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let n=!1;const{selection:r}=t,{empty:i,anchor:s}=r;if(!i)return!1;let o=new yl,a=0;return t.doc.nodesBetween(s-1,s,(e,t)=>{if(e.type.name===this.name)return n=!0,o=e,a=t,!1}),n&&e.insertText(this.options.deleteTriggerWithBackspace?"":o.attrs.mentionSuggestionChar,a,a+o.nodeSize),n})}},addProseMirrorPlugins(){return MC(this).map(OC)}}),LC=PC;if("undefined"!=typeof WeakMap){let e=new WeakMap;DC=t=>e.get(t),jC=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;DC=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},jC=(r,i)=>(n==t&&(n=0),e[n++]=r,e[n++]=i)}var NC=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,i=t/this.width|0;let s=r+1,o=i+1;for(let e=1;s<this.width&&this.map[t+e]==n;e++)s++;for(let e=1;o<this.height&&this.map[t+this.width*e]==n;e++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(e);return"horiz"==t?(n<0?0==r:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?0==s:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(e,t){const{left:n,right:r,top:i,bottom:s}=this.findCell(e),{left:o,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,i==e.left&&i&&this.map[s-1]==o||r==e.top&&r&&this.map[s-this.width]==o||t.push(o))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==e){let n=t+e*this.width;const r=(e+1)*this.width;for(;n<r&&this.map[n]<i;)n++;return n==r?s-1:this.map[n]}i=s}}static get(e){return DC(e)||jC(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const i=e.child(r);let s=0;if(n)for(let t=0;t<r;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const i=n.child(e);t+i.attrs.rowspan>r&&(s+=i.attrs.colspan)}}for(let e=0;e<i.childCount;e++){const t=i.child(e);s+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=s:t!=s&&(t=Math.max(t,s))}return t}(e),n=e.childCount,r=[];let i=0,s=null;const o=[];for(let e=0,i=t*n;e<i;e++)r[e]=0;for(let a=0,l=0;a<n;a++){const c=e.child(a);l++;for(let e=0;;e++){for(;i<r.length&&0!=r[i];)i++;if(e==c.childCount)break;const u=c.child(e),{colspan:d,rowspan:h,colwidth:p}=u.attrs;for(let e=0;e<h;e++){if(e+a>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:l,n:h-e});break}const c=i+e*t;for(let e=0;e<d;e++){0==r[c+e]?r[c+e]=l:(s||(s=[])).push({type:"collision",row:a,pos:l,n:d-e});const n=p&&p[e];if(n){const r=(c+e)%t*2,i=o[r];null==i||i!=n&&1==o[r+1]?(o[r]=n,o[r+1]=1):i==n&&o[r+1]++}}}i+=d,l+=u.nodeSize}const u=(a+1)*t;let d=0;for(;i<u;)0==r[i++]&&d++;d&&(s||(s=[])).push({type:"missing",row:a,n:d}),l++}0!==t&&0!==n||(s||(s=[])).push({type:"zero_sized"});const a=new NC(t,n,r,s);let l=!1;for(let e=0;!l&&e<o.length;e+=2)null!=o[e]&&o[e+1]<n&&(l=!0);return l&&function(e,t,n){e.problems||(e.problems=[]);const r={};for(let i=0;i<e.map.length;i++){const s=e.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let n=0;n<l.colspan;n++){const r=t[(i+n)%e.width*2];null==r||l.colwidth&&l.colwidth[n]==r||((a||(a=RC(l)))[n]=r)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}(a,o,e),a}(e))}};function RC(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function UC(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}}return t}var BC=new hu("selectingCells");function FC(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function zC(e){const t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function $C(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;const n=FC(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function qC(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function HC(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function VC(e,t,n){const r=e.node(-1),i=NC.get(r),s=e.start(-1),o=i.nextCell(e.pos-s,t,n);return null==o?null:e.node(0).resolve(s+o)}function WC(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(e=>e>0)||(r.colwidth=null)),r}function GC(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}var KC=class e extends Hc{constructor(e,t=e){const n=e.node(-1),r=NC.get(n),i=e.start(-1),s=r.rectBetween(e.pos-i,t.pos-i),o=e.node(0),a=r.cellsInRect(s).filter(e=>e!=t.pos-i);a.unshift(t.pos-i);const l=a.map(e=>{const t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);const r=i+e+1;return new Vc(o.resolve(r),o.resolve(r+t.content.size))});super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(t,n){const r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(qC(r)&&qC(i)&&HC(r,i)){const t=this.$anchorCell.node(-1)!=r.node(-1);return t&&this.isRowSelection()?e.rowSelection(r,i):t&&this.isColSelection()?e.colSelection(r,i):new e(r,i)}return Kc.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=NC.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},s=[];for(let n=r.top;n<r.bottom;n++){const o=[];for(let s=n*t.width+r.left,a=r.left;a<r.right;a++,s++){const n=t.map[s];if(i[n])continue;i[n]=!0;const a=t.findCell(n);let l=e.nodeAt(n);if(!l)throw RangeError(`No cell with offset ${n} found`);const c=r.left-a.left,u=a.right-r.right;if(c>0||u>0){let e=l.attrs;if(c>0&&(e=WC(e,0,c)),u>0&&(e=WC(e,e.colspan-u,u)),a.left<r.left){if(l=l.type.createAndFill(e),!l)throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else l=l.type.create(e,l.content)}if(a.top<r.top||a.bottom>r.bottom){const e={...l.attrs,rowspan:Math.min(a.bottom,r.bottom)-Math.max(a.top,r.top)};l=a.top<r.top?l.type.createAndFill(e):l.type.create(e,l.content)}o.push(l)}s.push(e.child(n).copy(Ga.from(o)))}const o=this.isColSelection()&&this.isRowSelection()?e:s;return new Za(Ga.from(o),1,1)}replace(e,t=Za.empty){const n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){const{$from:s,$to:o}=r[i],a=e.mapping.slice(n);e.replace(a.map(s.pos),a.map(o.pos),i?Za.empty:t)}const i=Hc.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,t){this.replace(e,new Za(Ga.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=NC.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let n=0;n<i.length;n++)e(t.nodeAt(i[n]),r+i[n])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const r=t.node(-1),i=NC.get(r),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(n.pos-s),l=t.node(0);return o.top<=a.top?(o.top>0&&(t=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(t=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new e(t,n)}isRowSelection(){const e=this.$anchorCell.node(-1),t=NC.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),i=t.colCount(this.$headCell.pos-n);if(Math.min(r,i)>0)return!1;const s=r+this.$anchorCell.nodeAfter.attrs.colspan,o=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,o)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const r=t.node(-1),i=NC.get(r),s=t.start(-1),o=i.findCell(t.pos-s),a=i.findCell(n.pos-s),l=t.node(0);return o.left<=a.left?(o.left>0&&(t=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(t=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){return new e(t.resolve(n),t.resolve(r))}getBookmark(){return new JC(this.$anchorCell.pos,this.$headCell.pos)}};KC.prototype.visible=!1,Hc.jsonID("cell",KC);var JC=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&HC(t,n)?new KC(t,n):Hc.near(n,1)}};function XC(e){if(!(e.selection instanceof KC))return null;const t=[];return e.selection.forEachCell((e,n)=>{t.push(Vh.node(n,n+e.nodeSize,{class:"selectedCell"}))}),Kh.create(e.doc,t)}var YC=new hu("fix-tables");function QC(e,t,n,r){const i=e.childCount,s=t.childCount;e:for(let o=0,a=0;o<s;o++){const s=t.child(o);for(let t=a,r=Math.min(i,o+3);t<r;t++)if(e.child(t)==s){a=t+1,n+=s.nodeSize;continue e}r(s,n),a<i&&e.child(a).sameMarkup(s)?QC(e.child(a),s,n+1,r):s.nodesBetween(0,s.content.size,r,n+1),n+=s.nodeSize}}function ZC(e,t){let n;const r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){const i=NC.get(t);if(!i.problems)return r;r||(r=e.tr);const s=[];for(let e=0;e<i.height;e++)s.push(0);for(let e=0;e<i.problems.length;e++){const o=i.problems[e];if("collision"==o.type){const e=t.nodeAt(o.pos);if(!e)continue;const i=e.attrs;for(let e=0;e<i.rowspan;e++)s[o.row+e]+=o.n;r.setNodeMarkup(r.mapping.map(n+1+o.pos),null,WC(i,i.colspan-o.n,o.n))}else if("missing"==o.type)s[o.row]+=o.n;else if("overlong_rowspan"==o.type){const e=t.nodeAt(o.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+o.pos),null,{...e.attrs,rowspan:e.attrs.rowspan-o.n})}else if("colwidth mismatch"==o.type){const e=t.nodeAt(o.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+o.pos),null,{...e.attrs,colwidth:o.colwidth})}else if("zero_sized"==o.type){const e=r.mapping.map(n);r.delete(e,e+t.nodeSize)}}let o,a;for(let e=0;e<s.length;e++)s[e]&&(null==o&&(o=e),a=e);for(let l=0,c=n+1;l<i.height;l++){const n=t.child(l),i=c+n.nodeSize,u=s[l];if(u>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const s=[];for(let n=0;n<u;n++){const n=UC(e.schema)[t].createAndFill();n&&s.push(n)}const d=0!=l&&o!=l-1||a!=l?i-1:c+1;r.insert(r.mapping.map(d),s)}c=i}return r.setMeta(YC,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&QC(t.doc,e.doc,0,r):e.doc.descendants(r),n}function eA(e){const t=e.selection,n=$C(e),r=n.node(-1),i=n.start(-1),s=NC.get(r);return{...t instanceof KC?s.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function tA(e,{map:t,tableStart:n,table:r},i){let s=i>0?-1:0;(function(e,t,n){const r=UC(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0})(t,r,i+s)&&(s=0==i||i==t.width?null:0);for(let o=0;o<t.height;o++){const a=o*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){const s=t.map[a],l=r.nodeAt(s);e.setNodeMarkup(e.mapping.map(n+s),null,GC(l.attrs,i-t.colCount(s))),o+=l.attrs.rowspan-1}else{const l=null==s?UC(r.type.schema).cell:r.nodeAt(t.map[a+s]).type,c=t.positionAt(o,i,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function nA(e,t){if(!zC(e))return!1;if(t){const n=eA(e);t(tA(e.tr,n,n.left))}return!0}function rA(e,t){if(!zC(e))return!1;if(t){const n=eA(e);t(tA(e.tr,n,n.right))}return!0}function iA(e,{map:t,table:n,tableStart:r},i){const s=e.mapping.maps.length;for(let o=0;o<t.height;){const a=o*t.width+i,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(s).map(r+l),null,WC(u,i-t.colCount(l)));else{const t=e.mapping.slice(s).map(r+l);e.delete(t,t+c.nodeSize)}o+=u.rowspan}}function sA(e,t){if(!zC(e))return!1;if(t){const n=eA(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;iA(r,n,e),e!=n.left;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=NC.get(e)}t(r)}return!0}function oA(e,{map:t,tableStart:n,table:r},i){var s;let o=n;for(let e=0;e<i;e++)o+=r.child(e).nodeSize;const a=[];let l=i>0?-1:0;(function(e,t,n){var r;const i=UC(t.type.schema).header_cell;for(let s=0;s<e.width;s++)if((null==(r=t.nodeAt(e.map[s+n*e.width]))?void 0:r.type)!=i)return!1;return!0})(t,r,i+l)&&(l=0==i||i==t.height?null:0);for(let o=0,c=t.width*i;o<t.width;o++,c++)if(i>0&&i<t.height&&t.map[c]==t.map[c-t.width]){const i=t.map[c],s=r.nodeAt(i).attrs;e.setNodeMarkup(n+i,null,{...s,rowspan:s.rowspan+1}),o+=s.colspan-1}else{const e=null==l?UC(r.type.schema).cell:null==(s=r.nodeAt(t.map[c+l*t.width]))?void 0:s.type,n=null==e?void 0:e.createAndFill();n&&a.push(n)}return e.insert(o,UC(r.type.schema).row.create(null,a)),e}function aA(e,t){if(!zC(e))return!1;if(t){const n=eA(e);t(oA(e.tr,n,n.top))}return!0}function lA(e,t){if(!zC(e))return!1;if(t){const n=eA(e);t(oA(e.tr,n,n.bottom))}return!0}function cA(e,{map:t,table:n,tableStart:r},i){let s=0;for(let e=0;e<i;e++)s+=n.child(e).nodeSize;const o=s+n.child(i).nodeSize,a=e.mapping.maps.length;e.delete(s+r,o+r);const l=new Set;for(let s=0,o=i*t.width;s<t.width;s++,o++){const c=t.map[o];if(!l.has(c))if(l.add(c),i>0&&c==t.map[o-t.width]){const t=n.nodeAt(c).attrs;e.setNodeMarkup(e.mapping.slice(a).map(c+r),null,{...t,rowspan:t.rowspan-1}),s+=t.colspan-1}else if(i<t.height&&c==t.map[o+t.width]){const o=n.nodeAt(c),l=o.attrs,u=o.type.create({...l,rowspan:o.attrs.rowspan-1},o.content),d=t.positionAt(i+1,s,n);e.insert(e.mapping.slice(a).map(r+d),u),s+=l.colspan-1}}}function uA(e,t){if(!zC(e))return!1;if(t){const n=eA(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;cA(r,n,e),e!=n.top;e--){const e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=NC.get(n.table)}t(r)}return!0}function dA(e){const t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function hA(e,t){const n=e.selection;if(!(n instanceof KC)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=eA(e),{map:i}=r;if(function({width:e,height:t,map:n},r){let i=r.top*e+r.left,s=i,o=(r.bottom-1)*e+r.left,a=i+(r.right-r.left-1);for(let t=r.top;t<r.bottom;t++){if(r.left>0&&n[s]==n[s-1]||r.right<e&&n[a]==n[a+1])return!0;s+=e,a+=e}for(let s=r.left;s<r.right;s++){if(r.top>0&&n[i]==n[i-e]||r.bottom<t&&n[o]==n[o+e])return!0;i++,o++}return!1}(i,r))return!1;if(t){const n=e.tr,s={};let o,a,l=Ga.empty;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){const c=i.map[e*i.width+t],u=r.table.nodeAt(c);if(!s[c]&&u)if(s[c]=!0,null==o)o=c,a=u;else{dA(u)||(l=l.append(u.content));const e=n.mapping.map(c+r.tableStart);n.delete(e,e+u.nodeSize)}}if(null==o||null==a)return!0;if(n.setNodeMarkup(o+r.tableStart,null,{...GC(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),rowspan:r.bottom-r.top}),l.size){const e=o+1+a.content.size,t=dA(a)?o+1:e;n.replaceWith(t+r.tableStart,e+r.tableStart,l)}n.setSelection(new KC(n.doc.resolve(o+r.tableStart))),t(n)}return!0}function pA(e,t){const n=UC(e.schema);return(r=({node:e})=>n[e.type.spec.tableRole],(e,t)=>{var n;const i=e.selection;let s,o;if(i instanceof KC){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=function(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(i.$from),!s)return!1;o=null==(n=FC(i.$from))?void 0:n.pos}if(null==s||null==o)return!1;if(1==s.attrs.colspan&&1==s.attrs.rowspan)return!1;if(t){let n=s.attrs;const a=[],l=n.colwidth;n.rowspan>1&&(n={...n,rowspan:1}),n.colspan>1&&(n={...n,colspan:1});const c=eA(e),u=e.tr;for(let e=0;e<c.right-c.left;e++)a.push(l?{...n,colwidth:l&&l[e]?[l[e]]:null}:n);let d;for(let e=c.top;e<c.bottom;e++){let t=c.map.positionAt(e,c.left,c.table);e==c.top&&(t+=s.nodeSize);for(let n=c.left,i=0;n<c.right;n++,i++)n==c.left&&e==c.top||u.insert(d=u.mapping.map(t+c.tableStart,1),r({node:s,row:e,col:n}).createAndFill(a[i]))}u.setNodeMarkup(o,r({node:s,row:c.top,col:c.left}),a[0]),i instanceof KC&&u.setSelection(new KC(u.doc.resolve(i.$anchorCell.pos),d?u.doc.resolve(d):void 0)),t(u)}return!0})(e,t);var r}function fA(e,t){return function(n,r){if(!zC(n))return!1;const i=$C(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){const s=n.tr;n.selection instanceof KC?n.selection.forEachCell((n,r)=>{n.attrs[e]!==t&&s.setNodeMarkup(r,null,{...n.attrs,[e]:t})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(s)}return!0}}function mA(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<r.length;e++){const i=t.table.nodeAt(r[e]);if(i&&i.type!==n.header_cell)return!1}return!0}function gA(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!zC(t))return!1;if(n){const r=UC(t.schema),i=eA(t),s=t.tr,o=i.map.cellsInRect("column"==e?{left:i.left,top:0,right:i.right,bottom:i.map.height}:"row"==e?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(e=>i.table.nodeAt(e));for(let e=0;e<o.length;e++)a[e].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[e],r.cell,a[e].attrs);if(0==s.steps.length)for(let e=0;e<o.length;e++)s.setNodeMarkup(i.tableStart+o[e],r.header_cell,a[e].attrs);n(s)}return!0}}(e):function(t,n){if(!zC(t))return!1;if(n){const r=UC(t.schema),i=eA(t),s=t.tr,o=mA("row",i,r),a=mA("column",i,r),l=("column"===e?o:"row"===e&&a)?1:0,c="column"==e?{left:0,top:l,right:1,bottom:i.map.height}:"row"==e?{left:l,top:0,right:i.map.width,bottom:1}:i,u="column"==e?a?r.cell:r.header_cell:"row"==e?o?r.cell:r.header_cell:r.cell;i.map.cellsInRect(c).forEach(e=>{const t=e+i.tableStart,n=s.doc.nodeAt(t);n&&s.setNodeMarkup(t,u,n.attrs)}),n(s)}return!0}}gA("row",{useDeprecatedLogic:!0}),gA("column",{useDeprecatedLogic:!0});var yA=gA("cell",{useDeprecatedLogic:!0});function vA(e){return function(t,n){if(!zC(t))return!1;const r=function(e,t){if(t<0){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){const r=e.node(-1).child(t),i=r.lastChild;if(i)return n-1-i.nodeSize;n-=r.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}($C(t),e);if(null==r)return!1;if(n){const e=t.doc.resolve(r);n(t.tr.setSelection(Kc.between(e,(i=e,i.node(0).resolve(i.pos+i.nodeAfter.nodeSize)))).scrollIntoView())}var i;return!0}}function bA(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function _A(e,t){const n=e.selection;if(!(n instanceof KC))return!1;if(t){const r=e.tr,i=UC(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(i)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new Za(i,0,0))}),r.docChanged&&t(r)}return!0}function wA(e,t){const n=e.createAndFill();return new $c(n).replace(0,n.content.size,t).doc}function SA(e,t,n,r,i,s,o,a){if(0==o||o==t.height)return!1;let l=!1;for(let c=i;c<s;c++){const i=o*t.width+c,s=t.map[i];if(t.map[i-t.width]==s){l=!0;const i=n.nodeAt(s),{top:u,left:d}=t.findCell(s);e.setNodeMarkup(e.mapping.slice(a).map(s+r),null,{...i.attrs,rowspan:o-u}),e.insert(e.mapping.slice(a).map(t.positionAt(o,d,n)),i.type.createAndFill({...i.attrs,rowspan:u+i.attrs.rowspan-o})),c+=i.attrs.colspan-1}}return l}function kA(e,t,n,r,i,s,o,a){if(0==o||o==t.width)return!1;let l=!1;for(let c=i;c<s;c++){const i=c*t.width+o,s=t.map[i];if(t.map[i-1]==s){l=!0;const i=n.nodeAt(s),u=t.colCount(s),d=e.mapping.slice(a).map(s+r);e.setNodeMarkup(d,null,WC(i.attrs,o-u,i.attrs.colspan-(o-u))),e.insert(d+i.nodeSize,i.type.createAndFill(WC(i.attrs,0,o-u))),c+=i.attrs.rowspan-1}}return l}function TA(e,t,n,r,i){let s=n?e.doc.nodeAt(n-1):e.doc;if(!s)throw new Error("No table found");let o=NC.get(s);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=e.tr;let h=0;function p(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");o=NC.get(s),h=d.mapping.maps.length}(function(e,t,n,r,i,s,o){const a=UC(e.doc.type.schema);let l,c;if(i>t.width)for(let s=0,u=0;s<t.height;s++){const d=n.child(s);u+=d.nodeSize;const h=[];let p;p=null==d.lastChild||d.lastChild.type==a.cell?l||(l=a.cell.createAndFill()):c||(c=a.header_cell.createAndFill());for(let e=t.width;e<i;e++)h.push(p);e.insert(e.mapping.slice(o).map(u-1+r),h)}if(s>t.height){const u=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,i);e++){const i=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==a.header_cell;u.push(i?c||(c=a.header_cell.createAndFill()):l||(l=a.cell.createAndFill()))}const d=a.row.create(null,Ga.from(u)),h=[];for(let e=t.height;e<s;e++)h.push(d);e.insert(e.mapping.slice(o).map(r+n.nodeSize-2),h)}return!(!l&&!c)})(d,o,s,n,c,u,h)&&p(),SA(d,o,s,n,l,c,a,h)&&p(),SA(d,o,s,n,l,c,u,h)&&p(),kA(d,o,s,n,a,u,l,h)&&p(),kA(d,o,s,n,a,u,c,h)&&p();for(let e=a;e<u;e++){const t=o.positionAt(e,l,s),r=o.positionAt(e,c,s);d.replace(d.mapping.slice(h).map(t+n),d.mapping.slice(h).map(r+n),new Za(i.rows[e-a],0,0))}p(),d.setSelection(new KC(d.doc.resolve(n+o.positionAt(a,l,s)),d.doc.resolve(n+o.positionAt(u-1,c-1,s)))),t(d)}var xA=Pp({ArrowLeft:CA("horiz",-1),ArrowRight:CA("horiz",1),ArrowUp:CA("vert",-1),ArrowDown:CA("vert",1),"Shift-ArrowLeft":AA("horiz",-1),"Shift-ArrowRight":AA("horiz",1),"Shift-ArrowUp":AA("vert",-1),"Shift-ArrowDown":AA("vert",1),Backspace:_A,"Mod-Backspace":_A,Delete:_A,"Mod-Delete":_A});function EA(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function CA(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof KC)return EA(n,r,Hc.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;const o=DA(i,e,t);if(null==o)return!1;if("horiz"==e)return EA(n,r,Hc.near(n.doc.resolve(s.head+t),t));{const i=n.doc.resolve(o),s=VC(i,e,t);let a;return a=s?Hc.near(s,1):t<0?Hc.near(n.doc.resolve(i.before(-1)),-1):Hc.near(n.doc.resolve(i.after(-1)),1),EA(n,r,a)}}}function AA(e,t){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof KC)o=s;else{const r=DA(i,e,t);if(null==r)return!1;o=new KC(n.doc.resolve(r))}const a=VC(o.$headCell,e,t);return!!a&&EA(n,r,new KC(o.$anchorCell,a))}}function OA(e,t){const n=FC(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new KC(n))),!0)}function MA(e,t,n){if(!zC(e.state))return!1;let r=function(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;const i=t.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if("row"==s)for(let e=0;e<t.childCount;e++){let i=t.child(e).content;const s=e?0:Math.max(0,n-1),l=e<t.childCount-1?0:Math.max(0,r-1);(s||l)&&(i=wA(UC(o).row,new Za(i,s,l)).content),a.push(i)}else{if("cell"!=s&&"header_cell"!=s)return null;a.push(n||r?wA(UC(o).row,new Za(t,n,r)).content:t)}return function(e,t){const n=[];for(let e=0;e<t.length;e++){const r=t[e];for(let t=r.childCount-1;t>=0;t--){const{rowspan:i,colspan:s}=r.child(t).attrs;for(let t=e;t<e+i;t++)n[t]=(n[t]||0)+s}}let r=0;for(let e=0;e<n.length;e++)r=Math.max(r,n[e]);for(let i=0;i<n.length;i++)if(i>=t.length&&t.push(Ga.empty),n[i]<r){const s=UC(e).cell.createAndFill(),o=[];for(let e=n[i];e<r;e++)o.push(s);t[i]=t[i].append(Ga.from(o))}return{height:t.length,width:r,rows:t}}(o,a)}(n);const i=e.state.selection;if(i instanceof KC){r||(r={width:1,height:1,rows:[Ga.from(wA(UC(e.state.schema).cell,n))]});const t=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),o=NC.get(t).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=function({width:e,height:t,rows:n},r,i){if(e!=r){const t=[],i=[];for(let e=0;e<n.length;e++){const s=n[e],o=[];for(let n=t[e]||0,i=0;n<r;i++){let a=s.child(i%s.childCount);n+a.attrs.colspan>r&&(a=a.type.createChecked(WC(a.attrs,a.attrs.colspan,n+a.attrs.colspan-r),a.content)),o.push(a),n+=a.attrs.colspan;for(let n=1;n<a.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+a.attrs.colspan}i.push(Ga.from(o))}n=i,e=r}if(t!=i){const e=[];for(let r=0,s=0;r<i;r++,s++){const o=[],a=n[s%t];for(let e=0;e<a.childCount;e++){let t=a.child(e);r+t.attrs.rowspan>i&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,i-t.attrs.rowspan)},t.content)),o.push(t)}e.push(Ga.from(o))}n=e,t=i}return{width:e,height:t,rows:n}}(r,o.right-o.left,o.bottom-o.top),TA(e.state,e.dispatch,s,o,r),!0}if(r){const t=$C(e.state),n=t.start(-1);return TA(e.state,e.dispatch,n,NC.get(t.node(-1)).findCell(t.pos-n),r),!0}return!1}function IA(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=jA(e,t.target);let i;if(t.shiftKey&&e.state.selection instanceof KC)s(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(i=FC(e.state.selection.$anchor))&&(null==(n=PA(e,t))?void 0:n.pos)!=i.pos)s(i,t),t.preventDefault();else if(!r)return;function s(t,n){let r=PA(e,n);const i=null==BC.getState(e.state);if(!r||!HC(t,r)){if(!i)return;r=t}const s=new KC(t,r);if(i||!e.state.selection.eq(s)){const n=e.state.tr.setSelection(s);i&&n.setMeta(BC,t.pos),e.dispatch(n)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",a),null!=BC.getState(e.state)&&e.dispatch(e.state.tr.setMeta(BC,-1))}function a(n){const i=n,a=BC.getState(e.state);let l;if(null!=a)l=e.state.doc.resolve(a);else if(jA(e,i.target)!=r&&(l=PA(e,t),!l))return o();l&&s(l,i)}e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",a)}function DA(e,t,n){if(!(e.state.selection instanceof Kc))return null;const{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){const s=r.before(i),o="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(o)?s:null}}return null}function jA(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function PA(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?FC(e.state.doc.resolve(n.pos)):null}var LA=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),NA(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,NA(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function NA(e,t,n,r,i,s){var o;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let e=0,n=0;e<u.childCount;e++){const{colspan:o,colwidth:d}=u.child(e).attrs;for(let e=0;e<o;e++,n++){const o=i==n?s:d&&d[e],u=o?o+"px":"";if(a+=o||r,o||(l=!1),c)c.style.width!=u&&(c.style.width=u),c=c.nextSibling;else{const e=document.createElement("col");e.style.width=u,t.appendChild(e)}}}for(;c;){const e=c.nextSibling;null==(o=c.parentNode)||o.removeChild(c),c=e}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var RA=new hu("tableColumnResizing");function UA({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:r=LA,lastColumnResizable:i=!0}={}){const s=new cu({key:RA,state:{init(e,t){var i,o;const a=null==(o=null==(i=s.spec)?void 0:i.props)?void 0:o.nodeViews,l=UC(t.schema).table.name;return r&&a&&(a[l]=(e,t)=>new r(e,n,t)),new BA(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>{const t=RA.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,r){if(!e.editable)return;const i=RA.getState(e.state);if(i&&!i.dragging){const s=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target);let o=-1;if(s){const{left:r,right:i}=s.getBoundingClientRect();t.clientX-r<=n?o=FA(e,t,"left",n):i-t.clientX<=n&&(o=FA(e,t,"right",n))}if(o!=i.activeHandle){if(!r&&-1!==o){const t=e.state.doc.resolve(o),n=t.node(-1),r=NC.get(n),i=t.start(-1);if(r.colCount(t.pos-i)+t.nodeAfter.attrs.colspan-1==r.width-1)return}$A(e,o)}}}(t,n,e,i)},mouseleave:e=>{!function(e){if(!e.editable)return;const t=RA.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&$A(e,-1)}(e)},mousedown:(e,r)=>{!function(e,t,n,r){var i;if(!e.editable)return!1;const s=null!=(i=e.dom.ownerDocument.defaultView)?i:window,o=RA.getState(e.state);if(!o||-1==o.activeHandle||o.dragging)return!1;const a=e.state.doc.nodeAt(o.activeHandle),l=function(e,t,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=e.domAtPos(t);let o=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let e=0;e<n;e++)r[e]&&(o-=r[e],a--);return o/a}(e,o.activeHandle,a.attrs);function c(t){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const r=RA.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){const r=e.state.doc.resolve(t),i=r.node(-1),s=NC.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let e=0;e<s.height;e++){const t=e*s.width+a;if(e&&s.map[t]==s.map[t-s.width])continue;const r=s.map[t],c=i.nodeAt(r).attrs,u=1==c.colspan?0:a-s.colCount(r);if(c.colwidth&&c.colwidth[u]==n)continue;const d=c.colwidth?c.colwidth.slice():HA(c.colspan);d[u]=n,l.setNodeMarkup(o+r,null,{...c,colwidth:d})}l.docChanged&&e.dispatch(l)}(e,r.activeHandle,zA(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(RA,{setDragging:null})))}function u(t){if(!t.which)return c(t);const i=RA.getState(e.state);if(i&&i.dragging){const s=zA(i.dragging,t,n);qA(e,i.activeHandle,s,r)}}e.dispatch(e.state.tr.setMeta(RA,{setDragging:{startX:t.clientX,startWidth:l}})),qA(e,o.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),t.preventDefault()}(e,r,t,n)}},decorations:e=>{const t=RA.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n;const r=[],i=e.doc.resolve(t),s=i.node(-1);if(!s)return Kh.empty;const o=NC.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let t=0;t<o.height;t++){const i=l+t*o.width;if(!(l!=o.width-1&&o.map[i]==o.map[i+1]||0!=t&&o.map[i]==o.map[i-o.width])){const t=o.map[i],l=a+t+s.nodeAt(t).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",(null==(n=RA.getState(e))?void 0:n.dragging)&&r.push(Vh.node(a+t,a+t+s.nodeAt(t).nodeSize,{class:"column-resize-dragging"})),r.push(Vh.widget(l,c))}}return Kh.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return s}var BA=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){const n=this,r=t.getMeta(RA);if(r&&null!=r.setHandle)return new e(r.setHandle,!1);if(r&&void 0!==r.setDragging)return new e(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){let r=t.mapping.map(n.activeHandle,-1);return qC(t.doc.resolve(r))||(r=-1),new e(r,n.dragging)}return n}};function FA(e,t,n,r){const i="right"==n?-r:r,s=e.posAtCoords({left:t.clientX+i,top:t.clientY});if(!s)return-1;const{pos:o}=s,a=FC(e.state.doc.resolve(o));if(!a)return-1;if("right"==n)return a.pos;const l=NC.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function zA(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function $A(e,t){e.dispatch(e.state.tr.setMeta(RA,{setHandle:t}))}function qA(e,t,n,r){const i=e.state.doc.resolve(t),s=i.node(-1),o=i.start(-1),a=NC.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=e.domAtPos(i.start(-1)).node;for(;l&&"TABLE"!=l.nodeName;)l=l.parentNode;l&&NA(s,l.firstChild,l,r,a,n)}function HA(e){return Array(e).fill(0)}function VA({allowTableNodeSelection:e=!1}={}){return new cu({key:BC,state:{init:()=>null,apply(e,t){const n=e.getMeta(BC);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;const{deleted:r,pos:i}=e.mapping.mapResult(t);return r?null:i}},props:{decorations:XC,handleDOMEvents:{mousedown:IA},createSelectionBetween:e=>null!=BC.getState(e.state)?e.state.selection:null,handleTripleClick:OA,handleKeyDown:xA,handlePaste:MA},appendTransaction:(t,n,r)=>function(e,t,n){const r=(t||e).selection,i=(t||e).doc;let s,o;if(r instanceof Xc&&(o=r.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)s=KC.create(i,r.from);else if("row"==o){const e=i.resolve(r.from+1);s=KC.rowSelection(e,e)}else if(!n){const e=NC.get(r.node),t=r.from+1,n=t+e.map[e.width*e.height-1];s=KC.create(i,t+1,n)}}else r instanceof Kc&&function({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,r=t.pos,i=e.depth;for(;i>=0&&!(e.after(i+1)<e.end(i));i--,n++);for(let e=t.depth;e>=0&&!(t.before(e+1)>t.start(e));e--,r--);return n==r&&/row|table/.test(e.node(i).type.spec.tableRole)}(r)?s=Kc.create(i,r.from):r instanceof Kc&&function({$from:e,$to:t}){let n,r;for(let t=e.depth;t>0;t--){const r=e.node(t);if("cell"===r.type.spec.tableRole||"header_cell"===r.type.spec.tableRole){n=r;break}}for(let e=t.depth;e>0;e--){const n=t.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){r=n;break}}return n!==r&&0===t.parentOffset}(r)&&(s=Kc.create(i,r.$from.start(),r.$from.end()));return s&&(t||(t=e.tr)).setSelection(s),t}(r,ZC(r,n),e)})}var WA=Wg.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML({HTMLAttributes:e}){return["td",Ef(this.options.HTMLAttributes,e),0]}}),GA=Wg.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML({HTMLAttributes:e}){return["th",Ef(this.options.HTMLAttributes,e),0]}}),KA=Wg.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML({HTMLAttributes:e}){return["tr",Ef(this.options.HTMLAttributes,e),0]}});function JA(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function XA(e,t,n,r,i,s){var o;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(null!==u)for(let e=0,n=0;e<u.childCount;e+=1){const{colspan:o,colwidth:d}=u.child(e).attrs;for(let e=0;e<o;e+=1,n+=1){const o=i===n?s:d&&d[e],u=o?`${o}px`:"";if(a+=o||r,o||(l=!1),c){if(c.style.width!==u){const[e,t]=JA(r,o);c.style.setProperty(e,t)}c=c.nextSibling}else{const e=document.createElement("col"),[n,i]=JA(r,o);e.style.setProperty(n,i),t.appendChild(e)}}}for(;c;){const e=c.nextSibling;null==(o=c.parentNode)||o.removeChild(c),c=e}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}var YA=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),XA(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type===this.node.type&&(this.node=e,XA(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}};function QA(e,t){return t?e.createChecked(null,t):e.createAndFill()}var ZA=({editor:e})=>{const{selection:t}=e.state;if(!(t instanceof KC))return!1;let n=0;const r=yf(t.ranges[0].$from,e=>"table"===e.type.name);return null==r||r.node.descendants(e=>{if("table"===e.type.name)return!1;["tableCell","tableHeader"].includes(e.type.name)&&(n+=1)}),n===t.ranges.length&&(e.commands.deleteTable(),!0)},eO=Wg.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:YA,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=function(e,t){let n=0,r=!0;const i=[],s=e.firstChild;if(!s)return{};for(let e=0,o=0;e<s.childCount;e+=1){const{colspan:a,colwidth:l}=s.child(e).attrs;for(let e=0;e<a;e+=1,o+=1){const s=undefined===o?undefined:l&&l[e];n+=s||t,s||(r=!1);const[a,c]=JA(t,s);i.push(["col",{style:`${a}: ${c}`}])}}const o=r?`${n}px`:"",a=r?"":`${n}px`;return{colgroup:["colgroup",{},...i],tableWidth:o,tableMinWidth:a}}(e,this.options.cellMinWidth);return["table",Ef(this.options.HTMLAttributes,t,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands:()=>({insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=function(e,t,n,r,i){const s=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}(e),o=[],a=[];for(let e=0;e<n;e+=1){const e=QA(s.cell,i);if(e&&a.push(e),r){const e=QA(s.header_cell,i);e&&o.push(e)}}const l=[];for(let e=0;e<t;e+=1)l.push(s.row.createChecked(null,r&&0===e?o:a));return s.table.createChecked(null,l)}(s.schema,e,t,n);if(i){const e=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(Kc.near(r.doc.resolve(e)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>nA(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>rA(e,t),deleteColumn:()=>({state:e,dispatch:t})=>sA(e,t),addRowBefore:()=>({state:e,dispatch:t})=>aA(e,t),addRowAfter:()=>({state:e,dispatch:t})=>lA(e,t),deleteRow:()=>({state:e,dispatch:t})=>uA(e,t),deleteTable:()=>({state:e,dispatch:t})=>bA(e,t),mergeCells:()=>({state:e,dispatch:t})=>hA(e,t),splitCell:()=>({state:e,dispatch:t})=>pA(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>gA("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>gA("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>yA(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>!!hA(e,t)||pA(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>fA(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>vA(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>vA(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&ZC(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const n=KC.create(t.doc,e.anchorCell,e.headCell);t.setSelection(n)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:ZA,"Mod-Backspace":ZA,Delete:ZA,"Mod-Delete":ZA}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[UA({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],VA({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:e=>({tableRole:kf(bf(e,"tableRole",{name:e.name,options:e.options,storage:e.storage}))})}),tO=ym.create({name:"tableKit",addExtensions(){const e=[];return!1!==this.options.table&&e.push(eO.configure(this.options.table)),!1!==this.options.tableCell&&e.push(WA.configure(this.options.tableCell)),!1!==this.options.tableHeader&&e.push(GA.configure(this.options.tableHeader)),!1!==this.options.tableRow&&e.push(KA.configure(this.options.tableRow)),e}}),nO=Wg.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML({HTMLAttributes:e}){return["td",Ef(this.options.HTMLAttributes,e),0]}}),rO=Wg.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML({HTMLAttributes:e}){return["th",Ef(this.options.HTMLAttributes,e),0]}}),iO=Wg.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML({HTMLAttributes:e}){return["tr",Ef(this.options.HTMLAttributes,e),0]}});function sO(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function oO(e,t,n,r,i,s){var o;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(null!==u)for(let e=0,n=0;e<u.childCount;e+=1){const{colspan:o,colwidth:d}=u.child(e).attrs;for(let e=0;e<o;e+=1,n+=1){const o=i===n?s:d&&d[e],u=o?`${o}px`:"";if(a+=o||r,o||(l=!1),c){if(c.style.width!==u){const[e,t]=sO(r,o);c.style.setProperty(e,t)}c=c.nextSibling}else{const e=document.createElement("col"),[n,i]=sO(r,o);e.style.setProperty(n,i),t.appendChild(e)}}}for(;c;){const e=c.nextSibling;null==(o=c.parentNode)||o.removeChild(c),c=e}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}var aO=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),oO(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type===this.node.type&&(this.node=e,oO(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}};function lO(e,t){return t?e.createChecked(null,t):e.createAndFill()}var cO=({editor:e})=>{const{selection:t}=e.state;if(!(t instanceof KC))return!1;let n=0;const r=yf(t.ranges[0].$from,e=>"table"===e.type.name);return null==r||r.node.descendants(e=>{if("table"===e.type.name)return!1;["tableCell","tableHeader"].includes(e.type.name)&&(n+=1)}),n===t.ranges.length&&(e.commands.deleteTable(),!0)},uO=Wg.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:aO,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=function(e,t){let n=0,r=!0;const i=[],s=e.firstChild;if(!s)return{};for(let e=0,o=0;e<s.childCount;e+=1){const{colspan:a,colwidth:l}=s.child(e).attrs;for(let e=0;e<a;e+=1,o+=1){const s=undefined===o?undefined:l&&l[e];n+=s||t,s||(r=!1);const[a,c]=sO(t,s);i.push(["col",{style:`${a}: ${c}`}])}}const o=r?`${n}px`:"",a=r?"":`${n}px`;return{colgroup:["colgroup",{},...i],tableWidth:o,tableMinWidth:a}}(e,this.options.cellMinWidth);return["table",Ef(this.options.HTMLAttributes,t,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands:()=>({insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=function(e,t,n,r,i){const s=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}(e),o=[],a=[];for(let e=0;e<n;e+=1){const e=lO(s.cell,i);if(e&&a.push(e),r){const e=lO(s.header_cell,i);e&&o.push(e)}}const l=[];for(let e=0;e<t;e+=1)l.push(s.row.createChecked(null,r&&0===e?o:a));return s.table.createChecked(null,l)}(s.schema,e,t,n);if(i){const e=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(Kc.near(r.doc.resolve(e)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>nA(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>rA(e,t),deleteColumn:()=>({state:e,dispatch:t})=>sA(e,t),addRowBefore:()=>({state:e,dispatch:t})=>aA(e,t),addRowAfter:()=>({state:e,dispatch:t})=>lA(e,t),deleteRow:()=>({state:e,dispatch:t})=>uA(e,t),deleteTable:()=>({state:e,dispatch:t})=>bA(e,t),mergeCells:()=>({state:e,dispatch:t})=>hA(e,t),splitCell:()=>({state:e,dispatch:t})=>pA(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>gA("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>gA("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>yA(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>!!hA(e,t)||pA(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>fA(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>vA(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>vA(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&ZC(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const n=KC.create(t.doc,e.anchorCell,e.headCell);t.setSelection(n)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:cO,"Mod-Backspace":cO,Delete:cO,"Mod-Delete":cO}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[UA({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],VA({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:e=>({tableRole:kf(bf(e,"tableRole",{name:e.name,options:e.options,storage:e.storage}))})}),dO=(ym.create({name:"tableKit",addExtensions(){const e=[];return!1!==this.options.table&&e.push(uO.configure(this.options.table)),!1!==this.options.tableCell&&e.push(nO.configure(this.options.tableCell)),!1!==this.options.tableHeader&&e.push(rO.configure(this.options.tableHeader)),!1!==this.options.tableRow&&e.push(iO.configure(this.options.tableRow)),e}}),nO);const hO=["top","right","bottom","left"],pO=["start","end"],fO=hO.reduce((e,t)=>e.concat(t,t+"-"+pO[0],t+"-"+pO[1]),[]),mO=Math.min,gO=Math.max,yO=Math.round,vO=(Math.floor,e=>({x:e,y:e})),bO={left:"right",right:"left",bottom:"top",top:"bottom"},_O={start:"end",end:"start"};function wO(e,t,n){return gO(e,mO(t,n))}function SO(e,t){return"function"==typeof e?e(t):e}function kO(e){return e.split("-")[0]}function TO(e){return e.split("-")[1]}function xO(e){return"x"===e?"y":"x"}function EO(e){return"y"===e?"height":"width"}const CO=new Set(["top","bottom"]);function AO(e){return CO.has(kO(e))?"y":"x"}function OO(e){return xO(AO(e))}function MO(e,t,n){void 0===n&&(n=!1);const r=TO(e),i=OO(e),s=EO(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=NO(o)),[o,NO(o)]}function IO(e){return e.replace(/start|end/g,e=>_O[e])}const DO=["left","right"],jO=["right","left"],PO=["top","bottom"],LO=["bottom","top"];function NO(e){return e.replace(/left|right|bottom|top/g,e=>bO[e])}function RO(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function UO(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function BO(e,t,n){let{reference:r,floating:i}=e;const s=AO(t),o=OO(t),a=EO(o),l=kO(t),c="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(TO(t)){case"start":p[o]-=h*(n&&c?-1:1);break;case"end":p[o]+=h*(n&&c?-1:1)}return p}async function FO(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=SO(t,e),f=RO(p),m=a[h?"floating"===d?"reference":"floating":d],g=UO(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),b=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},_=UO(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-_.top+f.top)/b.y,bottom:(_.bottom-g.bottom+f.bottom)/b.y,left:(g.left-_.left+f.left)/b.x,right:(_.right-g.right+f.right)/b.x}}function zO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $O(e){return hO.some(t=>e[t]>=0)}function qO(e){const t=mO(...e.map(e=>e.left)),n=mO(...e.map(e=>e.top));return{x:t,y:n,width:gO(...e.map(e=>e.right))-t,height:gO(...e.map(e=>e.bottom))-n}}const HO=new Set(["left","top"]);function VO(){return"undefined"!=typeof window}function WO(e){return JO(e)?(e.nodeName||"").toLowerCase():"#document"}function GO(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function KO(e){var t;return null==(t=(JO(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function JO(e){return!!VO()&&(e instanceof Node||e instanceof GO(e).Node)}function XO(e){return!!VO()&&(e instanceof Element||e instanceof GO(e).Element)}function YO(e){return!!VO()&&(e instanceof HTMLElement||e instanceof GO(e).HTMLElement)}function QO(e){return!(!VO()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof GO(e).ShadowRoot)}const ZO=new Set(["inline","contents"]);function eM(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=hM(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!ZO.has(i)}const tM=new Set(["table","td","th"]);function nM(e){return tM.has(WO(e))}const rM=[":popover-open",":modal"];function iM(e){return rM.some(t=>{try{return e.matches(t)}catch(e){return!1}})}const sM=["transform","translate","scale","rotate","perspective"],oM=["transform","translate","scale","rotate","perspective","filter"],aM=["paint","layout","strict","content"];function lM(e){const t=cM(),n=XO(e)?hM(e):e;return sM.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||oM.some(e=>(n.willChange||"").includes(e))||aM.some(e=>(n.contain||"").includes(e))}function cM(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const uM=new Set(["html","body","#document"]);function dM(e){return uM.has(WO(e))}function hM(e){return GO(e).getComputedStyle(e)}function pM(e){return XO(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fM(e){if("html"===WO(e))return e;const t=e.assignedSlot||e.parentNode||QO(e)&&e.host||KO(e);return QO(t)?t.host:t}function mM(e){const t=fM(e);return dM(t)?e.ownerDocument?e.ownerDocument.body:e.body:YO(t)&&eM(t)?t:mM(t)}function gM(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=mM(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=GO(i);if(s){const e=yM(o);return t.concat(o,o.visualViewport||[],eM(i)?i:[],e&&n?gM(e):[])}return t.concat(i,gM(i,[],n))}function yM(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vM(e){const t=hM(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=YO(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=yO(n)!==s||yO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function bM(e){return XO(e)?e:e.contextElement}function _M(e){const t=bM(e);if(!YO(t))return vO(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=vM(t);let o=(s?yO(n.width):n.width)/r,a=(s?yO(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const wM=vO(0);function SM(e){const t=GO(e);return cM()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:wM}function kM(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=bM(e);let o=vO(1);t&&(r?XO(r)&&(o=_M(r)):o=_M(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==GO(e))&&t}(s,n,r)?SM(s):vO(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const e=GO(s),t=r&&XO(r)?GO(r):r;let n=e,i=yM(n);for(;i&&r&&t!==n;){const e=_M(i),t=i.getBoundingClientRect(),r=hM(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=o,n=GO(i),i=yM(n)}}return UO({width:u,height:d,x:l,y:c})}function TM(e,t){const n=pM(e).scrollLeft;return t?t.left+n:kM(KO(e)).left+n}function xM(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:TM(e,r)),y:r.top+t.scrollTop}}const EM=new Set(["absolute","fixed"]);function CM(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=GO(e),r=KO(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const e=cM();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=KO(e),n=pM(e),r=e.ownerDocument.body,i=gO(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=gO(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+TM(e);const a=-n.scrollTop;return"rtl"===hM(r).direction&&(o+=gO(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}(KO(e));else if(XO(t))r=function(e,t){const n=kM(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=YO(e)?_M(e):vO(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=SM(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return UO(r)}function AM(e,t){const n=fM(e);return!(n===t||!XO(n)||dM(n))&&("fixed"===hM(n).position||AM(n,t))}function OM(e,t,n){const r=YO(t),i=KO(t),s="fixed"===n,o=kM(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=vO(0);function c(){l.x=TM(i)}if(r||!r&&!s)if(("body"!==WO(t)||eM(i))&&(a=pM(t)),r){const e=kM(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();s&&!r&&i&&c();const u=!i||r||s?vO(0):xM(i,a);return{x:o.left+a.scrollLeft-l.x-u.x,y:o.top+a.scrollTop-l.y-u.y,width:o.width,height:o.height}}function MM(e){return"static"===hM(e).position}function IM(e,t){if(!YO(e)||"fixed"===hM(e).position)return null;if(t)return t(e);let n=e.offsetParent;return KO(e)===n&&(n=n.ownerDocument.body),n}function DM(e,t){const n=GO(e);if(iM(e))return n;if(!YO(e)){let t=fM(e);for(;t&&!dM(t);){if(XO(t)&&!MM(t))return t;t=fM(t)}return n}let r=IM(e,t);for(;r&&nM(r)&&MM(r);)r=IM(r,t);return r&&dM(r)&&MM(r)&&!lM(r)?n:r||function(e){let t=fM(e);for(;YO(t)&&!dM(t);){if(lM(t))return t;if(iM(t))return null;t=fM(t)}return null}(e)||n}const jM={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,o=KO(r),a=!!t&&iM(t.floating);if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=vO(1);const u=vO(0),d=YO(r);if((d||!d&&!s)&&(("body"!==WO(r)||eM(o))&&(l=pM(r)),YO(r))){const e=kM(r);c=_M(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!o||d||s?vO(0):xM(o,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:KO,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s="clippingAncestors"===n?iM(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=gM(e,[],!1).filter(e=>XO(e)&&"body"!==WO(e)),i=null;const s="fixed"===hM(e).position;let o=s?fM(e):e;for(;XO(o)&&!dM(o);){const t=hM(o),n=lM(o);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&EM.has(i.position)||eM(o)&&!n&&AM(e,o))?r=r.filter(e=>e!==o):i=t,o=fM(o)}return t.set(e,r),r}(t,this._c):[].concat(n),o=[...s,r],a=o[0],l=o.reduce((e,n)=>{const r=CM(t,n,i);return e.top=gO(r.top,e.top),e.right=mO(r.right,e.right),e.bottom=mO(r.bottom,e.bottom),e.left=gO(r.left,e.left),e},CM(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:DM,getElementRects:async function(e){const t=this.getOffsetParent||DM,n=this.getDimensions,r=await n(e.floating);return{reference:OM(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=vM(e);return{width:t,height:n}},getScale:_M,isElement:XO,isRTL:function(e){return"rtl"===hM(e).direction}},PM=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=kO(n),a=TO(n),l="y"===AO(n),c=HO.has(o)?-1:1,u=s&&l?-1:1,d=SO(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},LM=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,i;const{rects:s,middlewareData:o,placement:a,platform:l,elements:c}=t,{crossAxis:u=!1,alignment:d,allowedPlacements:h=fO,autoAlignment:p=!0,...f}=SO(e,t),m=void 0!==d||h===fO?function(e,t,n){return(e?[...n.filter(t=>TO(t)===e),...n.filter(t=>TO(t)!==e)]:n.filter(e=>kO(e)===e)).filter(n=>!e||TO(n)===e||!!t&&IO(n)!==n)}(d||null,p,h):h,g=await FO(t,f),y=(null==(n=o.autoPlacement)?void 0:n.index)||0,v=m[y];if(null==v)return{};const b=MO(v,s,await(null==l.isRTL?void 0:l.isRTL(c.floating)));if(a!==v)return{reset:{placement:m[0]}};const _=[g[kO(v)],g[b[0]],g[b[1]]],w=[...(null==(r=o.autoPlacement)?void 0:r.overflows)||[],{placement:v,overflows:_}],S=m[y+1];if(S)return{data:{index:y+1,overflows:w},reset:{placement:S}};const k=w.map(e=>{const t=TO(e.placement);return[e.placement,t&&u?e.overflows.slice(0,2).reduce((e,t)=>e+t,0):e.overflows[0],e.overflows]}).sort((e,t)=>e[1]-t[1]),T=(null==(i=k.filter(e=>e[2].slice(0,TO(e[0])?2:3).every(e=>e<=0))[0])?void 0:i[0])||k[0][0];return T!==a?{data:{index:y+1,overflows:w},reset:{placement:T}}:{}}}},NM=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=SO(e,t),c={x:n,y:r},u=await FO(t,l),d=AO(kO(i)),h=xO(d);let p=c[h],f=c[d];if(s){const e="y"===h?"bottom":"right";p=wO(p+u["y"===h?"top":"left"],p,p-u[e])}if(o){const e="y"===d?"bottom":"right";f=wO(f+u["y"===d?"top":"left"],f,f-u[e])}const m=a.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[d]:o}}}}}},RM=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=SO(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const y=kO(i),v=AO(a),b=kO(a)===a,_=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(b||!m?[NO(a)]:function(e){const t=NO(e);return[IO(e),t,IO(t)]}(a)),S="none"!==f;!h&&S&&w.push(...function(e,t,n,r){const i=TO(e);let s=function(e,t,n){switch(e){case"top":case"bottom":return n?t?jO:DO:t?DO:jO;case"left":case"right":return t?PO:LO;default:return[]}}(kO(e),"start"===n,r);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(IO)))),s}(a,m,f,_));const k=[a,...w],T=await FO(t,g),x=[];let E=(null==(r=s.flip)?void 0:r.overflows)||[];if(u&&x.push(T[y]),d){const e=MO(i,o,_);x.push(T[e[0]],T[e[1]])}if(E=[...E,{placement:i,overflows:x}],!x.every(e=>e<=0)){var C,A;const e=((null==(C=s.flip)?void 0:C.index)||0)+1,t=k[e];if(t&&("alignment"!==d||v===AO(t)||E.every(e=>e.overflows[0]>0&&AO(e.placement)===v)))return{data:{index:e,overflows:E},reset:{placement:t}};let n=null==(A=E.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:A.placement;if(!n)switch(p){case"bestFit":{var O;const e=null==(O=E.filter(e=>{if(S){const t=AO(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:O[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},UM=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=SO(e,t),u=await FO(t,c),d=kO(i),h=TO(i),p="y"===AO(i),{width:f,height:m}=s.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const v=m-u.top-u.bottom,b=f-u.left-u.right,_=mO(m-u[g],v),w=mO(f-u[y],b),S=!t.middlewareData.shift;let k=_,T=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(T=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=v),S&&!h){const e=gO(u.left,0),t=gO(u.right,0),n=gO(u.top,0),r=gO(u.bottom,0);p?T=f-2*(0!==e||0!==t?e+t:gO(u.left,u.right)):k=m-2*(0!==n||0!==r?n+r:gO(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:k});const x=await o.getDimensions(a.floating);return f!==x.width||m!==x.height?{reset:{rects:!0}}:{}}}},BM=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=SO(e,t);switch(r){case"referenceHidden":{const e=zO(await FO(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:$O(e)}}}case"escaped":{const e=zO(await FO(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:$O(e)}}}default:return{}}}}},FM=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=SO(e,t)||{};if(null==c)return{};const d=RO(u),h={x:n,y:r},p=OO(i),f=EO(p),m=await o.getDimensions(c),g="y"===p,y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[f]+s.reference[p]-h[p]-s.floating[f],w=h[p]-s.reference[p],S=await(null==o.getOffsetParent?void 0:o.getOffsetParent(c));let k=S?S[b]:0;k&&await(null==o.isElement?void 0:o.isElement(S))||(k=a.floating[b]||s.floating[f]);const T=_/2-w/2,x=k/2-m[f]/2-1,E=mO(d[y],x),C=mO(d[v],x),A=E,O=k-m[f]-C,M=k/2-m[f]/2+T,I=wO(A,M,O),D=!l.arrow&&null!=TO(i)&&M!==I&&s.reference[f]/2-(M<A?E:C)-m[f]/2<0,j=D?M<A?M-A:M-O:0;return{[p]:h[p]+j,data:{[p]:I,centerOffset:M-I-j,...D&&{alignmentOffset:j}},reset:D}}}),zM=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:c}=SO(e,t),u=Array.from(await(null==s.getClientRects?void 0:s.getClientRects(r.reference))||[]),d=function(e){const t=e.slice().sort((e,t)=>e.y-t.y),n=[];let r=null;for(let e=0;e<t.length;e++){const i=t[e];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(e=>UO(qO(e)))}(u),h=UO(qO(u)),p=RO(a),f=await s.getElementRects({reference:{getBoundingClientRect:function(){if(2===d.length&&d[0].left>d[1].right&&null!=l&&null!=c)return d.find(e=>l>e.left-p.left&&l<e.right+p.right&&c>e.top-p.top&&c<e.bottom+p.bottom)||h;if(d.length>=2){if("y"===AO(n)){const e=d[0],t=d[d.length-1],r="top"===kO(n),i=e.top,s=t.bottom,o=r?e.left:t.left,a=r?e.right:t.right;return{top:i,bottom:s,left:o,right:a,width:a-o,height:s-i,x:o,y:i}}const e="left"===kO(n),t=gO(...d.map(e=>e.right)),r=mO(...d.map(e=>e.left)),i=d.filter(n=>e?n.left===r:n.right===t),s=i[0].top,o=i[i.length-1].bottom;return{top:s,bottom:o,left:r,right:t,width:t-r,height:o-s,x:r,y:s}}return h}},floating:r.floating,strategy:o});return i.reference.x!==f.reference.x||i.reference.y!==f.reference.y||i.reference.width!==f.reference.width||i.reference.height!==f.reference.height?{reset:{rects:f}}:{}}}},$M=(e,t,n)=>{const r=new Map,i={platform:jM,...n},s={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=BO(c,r,l),h=r,p={},f=0;for(let n=0;n<a.length;n++){const{name:s,fn:m}=a[n],{x:g,y,data:v,reset:b}=await m({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,p={...p,[s]:{...p[s],...v}},b&&f<=50&&(f++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=BO(c,h,l))),n=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}})(e,t,{...i,platform:s})};var qM=class{constructor({editor:e,element:t,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:s,options:o}){this.preventHide=!1,this.isVisible=!1,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:e,state:t,from:n,to:r})=>{const{doc:i,selection:s}=t,{empty:o}=s,a=!i.textBetween(n,r).length&&nm(t.selection),l=this.element.contains(document.activeElement);return!(!e.hasFocus()&&!l||o||a||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null==e?void 0:e.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(e.relatedTarget))||(null==e?void 0:e.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(e,t)=>{const n=!(null==t?void 0:t.selection.eq(e.state.selection)),r=!(null==t?void 0:t.doc.eq(e.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(e,n,r,t)},this.updateDelay))},this.updateHandler=(e,t,n,r)=>{const{composing:i}=e;i||!t&&!n||(this.getShouldShow(r)?(this.updatePosition(),this.show()):this.hide())},this.editor=e,this.element=t,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.floatingUIOptions={...this.floatingUIOptions,...o},s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),window.addEventListener("resize",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(RM("boolean"!=typeof this.floatingUIOptions.flip?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(NM("boolean"!=typeof this.floatingUIOptions.shift?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(PM("boolean"!=typeof this.floatingUIOptions.offset?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(FM(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(UM("boolean"!=typeof this.floatingUIOptions.size?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(LM("boolean"!=typeof this.floatingUIOptions.autoPlacement?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(BM("boolean"!=typeof this.floatingUIOptions.hide?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(zM("boolean"!=typeof this.floatingUIOptions.inline?this.floatingUIOptions.inline:void 0)),e}updatePosition(){const{selection:e}=this.editor.state;let t={getBoundingClientRect:()=>im(this.view,e.from,e.to)};if(e instanceof KC){const{$anchorCell:n,$headCell:r}=e,i=n?n.pos:r.pos,s=r?r.pos:n.pos,o=this.view.nodeDOM(i),a=this.view.nodeDOM(s);if(!o||!a)return;const l=o===a?o.getBoundingClientRect():function(e,t){const n=Math.min(e.top,t.top),r=Math.max(e.bottom,t.bottom),i=Math.min(e.left,t.left),s=Math.max(e.right,t.right);return new DOMRect(i,n,s-i,r-n)}(o.getBoundingClientRect(),a.getBoundingClientRect());t={getBoundingClientRect:()=>l}}$M(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:t,strategy:n})=>{this.element.style.width="max-content",this.element.style.position=n,this.element.style.left=`${e}px`,this.element.style.top=`${t}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(e,t);const i=!(null==t?void 0:t.selection.eq(e.state.selection)),s=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,i,s,t)}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(e=>e.$from.pos)),o=Math.max(...i.map(e=>e.$to.pos));return null==(t=this.shouldShow)?void 0:t.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:e,from:s,to:o})}show(){var e;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",null==(e=this.view.dom.parentElement)||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},HM=ym.create({name:"bubbleMenu",addOptions:()=>({element:null,pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[(e={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow},new cu({key:"string"==typeof e.pluginKey?new hu(e.pluginKey):e.pluginKey,view:t=>new qM({view:t,...e})}))]:[];var e}}),VM=class{constructor({editor:e,element:t,view:n,options:r,shouldShow:i}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=({view:e,state:t})=>{const{selection:n}=t,{$anchor:r,empty:i}=n,s=1===r.depth,o=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent&&0===r.parent.childCount&&!this.getTextContent(r.parent);return!!(e.hasFocus()&&i&&s&&o&&this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(e,t,n,r)=>{const{composing:i}=e;i||!t&&!n||(this.getShouldShow(r)?(this.updatePosition(),this.show()):this.hide())},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null==e?void 0:e.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(e.relatedTarget))||(null==e?void 0:e.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=e,this.element=t,this.view=n,this.floatingUIOptions={...this.floatingUIOptions,...r},i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}getTextContent(e){return Pf(e,{textSerializers:Lf(this.editor.schema)})}get middlewares(){const e=[];return this.floatingUIOptions.flip&&e.push(RM("boolean"!=typeof this.floatingUIOptions.flip?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push(NM("boolean"!=typeof this.floatingUIOptions.shift?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push(PM("boolean"!=typeof this.floatingUIOptions.offset?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push(FM(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push(UM("boolean"!=typeof this.floatingUIOptions.size?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push(LM("boolean"!=typeof this.floatingUIOptions.autoPlacement?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push(BM("boolean"!=typeof this.floatingUIOptions.hide?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push(zM("boolean"!=typeof this.floatingUIOptions.inline?this.floatingUIOptions.inline:void 0)),e}getShouldShow(e){var t;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,s=Math.min(...i.map(e=>e.$from.pos)),o=Math.max(...i.map(e=>e.$to.pos));return null==(t=this.shouldShow)?void 0:t.call(this,{editor:this.editor,view:this.view,state:n,oldState:e,from:s,to:o})}updatePosition(){const{selection:e}=this.editor.state;$M({getBoundingClientRect:()=>im(this.view,e.from,e.to)},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:t,strategy:n})=>{this.element.style.width="max-content",this.element.style.position=n,this.element.style.left=`${e}px`,this.element.style.top=`${t}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){const n=!(null==t?void 0:t.selection.eq(e.state.selection)),r=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,n,r,t)}show(){var e;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",null==(e=this.view.dom.parentElement)||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},WM=ym.create({name:"floatingMenu",addOptions:()=>({element:null,options:{},pluginKey:"floatingMenu",shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[(e={pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,shouldShow:this.options.shouldShow},new cu({key:"string"==typeof e.pluginKey?new hu(e.pluginKey):e.pluginKey,view:t=>new VM({view:t,...e})}))]:[];var e}});function GM(e){if(!e.length)return Kh.empty;const t=[],n=e[0].$from.node(0);return e.forEach(e=>{const n=e.$from.pos,r=e.$from.nodeAfter;r&&t.push(Vh.node(n,n+r.nodeSize,{class:"ProseMirror-selectednoderange"}))}),Kh.create(n,t)}function KM(e,t,n){const r=[],i=e.node(0);"number"==typeof n&&n>=0||(n=e.sameParent(t)?Math.max(0,e.sharedDepth(t.pos)-1):e.sharedDepth(t.pos));const s=new ml(e,t,n),o=0===s.depth?0:i.resolve(s.start).posAtIndex(0);return s.parent.forEach((e,t)=>{const n=o+t,a=n+e.nodeSize;if(n<s.start||n>=s.end)return;const l=new Vc(i.resolve(n),i.resolve(a));r.push(l)}),r}var JM=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return new XM(t,n)}},XM=class e extends Hc{constructor(e,t,n,r=1){const{doc:i}=e,s=e===t,o=e.pos===i.content.size&&t.pos===i.content.size,a=s&&!o?i.resolve(t.pos+(r>0?1:-1)):t,l=s&&o?i.resolve(e.pos-(r>0?1:-1)):e,c=KM(l.min(a),l.max(a),n);super(a.pos>=e.pos?c[0].$from:c[c.length-1].$to,a.pos>=e.pos?c[c.length-1].$to:c[0].$from,c),this.depth=n}get $to(){return this.ranges[this.ranges.length-1].$to}eq(t){return t instanceof e&&t.$from.pos===this.$from.pos&&t.$to.pos===this.$to.pos}map(t,n){const r=t.resolve(n.map(this.anchor)),i=t.resolve(n.map(this.head));return new e(r,i)}toJSON(){return{type:"nodeRange",anchor:this.anchor,head:this.head}}get isForwards(){return this.head>=this.anchor}get isBackwards(){return!this.isForwards}extendBackwards(){const{doc:t}=this.$from;if(this.isForwards&&this.ranges.length>1){const t=this.ranges.slice(0,-1),n=t[0].$from,r=t[t.length-1].$to;return new e(n,r,this.depth)}const n=this.ranges[0],r=t.resolve(Math.max(0,n.$from.pos-1));return new e(this.$anchor,r,this.depth)}extendForwards(){const{doc:t}=this.$from;if(this.isBackwards&&this.ranges.length>1){const t=this.ranges.slice(1),n=t[0].$from,r=t[t.length-1].$to;return new e(r,n,this.depth)}const n=this.ranges[this.ranges.length-1],r=t.resolve(Math.min(t.content.size,n.$to.pos+1));return new e(this.$anchor,r,this.depth)}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(e,t,n,r,i=1){return new this(e.resolve(t),e.resolve(n),r,i)}getBookmark(){return new JM(this.anchor,this.head)}};function YM(e){return e instanceof XM}XM.prototype.visible=!1,ym.create({name:"nodeRange",addOptions:()=>({depth:void 0,key:"Mod"}),addKeyboardShortcuts(){return{"Shift-ArrowUp":({editor:e})=>{const{depth:t}=this.options,{view:n,state:r}=e,{doc:i,selection:s,tr:o}=r,{anchor:a,head:l}=s;if(!YM(s)){const e=XM.create(i,a,l,t,-1);return o.setSelection(e),n.dispatch(o),!0}const c=s.extendBackwards();return o.setSelection(c),n.dispatch(o),!0},"Shift-ArrowDown":({editor:e})=>{const{depth:t}=this.options,{view:n,state:r}=e,{doc:i,selection:s,tr:o}=r,{anchor:a,head:l}=s;if(!YM(s)){const e=XM.create(i,a,l,t);return o.setSelection(e),n.dispatch(o),!0}const c=s.extendForwards();return o.setSelection(c),n.dispatch(o),!0},"Mod-a":({editor:e})=>{const{depth:t}=this.options,{view:n,state:r}=e,{doc:i,tr:s}=r,o=XM.create(i,0,i.content.size,t);return s.setSelection(o),n.dispatch(s),!0}}},onSelectionUpdate(){const{selection:e}=this.editor.state;YM(e)&&this.editor.view.dom.classList.add("ProseMirror-noderangeselection")},addProseMirrorPlugins(){let e=!1,t=!1;return[new cu({key:new hu("nodeRange"),props:{attributes:()=>e?{class:"ProseMirror-noderangeselection"}:{class:""},handleDOMEvents:{mousedown:(e,n)=>{const{key:r}=this.options,i=/Mac/.test(navigator.platform),s=!!n.shiftKey,o=!!n.ctrlKey,a=!!n.altKey,l=!!n.metaKey;return(null==r||"Shift"===r&&s||"Control"===r&&o||"Alt"===r&&a||"Meta"===r&&l||"Mod"===r&&(i?l:o))&&(t=!0),!!t&&(document.addEventListener("mouseup",()=>{t=!1;const{state:n}=e,{doc:r,selection:i,tr:s}=n,{$anchor:o,$head:a}=i;if(o.sameParent(a))return;const l=XM.create(r,o.pos,a.pos,this.options.depth);s.setSelection(l),e.dispatch(s)},{once:!0}),!1)}},decorations:n=>{const{selection:r}=n,i=YM(r);if(e=!1,!t)return i?(e=!0,GM(r.ranges)):null;const{$from:s,$to:o}=r;if(!i&&s.sameParent(o))return null;const a=KM(s,o,this.options.depth);return a.length?(e=!0,GM(a)):null}}})]}});var QM=e=>{const{x:t,y:n,direction:r,editor:i}=e;let s=null,o=null,a=null,l=t;for(;null===o&&l<window.innerWidth&&l>0;){const e=document.elementsFromPoint(l,n),t=e.findIndex(e=>e.classList.contains("ProseMirror")),c=e.slice(0,t);if(c.length>0){const e=c[0];if(s=e,a=i.view.posAtDOM(e,0),a>=0){o=i.state.doc.nodeAt(Math.max(a-1,0)),(null==o?void 0:o.isText)&&(o=i.state.doc.nodeAt(Math.max(a-1,0))),o||(o=i.state.doc.nodeAt(Math.max(a,0)));break}}"left"===r?l-=1:l+=1}return{resultElement:s,resultNode:o,pos:null!=a?a:null}};function ZM(e,t){return window.getComputedStyle(e)[t]}function eI(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function tI(e){var t;null==(t=e.parentNode)||t.removeChild(e)}var nI=(e,t)=>{const n=e.resolve(t),{depth:r}=n;return 0===r?t:n.pos-n.parentOffset-1},rI=(e,t)=>{const n=e.nodeAt(t),r=e.resolve(t);let{depth:i}=r,s=n;for(;i>0;){const e=r.node(i);i-=1,0===i&&(s=e)}return s},iI=(e,t)=>{const n=RE.getState(e);return n?dC(t,n.type,n.binding.mapping):null},sI=(e,t)=>{let n=t;for(;(null==n?void 0:n.parentNode)&&n.parentNode!==e.dom;)n=n.parentNode;return n},oI=new hu("dragHandle"),aI=({pluginKey:e=oI,element:t,editor:n,computePositionConfig:r,onNodeChange:i})=>{const s=document.createElement("div");let o,a=!1,l=null,c=-1;function u(){t&&(t.style.visibility="hidden",t.style.pointerEvents="none")}function d(e){$M({getBoundingClientRect:()=>e.getBoundingClientRect()},t,r).then(e=>{Object.assign(t.style,{position:e.strategy,left:`${e.x}px`,top:`${e.y}px`})})}function h(e){!function(e,t){const{view:n}=t;if(!e.dataTransfer)return;const{empty:r,$from:i,$to:s}=n.state.selection,o=function(e,t){const{doc:n}=t.view.state,r=QM({editor:t,x:e.clientX,y:e.clientY,direction:"right"});if(!r.resultNode||null===r.pos)return[];const i=e.clientX,s=function(e,t,n){const r=parseInt(ZM(e.dom,"paddingLeft"),10),i=parseInt(ZM(e.dom,"paddingRight"),10),s=parseInt(ZM(e.dom,"borderLeftWidth"),10),o=parseInt(ZM(e.dom,"borderLeftWidth"),10),a=e.dom.getBoundingClientRect();return{left:eI(t,a.left+r+s,a.right-i-o),top:n}}(t.view,i,e.clientY),o=t.view.posAtCoords(s);if(!o)return[];const{pos:a}=o;return n.resolve(a).parent?KM(n.resolve(r.pos),n.resolve(r.pos+1),0):[]}(e,t),a=KM(i,s,0),l=a.some(e=>o.find(t=>t.$from===e.$from&&t.$to===e.$to)),c=r||!l?o:a;if(!c.length)return;const{tr:u}=n.state,d=document.createElement("div"),h=c[0].$from.pos,p=c[c.length-1].$to.pos,f=XM.create(n.state.doc,h,p),m=f.content();c.forEach(e=>{const t=function(e){const t=e.cloneNode(!0),n=[e,...Array.from(e.getElementsByTagName("*"))],r=[t,...Array.from(t.getElementsByTagName("*"))];return n.forEach((e,t)=>{r[t].style.cssText=function(e){let t="";const n=getComputedStyle(e);for(let e=0;e<n.length;e+=1)t+=`${n[e]}:${n.getPropertyValue(n[e])};`;return t}(e)}),t}(n.nodeDOM(e.$from.pos));d.append(t)}),d.style.position="absolute",d.style.top="-10000px",document.body.append(d),e.dataTransfer.clearData(),e.dataTransfer.setDragImage(d,0,0),n.dragging={slice:m,move:!0},u.setSelection(f),n.dispatch(u),document.addEventListener("drop",()=>tI(d),{once:!0})}(e,n),setTimeout(()=>{t&&(t.style.pointerEvents="none")},0)}function p(){u(),t&&(t.style.pointerEvents="auto")}return t.addEventListener("dragstart",h),t.addEventListener("dragend",p),s.appendChild(t),{unbind(){t.removeEventListener("dragstart",h),t.removeEventListener("dragend",p)},plugin:new cu({key:"string"==typeof e?new hu(e):e,state:{init:()=>({locked:!1}),apply(e,r,s,d){const h=e.getMeta("lockDragHandle"),p=e.getMeta("hideDragHandle");if(void 0!==h&&(a=h),p)return u(),a=!1,l=null,c=-1,null==i||i({editor:n,node:null,pos:-1}),r;if(e.docChanged&&-1!==c&&t)if(e.getMeta(RE)){const e=((e,t)=>{const n=RE.getState(e);return n?pC(n.doc,n.type,t,n.binding.mapping)||0:-1})(d,o);e!==c&&(c=e)}else{const t=e.mapping.map(c);t!==c&&(c=t,o=iI(d,c))}return r}},view:e=>{var r;return t.draggable=!0,t.style.pointerEvents="auto",null==(r=n.view.dom.parentElement)||r.appendChild(s),s.style.pointerEvents="none",s.style.position="absolute",s.style.top="0",s.style.left="0",{update(r,s){if(!t)return;if(!n.isEditable)return void u();if(t.draggable=!a,e.state.doc.eq(s.doc)||-1===c)return;let h=e.nodeDOM(c);if(h=sI(e,h),h===e.dom)return;if(1!==(null==h?void 0:h.nodeType))return;const p=e.posAtDOM(h,0),f=rI(n.state.doc,p),m=nI(n.state.doc,p);l=f,c=m,o=iI(e.state,c),null==i||i({editor:n,node:l,pos:c}),d(h)},destroy(){t&&tI(s)}}},props:{handleDOMEvents:{mouseleave:(e,t)=>(a||t.target&&!s.contains(t.relatedTarget)&&(u(),l=null,c=-1,null==i||i({editor:n,node:null,pos:-1})),!1),mousemove(e,r){if(!t||a)return!1;const s=QM({x:r.clientX,y:r.clientY,direction:"right",editor:n});if(!s.resultElement)return!1;let h=s.resultElement;if(h=sI(e,h),h===e.dom)return!1;if(1!==(null==h?void 0:h.nodeType))return!1;const p=e.posAtDOM(h,0),f=rI(n.state.doc,p);if(f!==l){const r=nI(n.state.doc,p);l=f,c=r,o=iI(e.state,c),null==i||i({editor:n,node:l,pos:c}),d(h),t&&(n.isEditable?(t.style.visibility="",t.style.pointerEvents="auto"):u())}return!1}}}})}},lI={placement:"left-start",strategy:"absolute"},cI=ym.create({name:"dragHandle",addOptions:()=>({render(){const e=document.createElement("div");return e.classList.add("drag-handle"),e},computePositionConfig:{},locked:!1,onNodeChange:()=>null}),addCommands(){return{lockDragHandle:()=>({editor:e})=>(this.options.locked=!0,e.commands.setMeta("lockDragHandle",this.options.locked)),unlockDragHandle:()=>({editor:e})=>(this.options.locked=!1,e.commands.setMeta("lockDragHandle",this.options.locked)),toggleDragHandle:()=>({editor:e})=>(this.options.locked=!this.options.locked,e.commands.setMeta("lockDragHandle",this.options.locked))}},addProseMirrorPlugins(){const e=this.options.render();return[aI({computePositionConfig:{...lI,...this.options.computePositionConfig},element:e,editor:this.editor,onNodeChange:this.options.onNodeChange}).plugin]}}),uI=Gb({name:"DragHandleVue",props:{pluginKey:{type:[String,Object],default:oI},editor:{type:Object,required:!0},computePositionConfig:{type:Object,default:()=>({})},onNodeChange:{type:Function,default:null},class:{type:String,default:"drag-handle"}},setup(e,{slots:t}){const n=rb(null);return s_(()=>{const{editor:t,pluginKey:r,onNodeChange:i,computePositionConfig:s}=e;t.registerPlugin(aI({editor:t,element:n.value,pluginKey:r,computePositionConfig:{...lI,...s},onNodeChange:i}).plugin)}),l_(()=>{const{pluginKey:t,editor:n}=e;n.unregisterPlugin(t)}),()=>{var r;return Zw("div",{ref:n,class:e.class},null==(r=t.default)?void 0:r.call(t))}}});function dI(e,t){return function(e,t){const n=e.attrs;return n?t.filter(t=>t.type===("string"==typeof e.type?e.type:e.type.name)&&t.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n)||{[e.name]:e.name in n?n[e.name]:e.attribute.default}:{[e.name]:e.name in n?n[e.name]:e.attribute.default}).reduce((e,t)=>Ef(e,t),{}):{}}(e,t)}function hI(e){return function(e,{nodeMapping:t,markMapping:n,unhandledNode:r,unhandledMark:i}){return function s({content:o,parent:a}){var l;const c="string"==typeof o.type?o.type:o.type.name,u=null!=(l=t[c])?l:r;if(!u)throw new Error(`missing handler for node type ${c}`);const d=e({component:u,props:{node:o,parent:a,renderElement:s,get children(){const e=[];return o.content&&o.content.forEach(t=>{e.push(s({content:t,parent:o}))}),e}}});return o.marks?o.marks.reduce((t,r)=>{var s;const l="string"==typeof r.type?r.type:r.type.name,c=null!=(s=n[l])?s:i;if(!c)throw new Error(`missing handler for mark type ${l}`);return e({component:c,props:{mark:r,parent:a,node:o,children:t}})},d):d}}(e=>e.component(e.props),e)}function pI(e){const t=Object.entries(e||{}).map(([e,t])=>`${e.split(" ").at(-1)}=${JSON.stringify(t)}`).join(" ");return t?` ${t}`:""}function fI(e){return[].concat(e||"").filter(Boolean).join("")}function mI(e){if("string"==typeof e)return()=>e;if("object"==typeof e&&"length"in e){const[t,n,r,...i]=e;let s=t;const o=s.split(" ");if(o.length>1&&(s=`${o[1]} xmlns="${o[0]}"`),void 0===n)return()=>`<${s}/>`;if(0===n)return e=>`<${s}>${fI(e)}</${s}>`;if("object"==typeof n)return Array.isArray(n)?void 0===r||0===r?e=>`<${s}>${mI(n)(e)}</${s}>`:e=>`<${s}>${mI(n)(e)}${[r].concat(i).map(t=>mI(t)(e))}</${s}>`:void 0===r?()=>`<${s}${pI(n)}/>`:0===r?e=>`<${s}${pI(n)}>${fI(e)}</${s}>`:e=>`<${s}${pI(n)}>${[r].concat(i).map(t=>mI(t)(e)).join("")}</${s}>`}throw new Error("[tiptap error]: Unsupported DomOutputSpec type, check the `renderHTML` method output or implement a node mapping",{cause:e})}function gI(e,t){return function(e,t){const n=e.attrs;return n?t.filter(t=>t.type===("string"==typeof e.type?e.type:e.type.name)&&t.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n)||{[e.name]:e.name in n?n[e.name]:e.attribute.default}:{[e.name]:e.name in n?n[e.name]:e.attribute.default}).reduce((e,t)=>Ef(e,t),{}):{}}(e,t)}function yI(e){return function(e,{nodeMapping:t,markMapping:n,unhandledNode:r,unhandledMark:i}){return function s({content:o,parent:a}){var l;const c="string"==typeof o.type?o.type:o.type.name,u=null!=(l=t[c])?l:r;if(!u)throw new Error(`missing handler for node type ${c}`);const d=e({component:u,props:{node:o,parent:a,renderElement:s,get children(){const e=[];return o.content&&o.content.forEach(t=>{e.push(s({content:t,parent:o}))}),e}}});return o.marks?o.marks.reduce((t,r)=>{var s;const l="string"==typeof r.type?r.type:r.type.name,c=null!=(s=n[l])?s:i;if(!c)throw new Error(`missing handler for mark type ${l}`);return e({component:c,props:{mark:r,parent:a,node:o,children:t}})},d):d}}(e=>e.component(e.props),e)}function vI(e){const t=Object.entries(e||{}).map(([e,t])=>`${e.split(" ").at(-1)}=${JSON.stringify(t)}`).join(" ");return t?` ${t}`:""}function bI(e){return[].concat(e||"").filter(Boolean).join("")}function _I(e){if("string"==typeof e)return()=>e;if("object"==typeof e&&"length"in e){const[t,n,r,...i]=e;let s=t;const o=s.split(" ");if(o.length>1&&(s=`${o[1]} xmlns="${o[0]}"`),void 0===n)return()=>`<${s}/>`;if(0===n)return e=>`<${s}>${bI(e)}</${s}>`;if("object"==typeof n)return Array.isArray(n)?void 0===r||0===r?e=>`<${s}>${_I(n)(e)}</${s}>`:e=>`<${s}>${_I(n)(e)}${[r].concat(i).map(t=>_I(t)(e))}</${s}>`:void 0===r?()=>`<${s}${vI(n)}/>`:0===r?e=>`<${s}${vI(n)}>${bI(e)}</${s}>`:e=>`<${s}${vI(n)}>${[r].concat(i).map(t=>_I(t)(e)).join("")}</${s}>`}throw new Error("[tiptap error]: Unsupported DomOutputSpec type, check the `renderHTML` method output or implement a node mapping",{cause:e})}function wI(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function SI(e){return e instanceof wI(e).Element||e instanceof Element}function kI(e){return e instanceof wI(e).HTMLElement||e instanceof HTMLElement}function TI(e){return"undefined"!=typeof ShadowRoot&&(e instanceof wI(e).ShadowRoot||e instanceof ShadowRoot)}var xI=Math.max,EI=Math.min,CI=Math.round;function AI(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function OI(){return!/^((?!chrome|android).)*safari/i.test(AI())}function MI(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&kI(e)&&(i=e.offsetWidth>0&&CI(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&CI(r.height)/e.offsetHeight||1);var o=(SI(e)?wI(e):window).visualViewport,a=!OI()&&n,l=(r.left+(a&&o?o.offsetLeft:0))/i,c=(r.top+(a&&o?o.offsetTop:0))/s,u=r.width/i,d=r.height/s;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function II(e){var t=wI(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function DI(e){return e?(e.nodeName||"").toLowerCase():null}function jI(e){return((SI(e)?e.ownerDocument:e.document)||window.document).documentElement}function PI(e){return MI(jI(e)).left+II(e).scrollLeft}function LI(e){return wI(e).getComputedStyle(e)}function NI(e){var t=LI(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function RI(e,t,n){void 0===n&&(n=!1);var r,i,s=kI(t),o=kI(t)&&function(e){var t=e.getBoundingClientRect(),n=CI(t.width)/e.offsetWidth||1,r=CI(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=jI(t),l=MI(e,o,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&(("body"!==DI(t)||NI(a))&&(c=(r=t)!==wI(r)&&kI(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:II(r)),kI(t)?((u=MI(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=PI(a))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function UI(e){var t=MI(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function BI(e){return"html"===DI(e)?e:e.assignedSlot||e.parentNode||(TI(e)?e.host:null)||jI(e)}function FI(e){return["html","body","#document"].indexOf(DI(e))>=0?e.ownerDocument.body:kI(e)&&NI(e)?e:FI(BI(e))}function zI(e,t){var n;void 0===t&&(t=[]);var r=FI(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=wI(r),o=i?[s].concat(s.visualViewport||[],NI(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(zI(BI(o)))}function $I(e){return["table","td","th"].indexOf(DI(e))>=0}function qI(e){return kI(e)&&"fixed"!==LI(e).position?e.offsetParent:null}function HI(e){for(var t=wI(e),n=qI(e);n&&$I(n)&&"static"===LI(n).position;)n=qI(n);return n&&("html"===DI(n)||"body"===DI(n)&&"static"===LI(n).position)?t:n||function(e){var t=/firefox/i.test(AI());if(/Trident/i.test(AI())&&kI(e)&&"fixed"===LI(e).position)return null;var n=BI(e);for(TI(n)&&(n=n.host);kI(n)&&["html","body"].indexOf(DI(n))<0;){var r=LI(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var VI="top",WI="bottom",GI="right",KI="left",JI="auto",XI=[VI,WI,GI,KI],YI="start",QI="end",ZI="viewport",eD="popper",tD=XI.reduce(function(e,t){return e.concat([t+"-"+YI,t+"-"+QI])},[]),nD=[].concat(XI,[JI]).reduce(function(e,t){return e.concat([t,t+"-"+YI,t+"-"+QI])},[]),rD=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function iD(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),r}var sD={placement:"bottom",modifiers:[],strategy:"absolute"};function oD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function aD(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?sD:i;return function(e,t,n){void 0===n&&(n=s);var i,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},sD,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;d(),a.options=Object.assign({},s,a.options,i),a.scrollParents={reference:SI(e)?zI(e):e.contextElement?zI(e.contextElement):[],popper:zI(t)};var o=function(e){var t=iD(e);return rD.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}(function(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(r,a.options.modifiers)));return a.orderedModifiers=o.filter(function(e){return e.enabled}),a.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var s=i({state:a,name:t,instance:u,options:r});l.push(s||function(){})}}),u.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,n=e.popper;if(oD(t,n)){a.rects={reference:RI(t,HI(n),"fixed"===a.options.strategy),popper:UI(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(e){return a.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],s=i.fn,o=i.options,l=void 0===o?{}:o,d=i.name;"function"==typeof s&&(a=s({state:a,options:l,name:d,instance:u})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise(function(e){u.forceUpdate(),e(a)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=void 0,e(i())})})),o}),destroy:function(){d(),c=!0}};if(!oD(e,t))return u;function d(){l.forEach(function(e){return e()}),l=[]}return u.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),u}}var lD={passive:!0};function cD(e){return e.split("-")[0]}function uD(e){return e.split("-")[1]}function dD(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function hD(e){var t,n=e.reference,r=e.element,i=e.placement,s=i?cD(i):null,o=i?uD(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(s){case VI:t={x:a,y:n.y-r.height};break;case WI:t={x:a,y:n.y+n.height};break;case GI:t={x:n.x+n.width,y:l};break;case KI:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=s?dD(s):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case YI:t[c]=t[c]-(n[u]/2-r[u]/2);break;case QI:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var pD={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fD(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=o.x,p=void 0===h?0:h,f=o.y,m=void 0===f?0:f,g="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),b=KI,_=VI,w=window;if(c){var S=HI(n),k="clientHeight",T="clientWidth";S===wI(n)&&"static"!==LI(S=jI(n)).position&&"absolute"===a&&(k="scrollHeight",T="scrollWidth"),(i===VI||(i===KI||i===GI)&&s===QI)&&(_=WI,m-=(d&&S===w&&w.visualViewport?w.visualViewport.height:S[k])-r.height,m*=l?1:-1),i!==KI&&(i!==VI&&i!==WI||s!==QI)||(b=GI,p-=(d&&S===w&&w.visualViewport?w.visualViewport.width:S[T])-r.width,p*=l?1:-1)}var x,E=Object.assign({position:a},c&&pD),C=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:CI(n*i)/i||0,y:CI(r*i)/i||0}}({x:p,y:m},wI(n)):{x:p,y:m};return p=C.x,m=C.y,l?Object.assign({},E,((x={})[_]=v?"0":"",x[b]=y?"0":"",x.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",x)):Object.assign({},E,((t={})[_]=v?m+"px":"",t[b]=y?p+"px":"",t.transform="",t))}const mD={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];kI(i)&&DI(i)&&(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});kI(r)&&DI(r)&&(Object.assign(r.style,s),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};var gD={left:"right",right:"left",bottom:"top",top:"bottom"};function yD(e){return e.replace(/left|right|bottom|top/g,function(e){return gD[e]})}var vD={start:"end",end:"start"};function bD(e){return e.replace(/start|end/g,function(e){return vD[e]})}function _D(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&TI(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function wD(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function SD(e,t,n){return t===ZI?wD(function(e,t){var n=wI(e),r=jI(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=OI();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+PI(e),y:l}}(e,n)):SI(t)?function(e,t){var n=MI(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):wD(function(e){var t,n=jI(e),r=II(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=xI(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=xI(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+PI(e),l=-r.scrollTop;return"rtl"===LI(i||n).direction&&(a+=xI(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(jI(e)))}function kD(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function TD(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function xD(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,l=void 0===a?"clippingParents":a,c=n.rootBoundary,u=void 0===c?ZI:c,d=n.elementContext,h=void 0===d?eD:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,y=kD("number"!=typeof g?g:TD(g,XI)),v=h===eD?"reference":eD,b=e.rects.popper,_=e.elements[f?v:h],w=function(e,t,n,r){var i="clippingParents"===t?function(e){var t=zI(BI(e)),n=["absolute","fixed"].indexOf(LI(e).position)>=0&&kI(e)?HI(e):e;return SI(n)?t.filter(function(e){return SI(e)&&_D(e,n)&&"body"!==DI(e)}):[]}(e):[].concat(t),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(t,n){var i=SD(e,n,r);return t.top=xI(i.top,t.top),t.right=EI(i.right,t.right),t.bottom=EI(i.bottom,t.bottom),t.left=xI(i.left,t.left),t},SD(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(SI(_)?_:_.contextElement||jI(e.elements.popper),l,u,o),S=MI(e.elements.reference),k=hD({reference:S,element:b,strategy:"absolute",placement:i}),T=wD(Object.assign({},b,k)),x=h===eD?T:S,E={top:w.top-x.top+y.top,bottom:x.bottom-w.bottom+y.bottom,left:w.left-x.left+y.left,right:x.right-w.right+y.right},C=e.modifiersData.offset;if(h===eD&&C){var A=C[i];Object.keys(E).forEach(function(e){var t=[GI,WI].indexOf(e)>=0?1:-1,n=[VI,WI].indexOf(e)>=0?"y":"x";E[e]+=A[n]*t})}return E}const ED={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,y=cD(g),v=l||(y!==g&&f?function(e){if(cD(e)===JI)return[];var t=yD(e);return[bD(e),t,bD(t)]}(g):[yD(g)]),b=[g].concat(v).reduce(function(e,n){return e.concat(cD(n)===JI?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?nD:l,u=uD(r),d=u?a?tD:tD.filter(function(e){return uD(e)===u}):XI,h=d.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=d);var p=h.reduce(function(t,n){return t[n]=xD(e,{placement:n,boundary:i,rootBoundary:s,padding:o})[cD(n)],t},{});return Object.keys(p).sort(function(e,t){return p[e]-p[t]})}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)},[]),_=t.rects.reference,w=t.rects.popper,S=new Map,k=!0,T=b[0],x=0;x<b.length;x++){var E=b[x],C=cD(E),A=uD(E)===YI,O=[VI,WI].indexOf(C)>=0,M=O?"width":"height",I=xD(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),D=O?A?GI:KI:A?WI:VI;_[M]>w[M]&&(D=yD(D));var j=yD(D),P=[];if(s&&P.push(I[C]<=0),a&&P.push(I[D]<=0,I[j]<=0),P.every(function(e){return e})){T=E,k=!1;break}S.set(E,P)}if(k)for(var L=function(e){var t=b.find(function(t){var n=S.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return T=t,"break"},N=f?3:1;N>0&&"break"!==L(N);N--);t.placement!==T&&(t.modifiersData[r]._skip=!0,t.placement=T,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function CD(e,t,n){return xI(e,EI(t,n))}const AD={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=xD(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=cD(t.placement),v=uD(t.placement),b=!v,_=dD(y),w="x"===_?"y":"x",S=t.modifiersData.popperOffsets,k=t.rects.reference,T=t.rects.popper,x="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,E="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(S){if(s){var O,M="y"===_?VI:KI,I="y"===_?WI:GI,D="y"===_?"height":"width",j=S[_],P=j+g[M],L=j-g[I],N=p?-T[D]/2:0,R=v===YI?k[D]:T[D],U=v===YI?-T[D]:-k[D],B=t.elements.arrow,F=p&&B?UI(B):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},$=z[M],q=z[I],H=CD(0,k[D],F[D]),V=b?k[D]/2-N-H-$-E.mainAxis:R-H-$-E.mainAxis,W=b?-k[D]/2+N+H+q+E.mainAxis:U+H+q+E.mainAxis,G=t.elements.arrow&&HI(t.elements.arrow),K=G?"y"===_?G.clientTop||0:G.clientLeft||0:0,J=null!=(O=null==C?void 0:C[_])?O:0,X=j+W-J,Y=CD(p?EI(P,j+V-J-K):P,j,p?xI(L,X):L);S[_]=Y,A[_]=Y-j}if(a){var Q,Z="x"===_?VI:KI,ee="x"===_?WI:GI,te=S[w],ne="y"===w?"height":"width",re=te+g[Z],ie=te-g[ee],se=-1!==[VI,KI].indexOf(y),oe=null!=(Q=null==C?void 0:C[w])?Q:0,ae=se?re:te-k[ne]-T[ne]-oe+E.altAxis,le=se?te+k[ne]+T[ne]-oe-E.altAxis:ie,ce=p&&se?function(e,t,n){var r=CD(e,t,n);return r>n?n:r}(ae,te,le):CD(p?ae:re,te,p?le:ie);S[w]=ce,A[w]=ce-te}t.modifiersData[r]=A}},requiresIfExists:["offset"]};function OD(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function MD(e){return[VI,GI,WI,KI].some(function(t){return e[t]>=0})}var ID=aD({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,l=wI(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(e){e.addEventListener("scroll",n.update,lD)}),a&&l.addEventListener("resize",n.update,lD),function(){s&&c.forEach(function(e){e.removeEventListener("scroll",n.update,lD)}),a&&l.removeEventListener("resize",n.update,lD)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=hD({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:cD(t.placement),variation:uD(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,fD(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,fD(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},mD,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=void 0===i?[0,0]:i,o=nD.reduce(function(e,n){return e[n]=function(e,t,n){var r=cD(e),i=[KI,VI].indexOf(r)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[KI,GI].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e},{}),a=o[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}},ED,AD,{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=cD(n.placement),l=dD(a),c=[KI,GI].indexOf(a)>=0?"height":"width";if(s&&o){var u=function(e,t){return kD("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:TD(e,XI))}(i.padding,n),d=UI(s),h="y"===l?VI:KI,p="y"===l?WI:GI,f=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=HI(s),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,b=u[h],_=y-d[c]-u[p],w=y/2-d[c]/2+v,S=CD(b,w,_),k=l;n.modifiersData[r]=((t={})[k]=S,t.centerOffset=S-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&_D(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=xD(t,{elementContext:"reference"}),a=xD(t,{altBoundary:!0}),l=OD(o,r),c=OD(a,i,s),u=MD(l),d=MD(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),DD="tippy-content",jD="tippy-arrow",PD="tippy-svg-arrow",LD={passive:!0,capture:!0},ND=function(){return document.body};function RD(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function UD(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function BD(e,t){return"function"==typeof e?e.apply(void 0,t):e}function FD(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)};var n}function zD(e){return[].concat(e)}function $D(e,t){-1===e.indexOf(t)&&e.push(t)}function qD(e){return[].slice.call(e)}function HD(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function VD(){return document.createElement("div")}function WD(e){return["Element","Fragment"].some(function(t){return UD(e,t)})}function GD(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function KD(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function JD(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}function XD(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var YD={isTouch:!1},QD=0;function ZD(){YD.isTouch||(YD.isTouch=!0,window.performance&&document.addEventListener("mousemove",ej))}function ej(){var e=performance.now();e-QD<20&&(YD.isTouch=!1,document.removeEventListener("mousemove",ej)),QD=e}function tj(){var e=document.activeElement;if(function(e){return!(!e||!e._tippy||e._tippy.reference!==e)}(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var nj=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),rj=Object.assign({appendTo:ND,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),ij=Object.keys(rj);function sj(e){var t=(e.plugins||[]).reduce(function(t,n){var r,i=n.name,s=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=rj[i])?r:s),t},{});return Object.assign({},e,t)}function oj(e,t){var n=Object.assign({},t,{content:BD(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(sj(Object.assign({},rj,{plugins:t}))):ij).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{})}(e,t.plugins));return n.aria=Object.assign({},rj.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function aj(e,t){e.innerHTML=t}function lj(e){var t=VD();return!0===e?t.className=jD:(t.className=PD,WD(e)?t.appendChild(e):aj(t,e)),t}function cj(e,t){WD(t.content)?(aj(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?aj(e,t.content):e.textContent=t.content)}function uj(e){var t=e.firstElementChild,n=qD(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(DD)}),arrow:n.find(function(e){return e.classList.contains(jD)||e.classList.contains(PD)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function dj(e){var t=VD(),n=VD();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=VD();function i(n,r){var i=uj(t),s=i.box,o=i.content,a=i.arrow;r.theme?s.setAttribute("data-theme",r.theme):s.removeAttribute("data-theme"),"string"==typeof r.animation?s.setAttribute("data-animation",r.animation):s.removeAttribute("data-animation"),r.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?s.setAttribute("role",r.role):s.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||cj(o,e.props),r.arrow?a?n.arrow!==r.arrow&&(s.removeChild(a),s.appendChild(lj(r.arrow))):s.appendChild(lj(r.arrow)):a&&s.removeChild(a)}return r.className=DD,r.setAttribute("data-state","hidden"),cj(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}dj.$$tippy=!0;var hj=1,pj=[],fj=[];function mj(e,t){var n,r,i,s,o,a,l,c,u=oj(e,Object.assign({},rj,sj(HD(t)))),d=!1,h=!1,p=!1,f=!1,m=[],g=FD(G,u.interactiveDebounce),y=hj++,v=(c=u.plugins).filter(function(e,t){return c.indexOf(e)===t}),b={id:y,reference:e,popper:VD(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)},setProps:function(t){if(!b.state.isDestroyed){j("onBeforeUpdate",[b,t]),V();var n=b.props,r=oj(e,Object.assign({},n,HD(t),{ignoreAttributes:!0}));b.props=r,H(),n.interactiveDebounce!==r.interactiveDebounce&&(N(),g=FD(G,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?zD(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded"),L(),D(),S&&S(n,r),b.popperInstance&&(Y(),Z().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),j("onAfterUpdate",[b,t])}},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=YD.isTouch&&!b.props.touch,i=RD(b.props.duration,0,rj.duration);if(!(e||t||n||r||A().hasAttribute("disabled")||(j("onShow",[b],!1),!1===b.props.onShow(b)))){if(b.state.isVisible=!0,C()&&(w.style.visibility="visible"),D(),F(),b.state.isMounted||(w.style.transition="none"),C()){var s=M();GD([s.box,s.content],0)}a=function(){var e;if(b.state.isVisible&&!f){if(f=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,C()&&b.props.animation){var t=M(),n=t.box,r=t.content;GD([n,r],i),KD([n,r],"visible")}P(),L(),$D(fj,b),null==(e=b.popperInstance)||e.forceUpdate(),j("onMount",[b]),b.props.animation&&C()&&function(e){$(e,function(){b.state.isShown=!0,j("onShown",[b])})}(i)}},function(){var e,t=b.props.appendTo,n=A();(e=b.props.interactive&&t===ND||"parent"===t?n.parentNode:BD(t,[n])).contains(w)||e.appendChild(w),b.state.isMounted=!0,Y()}()}},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,r=RD(b.props.duration,1,rj.duration);if(!(e||t||n)&&(j("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,f=!1,d=!1,C()&&(w.style.visibility="hidden"),N(),z(),D(!0),C()){var i=M(),s=i.box,o=i.content;b.props.animation&&(GD([s,o],r),KD([s,o],"hidden"))}P(),L(),b.props.animation?C()&&function(e,t){$(e,function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()})}(r,b.unmount):b.unmount()}},hideWithInteractivity:function(e){O().addEventListener("mousemove",g),$D(pj,g),g(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Q(),Z().forEach(function(e){e._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),fj=fj.filter(function(e){return e!==b}),b.state.isMounted=!1,j("onHidden",[b]))},destroy:function(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),V(),delete e._tippy,b.state.isDestroyed=!0,j("onDestroy",[b]))}};if(!u.render)return b;var _=u.render(b),w=_.popper,S=_.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,e._tippy=b,w._tippy=b;var k=v.map(function(e){return e.fn(b)}),T=e.hasAttribute("aria-expanded");return H(),L(),D(),j("onCreate",[b]),u.showOnCreate&&ee(),w.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&O().addEventListener("mousemove",g)}),b;function x(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function E(){return"hold"===x()[0]}function C(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function A(){return l||e}function O(){var e,t,n=A().parentNode;return n?null!=(t=zD(n)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function M(){return uj(w)}function I(e){return b.state.isMounted&&!b.state.isVisible||YD.isTouch||s&&"focus"===s.type?0:RD(b.props.delay,e?0:1,rj.delay)}function D(e){void 0===e&&(e=!1),w.style.pointerEvents=b.props.interactive&&!e?"":"none",w.style.zIndex=""+b.props.zIndex}function j(e,t,n){var r;void 0===n&&(n=!0),k.forEach(function(n){n[e]&&n[e].apply(n,t)}),n&&(r=b.props)[e].apply(r,t)}function P(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,r=w.id;zD(b.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function L(){!T&&b.props.aria.expanded&&zD(b.props.triggerTarget||e).forEach(function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===A()?"true":"false"):e.removeAttribute("aria-expanded")})}function N(){O().removeEventListener("mousemove",g),pj=pj.filter(function(e){return e!==g})}function R(t){if(!YD.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!XD(w,n)){if(zD(b.props.triggerTarget||e).some(function(e){return XD(e,n)})){if(YD.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else j("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),h=!0,setTimeout(function(){h=!1}),b.state.isMounted||z())}}}function U(){p=!0}function B(){p=!1}function F(){var e=O();e.addEventListener("mousedown",R,!0),e.addEventListener("touchend",R,LD),e.addEventListener("touchstart",B,LD),e.addEventListener("touchmove",U,LD)}function z(){var e=O();e.removeEventListener("mousedown",R,!0),e.removeEventListener("touchend",R,LD),e.removeEventListener("touchstart",B,LD),e.removeEventListener("touchmove",U,LD)}function $(e,t){var n=M().box;function r(e){e.target===n&&(JD(n,"remove",r),t())}if(0===e)return t();JD(n,"remove",o),JD(n,"add",r),o=r}function q(t,n,r){void 0===r&&(r=!1),zD(b.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),m.push({node:e,eventType:t,handler:n,options:r})})}function H(){var e;E()&&(q("touchstart",W,{passive:!0}),q("touchend",K,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach(function(e){if("manual"!==e)switch(q(e,W),e){case"mouseenter":q("mouseleave",K);break;case"focus":q(nj?"focusout":"blur",J);break;case"focusin":q("focusout",J)}})}function V(){m.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)}),m=[]}function W(e){var t,n=!1;if(b.state.isEnabled&&!X(e)&&!h){var r="focus"===(null==(t=s)?void 0:t.type);s=e,l=e.currentTarget,L(),!b.state.isVisible&&function(e){return UD(e,"MouseEvent")}(e)&&pj.forEach(function(t){return t(e)}),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||d)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(d=!n),n&&!r&&te(e)}}function G(e){var t=e.target,n=A().contains(t)||w.contains(t);if("mousemove"!==e.type||!n){var r=Z().concat(w).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:u}:null}).filter(Boolean);(function(e,t){var n=t.clientX,r=t.clientY;return e.every(function(e){var t=e.popperRect,i=e.popperState,s=e.props.interactiveBorder,o=i.placement.split("-")[0],a=i.modifiersData.offset;if(!a)return!0;var l="bottom"===o?a.top.y:0,c="top"===o?a.bottom.y:0,u="right"===o?a.left.x:0,d="left"===o?a.right.x:0,h=t.top-r+l>s,p=r-t.bottom-c>s,f=t.left-n+u>s,m=n-t.right-d>s;return h||p||f||m})})(r,e)&&(N(),te(e))}}function K(e){X(e)||b.props.trigger.indexOf("click")>=0&&d||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function J(e){b.props.trigger.indexOf("focusin")<0&&e.target!==A()||b.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||te(e)}function X(e){return!!YD.isTouch&&E()!==e.type.indexOf("touch")>=0}function Y(){Q();var t=b.props,n=t.popperOptions,r=t.placement,i=t.offset,s=t.getReferenceClientRect,o=t.moveTransition,l=C()?uj(w).arrow:null,c=s?{getBoundingClientRect:s,contextElement:s.contextElement||A()}:e,u=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!o}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(C()){var n=M().box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];C()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),b.popperInstance=ID(c,w,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:u}))}function Q(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Z(){return qD(w.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&j("onTrigger",[b,e]),F();var t=I(!0),r=x(),i=r[0],s=r[1];YD.isTouch&&"hold"===i&&s&&(t=s),t?n=setTimeout(function(){b.show()},t):b.show()}function te(e){if(b.clearDelayTimeouts(),j("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&d)){var t=I(!1);t?r=setTimeout(function(){b.state.isVisible&&b.hide()},t):i=requestAnimationFrame(function(){b.hide()})}}else z()}}function gj(e,t){void 0===t&&(t={});var n=rj.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",ZD,LD),window.addEventListener("blur",tj);var r=Object.assign({},t,{plugins:n}),i=function(e){return WD(e)?[e]:function(e){return UD(e,"NodeList")}(e)?qD(e):Array.isArray(e)?e:qD(document.querySelectorAll(e))}(e).reduce(function(e,t){var n=t&&mj(t,r);return n&&e.push(n),e},[]);return WD(e)?i[0]:i}gj.defaultProps=rj,gj.setDefaultProps=function(e){Object.keys(e).forEach(function(t){rj[t]=e[t]})},gj.currentInput=YD,Object.assign({},mD,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),gj.setDefaultProps({render:dj});const yj=gj;var vj=n(5072),bj=n.n(vj),_j=n(7825),wj=n.n(_j),Sj=n(7659),kj=n.n(Sj),Tj=n(5056),xj=n.n(Tj),Ej=n(540),Cj=n.n(Ej),Aj=n(1113),Oj=n.n(Aj),Mj=n(1002),Ij={};function Dj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}Ij.styleTagTransform=Oj(),Ij.setAttributes=xj(),Ij.insert=kj().bind(null,"head"),Ij.domAPI=wj(),Ij.insertStyleElement=Cj(),bj()(Mj.A,Ij),Mj.A&&Mj.A.locals&&Mj.A.locals;var jj=n(9879),Pj=n(3024),Lj={};function Nj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rj(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function Rj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uj(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Lj.styleTagTransform=Oj(),Lj.setAttributes=xj(),Lj.insert=kj().bind(null,"head"),Lj.domAPI=wj(),Lj.insertStyleElement=Cj(),bj()(Pj.A,Lj),Pj.A&&Pj.A.locals&&Pj.A.locals,n(4620);var Fj=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"initializePlayer",value:(o=i(d().mark(function e(t){var n,r,i,s,o=arguments;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},!t._ipfsHLSPlayer&&"true"!==t.dataset.ipfsEnhanced){e.next=1;break}return(window.ipfsHLSPlayerConfig||{}).debug&&console.log("IPFSHLSPlayer: Video already enhanced, skipping duplicate initialization for:",t.id||"no-id"),e.abrupt("return",t._ipfsHLSPlayer);case 1:return e.next=2,zj();case 2:return t.id||(t.id="ipfs-video-".concat(Math.random().toString(36).substr(2,9))),this.applyVideoJSClasses(t),this.ensureVideoWrapper(t),r=Bj(Bj({},{controls:!0,fluid:!0,responsive:!0,preload:"auto",playbackRates:[.5,1,1.5,2],html5:{vhs:{overrideNative:!0,smoothQualityChange:!0,fastQualityChange:!0}}}),n),i=(0,jj.default)(t,r),n.src&&(s=n.type||this.detectSourceType(n.src),i.src({src:n.src,type:s}),("application/x-mpegURL"===s||n.src.includes(".m3u8"))&&i.ready(function(){i.qualityLevels(),i.hlsQualitySelector({displayCurrentQuality:!0,placementIndex:2})})),i.on("error",function(e){console.error("IPFSHLSPlayer error:",e)}),t._ipfsHLSPlayer=i,t.dataset.ipfsEnhanced="true",e.abrupt("return",i);case 3:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"destroyPlayer",value:function(e){var t=e._ipfsHLSPlayer||e.id&&jj.default.getPlayer(e.id);t&&"function"==typeof t.dispose&&(t.dispose(),delete e._ipfsHLSPlayer,delete e.dataset.ipfsEnhanced)}},{key:"detectSourceType",value:function(e){if(!e)return"video/mp4";var t=e.toLowerCase();return t.includes(".m3u8")?"application/x-mpegURL":t.includes(".mp4")?"video/mp4":t.includes(".webm")?"video/webm":t.includes(".ogg")||t.includes(".ogv")?"video/ogg":"video/mp4"}},{key:"enhanceVideoElement",value:(s=i(d().mark(function e(t){var n,r,i,s,o,a=arguments;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},this.isVideoReady(t)){e.next=1;break}throw r=this.getVideoState(t),new Error("Video not ready for enhancement: ".concat(JSON.stringify(r)));case 1:if("true"!==t.dataset.ipfsEnhanced){e.next=2;break}return(window.ipfsHLSPlayerConfig||{}).debug&&console.log("IPFSHLSPlayer: Video already enhanced, returning existing player:",t.id||"no-id"),e.abrupt("return",t._ipfsHLSPlayer);case 2:return e.prev=2,this.applyVideoJSClasses(t),this.ensureVideoWrapper(t),i=Bj({src:t.src||t.currentSrc,type:t.getAttribute("type")||null,poster:t.poster,autoplay:t.autoplay,loop:t.loop,muted:t.muted},n),e.next=3,this.initializePlayer(t,i);case 3:return s=e.sent,t.dataset.ipfsEnhanced="true",e.abrupt("return",s);case 4:throw e.prev=4,o=e.catch(2),console.error("IPFSHLSPlayer: Enhancement failed for video:",t.id||"no-id",o),o;case 5:case"end":return e.stop()}},e,this,[[2,4]])})),function(e){return s.apply(this,arguments)})},{key:"isVideoReady",value:function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&"VIDEO"===e.tagName&&document.contains(e)&&e.parentNode&&!e.hasAttribute("data-ipfs-enhanced")}},{key:"getVideoState",value:function(e){return{exists:!!e,isElement:e&&e.nodeType===Node.ELEMENT_NODE,isVideo:e&&"VIDEO"===e.tagName,inDocument:e&&document.contains(e),hasParent:e&&!!e.parentNode,isEnhanced:e&&e.hasAttribute("data-ipfs-enhanced"),id:e&&(e.id||"no-id")}}},{key:"applyVideoJSClasses",value:function(e){["video-js","vjs-default-skin"].forEach(function(t){e.classList.contains(t)||e.classList.add(t)}),["vjs-big-play-centered","vjs-fluid"].forEach(function(t){e.classList.contains(t)||e.hasAttribute("data-no-"+t.replace("vjs-",""))||e.classList.add(t)}),e.style.width||e.hasAttribute("width")||(e.style.width="100%"),e.style.height||e.hasAttribute("height")||(e.style.height="auto")}},{key:"ensureVideoWrapper",value:function(e){if(!e.parentNode)throw new Error("Video element must have a parent node for wrapper creation");var t=e.closest(".ipfs-video-container");if(t)return t.classList.add("ipfs-hls-player"),t;try{var n=document.createElement("div");return n.className="ipfs-video-container ipfs-hls-player",n.style.position="relative",n.style.width="100%",e.parentNode.insertBefore(n,e),n.appendChild(e),(window.ipfsHLSPlayerConfig||{}).debug&&console.log("IPFSHLSPlayer: Created universal wrapper for standalone video:",e.id||"no-id"),n}catch(t){throw console.error("IPFSHLSPlayer: Failed to create wrapper for video:",e.id||"no-id",t),t}}},{key:"enhanceStaticVideos",value:(r=i(d().mark(function e(){var t,n,r,i,s,o,a,l,c,u,h=arguments;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=h.length>0&&void 0!==h[0]?h[0]:document,n=window.ipfsHLSPlayerConfig||{},r=t.querySelectorAll("video:not([data-ipfs-enhanced])"),i=[],n.debug&&console.log("IPFSHLSPlayer: Found ".concat(r.length," static videos to enhance")),s=Nj(r),e.prev=1,s.s();case 2:if((o=s.n()).done){e.next=7;break}return a=o.value,e.prev=3,e.next=4,this.enhanceVideoElement(a);case 4:l=e.sent,i.push(l),n.debug&&console.log("IPFSHLSPlayer: Successfully enhanced static video:",a.id||"no-id"),e.next=6;break;case 5:e.prev=5,c=e.catch(3),console.error("Failed to enhance static video:",c);case 6:e.next=2;break;case 7:e.next=9;break;case 8:e.prev=8,u=e.catch(1),s.e(u);case 9:return e.prev=9,s.f(),e.finish(9);case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}},e,this,[[1,8,9,10],[3,5]])})),function(){return r.apply(this,arguments)})},{key:"ensureVideoJSStyles",value:(n=i(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zj());case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}],t&&Dj(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,s,o}();function zj(){var e=window.ipfsHLSPlayerConfig||{};return new Promise(function(t){var n=document.querySelector('link[href*="video-js"]'),r=document.querySelector('link[data-vjs-fallback="true"]');if(n||r)return e.debug&&console.log("IPFSHLSPlayer: Video.js CSS already loaded via link tag"),t();var i=document.createElement("div");i.className="video-js",i.style.position="absolute",i.style.left="-9999px",i.style.visibility="hidden",document.body.appendChild(i);var s=window.getComputedStyle(i),o="relative"===s.position||"inline-block"===s.display||"10px"===s.fontSize||"border-box"===s.boxSizing||"rgb(0, 0, 0)"===s.backgroundColor||"rgb(255, 255, 255)"===s.color;if(document.body.removeChild(i),o)return e.debug&&console.log("IPFSHLSPlayer: Video.js CSS detected via computed styles"),t();console.warn("IPFSHLSPlayer: Video.js CSS not detected, loading fallback");var a=["https://vjs.zencdn.net/8.6.1/video-js.css","https://cdnjs.cloudflare.com/ajax/libs/video.js/8.6.1/video-js.min.css"],l=0;!function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(r>=a.length)return console.error("IPFSHLSPlayer: All CSS fallback sources failed, proceeding without external CSS"),t();var i=document.createElement("link");i.rel="stylesheet",i.href=a[r],i.dataset.vjsFallback="true",i.dataset.attempt=l++,i.onload=function(){e.debug&&console.log("IPFSHLSPlayer: Successfully loaded fallback CSS from:",i.href),t()},i.onerror=function(){console.warn("IPFSHLSPlayer: Failed to load CSS from:",i.href),document.head.removeChild(i),n(r+1)},document.head.appendChild(i),setTimeout(function(){i.sheet||(console.warn("IPFSHLSPlayer: CSS load timeout for:",i.href),document.head.contains(i)&&document.head.removeChild(i),n(r+1))},3e3)}()})}var $j={videojs:jj.default,IPFSHLSPlayer:Fj};if("undefined"!=typeof window){window.videojs=jj.default,window.IPFSHLSPlayer=Fj,window.IPFSHLSPlayerBundle=$j,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){zj().catch(console.error)}):zj().catch(console.error),setTimeout(function(){zj().catch(console.error)},100);var qj=window.ipfsHLSPlayerConfig||{};!1!==qj.enableStaticEnhancement&&document.addEventListener("DOMContentLoaded",i(d().mark(function e(){var t;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,qj.debug&&console.log("IPFSHLSPlayer: Starting static page enhancement"),document.querySelector("[data-vue-app], [data-react-app], .react-app")){e.next=2;break}return e.next=1,Fj.enhanceStaticVideos();case 1:e.next=3;break;case 2:qj.debug&&console.log("IPFSHLSPlayer: Framework app detected, skipping static enhancement");case 3:e.next=5;break;case 4:e.prev=4,t=e.catch(0),console.error("Static video enhancement failed:",t);case 5:case"end":return e.stop()}},e,null,[[0,4]])})))}const Hj=$j;var Vj=hx,Wj=Cx,Gj=px,Kj=Mx,Jj=Ox,Xj=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Yj=Wg.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Ef(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[$g({find:Xj,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),Qj=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Zj=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,eP=hm.create({name:"highlight",addOptions:()=>({multicolor:!1,HTMLAttributes:{}}),addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML:()=>[{tag:"mark"}],renderHTML({HTMLAttributes:e}){return["mark",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[zg({find:Qj,type:this.type})]},addPasteRules(){return[Gg({find:Zj,type:this.type})]}}),tP=hm.create({name:"subscript",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"sub"},{style:"vertical-align",getAttrs:e=>"sub"===e&&null}],renderHTML({HTMLAttributes:e}){return["sub",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setSubscript:()=>({commands:e})=>e.setMark(this.name),toggleSubscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSubscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),nP=hm.create({name:"superscript",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"sup"},{style:"vertical-align",getAttrs:e=>"super"===e&&null}],renderHTML({HTMLAttributes:e}){return["sup",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{setSuperscript:()=>({commands:e})=>e.setMark(this.name),toggleSuperscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSuperscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),rP=hm.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{},mergeNestedSpanStyles:!0}),parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>!!e.hasAttribute("style")&&(this.options.mergeNestedSpanStyles&&(e=>{if(!e.children.length)return;const t=e.querySelectorAll("span");t&&t.forEach(e=>{var t,n;const r=e.getAttribute("style"),i=null==(n=null==(t=e.parentElement)?void 0:t.closest("span"))?void 0:n.getAttribute("style");e.setAttribute("style",`${i};${r}`)})})(e),{})}]},renderHTML({HTMLAttributes:e}){return["span",Ef(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleTextStyle:e=>({commands:t})=>t.toggleMark(this.name,e),removeEmptyTextStyle:()=>({tr:e})=>{const{selection:t}=e;return e.doc.nodesBetween(t.from,t.to,(t,n)=>{if(t.isTextblock)return!0;t.marks.filter(e=>e.type===this.type).some(e=>Object.values(e.attrs).some(e=>!!e))||e.removeMark(n,n+t.nodeSize,this.type)}),!0}}}}),iP=ym.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;return null==(t=e.style.backgroundColor)?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:`background-color: ${e.backgroundColor}`}:{}}}}]},addCommands:()=>({setBackgroundColor:e=>({chain:t})=>t().setMark("textStyle",{backgroundColor:e}).run(),unsetBackgroundColor:()=>({chain:e})=>e().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()})}),sP=ym.create({name:"color",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;return null==(t=e.style.color)?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands:()=>({setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()})}),oP=ym.create({name:"fontFamily",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:`font-family: ${e.fontFamily}`}:{}}}}]},addCommands:()=>({setFontFamily:e=>({chain:t})=>t().setMark("textStyle",{fontFamily:e}).run(),unsetFontFamily:()=>({chain:e})=>e().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()})}),aP=ym.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands:()=>({setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})}),lP=ym.create({name:"lineHeight",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:`line-height: ${e.lineHeight}`}:{}}}}]},addCommands:()=>({setLineHeight:e=>({chain:t})=>t().setMark("textStyle",{lineHeight:e}).run(),unsetLineHeight:()=>({chain:e})=>e().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()})}),cP=(ym.create({name:"textStyleKit",addExtensions(){const e=[];return!1!==this.options.backgroundColor&&e.push(iP.configure(this.options.backgroundColor)),!1!==this.options.color&&e.push(sP.configure(this.options.color)),!1!==this.options.fontFamily&&e.push(oP.configure(this.options.fontFamily)),!1!==this.options.fontSize&&e.push(aP.configure(this.options.fontSize)),!1!==this.options.lineHeight&&e.push(lP.configure(this.options.lineHeight)),!1!==this.options.textStyle&&e.push(rP.configure(this.options.textStyle)),e}}),ym.create({name:"textAlign",addOptions:()=>({types:[],alignments:["left","center","right","justify"],defaultAlignment:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>!!this.options.alignments.includes(e)&&this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(e=>e),unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(e=>e),toggleTextAlign:e=>({editor:t,commands:n})=>!!this.options.alignments.includes(e)&&(t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}})),uP=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,dP=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,hP=e=>e.match(uP),pP=(e,t)=>t?"https://www.youtube-nocookie.com/embed/videoseries?list=":e?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",fP=Wg.create({name:"youtube",addOptions:()=>({addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML:()=>[{tag:"div[data-youtube-video] iframe"}],addCommands(){return{setYoutubeVideo:e=>({commands:t})=>!!hP(e.src)&&t.insertContent({type:this.name,attrs:e})}},addPasteRules(){return this.options.addPasteHandler?[Kg({find:dP,type:this.type,getAttributes:e=>({src:e.input})})]:[]},renderHTML({HTMLAttributes:e}){const t=(e=>{const{url:t,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:a,enableIFrameApi:l,endTime:c,interfaceLanguage:u,ivLoadPolicy:d,loop:h,modestBranding:p,nocookie:f,origin:m,playlist:g,progressBarColor:y,startAt:v,rel:b}=e;if(!hP(t))return null;if(t.includes("/embed/"))return t;if(t.includes("youtu.be")){const e=t.split("/").pop();return e?`${pP(f)}${e}`:null}const _=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(t);if(!_||!_[2])return null;let w=`${pP(f,"list"===_[1])}${_[2]}`;const S=[];return!1===n&&S.push("fs=0"),r&&S.push("autoplay=1"),i&&S.push(`cc_lang_pref=${i}`),s&&S.push("cc_load_policy=1"),o||S.push("controls=0"),a&&S.push("disablekb=1"),l&&S.push("enablejsapi=1"),c&&S.push(`end=${c}`),u&&S.push(`hl=${u}`),d&&S.push(`iv_load_policy=${d}`),h&&S.push("loop=1"),p&&S.push("modestbranding=1"),m&&S.push(`origin=${m}`),g&&S.push(`playlist=${g}`),v&&S.push(`start=${v}`),y&&S.push(`color=${y}`),void 0!==b&&S.push(`rel=${b}`),S.length&&(w+=`${"v"===_[1]?"?":"&"}${S.join("&")}`),w})({url:e.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:e.start||0,rel:this.options.rel});return e.src=t,["div",{"data-youtube-video":""},["iframe",Ef(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},e)]]}}),mP=fP;function gP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var bP=Hj.IPFSHLSPlayer,_P=Dx.extend({name:"paragraph",onCreate:function(){},addAttributes:function(){var e;return vP(vP({},(null===(e=this.parent)||void 0===e?void 0:e.call(this))||{}),{},{textAlign:{default:null,parseHTML:function(e){return e.style.textAlign||null},renderHTML:function(e){return e.textAlign?{style:"text-align: ".concat(e.textAlign)}:{}}}})}}),wP=cP.extend({name:"textAlign",onCreate:function(){},addOptions:function(){var e;return vP(vP({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{types:["heading","paragraph"],alignments:["left","center","right","justify"],defaultAlignment:"left"})},addCommands:function(){return{setTextAlign:function(e){return function(t){for(var n=t.state,r=(t.dispatch,t.commands),i=n.selection.$from,s=i.depth;s>0;s--)if("blockquote"===i.node(s).type.name)return!1;try{var o=i.node().type.name;if("heading"===o||"paragraph"===o)return r.updateAttributes(o,{textAlign:e});for(var a=i.depth;a>0;a--){var l=i.node(a);if("heading"===l.type.name||"paragraph"===l.type.name)return r.updateAttributes(l.type.name,{textAlign:e})}return!1}catch(e){return console.error("CustomTextAlign: Error in setTextAlign:",e),!1}}}}}}),SP=ym.create({name:"blockquoteAlignmentFilter",onCreate:function(){},addProseMirrorPlugins:function(){return[new cu({key:new hu("blockquoteAlignmentFilter"),filterTransaction:function(e,t){var n=!1;return e.steps.forEach(function(e){if(e.slice){var r=function(i){i.content.forEach(function(i){var s;if(null!==(s=i.attrs)&&void 0!==s&&s.textAlign){var o=e.from;if(void 0!==o)try{for(var a=t.doc.resolve(o),l=a.depth;l>0;l--)if("blockquote"===a.node(l).type.name)return void(n=!0)}catch(e){}}i.content&&r(i.content)})};r(e.slice)}}),!n},appendTransaction:function(e,t,n){var r=n.tr,i=!1;return e.some(function(e){return e.docChanged})?(n.doc.descendants(function(e,t){if(("paragraph"===e.type.name||"heading"===e.type.name)&&e.attrs.textAlign)try{for(var s=n.doc.resolve(t),o=!1,a=s.depth;a>0;a--)if("blockquote"===s.node(a).type.name){o=!0;break}o&&(r.setNodeMarkup(t,null,vP(vP({},e.attrs),{},{textAlign:null})),i=!0)}catch(e){console.error(" BlockquoteAlignmentFilter: Error resolving position:",e,"pos:",t)}}),i?r:null):null}})]}}),kP=Yj.extend({name:"image",addOptions:function(){var e;return vP(vP({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{onImageClick:null})},addCommands:function(){var e,t=this;return vP(vP({},null===(e=this.parent)||void 0===e?void 0:e.call(this)),{},{editImage:function(e,n){return function(r){return r.editor,t.options.onImageClick&&t.options.onImageClick(e,n),!0}}})},addNodeView:function(){return function(e){var t=e.node,n=e.getPos,r=e.editor,i=t,s=document.createElement("figure");s.className="image-figure",s.style.display="block",s.style.position="relative",s.style.margin="1rem 0",s.style.textAlign="center";var o=document.createElement("img");o.src=t.attrs.src,o.alt=t.attrs.alt||"",o.title=t.attrs.title||"",o.className=t.attrs.class||"content-image",o.style.cursor="pointer",o.style.maxWidth="100%",o.style.height="auto";var a=document.createElement("figcaption");a.className="image-caption",a.textContent=t.attrs.alt||"",a.style.display=t.attrs.alt?"block":"none";var l=function(e){if(e.preventDefault(),e.stopPropagation(),"function"==typeof n){var t=n();r.commands.editImage(t,i.attrs)}};return o.addEventListener("click",l),s.appendChild(o),s.appendChild(a),{dom:s,update:function(e){return e.type===t.type&&(i=e,o.src=e.attrs.src,o.alt=e.attrs.alt||"",o.title=e.attrs.title||"",a.textContent=e.attrs.alt||"",a.style.display=e.attrs.alt?"block":"none",!0)},destroy:function(){o.removeEventListener("click",l)}}}},addProseMirrorPlugins:function(){var e,t=(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[];return[].concat(o(t),[new cu({key:new hu("customImageDrag"),props:{handleDOMEvents:{dragstart:function(e,t){if("IMG"!==t.target.tagName)return!1;t.dataTransfer.effectAllowed="move";var n=t.target,r=document.createElement("canvas"),i=r.getContext("2d"),s=Math.min(100/n.width,100/n.height,1);r.width=n.width*s,r.height=n.height*s,i.drawImage(n,0,0,r.width,r.height),i.strokeStyle="#5C94FE",i.lineWidth=2,i.strokeRect(0,0,r.width,r.height),t.dataTransfer.setDragImage(r,r.width/2,r.height/2);var o=e.posAtDOM(t.target,0);return o>=0&&(window.dluxEditor=window.dluxEditor||{},window.dluxEditor.draggingImagePos=o,t.target.style.opacity="0.5"),!1},dragover:function(e,t){return t.dataTransfer&&t.dataTransfer.types.includes("text/html")&&(t.dataTransfer.dropEffect="move"),!1},dragend:function(e,t){return"IMG"===t.target.tagName&&(t.target.style.opacity=""),window.dluxEditor&&delete window.dluxEditor.draggingImagePos,!1},drop:function(e,t){var n;if(void 0!==(null===(n=window.dluxEditor)||void 0===n?void 0:n.draggingImagePos)){var r=window.dluxEditor.draggingImagePos,i=e.posAtCoords({left:t.clientX,top:t.clientY});if(i&&i.pos!==r){t.preventDefault(),e.state.doc.resolve(r);var s=e.state.doc.nodeAt(r);if(s&&"image"===s.type.name){var o=e.state.tr,a=i.pos;return a>r&&(a-=s.nodeSize),o.delete(r,r+s.nodeSize),o.insert(a,s),e.dispatch(o),delete window.dluxEditor.draggingImagePos,!0}}}return!1}}}})])}}),TP=rk.extend({name:"horizontalRule",atom:!0,draggable:!0,selectable:!0,addCommands:function(){var e;return(null===(e=this.parent)||void 0===e?void 0:e.call(this))||{}},renderHTML:function(e){return["div",{class:"hr-wrapper"},["hr",e.HTMLAttributes]]},parseDOM:function(){return[{tag:"div.hr-wrapper",getContent:function(e,t){return t.nodeFromJSON({type:"horizontalRule"}).content}},{tag:"hr"}]}}),xP={tableCell:{blocks:["table","horizontalRule"],transforms:["heading","codeBlock","blockquote","bulletList","orderedList"]},tableHeader:{blocks:["table","horizontalRule"],transforms:["heading","codeBlock","blockquote","bulletList","orderedList"]},blockquote:{blocks:["table","horizontalRule"],transforms:["heading","codeBlock","bulletList","orderedList"]}};function EP(e){var t=xP[e];return t?Array.isArray(t)?t:[].concat(o(t.blocks||[]),o(t.transforms||[])):[]}function CP(e,t){var n=xP[e];return!(!n||Array.isArray(n))&&(n.transforms||[]).includes(t)}function AP(e,t,n){for(var r=e.doc.resolve(t),i=r.depth;i>0;i--){var s=r.node(i).type.name,o=EP(s);if(o.includes(n))return{blocked:!0,byNode:s,atDepth:i,blockedContent:o,canTransform:CP(s,n)}}return{blocked:!1}}function OP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[];e.content.forEach(function(i){switch(i.type.name){case"heading":var s="blockquote"===n?{}:i.attrs;r.push(t.nodes.paragraph.create(s,i.content));break;case"codeBlock":var a=[];i.content.forEach(function(e){if(e.isText){var n=t.marks.code?[t.marks.code.create()]:[];a.push(e.mark(n))}});var l="blockquote"===n?{}:i.attrs;r.push(t.nodes.paragraph.create(l,a));break;case"blockquote":i.content.forEach(function(i){if("paragraph"===i.type.name){var s="blockquote"===n?{}:i.attrs;r.push(t.nodes.paragraph.create(s,i.content))}else{var a=OP(e.constructor.maxOpen(t.nodeFromJSON({type:"doc",content:[i.toJSON()]}).content),t,n);r.push.apply(r,o(a.content.content))}});break;case"bulletList":case"orderedList":i.content.forEach(function(e){"listItem"===e.type.name&&e.content.forEach(function(e){if("paragraph"===e.type.name){var i="blockquote"===n?{}:e.attrs;r.push(t.nodes.paragraph.create(i,e.content))}else{var s="blockquote"===n?{}:e.attrs;r.push(t.nodes.paragraph.create(s,e.content))}})});break;case"paragraph":"blockquote"===n?r.push(t.nodes.paragraph.create({},i.content)):r.push(i);break;case"text":r.push(i);break;default:if(i.isBlock&&i.content.size>0){var c="blockquote"===n?{}:i.attrs;r.push(t.nodes.paragraph.create(c,i.content))}else if(i.isInline||i.isText){var u="blockquote"===n?{}:null;r.push(t.nodes.paragraph.create(u,[i]))}}});var i=t.nodeFromJSON({type:"doc",content:r.map(function(e){return e.toJSON()})}).content;return e.constructor.maxOpen(i)}var MP=Wg.create({name:"ipfsvideo",group:"block",atom:!0,draggable:!0,addAttributes:function(){return{src:{default:null,parseHTML:function(e){return e.getAttribute("src")},renderHTML:function(e){return e.src?{src:e.src}:{}}},poster:{default:null,parseHTML:function(e){return e.getAttribute("poster")},renderHTML:function(e){return e.poster?{poster:e.poster}:{}}},width:{default:"100%",parseHTML:function(e){return e.getAttribute("width")||"100%"},renderHTML:function(e){return{width:e.width||"100%"}}},height:{default:"auto",parseHTML:function(e){return e.getAttribute("height")||"auto"},renderHTML:function(e){return{height:e.height||"auto"}}},controls:{default:!0,parseHTML:function(e){return e.hasAttribute("controls")},renderHTML:function(e){return e.controls?{controls:"controls"}:{}}},autoplay:{default:!1,parseHTML:function(e){return e.hasAttribute("autoplay")},renderHTML:function(e){return e.autoplay?{autoplay:"autoplay"}:{}}},loop:{default:!1,parseHTML:function(e){return e.hasAttribute("loop")},renderHTML:function(e){return e.loop?{loop:"loop"}:{}}},muted:{default:!1,parseHTML:function(e){return e.hasAttribute("muted")},renderHTML:function(e){return e.muted?{muted:"muted"}:{}}},type:{default:null,parseHTML:function(e){return e.getAttribute("type")},renderHTML:function(e){return e.type?{type:e.type}:{}}},"data-type":{default:null,parseHTML:function(e){return e.getAttribute("data-type")},renderHTML:function(e){return e["data-type"]?{"data-type":e["data-type"]}:{}}},"data-mime-type":{default:null,parseHTML:function(e){return e.getAttribute("data-mime-type")},renderHTML:function(e){return e["data-mime-type"]?{"data-mime-type":e["data-mime-type"]}:{}}},crossorigin:{default:"anonymous",parseHTML:function(e){return e.getAttribute("crossorigin")||"anonymous"},renderHTML:function(e){return e.crossorigin?{crossorigin:e.crossorigin}:{}}}}},parseHTML:function(){return[{tag:"video[src]"}]},renderHTML:function(e){var t=vP({},e.HTMLAttributes);return!0===t.controls||"true"===t.controls?t.controls="controls":!1!==t.controls&&"false"!==t.controls||delete t.controls,t.width||(t.width="100%"),t.height||(t.height="auto"),!t.crossorigin&&t.src&&t.src.includes("ipfs")&&(t.crossorigin="anonymous"),["video",t]},addCommands:function(){var e=this;return{setIPFSVideo:function(t){return function(n){return n.commands.insertContent({type:e.name,attrs:t})}}}},addNodeView:function(){return function(e){var t=e.node,n=(e.editor,document.createElement("div"));n.className="ipfs-video-container",n.style.position="relative",n.style.marginBottom="1rem",n.style.width="100%";var r=document.createElement("video");r.className="video-js vjs-default-skin vjs-big-play-centered vjs-fluid",r.setAttribute("data-tiptap-video","true"),n.appendChild(r);var s=null,o=function(){var e=i(d().mark(function e(){var i;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.IPFSHLSPlayer){e.next=1;break}return console.error(" TipTap IPFSVideo: IPFSHLSPlayer not available. Make sure ipfs-hls-player.min.js is loaded."),e.abrupt("return");case 1:return e.next=2,window.IPFSHLSPlayer.initializePlayer(r,{src:t.attrs.src,type:t.attrs.type||(t.attrs.src&&t.attrs.src.includes(".m3u8")?"application/x-mpegURL":"video/mp4"),poster:t.attrs.poster,autoplay:t.attrs.autoplay,loop:t.attrs.loop,muted:t.attrs.muted});case 2:s=e.sent,n._ipfsHLSPlayer=s,r._ipfsInitialized=!0,r.setAttribute("data-ipfs-enhanced","true"),e.next=4;break;case 3:e.prev=3,i=e.catch(0),console.error(" TipTap IPFSVideo initialization failed:",i);case 4:case"end":return e.stop()}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}();return setTimeout(o,50),{dom:n,contentDOM:null,update:function(e){if(e.type!==t.type)return!1;if(s&&e.attrs.src!==t.attrs.src){var n=e.attrs.type||(e.attrs.src.includes(".m3u8")?"application/x-mpegURL":"video/mp4");s.src({src:e.attrs.src,type:n})}return t=e,!0},destroy:function(){n._ipfsHLSPlayer&&window.IPFSHLSPlayer&&(window.IPFSHLSPlayer.destroyPlayer(r),n._ipfsHLSPlayer=null)}}}},addProseMirrorPlugins:function(){var e,t=(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[];return[].concat(o(t),[new cu({key:new hu("ipfsVideoDrag"),props:{handleDOMEvents:{dragstart:function(e,t){var n=t.target,r=null;if("VIDEO"===n.tagName)r=n;else{if(!n.classList.contains("ipfs-video-container"))return!1;r=n.querySelector("video")}t.dataTransfer.effectAllowed="move";var i=e.posAtDOM(n,0);if(i>=0){var s,o=e.state.doc.nodeAt(i);if(o&&o.attrs.poster){(s=document.createElement("img")).src=o.attrs.poster,s.style.width="100px",s.style.height="auto",s.style.maxHeight="100px",s.style.objectFit="cover",s.style.border="2px solid #5C94FE",s.style.borderRadius="4px",s.style.position="absolute",s.style.top="-1000px",document.body.appendChild(s);var a=function(){s.remove(),document.removeEventListener("dragend",a)};document.addEventListener("dragend",a)}else{(s=document.createElement("div")).style.width="100px",s.style.height="75px",s.style.backgroundColor="#2a2a2a",s.style.border="2px solid #5C94FE",s.style.borderRadius="4px",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.position="absolute",s.style.top="-1000px",s.innerHTML='<span style="color: #fff; font-size: 30px;"></span>',document.body.appendChild(s);var l=function(){s.remove(),document.removeEventListener("dragend",l)};document.addEventListener("dragend",l)}t.dataTransfer.setDragImage(s,50,37),window.dluxEditor=window.dluxEditor||{},window.dluxEditor.draggingVideoPos=i,n.classList.contains("ipfs-video-container")?n.style.opacity="0.5":r&&(r.style.opacity="0.5")}return!1},dragover:function(e,t){return t.dataTransfer&&t.dataTransfer.types.includes("text/html")&&(t.dataTransfer.dropEffect="move"),!1},dragend:function(e,t){if("VIDEO"===t.target.tagName)t.target.style.opacity="";else if(t.target.classList.contains("ipfs-video-container")){t.target.style.opacity="";var n=t.target.querySelector("video");n&&(n.style.opacity="")}return window.dluxEditor&&delete window.dluxEditor.draggingVideoPos,!1},drop:function(e,t){var n;if(void 0!==(null===(n=window.dluxEditor)||void 0===n?void 0:n.draggingVideoPos)){var r=window.dluxEditor.draggingVideoPos,i=e.posAtCoords({left:t.clientX,top:t.clientY});if(i&&i.pos!==r){t.preventDefault(),e.state.doc.resolve(r);var s=e.state.doc.nodeAt(r);if(s&&"ipfsvideo"===s.type.name){var o=e.state.tr,a=i.pos;return a>r&&(a-=s.nodeSize),o.delete(r,r+s.nodeSize),o.insert(a,s),e.dispatch(o),delete window.dluxEditor.draggingVideoPos,!0}}}return!1}}}})])}}),IP=dO.extend({addProseMirrorPlugins:function(){return[new cu({key:new hu("customTableCell"),props:{handleDragOver:function(e,t){var n=t.dataTransfer;if(!n)return!1;if(Array.from(n.types).some(function(e){return e.includes("application/x-pm")||e.includes("text/html")})){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(r)for(var i=e.state.doc.resolve(r.pos),s=i.depth;s>0;s--){var o=i.node(s);if("tableCell"===o.type.name||"tableHeader"===o.type.name){var a,l=null===(a=window.dluxEditor)||void 0===a?void 0:a.dragHandleHoveredNode,c=!1;if(l&&"table"===l.type.name)c=!0;else{var u=e.state.doc.nodeAt(e.state.selection.from);u&&"table"===u.type.name&&(c=!0)}if(c)return t.dataTransfer.dropEffect="none",t.preventDefault(),!0}}}return!1},handleDrop:function(e,t,n,r){var i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return!1;var s=new Set;n&&n.content&&n.content.descendants(function(e){s.add(e.type.name)});var o,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gP(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(s);try{for(a.s();!(o=a.n()).done;){var l=o.value,c=AP(e.state,i.pos,l);if(c.blocked&&!c.canTransform)return t.preventDefault(),!0}}catch(e){a.e(e)}finally{a.f()}for(var u=e.state.doc.resolve(i.pos),d=!1,h=u.depth;h>0;h--){var p=u.node(h);if("tableCell"===p.type.name||"tableHeader"===p.type.name){d=!0;break}}if(d&&n){var f=!1;if(n.content.forEach(function(e){["heading","codeBlock","blockquote","bulletList","orderedList"].includes(e.type.name)&&(f=!0)}),f){var m=OP(n,e.state.schema);if(r){var g=e.state.selection,y=g.from,v=g.to,b=e.state.tr,_=i.pos;return _>y&&(_-=v-y),b.delete(y,v),b.insert(_,m.content),e.dispatch(b),!0}var w=e.state.tr;return w.replaceRange(i.pos,i.pos,m),e.dispatch(w),!0}}if(r&&n){var S=e.state.selection,k=S.from,T=S.to,x=e.state.tr,E=i.pos;return E>k&&(E-=T-k),x.delete(k,T),x.insert(E,n.content),e.dispatch(x),!0}return!1}}})]}}),DP=yE.extend({name:"customDropcursor",addProseMirrorPlugins:function(){var e,t=null===(e=this.parent)||void 0===e||null===(e=e.call(this))||void 0===e?void 0:e[0];if(!t)return console.warn(" CustomDropcursor: No parent dropcursor plugin found"),[];var n=new cu({key:new hu("tableDragControl"),view:function(e){var t=null,n=null,r=function(){n&&(n._observer&&n._observer.disconnect(),n.remove(),n=null)},i=function(n){var r,i;if(null!==(r=(i=n.target).hasAttribute)&&void 0!==r&&r.call(i,"data-drag-handle")){var s,o=null===(s=window.dluxEditor)||void 0===s?void 0:s.dragHandleHoveredNode;if(o)t=o.type.name;else{var a=e.state,l=a.selection.from,c=a.doc.resolve(l),u=a.doc.nodeAt(l);if("paragraph"===(t=u?u.type.name:c.parent.type.name)||"text"===t)for(var d=c.depth;d>=0;d--){var h=c.node(d);if(h&&["blockquote","table","codeBlock","heading"].includes(h.type.name)){t=h.type.name;break}}}}},s=function(i){if(t){var s=e.posAtCoords({left:i.clientX,top:i.clientY});if(s){var o=function(e,t,n){if(!n)return!0;var r=AP(e,t,n);if(!r.blocked)return!0;if(r.canTransform)return!0;var i=xP[r.byNode];return i&&i.blocks&&i.blocks.includes(n),!1}(e.state,s.pos,t);o?(n&&r(),e.dom.classList.remove("table-drag-over-cell")):(n||function(){(n=document.createElement("style")).textContent="\n            .ProseMirror-dropcursor,\n            .prosemirror-dropcursor-block,\n            .prosemirror-dropcursor-inline {\n              display: none !important;\n              visibility: hidden !important;\n              opacity: 0 !important;\n              width: 0 !important;\n              height: 0 !important;\n              background-color: transparent !important;\n            }\n            /* Change cursor to not-allowed when dragging table over cells */\n            .ProseMirror.table-drag-over-cell,\n            .ProseMirror.table-drag-over-cell * {\n              cursor: not-allowed !important;\n            }\n          ",document.head.appendChild(n);var t=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&e.classList&&(e.classList.contains("ProseMirror-dropcursor")||e.classList.contains("prosemirror-dropcursor-block")||e.classList.contains("prosemirror-dropcursor-inline"))&&(e.style.display="none",e.style.visibility="hidden",e.style.opacity="0")})})});t.observe(e.dom.offsetParent||document.body,{childList:!0,subtree:!0}),n._observer=t}(),e.dom.classList.add("table-drag-over-cell"))}}else n&&(r(),e.dom.classList.remove("table-drag-over-cell"))},o=function(){t&&(t=null,r(),e.dom.classList.remove("table-drag-over-cell"))};return document.addEventListener("dragstart",i,!0),document.addEventListener("dragover",s,!0),document.addEventListener("dragend",o,!0),{destroy:function(){document.removeEventListener("dragstart",i,!0),document.removeEventListener("dragover",s,!0),document.removeEventListener("dragend",o,!0),r()}}}});return[n,t]}}),jP=LS.extend({name:"blockquote",content:"paragraph+",draggable:!0,onCreate:function(){},addInputRules:function(){return[Vg({find:/^>\s$/,type:this.type,getAttributes:function(){return{}}})]},addProseMirrorPlugins:function(){var e,t=(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[];return[].concat(o(t),[new cu({key:new hu("blockquoteDropHandler"),props:{handleDrop:function(e,t,n,r){if(!n)return!1;var i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return!1;for(var s=e.state.doc.resolve(i.pos),o=!1,a=s.depth;a>0;a--)if("blockquote"===s.node(a).type.name){o=!0;break}if(o){var l=function(e){var t;if(null!==(t=e.attrs)&&void 0!==t&&t.textAlign&&"left"!==e.attrs.textAlign)return!0;if(["heading","codeBlock","bulletList","orderedList"].includes(e.type.name))return!0;if(e.content&&e.content.size>0){var n=!1;return e.content.forEach(function(e){l(e)&&(n=!0)}),n}return!1},c=!1;if(n.content.forEach(function(e){l(e)&&(c=!0)}),c){var u=OP(n,e.state.schema,"blockquote"),d=e.state.tr;if(r){var h=e.state.selection.$from,p=e.state.selection.$to;d.delete(h.pos,p.pos)}return d.replaceRange(i.pos,i.pos,u),e.dispatch(d),t.preventDefault(),!0}}return!1}}})])}}),PP=ym.create({name:"blockquoteNestingFilter",addProseMirrorPlugins:function(){return[new cu({key:new hu("blockquoteNestingFilter"),filterTransaction:function(e,t){if(!e.docChanged)return!0;var n=!1;return e.steps.forEach(function(t){if("ReplaceStep"===t.constructor.name||"ReplaceAroundStep"===t.constructor.name){var r=t.slice;if(!r||!r.content||0===r.content.size)return;var i=!1;if(r.content.forEach(function(e){e&&e.type&&"blockquote"===e.type.name&&(i=!0)}),!i)return;try{for(var s=e.mapping.map(t.from),o=e.doc.resolve(s),a=o.depth;a>0;a--)if("blockquote"===o.node(a).type.name){n=!0;break}}catch(e){}}}),!n},appendTransaction:function(e,t,n){var r=e.some(function(e){return e.docChanged});if(!r)return null;var i=null;return n.doc.descendants(function(e,t){"blockquote"===e.type.name&&e.forEach(function(e,r){if("blockquote"===e.type.name){i||(i=n.tr);var s=t+r+1;e.nodeSize,i.replaceRangeWith(s-1,s+e.nodeSize-1,e.content)}})}),i}})]}}),LP=tk.extend({name:"heading",onCreate:function(){},addAttributes:function(){var e;return vP(vP({},(null===(e=this.parent)||void 0===e?void 0:e.call(this))||{}),{},{textAlign:{default:null,parseHTML:function(e){return e.style.textAlign||null},renderHTML:function(e){return e.textAlign?{style:"text-align: ".concat(e.textAlign)}:{}}}})},addInputRules:function(){var e;return((null===(e=this.parent)||void 0===e?void 0:e.call(this))||[]).map(function(e){var t=e.handler;return vP(vP({},e),{},{handler:function(e){for(var n=e.state.selection.$from,r=n.depth;r>0;r--)if("blockquote"===n.node(r).type.name)return null;return t(e)}})})}}),NP={HocuspocusProvider:ea,WebrtcProvider:class extends z{constructor(e,t,{signaling:n=["wss://y-webrtc-eu.fly.dev"],password:r=null,awareness:i=new ha(t),maxConns:s=20+q(15*Je()),filterBcConns:o=!0,peerOpts:a={}}={}){super(),this.roomName=e,this.doc=t,this.filterBcConns=o,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=s,this.peerOpts=a,this.key=r?((e,t)=>{const n=se(e).buffer,r=se(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(e=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))})(r,e):et(null),this.room=null,this.key.then(n=>{this.room=((e,t,n,r)=>{if(ba.has(n))throw Ae(`A Yjs Doc connected to room "${n}" already exists!`);const i=new Aa(e,t,n,r);return ba.set(n,i),i})(t,this,e,n),this.shouldConnect?this.room.connect():this.room.disconnect(),Ia(this)}),this.connect(),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{const t=L(va,e,()=>new Ma(e));this.signalingConns.push(t),t.providers.add(this)}),this.room&&(this.room.connect(),Ia(this))}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),0===e.providers.size&&(e.destroy(),va.delete(e.url))}),this.room&&(this.room.disconnect(),Ia(this))}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),ba.delete(this.roomName)}),super.destroy()}},Y:e,IndexeddbPersistence:class extends ${constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=(e=>Ze((t,n)=>{const r=indexedDB.open(e);r.onupgradeneeded=e=>(e=>[["updates",{autoIncrement:!0}],["custom"]].forEach(t=>e.createObjectStore.apply(e,t)))(e.target.result),r.onerror=e=>n(Ae(e.target.error)),r.onsuccess=e=>{const n=e.target.result;n.onversionchange=()=>{n.close()},t(n)}}))(e),this.whenSynced=Ze(e=>this.on("synced",()=>e(this))),this._db.then(e=>{this.db=e,za(this,e=>Na(e,jn(t)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){const[t]=ja(this.db,[Fa]);Na(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{((e,t=!0)=>{za(e).then(n=>{(t||e._dbsize>=500)&&Na(n,jn(e.doc)).then(()=>{return La(n,(t=e._dbref,IDBKeyRange.upperBound(t,!0)));var t}).then(()=>Pa(n).then(t=>{e._dbsize=t}))})})(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{var e;e=this.name,Da(indexedDB.deleteDatabase(e))})}get(e){return this._db.then(t=>{const[n]=ja(t,[Ba],"readonly");return((e,t)=>Da(e.get(t)))(n,e)})}set(e,t){return this._db.then(n=>{const[r]=ja(n,[Ba]);return((e,t,n)=>Da(e.put(t,n)))(r,t,e)})}del(e){return this._db.then(t=>{const[n]=ja(t,[Ba]);return La(n,e)})}},createCollaborativeDocument:function(){return new vn},Editor:Fg,Extension:ym,EditorContent:MS,useEditor:(e={})=>{const t=ib(undefined,!0);return s_(()=>{t.value=new OS(e)}),l_(()=>{var e,n,r;const i=null==(e=t.value)?void 0:e.options.element,s=null==i?void 0:i.cloneNode(!0);null==(n=null==i?void 0:i.parentNode)||n.replaceChild(s,i),null==(r=t.value)||r.destroy()}),t},VueRenderer:IS,StarterKit:kE,Collaboration:SC,CollaborationCaret:xC,BubbleMenu:HM,FloatingMenu:WM,DragHandle:cI,DragHandleVue:uI,Document:YS,Paragraph:_P,Text:Ux,Placeholder:bE,Bold:zS,Italic:ck,Strike:Nx,Underline:Fx,Code:VS,Heading:LP,ListItem:Gj,BulletList:Vj,OrderedList:Wj,TaskList:Kj,TaskItem:Jj,CustomBlockquote:jP,HorizontalRule:TP,HardBreak:ZS,Link:lx,CustomImage:kP,CodeBlock:JS,CustomDropcursor:DP,CustomHorizontalRule:TP,Gapcursor:vE,CharacterCount:gE,Typography:EC,Mention:LC,Highlight:eP,Subscript:tP,Superscript:nP,TextStyle:rP,CustomTextAlign:wP,Youtube:mP,IPFSVideo:MP,IPFSHLSPlayer:bP,TableKit:tO,CustomTableCell:IP,BlockquoteNestingFilter:PP,BlockquoteAlignmentFilter:SP,Plugin:cu,PluginKey:hu,TextSelection:Kc,DecorationSet:Kh,Slice:Za,renderToMarkdown:function({content:e,extensions:t,options:n}){return function({content:e,extensions:t,options:n}){return function({renderer:e,domOutputSpecToElement:t,mapDefinedTypes:n,content:r,extensions:i,options:s}){const o=xf(i=Df(i)),{nodeExtensions:a,markExtensions:l}=Tf(i);return r instanceof yl||(r=yl.fromJSON(Mf(i),r)),e({...s,nodeMapping:{...Object.fromEntries(a.filter(e=>!(e.name in n||(null==s?void 0:s.nodeMapping)&&e.name in s.nodeMapping)).map(e=>function(e,t,n,r){const i={name:t.name,options:t.options,storage:t.storage,parent:t.parent},s=bf(t,"renderHTML",i);return s?[t.name,({node:r,children:i})=>{try{return e(s({node:r,HTMLAttributes:dI(r,n)}))(i)}catch(e){throw new Error(`[tiptap error]: Node ${t.name} cannot be rendered, it's "renderToHTML" method threw an error: ${e.message}`,{cause:e})}}]:(null==r?void 0:r.unhandledNode)?[t.name,r.unhandledNode]:[t.name,()=>{throw new Error(`[tiptap error]: Node ${t.name} cannot be rendered, it is missing a "renderToHTML" method, please implement it or override the corresponding "nodeMapping" method to have a custom rendering`)}]}(t,e,o,s))),...n,...null==s?void 0:s.nodeMapping},markMapping:{...Object.fromEntries(l.filter(e=>!(null==s?void 0:s.markMapping)||!(e.name in s.markMapping)).map(e=>function(e,t,n,r){const i={name:t.name,options:t.options,storage:t.storage,parent:t.parent},s=bf(t,"renderHTML",i);return s?[t.name,({mark:r,children:i})=>{try{return e(s({mark:r,HTMLAttributes:dI(r,n)}))(i)}catch(e){throw new Error(`[tiptap error]: Mark ${t.name} cannot be rendered, it's "renderToHTML" method threw an error: ${e.message}`,{cause:e})}}]:(null==r?void 0:r.unhandledMark)?[t.name,r.unhandledMark]:[t.name,()=>{throw new Error(`Node ${t.name} cannot be rendered, it is missing a "renderToHTML" method`)}]}(t,e,o,s))),...null==s?void 0:s.markMapping}})({content:r})}({renderer:hI,domOutputSpecToElement:mI,mapDefinedTypes:{doc:({children:e})=>fI(e),text:({node:e})=>{var t;return null!=(t=e.text)?t:""}},content:e,extensions:t,options:n})}({content:e,extensions:t,options:{nodeMapping:{bulletList:({children:e})=>`\n${fI(e)}`,orderedList:({children:e})=>`\n${fI(e)}`,listItem({node:e,children:t,parent:n}){if("bulletList"===(null==n?void 0:n.type.name))return`- ${fI(t).trim()}\n`;if("orderedList"===(null==n?void 0:n.type.name)){let r=n.attrs.start||1;return n.forEach((t,n,i)=>{e===t&&(r=i+1)}),`${r}. ${fI(t).trim()}\n`}return fI(t)},paragraph:({children:e})=>`\n${fI(e)}\n`,heading({node:e,children:t}){const n=e.attrs.level;return`${new Array(n).fill("#").join("")} ${t}\n`},codeBlock:({node:e,children:t})=>`\n\`\`\`${e.attrs.language}\n${fI(t)}\n\`\`\`\n`,blockquote:({children:e})=>`\n${fI(e).trim().split("\n").map(e=>`> ${e}`).join("\n")}`,image:({node:e})=>`![${e.attrs.alt}](${e.attrs.src})`,hardBreak:()=>"\n",horizontalRule:()=>"\n---\n",table:({children:e,node:t})=>Array.isArray(e)?`\n${fI(e[0])}| ${new Array(t.childCount-2).fill("---").join(" | ")} |\n${fI(e.slice(1))}\n`:`\n${fI(e)}\n`,tableRow:({children:e})=>Array.isArray(e)?`| ${e.join(" | ")} |\n`:`${fI(e)}\n`,tableHeader:({children:e})=>fI(e).trim(),tableCell:({children:e})=>fI(e).trim(),...null==n?void 0:n.nodeMapping},markMapping:{bold:({children:e})=>`**${fI(e)}**`,italic({children:e,node:t}){let n=!1;return(null==t?void 0:t.marks.some(e=>"bold"===e.type.name))&&(n=!0),n?`*${fI(e)}*`:`_${fI(e)}_`},code:({children:e})=>`\`${fI(e)}\``,strike:({children:e})=>`~~${fI(e)}~~`,underline:({children:e})=>`<u>${fI(e)}</u>`,subscript:({children:e})=>`<sub>${fI(e)}</sub>`,superscript:({children:e})=>`<sup>${fI(e)}</sup>`,link:({node:e,children:t})=>`[${fI(t)}](${e.attrs.href})`,highlight:({children:e})=>`==${fI(e)}==`,...null==n?void 0:n.markMapping},...n}})},renderToHTMLString:function({content:e,extensions:t,options:n}){return function({renderer:e,domOutputSpecToElement:t,mapDefinedTypes:n,content:r,extensions:i,options:s}){const o=xf(i=Df(i)),{nodeExtensions:a,markExtensions:l}=Tf(i);return r instanceof yl||(r=yl.fromJSON(Mf(i),r)),e({...s,nodeMapping:{...Object.fromEntries(a.filter(e=>!(e.name in n||(null==s?void 0:s.nodeMapping)&&e.name in s.nodeMapping)).map(e=>function(e,t,n,r){const i={name:t.name,options:t.options,storage:t.storage,parent:t.parent},s=bf(t,"renderHTML",i);return s?[t.name,({node:r,children:i})=>{try{return e(s({node:r,HTMLAttributes:gI(r,n)}))(i)}catch(e){throw new Error(`[tiptap error]: Node ${t.name} cannot be rendered, it's "renderToHTML" method threw an error: ${e.message}`,{cause:e})}}]:(null==r?void 0:r.unhandledNode)?[t.name,r.unhandledNode]:[t.name,()=>{throw new Error(`[tiptap error]: Node ${t.name} cannot be rendered, it is missing a "renderToHTML" method, please implement it or override the corresponding "nodeMapping" method to have a custom rendering`)}]}(t,e,o,s))),...n,...null==s?void 0:s.nodeMapping},markMapping:{...Object.fromEntries(l.filter(e=>!(null==s?void 0:s.markMapping)||!(e.name in s.markMapping)).map(e=>function(e,t,n,r){const i={name:t.name,options:t.options,storage:t.storage,parent:t.parent},s=bf(t,"renderHTML",i);return s?[t.name,({mark:r,children:i})=>{try{return e(s({mark:r,HTMLAttributes:gI(r,n)}))(i)}catch(e){throw new Error(`[tiptap error]: Mark ${t.name} cannot be rendered, it's "renderToHTML" method threw an error: ${e.message}`,{cause:e})}}]:(null==r?void 0:r.unhandledMark)?[t.name,r.unhandledMark]:[t.name,()=>{throw new Error(`Node ${t.name} cannot be rendered, it is missing a "renderToHTML" method`)}]}(t,e,o,s))),...null==s?void 0:s.markMapping}})({content:r})}({renderer:yI,domOutputSpecToElement:_I,mapDefinedTypes:{doc:({children:e})=>bI(e),text:({node:e})=>{var t;return null!=(t=e.text)?t:""}},content:e,extensions:t,options:n})},tippy:yj,suggestion:OC};"undefined"!=typeof window&&(window.TiptapCollaboration=NP,window.HocuspocusProvider=ea,window.Y=e,window.IPFSHLSPlayer=bP);const RP=NP})(),r})());