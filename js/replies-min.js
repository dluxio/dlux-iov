import Marker from"/js/marker-min.js";import Ratings from"/js/ratings-min.js";import MDE from"/js/mde-min.js";import Vote from"/js/vote-min.js";import Pop from"/js/pop-min.js";export default{name:"replies",components:{"vue-markdown":Marker,"vue-ratings":Ratings,mde:MDE,vote:Vote,"pop-vue":Pop},template:'<div>\n<a role="button" v-if="warn" @click="warn = false">Hidden due to low reputation.</a>\n<div class="d-flex align-items-start">\n<a :href="\'/@\' + post.author" class="no-decoration">\n<img :src="\'https://images.hive.blog/u/\' + post.author + \'/avatar\'" class="rounded-circle border-2 border-light bg-light img-fluid me-1 cover author-img" :class="{\'w-32p\': post.depth > 1, \'w-40p\': post.depth = 1}"></a>\n<div class="d-flex flex-column w-100">\n<div class="d-flex align-items-center">\n<a :href="\'/@\' + post.author" class="no-decoration">\n<span class="d-flex align-items-center">\n<h5 class="m-0 text-white-50">{{ post.author }}</h5>\n<span class="ms-1 badge small text-white-50" :class="{\'rep-danger\': post.rep < 25, \'rep-warning\': post.rep >= 25 && post.rep < 50, \'rep-success\': post.rep >= 50}">{{ post.rep }}</span></span></a>\n<span class="ms-1 text-muted">â€¢</span>\n<vue-ratings v-if="post.rating" class="d-flex" :stars="post.rating"/>\n<span class="ms-1 small text-muted" style="font-weight: 400">{{ timeSince(post.created) }}</span>\n<a role="button" class="ms-auto no-decoration text-white-50" @click="view = !view"><i v-show="view" class="fa-solid fa-circle-minus fa-fw"></i><i v-show="!view" class="fa-solid fa-circle-plus fa-fw"></i></a>\n</div>\n<div class="my-1" v-if="view" v-show="!edit">\n<vue-markdown :md="post.body"/>\n</div>\n<div v-show="edit">\n<vue-markdown :toedit="post.body" @settext="pending($event)"/>\n</div>\n<div class="card-footer p-0" v-if="view">\n<vote :post="post" :account="account" :voteval="voteval" @vote="vote($event)" @reply="reply($event)"></vote>\n</div>\n<div v-if="!view">{{post.children + 1}} comment<span v-if="post.children > 0">s</span> collapsed. <a role="button" class="text-info no-decoration" @click="view = !view">Click to expand</a>\n</div>\n<div v-for="reps in post.replies">\n<replies v-if="view" :post="reps" :account="account" :voteval="voteval" @vote="vote($event)" @reply="reply($event)"/>\n</div>\n</div>                 \n</div>\n</div>',props:{post:{required:!0,default:function(){return{}}},account:{default:""},voteval:0},data:()=>({collapse:!1,edit:!1,view:!0,mde:"",postCustom_json:{},makeReply:!1,makeVote:!1,warn:!1}),emits:["vote","reply"],methods:{pending(t){this.mde=t},vote(t){this.$emit("vote",t)},timeSince(t){var e=Math.floor((new Date-new Date(t+".000Z"))/1e3),s=Math.floor(e/86400);return s>7?new Date(t).toLocaleDateString():s>=1?s+` day${s>1?"s":""} ago`:(s=Math.floor(e/3600))>=1?s+` hour${s>1?"s":""} ago`:(s=Math.floor(e/60))>=1?`${s} minute${s>1?"s":""} ago`:Math.floor(e)+" seconds ago"},setReply(t){this.mde=t},reply(t){var e=JSON.stringify(this.postCustom_json);e||(e=JSON.stringify({})),t||(t={parent_author:this.post.author,parent_permlink:this.post.permlink,author:this.account,permlink:"re-"+this.post.permlink,title:"",body:this.mde,json_metadata:e}),this.$emit("reply",t)},formatNumber(t,e,s,o){if("number"!=typeof t){const e=t?t.split(" "):[];var a=0;for(r=0;r<e.length;r++)parseFloat(e[r])>0&&(a+=parseFloat(e[r]));t=a>parseFloat(t)?a:parseFloat(t)}if(isNaN(t))return"Invalid Number";if(!isFinite(t))return(t<0?"-":"")+"infinite";s=s||".",o=o||"";var i=t<0;t=Math.abs(t);var n=(null!=e&&0<=e?t.toFixed(e):t.toString()).split("."),r=n[0],p=1<n.length?s+n[1]:"";if(o)for(var l=/(\d+)(\d{3})/;l.test(r);)r=r.replace(l,"$1"+o+"$2");return(i?"-":"")+r+p},gt:(t,e)=>parseFloat(t)>parseFloat(e),hideLowRep(){"..."!=this.post.rep?parseFloat(this.post.rep)<25&&(this.view=!1,this.warn=!0):setTimeout(this.hideLowRep,1e3)},setRating(t){this.post.rating=t}},mounted(){this.hideLowRep()}};