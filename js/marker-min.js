export default{data:()=>({text:""}),template:'<div>\n<div v-show="!md">\n<textarea ref="editor" v-model="text" class="form-control" rows="3"></textarea>\n<button @click="insertAtCursor(\'[Alt Text](https://goto.link)\')">Insert Link</button>\n<button @click="edit()">Comment</button>\n</div>\n<div class="behavemark" v-html="compiledMarkdown"></div>\n  </div>',props:["md","author","permlink","toedit"],emits:["settext"],mounted(){this.toedit&&(this.text=this.toedit)},methods:{edit(){this.$emit("settext",this.text)},insertAtCursor(t){if(document.selection)this.$refs.editor.focus(),sel=document.selection.createRange(),sel.text=t;else if(this.$refs.editor.selectionStart||"0"==this.$refs.editor.selectionStart){var e=this.$refs.editor.selectionStart,i=this.$refs.editor.selectionEnd;this.$refs.editor.value=this.$refs.editor.value.substring(0,e)+t+this.$refs.editor.value.substring(i,this.$refs.editor.value.length)}else this.$refs.editor.value+=t}},computed:{compiledMarkdown:function(){return DOMPurify.sanitize(marked.parse(this.md?this.md.replace(`[View in VR @ dlux.io](https://dlux.io/dlux/@${this.author}/${this.permlink})`,""):this.text))}}};