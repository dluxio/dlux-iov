import Marker from"/js/marker-min.js";import Ratings from"/js/ratings-min.js";import MDE from"/js/mde-min.js";import Pop from"/js/pop-min.js";import Bennies from"/js/bennies-min.js";export default{components:{"vue-markdown":Marker,"vue-ratings":Ratings,mde:MDE,"pop-vue":Pop,bennies:Bennies},template:'<div>\n<div v-show="makeVote">\n<form id="voteForm">\n<div class="d-flex mt-1 align-items-center text-white-50">\n<button type="button" class="btn btn-sm me-1" :class="{\'btn-success\': !flag, \' btn-danger\': flag}"\n@click="vote(post.url)" style="min-width: 85px;"><span v-if="!flag"><i class="fas fa-heart fa-fw me-1"></i></span><span v-if="flag"><i class="fa-solid fa-flag me-1"></i></span>{{flag?\'-\':\'\'}}{{formatNumber(slider / 100, 0,\'.\',\',\')}}%</button>\n<button type="button" class="btn btn-sm btn-secondary px-1 me-1" @click="makeVote = !makeVote">\n<i class="fa-solid fa-xmark fa-fw"></i></button>\n<input type="range" class="form-range mx-2" step="1" max="10000" v-model="slider">\n<span style="min-width: 100px" class="text-end text-nowrap" id="commentVal" :class="{\'text-success\': !flag, \'text-danger\': flag}">{{toFixed(voteval*slider/10000,3)}}\n<i class="fab fa-fw fa-hive"></i>\n</span>\n</div>\n</form>\n</div>\n<div class="mb-3">\n<div v-show="makeReply">\n<mde @data="mde = $event" />\n<div class="collapse" :id="\'benes-\' + post.author + \'-\' + post.permlink">\n<bennies :list="bens" @update-bennies="bens=$event"></bennies>\n</div>\n<div class="d-flex">\n<button class="btn btn-sm px-2 btn-secondary" data-bs-toggle="collapse" :data-bs-target="\'#benes-\' + post.author + \'-\' + post.permlink">\n<i class="fa-solid fa-user-group fa-fw me-1"></i>Beneficiaries {{bens.length ? \'(\' + bens.length + \')\' : \'\'}}<span v-if="!bens.length">+</span>\n</button>\n<button class="btn btn-sm px-2 btn-secondary ms-auto" @click="makeReply = !makeReply"><i class="fa-solid fa-xmark fa-fw me-1"></i>Cancel</button>\n<button class="btn btn-sm px-2 btn-primary ms-1" @click="reply()"><i class="fa-solid fa-comment fa-fw me-1"></i>Reply</button>\n</div>\n</div>\n<div v-if="!makeReply && !makeVote" class="d-flex mt-1">\n<div class="d-flex align-items-center">\n<a @click="makeVote = !makeVote; flag = false" role="button" class="no-decoration" :class="{\'text-primary\': post.hasVoted, \'text-white-50\': !post.hasVoted, \'text-danger\': slider < 0 }">\n<i class="fas fa-heart fa-fw me-1"></i><span class="text-white-50">{{post.active_votes.length}}</span>\n</a>\n<a @click="makeVote = !makeVote; flag = true" role="button" class="ms-2 no-decoration text-white-50" :class="{\'text-primary\': flag > 0}" >\n<i class="fa-solid fa-flag me-1"></i><span class="text-white-50">{{post.downVotes ? post.downVotes : \'\'}}</span>\n</a>\n<button class="btn px-2 btn-sm btn-light ms-2" @click="makeReply = !makeReply">Reply</button>\n<pop-vue class="ms-1" :id="\'pop-\' + post.author + \'-\' + post.permlink" title="Post Earnings" :content="(gt(post.total_payout_value, post.pending_payout_value) ? formatNumber(post.total_payout_value + \' \' + post.curator_payout_value, 3, \'.\',\',\') + \' HBD\' : post.pending_payout_value ? post.pending_payout_value : \'\')" trigger="hover">\n<button class="btn px-2 btn-sm btn-secondary">\n{{gt(post.total_payout_value, post.pending_payout_value)?formatNumber(post.total_payout_value + \' \' +\npost.curator_payout_value, 3, \'.\',\',\'):formatNumber(post.pending_payout_value, 3, \'.\',\',\')}}<i class="ms-1 fab fa-fw fa-hive"></i>\n</button>\n</pop-vue>\n</div>\n</div>\n</div>\n</div>',props:{post:{required:!0,default:function(){return{}}},account:{default:""},voteval:0},data:()=>({slider:1e4,flag:!1,show:!1,warn:!1,makeReply:!1,makeVote:!1,mde:"",bens:[]}),emits:["vote","reply"],methods:{pending(t){this.mde=t},setReply(t){this.mde=t},toFixed:(t,e)=>parseFloat(t).toFixed(e),reply(t){t||(t={parent_author:this.post.author,parent_permlink:this.post.permlink,author:this.account,permlink:"re-"+this.post.permlink,title:"",body:this.mde,json_metadata:JSON.stringify(this.postCustom_json)}),this.bens.length&&(t.bens=this.bens),this.$emit("reply",t)},vote(t){this.$emit("vote",{url:`/@${this.post.author}/${this.post.permlink}`,slider:this.slider,flag:this.flag})},formatNumber(t,e,s,a){if("number"!=typeof t){const e=t?t.split(" "):[];var n=0;for(l=0;l<e.length;l++)parseFloat(e[l])>0&&(n+=parseFloat(e[l]));t=n>parseFloat(t)?n:parseFloat(t)}if(isNaN(t))return"Invalid Number";if(!isFinite(t))return(t<0?"-":"")+"infinite";s=s||".",a=a||"";var o=t<0;t=Math.abs(t);var i=(null!=e&&0<=e?t.toFixed(e):t.toString()).split("."),l=i[0],p=1<i.length?s+i[1]:"";if(a)for(var r=/(\d+)(\d{3})/;r.test(l);)l=l.replace(r,"$1"+a+"$2");return(o?"-":"")+l+p},gt:(t,e)=>parseFloat(t)>parseFloat(e)},mounted(){}};