import{createApp,toRaw}from"https://unpkg.com/vue@3/dist/vue.esm-browser.js";import Navue from"/js/navue.js";import FootVue from"/js/footvue.js";import Cycler from"/js/cycler.js";import Popper from"/js/pop-min.js";import ModalVue from"/js/modalvue.js";import Marker from"/js/marker-min.js";import Ratings from"/js/ratings-min.js";import MDE from"/js/mde-min.js";import Replies from"/js/replies-min.js";import CardVue from"/js/cardvue.js";import Tagify from"/js/tagifyvue.js";import ContractVue from"/js/contractvue.js";import FilesVue from"/js/filesvue.js";import ExtensionVue from"/js/extensionvue.js";import UploadVue from"/js/uploadvue.js";import PostVue from"/js/postvue.js";import DetailVue from"/js/detailvue-min.js";import NFTCard from"/js/nftcard.js";import FTTransfer from"/js/fttransfer.js";import NFTDetail from"/js/nftdetail.js";import SPKVue from"/js/spk-wallet-comp.js";import Assets from"/js/assets-min.js";let url=location.href.replace(/\/$/,""),lapi="",sapi="https://spkinstant.hivehoneycomb.com";if(location.search){const t=location.search.replace("?","");let e=t.split("&");for(let t=0;t<e.length;t++){let s=e[t].split("=");"sapi"==s[0]&&(sapi=s[1])}}if(location.search){const t=location.search.replace("?","");let e=t.split("&");for(let t=0;t<e.length;t++){let s=e[t].split("=");"lapi"==s[0]&&(lapi=s[1])}}lapi||(lapi="https://token.dlux.io");let user=localStorage.getItem("user")||"GUEST",hapi=localStorage.getItem("hapi")||"https://api.hive.blog";createApp({directives:{scroll:scroll},data:()=>({fileRequests:{},showLine:!0,debounceScroll:0,relations:{follows:!1,ignores:!1,blacklists:!1,follows_blacklists:!1,follows_muted:!1},sets:{},chains:{dlux:{enabled:!1,api:"https://token.dlux.io",sets:{},multisig:"dlux-cc"},duat:{enabled:!1,api:"https://duat.hivehoneycomb.com",sets:{},multisig:"ragnarok-cc"}},disablePost:!0,inventory:!0,File:[],FileInfo:{},postTitle:"",postBody:"",postTags:"",postPermlink:"",postCustom_json:{app:"dlux/0.1.0",xr:!0,Hash360:"",format:"markdown",assets:[],tags:["dlux"],vrHash:"Qma4dk3mWP325HrHYBDz3UdL9h1A6q8CSvZdc8JhqfgiMp"},nftTradeTabTo:"",nftTradeTabToken:"",nftTradeTabPrice:0,nftSellTabToken:"",nftSellTabPrice:0,nftAuctionTabToken:"",nftAuctionTabPrice:0,nftAuctionTabTime:0,transferMint:!1,transferModal:{},transferTabTo:"",toSign:{},account:user,focusItem:{token:"dlux"},FTtrades:[],NFTtrades:[],FTmenu:{to:"",amount:0},NFTmenu:{to:"",amount:0},providers:[{api:"https://token.dlux.io",token:"dlux"},{api:"https://inconceivable.hivehoneycomb.com",token:"duat"}],scripts:{},nftscripts:{},types:"ts",baseScript:{},NFTs:[],rNFTs:[],allNFTs:[],saleNFTs:[],auctionNFTs:[],itemModal:{hidden:!0,item:{setname:"",set:{},uid:"",owner:""},items:[],index:0,auction:{bidder:"",bids:0,buy:"",by:"",days:30,initial_price:{amount:"",token:"",precision:2},name_long:"",price:{amount:"",token:"",precision:2},script:"",set:"",setname:"",time:""},sale:{by:"",name_long:"",price:{amount:"",token:"",precision:2},script:"",set:"",setname:"",uid:""}},selectedNFTs:[],contractIDs:{},NFTselect:{start:0,amount:30,searchTerm:"",searchDefault:"Search UIDs and Owners",searchDeep:!1,searchDeepKey:"",searchDeepK:!1,saleOnly:!1,auctionOnly:!1,dir:"asc",sort:"uid",showDeleted:!1,searching:!1},focusSetCalc:{owners:0,deleted:0,af:{HIVE:0,HBD:0,TOKEN:0},sf:{HIVE:0,HBD:0,TOKEN:0},forSale:0,forAuction:0,forSaleMint:0,forAuctionMint:0,attributeKeys:[],attributes:{},attributesC:{},amf:{HIVE:0,HBD:0,TOKEN:0},smf:{HIVE:0,HBD:0,TOKEN:0}},iOwn:[],iOwnCheckbox:!1,highBidder:[],highBidderCheckbox:!1,auctions:[],sales:[],price:{},mintAuctions:[],mintSales:[],mintData:[],activeIndex:0,giveFTusername:"",giveFTqty:1,services:{},NFTselect:{start:0,amount:30,searchTerm:"",searchDefault:"Search UIDs and Owners",searchDeep:!1,searchDeepKey:"",searchDeepK:!1,saleOnly:!1,auctionOnly:!1,dir:"asc",sort:"uid",showDeleted:!1,searching:!1},ipfsProviders:{},accountRNFTs:[],accountNFTs:[],displayNFTs:[],mint_detail:{set:"",setname:"",token:""},focusSet:{computed:{},link:"",fee:{amount:"",token:"",precision:2},bond:{amount:"",token:"",precision:2},setname:"dlux",set:{},permlink:"",author:"",script:"",encoding:"",royalty:1,type:1,name:"",minted:0,max:0},pageAccount:"",pagePermlink:"",pfp:{setname:"",uid:""},hasDrop:!1,focus:{account:"",posting_json_metadata:{profile:{about:""}}},focusdata:{balance:0,gov:0,claim:0,poweredUp:0},spkStats:{spk_rate_ldel:"0.00015",spk_rate_lgov:"0.001",spk_rate_lpow:"0.0001"},saccountapi:{balance:0,spk:0,gov:0,tick:.01,claim:0,granted:{t:0},granting:{t:0},poweredUp:0,powerDowns:[],power_downs:{},drop:{last_claim:0,availible:{amount:0}}},dluxval:0,spkval:0,focusval:0,me:!1,sendModal:{amount:0,to:"",TOKEN:"DLUX"},dropnai:"",balance:"0.000",bartoken:"",barhive:"",barhbd:"",bargov:"",barpow:"",buyFormValid:!1,sellFormValid:!1,govFormValid:!1,powFormValid:!1,sendFormValid:!1,hiveFormValid:!1,hbdFormValid:!1,lapi:lapi,larynxbehind:-1,hapi:hapi,accountapi:{balance:0,gov:0,tick:.01,claim:0,poweredUp:0,drop:{last_claim:0,availible:{amount:0}}},hiveprice:{hive:{usd:1}},hbdprice:{hive_dollar:{usd:1}},nodes:{},runners:[],runnersSearch:[],marketnodes:{},smarkets:{node:{na:{self:""}}},sstats:{spk_rate_lgov:"0.001",spk_rate_lpow:"0.0001",spk_rate_ldel:"0.00015"},dexapi:{markets:{hive:{tick:.001},hbd:{tick:.001}}},prefix:"",multisig:"",jsontoken:"",node:"",spk2gov:!1,dlux2gov:!1,showTokens:{},behind:"",stats:{},hivestats:{total_vesting_fund_hive:0,total_vesting_shares:0},denoms:{HIVE:{checked:!1,balance:0},HBD:{checked:!1,balance:0}},behindTitle:"",builder:!1,petitionStatus:"Choose One",TOKEN:"DLUX",sendTo:"",sendAmount:0,sendMemo:"",sendAllowed:!1,sendHiveTo:"",sendHiveAllowed:!1,sendHiveAmount:0,sendHiveMemo:"",sendHBDTo:"",sendHBDAllowed:!1,sendHBDAmount:0,sendHBDMemo:"",rewardFund:{},feedPrice:{},recenthive:{},recenthbd:{},openorders:[],toasts:[],tokenGov:{title:"SPK VOTE",options:[{id:"spk_cycle_length",range_low:28800,range_high:2592e3,info:"Time in blocks to complete a power down cycle. 4 cycles to completely divest. 28800 blocks per day.",val:2e5,step:1,unit:"Blocks",title:"Down Power Period"},{id:"dex_fee",range_low:0,range_high:.01,info:"Share of DEX completed DEX trades to allocate over the collateral group.",val:.00505,step:1e-6,unit:"",title:"DEX Fee"},{id:"dex_max",range_low:28800,range_high:2592e3,info:"Largest open trade size in relation to held collateral.",val:97.38,step:1,unit:"%",title:"Max Trade Size"},{id:"dex_slope",range_low:0,range_high:100,info:"0 Allows any size buy orders to be placed. 1 will disallow large buy orders at low prices.",val:48.02,step:.01,unit:"%",title:"Max Lowball Trade Size"},{id:"spk_rate_ldel",range_low:1e-5,range_high:1e-4,info:"SPK generation rate for delegated LARYNX Power",val:15e-5,step:1,unit:"",title:"SPK Gen Rate: Delegated"},{id:"spk_rate_lgov",range_low:15e-5,range_high:.01,info:"SPK generation rate for Larynx Locked",val:.001,step:1e-6,unit:"",title:"SPK Gen Rate: Locked"},{id:"spk_rate_lpow",range_low:1e-6,range_high:15e-5,info:"SPK generation rate for undelegated Larynx Power",val:1e-4,step:1e-6,unit:"",title:"Min SPK Gen Rate: Min"},{id:"max_coll_members",range_low:25,range_high:79,info:"The Max number of accounts that can share DEX fees. The richer half of this group controls outflows from the multisig wallet.",val:25,step:1,unit:"Accounts",title:"Size of collateral group"}]},features:{claim_id:"claim",claim_S:"Airdrop",claim_B:!0,claim_json:"drop",rewards_id:"shares_claim",rewards_S:"Rewards",rewards_B:!0,rewards_json:"claim",rewardSel:!1,reward2Gov:!1,send_id:"send",send_S:"Send",send_B:!0,send_json:"send",powup_id:"power_up",powup_B:!1,pow_val:"",powdn_id:"power_down",powdn_B:!1,powsel_up:!0,govup_id:"gov_up",govup_B:!0,gov_val:"",govsel_up:!0,govdn_id:"gov_down",govdn_B:!0,node:{id:"node_add",opts:[{S:"Domain",type:"text",info:"https://no-trailing-slash.com",json:"domain",val:""},{S:"DEX Fee Vote",type:"number",info:"500 = .5%",max:1e3,min:0,json:"bidRate",val:""},{S:"DEX Max Vote",type:"number",info:"10000 = 100%",max:1e4,min:0,json:"dm",val:""},{S:"DEX Slope Vote",type:"number",info:"10000 = 100%",max:1e4,min:0,json:"ds",val:""},{S:"DAO Claim Vote",type:"number",info:"1500 = 15%",max:1e4,min:0,json:"dv",val:""}]}},accountinfo:{},serviceWorker:!1,filterusers:{checked:!0,value:""},filteraccount:{checked:!1,value:"",usera:!1,userd:!1,gova:!1,govd:!0,apia:!1,apid:!1},lockgov:{checked:!0},unlockgov:{checked:!1},buyhive:{checked:!0},buyhbd:{checked:!1},buylimit:{checked:!0},buymarket:{checked:!1},selllimit:{checked:!0},sellmarket:{checked:!1},pwrup:{checked:!0},pwrdown:{checked:!1},govlock:{checked:!0},govunlock:{checked:!1},posturls:{},new:[],theirs:[],trending:[],promoted:[],search:[],postSelect:{sort:"time",searchTerm:"",bitMask:0,entry:"theirs",search:{a:10,o:0,e:!1,p:!1},new:{a:10,o:0,e:!1,p:!1},trending:{a:10,o:0,e:!1,p:!1},promoted:{a:10,o:0,e:!1,p:!1},theirs:{a:10,o:0,e:!1,p:!1},sortDir:"desc",types:{VR:{checked:!0,icon:"fa-solid fa-vr-cardboard me-2",launch:"3D / VR Experience",location:"/dlux/@",hint:"",bitFlag:1},AR:{checked:!0,icon:"fa-solid fa-glasses me-2",launch:"AR Experience",location:"/dlux/@",hint:"",bitFlag:2},XR:{checked:!0,icon:"fa-brands fa-unity me-2",launch:"Extended Reality Experience",location:"/dlux/@",hint:"",bitFlag:4},APP:{checked:!0,icon:"fa-solid fa-mobile-screen-button me-2",launch:"Unstoppable App",location:"/dlux/@",hint:"",bitFlag:8},360:{checked:!0,icon:"fa-solid fa-globe me-2",launch:"360 Photo Gallery",location:"/dlux/@",hint:"",bitFlag:16},"3D":{checked:!0,icon:"fa-solid fa-shapes me-2",launch:"3D / VR Experience",location:"/dlux/@",hint:"",bitFlag:32},Audio:{checked:!0,icon:"fa-solid fa-music me-2",launch:"Unstoppable Audio",location:"/dlux/@",hint:"",bitFlag:64},Video:{checked:!0,icon:"fa-solid fa-film me-2",launch:"Unstoppable Video",location:"/dlux/@",hint:"",bitFlag:128},Blog:{checked:!1,icon:"fa-solid fa-book me-2",launch:"Visit Full Blog",location:"/blog/@",hint:"",bitFlag:256}}},displayPosts:[],displayPost:{index:0,item:{author:"",permlink:"",ago:"",pic:"",preview:"",appurl:"",id:"",slider:1e4,flag:!1,title:"",type:"360",url:"",children:[],total_payout_value:0,active_votes:[],upVotes:0,downVotes:0,body:"",json_metadata:{},created:""},items:[]},authors:{},spkapi:{balance:0,broca:"0,0",spk:0,channels:[],file_contracts:[],spk_power:0,gov:0,tick:.01,claim:0,granted:{t:0},granting:{t:0},poweredUp:0,powerDowns:[],power_downs:{},drop:{last_claim:0,availible:{amount:0}}},extendcost:{},contracts:[],numitems:0,postBens:[],serviceWorkerPromises:{}}),components:{"spk-vue":SPKVue,"assets-vue":Assets,"nav-vue":Navue,"foot-vue":FootVue,"cycle-text":Cycler,"pop-vue":Popper,"modal-vue":ModalVue,"vue-markdown":Marker,"vue-ratings":Ratings,mde:MDE,replies:Replies,"card-vue":CardVue,"contract-vue":ContractVue,"files-vue":FilesVue,"extension-vue":ExtensionVue,"upload-vue":UploadVue,"post-vue":PostVue,"detail-vue":DetailVue,nftcard:NFTCard,fttransfer:FTTransfer,nftdetail:NFTDetail,tagify:Tagify},methods:{getSetPhotos:(t,e)=>t.setname?`https://ipfs.dlux.io/ipfs/${t.set[e]}`:"",callSWfunction(t,e,s){return new Promise(((s,i)=>{activeWorker?(e.uid||(e.uid=""),this.serviceWorkerPromises[`${e.script}:${e.uid}`]={resolve:s,reject:i},activeWorker.postMessage({id:t,o:e})):i(`${t} no controller`)}))},getSPKUser(){this.account&&fetch("https://spktest.dlux.io/@"+this.account).then((t=>t.json())).then((t=>{for(var e in this.spkapi=t,t.file_contracts)this.contractIDs[t.file_contracts[e].i]=t.file_contracts[e],this.contracts.push(t.file_contracts[e]),this.contractIDs[t.file_contracts[e].i].index=this.contracts.length-1;for(var s in t.channels)for(var e in t.channels[s])this.services[s]?(this.services[s].channel=1,this.services[s].memo="Contract Open"):setTimeout((()=>{this.services[s].channel=1,this.services[s].memo="Contract Open"}),3e3),this.contractIDs[t.channels[s][e].i]||(this.contractIDs[t.channels[s][e].i]=t.channels[s][e],this.contracts.push(t.channels[s][e]),this.contractIDs[t.channels[s][e].i].index=this.contracts.length-1)}))},uploadFile(t){for(var e=0;e<t.target.files.length;e++){var s=new FileReader;s.File=t.target.files[e],s.onload=e=>{const s=e.target.result;for(var i=0;i<this.File.length;i++)if(this.File[i].name==e.currentTarget.File.name&&this.File[i].size==e.currentTarget.File.size){Hash.of(s).then((s=>{const o={hash:s,index:i,size:e.currentTarget.File.size,name:e.currentTarget.File.name,path:t.target.id,progress:".........."};this.FileInfo[o.name]=o;const a=this.File[i];this.File.splice(i,1,a)}));break}},s.readAsBinaryString(t.target.files[e]);var i=t.target.files[e];i.progress="..........",this.File.push(i)}},dragFile(t){for(var e=0;e<t.dataTransfer.files.length;e++){var s=new FileReader;s.File=t.dataTransfer.files[e],s.onload=t=>{const e=t.target.result;for(var s=0;s<this.File.length;s++)if(this.File[s].name==t.currentTarget.File.name&&this.File[s].size==t.currentTarget.File.size){Hash.of(e).then((e=>{const i={hash:e,index:s,size:t.currentTarget.File.size,name:t.currentTarget.File.name};this.FileInfo[i.name]=i}));break}},s.readAsBinaryString(t.dataTransfer.files[e]);var i=t.dataTransfer.files[e];this.File.push(i)}},togglePin(t){this.File[t].pin=!this.File[t].pin},updateMemo(t,e){e<21?setTimeout((()=>{this.services[t].memo="Sending"+(e%3==0?".":e%3==1?"..":"..."),this.updateMemo(t,e+1)}),333):(this.services[t].memo="Validating",this.getSPKUser())},updatePubkey(){var t={pubKey:this.accountinfo.posting.key_auths[0][0]};this.toSign={type:"cja",cj:t,id:"spkcc_register_authority",msg:`Registering: ${this.account}:${this.accountinfo.posting.key_auths[0][0]}`,ops:["getSapi"],api:sapi,txid:"spkcc_register_authority"},setTimeout((()=>{this.getSPKUser()}),7e3)},petitionForContract(t="dlux-io"){this.services[t].memo="Preparing",this.services[t].channel=1;const e=this.services[t].address.replace("$ACCOUNT",this.account);fetch(e).then((t=>t.json())).then((e=>{this.services[t].memo="Sending",this.updateMemo(t,0)}))},deleteImg(t){this.File.splice(t,1)},validPost(){var t=!0;this.postPermlink||(t=!1),this.postTitle||(t=!1),this.postBody||(t=!1),this.postCustom_json.assets.length||(t=!1),this.disablePost=!t},permlink(t){t?(t.replace(/[\W_]+/g,"-").replace(" ","-").toLowerCase(),t=(t=(t=t.replace(" ","-")).replace(/[\W_]+/g,"")).toLowerCase(),this.postPermlink=t):(t=(t=(t=(t=this.postTitle).replace(" ","-")).replace(/[\W_]+/g,"-")).toLowerCase(),this.postPermlink=t)},follow(t,e="blog"){this.toSign={type:"raw",key:"posting",op:[["follow",{follower:this.account,following:t,what:[e]}]],callbacks:[res],txid:"Sign Auth Headers"}},unfollow(t){this.toSign={type:"raw",key:"posting",op:[["follow",{follower:this.account,following:t,what:[]}]],callbacks:[],txid:"unfollow:"+t}},post(){var t=this.postTags.toLowerCase().split(",");for(this.postCustom_json.tags=["dlux"],i=0;i<t.length;i++)"dlux"!=t[i]&&this.postCustom_json.tags.push(t[i].replace(/[\W_]+/g,"-"));if(this.account){const t=[["comment",{parent_author:"",parent_permlink:"dlux",author:this.account,permlink:this.postPermlink,title:this.postTitle,body:simplemde.value()+`\n***\n#### [View in VR @ dlux.io](https://dlux.io/dlux/@${this.account}/${this.postPermlink})\n`,json_metadata:JSON.stringify(this.postCustom_json)}],["comment_options",{author:this.account,permlink:this.postPermlink,max_accepted_payout:"1000000.000 HBD",percent_hbd:1e4,allow_votes:!0,allow_curation_rewards:!0,extensions:[[0,{beneficiaries:[{account:"dlux-io",weight:1e3}]}]]}]];hive_keychain.requestBroadcast(localStorage.getItem("user"),t,"active",(function(t){}))}},appFile(t){this.frameData=t,this.postCustom_json.vrHash="",this.frameURL="",this.dluxMock()},addApp(t,e){var s=-1;if(!t)return!1;for(var i=0;i<this.postCustom_json.assets.length;i++)this.postCustom_json.assets[i].hash==t&&(s=i);-1==s&&this.postCustom_json.assets.push({hash:t,type:"dApp",contract:e}),this.postCustom_json.vrHash=t,this.frameURL=t,this.frameData="",this.dluxMock()},addAsset(t,e,s="",i="",o="ts"){var a=-1;if(!t)return!1;"object"==typeof t&&(e=t.contract,t=t.id);for(var n=0;n<this.postCustom_json.assets.length;n++)this.postCustom_json.assets[n].f=0,this.postCustom_json.assets[n].hash==t&&(a=n);a>=0?(this.postCustom_json.assets[a].name=s||this.postCustom_json.assets[a].name,this.postCustom_json.assets[a].thumbHash=i||t):this.postCustom_json.assets.push({hash:t,name:s,type:o,contract:e,thumbHash:i}),this.dluxMock()},splitValues:(t,e,s=" ")=>t.split(s)[e],focusAsset(t,e,s="",i,o="ts"){var a=-1;if(!t)return!1;for(var n=0;n<this.postCustom_json.assets.length;n++)this.postCustom_json.assets[n].f=0,this.postCustom_json.assets[n].hash==t&&(a=n);a>=0?(this.postCustom_json.assets[a].name=s||this.postCustom_json.assets[a].name,this.postCustom_json.assets[a].thumbHash=i||t,this.postCustom_json.assets[a].r=`${this.postCustom_json.assets[a].rx||0} ${this.postCustom_json.assets[a].ry||0} ${this.postCustom_json.assets[a].rz||0}`,this.postCustom_json.assets[a].f=1):this.postCustom_json.assets.push({hash:t,name:s,type:o,contract:e,thumbHash:i,r:`${this.postCustom_json.assets[a].rx||0} ${this.postCustom_json.assets[a].ry||0} ${this.postCustom_json.assets[a].rz||0}`,f:1}),this.dluxMock()},changeAppType(t="Blog"){this.appType=t,"Blog"==t&&delete this.postCustom_json.vrHash,this.postCustom_json.subApp=t,this.dluxMock()},delAsset(t){var e=-1;if(!t)return!1;for(var s=0;s<this.postCustom_json.assets.length;s++)this.postCustom_json.assets[s].hash==t&&(e=s);e>=0&&this.postCustom_json.assets.splice(e,1),this.dluxMock()},moveAsset(t,e="up"){var s=-1;if(!t)return!1;for(var i=0;i<this.postCustom_json.assets.length;i++)this.postCustom_json.assets[i].hash==t&&(s=i);if(s>=1&&"up"==e||s<this.postCustom_json.assets.length-1&&"down"==e){const t=this.postCustom_json.assets[s];this.postCustom_json.assets.splice(s,1),this.postCustom_json.assets.splice("up"==e?s-1:s+1,0,t)}this.dluxMock()},resetCamera(){this.$refs.aframePreview.contentWindow.postMessage({func:"resetCamera",message:null},"*")},dluxMock(){var t={author:this.account,permlink:this.postPermlink,title:this.postTitle,body:this.postBody,json_metadata:JSON.stringify(this.postCustom_json),parent_author:"",parent_permlink:"dlux"},e=this.$refs.aframePreview.contentWindow,s="Guest";this.account&&(s=this.account),e.postMessage({func:"iAm",message:s},"*"),e.postMessage({func:"key",message:"markegiles/dlux-vr-tutorial-sm-test"},"*"),e.postMessage({func:"hiveState",message:t},"*")},getSetDetailsColors(t){let e="chartreuse,lawngreen";const s=this.baseScript[t];if(s&&s.set)try{e=`${s.set.Color1},${s.set.Color2?s.set.Color2:s.set.Color1}`}catch(t){e="chartreuse,lawngreen"}return`linear-gradient(${e})`},breakIt(t,e){e&&(this.SL=[],this.SLN=[]);var s=t.indexOf("<svg"),i=t.indexOf("</svg>"),o=t.indexOf("<g"),a=document.createElement("svg");a.innerHTML=t.substring(o,i);for(var n=a.childNodes,r=0;r<n.length;r++){var h=this.SL.length;this.SL.push([]),this.SLN.push([n[r].id||`layer${r+h}`,[]]);for(var c=n[r].childNodes,l=0;l<c.length;l++)this.SL[r+h].push(c[l].innerHTML),this.SLN[r+h][1].push(c[l].id||`item${l}`)}this.svgTag=t.substring(s,o),this.svgTag.search("style")>-1&&-1==this.svgTag.search("scoped")&&this.svgTag.replace("<style","<style scoped"),this.svgTagClose=t.substring(i)},compileScript(){return this.baseScript.replace("$L",this.scriptify(this.SL)).replace("$Y",this.scriptify(this.SLN)).replace("$go",this.SA.logo).replace("$b",this.SA.banner).replace("$f",this.SA.featured).replace("$w",this.SA.wrapped).replace("$c1",this.SA.color1).replace("$c2",this.SA.color2).replace("$i",this.SA.faicon).replace("$D",this.SA.description).replace("$l",this.scriptify(this.SA.links)).replace("$c",this.scriptify(this.SA.categories))},scriptify(t){var e="";if(t.length){e="[";for(var s=0;s<t.length;s++)"string"==typeof t[s]?e+=`"${t[s]}"`:"number"==typeof t[s]?e+=`${t[s]}`:e+=this.scriptify(t[s]),s!=t.length-1&&(e+=",");e+="]"}else if(Object.keys(t).length){var i=Object.keys(t);e="{";for(s=0;s<i.length;s++)e+=`"${i[s]}":`,"string"==typeof t[i[s]]?e+=`"${t[i[s]]}"`:"number"==typeof t[i[s]]?e+=`${t[i[s]]}`:e+=this.scriptify(t[i[s]]),s!=i.length-1&&(e+=",");e+="}"}return e},validateHeaders(t){return new Promise(((e,s)=>{t&&(this.toSign={type:"sign_headers",challenge:t,key:"posting",ops:[],callbacks:[e],txid:"Sign Auth Headers"})}))},broca_calc(t="0,0"){const e=this.Base64toNumber(t.split(",")[1]),s=parseInt(144e3*(this.sstats.head_block-e)/(1e3*this.spkapi.spk_power));var i=parseInt(t.split(",")[0])+s;return i>1e3*this.spkapi.spk_power&&(i=1e3*this.spkapi.spk_power),i},getIPFSproviders(){fetch("https://spktest.dlux.io/services/IPFS").then((t=>t.json())).then((t=>{this.ipfsProviders=t.providers}))},getMARKETS(){fetch("https://spktest.dlux.io/services/MARKET").then((t=>t.json())).then((t=>{for(var e in t.providers){const s=t.services.filter((t=>t[e].b==e));this.services[e]={address:s[0][e].a,memo:JSON.parse(s[0][e].m),channel:0,provider:e}}}))},upload(t="QmYJ2QP58rXFLGDUnBzfPSybDy3BnKNsDXh6swQyH7qim3",e={api:"https://127.0.0.1:5050",id:"1668913215284",sigs:{QmYJ2QP58rXFLGDUnBzfPSybDy3BnKNsDXh6swQyH7qim3:"20548a0032e0cf51ba75721743d2ec6fac180f7bc773ce3d77b769d9c4c9fa9dbb7d59503f05be8edcaac00d5d66709b0bce977f3207785913f7fbad2773ae4ac2"}}){const s={UPLOAD:`${e.api}/upload`,UPLOAD_STATUS:`${e.api}/upload-check`,UPLOAD_REQUEST:`${e.api}/upload-authorize`},i={url:s.UPLOAD,startingByte:0,cid:t,onAbort(){},onProgress(){},onError(){},onComplete(){}},o=(e,s)=>{const i=new FormData,o=new XMLHttpRequest,a=e.slice(s.startingByte);i.append("chunk",a,e.name),i.append("cid",s.cid),o.open("POST",s.url,!0),o.setRequestHeader("Content-Range",`bytes=${s.startingByte}-${s.startingByte+a.size}/${e.size}`),o.setRequestHeader("X-Cid",s.cid),o.onload=t=>{200===o.status?s.onComplete(t,e):s.onError(t,e)},o.upload.onprogress=t=>{const i=s.startingByte+t.loaded;s.onProgress({...t,loaded:i,total:e.size,percentage:100*i/e.size},e)},o.ontimeout=t=>s.onError(t,e),o.onabort=t=>s.onAbort(t,e),o.onerror=t=>s.onError(t,e),this.fileRequests[t].request=o,o.send(i)},a=(i,a)=>fetch(s.UPLOAD_REQUEST,{method:"GET",headers:{"Content-Type":"application/json",sig:e.sigs[t],account:this.account,contract:e.id,cid:t}}).then((t=>t.json())).then((e=>{a={...a,...e},this.fileRequests[t]={request:null,options:a},o(i,a)})).catch((t=>{a.onError({...t,file:i})})),n=t=>{},r=t=>{},h=t=>{},c=i=>{const a=this.fileRequests[t];if(a)return fetch(`${s.UPLOAD_STATUS}`,{method:"GET",headers:{"Content-Type":"application/json",sig:e.sigs[t],account:this.account,contract:e.id,cid:t}}).then((t=>t.json())).then((t=>{o(i,{...a.options,startingByte:Number(t.totalChunkUploaded)})})).catch((t=>{a.options.onError({...t,file:i})}))};return(t,e=i)=>([...t].forEach((t=>{a(t,{...i,...e})})),{abortFileUpload:n,retryFileUpload:r,clearFileUpload:h,resumeFileUpload:c})},uploadAndTrack(t,e){this.validateHeaders(this.FileInfo[t].hash).then((t=>{let e=null;const s=t=>{},i=(t,e)=>{},o=(t,e)=>{},a=(t,e)=>{},n=(t,e)=>{};return t=>{[...t].forEach(s),e=uploadFiles(t,{onProgress:i,onError:o,onAbort:a,onComplete:n})}}))},buyFT(t,e){var s={set:e||this.focusSetname,uid:t};this.toSign={type:"cja",cj:s,id:`${this.prefix}ft_buy`,msg:`Purchasing: ${e}:${t}`,ops:["getTokenUser","getUserNFTs"],api:this.apiFor(this.prefix),txid:`${e}:${t}_ft_buy`}},bidFT(t,e,s,i){bid_amount=parseInt(1e3*s);var o={set:e||this.focusSet.setname,uid:t,bid_amount:bid_amount};this.toSign={type:"cja",cj:o,id:`${this.prefix}ft_buy`,msg:`Purchasing: ${e}:${t}`,ops:["getTokenUser","getUserNFTs"],api:this.apiFor(this.prefix),txid:`${e}:${t}_ft_buy`}},giveFT(){var t={set:this.mint_detail.setname,to:this.giveFTusername,qty:parseInt(this.giveFTqty)};this.toSign={type:"cja",cj:t,id:`${this.prefix}ft_transfer`,msg:`Trying to give ${parseInt(this.giveFTqty)} ${this.mint_detail.setname} mint token${parseInt(this.giveFTqty)>1?"s":""} to ${this.giveFTusername}`,ops:["getTokenUser","getUserNFTs"],api:this.apiFor(this.prefix),txid:`${this.prefix} _ft_transfer`}},tradeFT(t){const e=parseInt(1e3*this.FTmenu.amount);var s={set:t.setname,to:this.FTmenu.to,price:e};this.toSign={type:"cja",cj:s,id:`${t.token}_ft_escrow`,msg:`Trying to trade ${t.setname}: Mint Token`,ops:["getTokenUser","getUserNFTs"],api:this.apiFor(t.token),txid:`${t.token}_ft_escrow`}},sellFT(t,e,s,i=1,o){var a={set:t,price:e=parseInt(1e3*e)},n=`${this.prefix}ft_sell`;"HIVE"==s.toUpperCase()?(a.hive=e,a.quantity=i,a.distro=o,n=`${this.prefix}fts_sell_h`):"HBD"==s.toUpperCase()?(a.hbd=e,a.quantity=i,a.distro=o,n=`${this.prefix}fts_sell_h`):s="cja",this.toSign={type:"cja",cj:a,id:n,msg:`Trying to sell ${t} mint token`,ops:["getTokenUser","getUserNFTs"],api:this.apiFor(this.prefix),txid:`${this.prefix} _ft sell`}},openFT(t){var e={set:t.setname};this.toSign={type:"cja",cj:e,id:`${t.token}_nft_mint`,msg:`Minting: ${t.setname} NFT`,ops:["getUserNFTs"],api:this.apiFor(t.token),txid:`${t.setname}_nft_mint`}},modal(t){this.transferModal=t.item,this.transferMint=t.mint,this.transferModal.show=!0,this.transferTabTo=t.tab},acceptFT(t){var e={set:t.setname,uid:t.uid};this.toSign={type:"cja",cj:e,id:`${t.token}_ft_escrow_complete`,msg:`Proposing Trade: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(t.token),txid:`${t.setname}:${t.uid}_ft_escrow_complete`}},rejectFT(t){var e={set:t.setname,uid:t.uid};this.toSign={type:"cja",cj:e,id:`${t.token}_ft_escrow_cancel`,msg:`Proposing Trade: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(t.token),txid:`${t.setname}:${t.uid}_ft_escrow_cancel`}},setPFP(t){var e=JSON.parse(this.accountinfo.posting_json_metadata);e.profile?e.profile.profile_image=`${this.dataAPI}/pfp/${this.account}?${t.setname}-${t.uid}`:e.profile={profile_image:`${this.dataAPI}/pfp/${this.account}?${t.setname}-${t.uid}`};var s=[["custom_json",{required_auths:[],required_posting_auths:[this.account],id:`${this.prefix}nft_pfp`,json:JSON.stringify({set:t.setname,uid:t.uid})}],["account_update2",{account:this.account,json_metadata:"",posting_json_metadata:JSON.stringify(e)}]];this.toSign={type:"raw",op:s,key:"posting",id:`${this.prefix}nft_pfp`,msg:`Setting PFP: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_pfp`}},apiFor:t=>"dlux_"==t?"https://token.dlux.io":"spkcc_"==t?"https://spkinstant.hivehoneycomb.com":"duat_"==t?"https://inconceivable.hivehoneycomb.com":"",meltNFT(t){var e={set:t.setname,uid:t.uid};this.toSign={type:"cja",cj:e,id:`${this.prefix}nft_delete`,msg:`Melting: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_delete`}},giveNFT(t){if(this.nftTradeAllowed){var e={set:t.setname,uid:t.uid,to:this.nftTradeTabTo};this.toSign={type:"cja",cj:e,id:`${this.prefix}nft_transfer`,msg:`Giving: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_transfer`}}},tradeNFT(t){if(this.nftTradeAllowed){var e={set:t.setname,uid:t.uid,price:parseInt(1e3*this.nftTradeTabPrice),type:this.nftTradeTabToken,to:this.nftTradeTabTo};this.toSign={type:"cja",cj:e,id:`${this.prefix}nft_reserve_transfer`,msg:`Proposing Trade: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_reserve_transfer`}}},sellNFT(t){var e={set:t.setname,uid:t.uid,price:parseInt(1e3*this.nftSellTabPrice),type:this.nftSellTabToken};this.toSign={type:"cja",cj:e,id:`${this.prefix}nft_sell`,msg:`Selling: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_sell`}},cancelNFT(t){var e={set:t.setname,uid:t.uid};this.toSign={type:"cja",cj:e,id:`${t.token}_nft_sell_cancel`,msg:`Canceling: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(t.token),txid:`${t.setname}:${t.uid}_nft_sell_cancel`}},cancelFT(t){var e={set:t.setname,uid:t.uid};this.toSign={type:"cja",cj:e,id:`${t.token}_ft_sell_cancel`,msg:`Canceling: ${itemname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(t.token),txid:`${itemname}:${t.uid}_ft_sell_cancel`}},buyNFT(t){var e={set:t.setname,uid:t.uid,price:t.price.amount},s="cja";"HIVE"!=t.price.token&&"HBD"!=t.price.token||(s="xfr",e.memo=`NFTbuy ${t.setname}:${t.uid}`,e[`${t.price.token.toLowerCase()}`]=t.price.amount,e.to=this.multisig),this.toSign={type:s,cj:e,id:`${this.prefix}nft_buy`,msg:`Purchasing: ${t.setname}:${t.uid}`,ops:["getTokenUser","getUserNFTs","getHiveUser"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_buy`}},auctionNFT(t){var e={set:t.setname,uid:t.uid,price:parseInt(1e3*this.nftAuctionTabPrice),type:this.nftAuctionTabToken!=this.TOKEN?this.nftAuctionTabToken:0,now:!1,time:this.nftAuctionTabTime};this.toSign={type:"cja",cj:e,id:`${this.prefix}nft_${e.type?"h":""}auction`,msg:`Auctioning: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_${e.type?"h":""}auction`}},bidNFT(t){var e={set:t.setname,uid:t.uid,bid_amount:parseInt(1e3*this.nftAuctionTabPrice)},s="cja";("HIVE"==this.itemModal.auction.price.token||"HBD"==this.itemModal.auction.price.token)&&(s="xfr",e.memo=`NFTbid ${t.setname}:${t.uid}`,e.hive=e.bid_amount,e.to=this.multisig),this.toSign={type:s,cj:e,id:`${this.prefix}nft_bid`,msg:`Bidding on: ${t.setname}:${t.uid}`,ops:["getUserNFTs"],api:this.apiFor(this.prefix),txid:`${t.setname}:${t.uid}_nft_bid`}},precision:(t,e)=>parseFloat(t/Math.pow(10,e)).toFixed(e),sigFig(t,e){var s,i="function"==typeof t.split?t.split(" ")[1]:"";return(t=parseFloat(t))<1?(s=(1e3*t).toFixed(e),i="m"+i):t<1e3?s=t.toFixed(e):t<1e6?(s=(t/1e3).toFixed(e),i="K"+i):t<1e9?(s=(t/1e6).toFixed(e),i="M"+i):t<1e12?(s=(t/1e9).toFixed(e),i="B"+i):t<1e15?(s=(t/1e12).toFixed(e),i="T"+i):t<1e18&&(s=(t/1e15).toFixed(e),i="Q"+i),(s=s.replace(/\.?0+$/,""))+i},reply(t){t.json_metadata||(t.json_metadata=JSON.stringify({}));var e=[];t.bens&&(e.push(["comment_options",{author:this.account,permlink:t.permlink,max_accepted_payout:"1000000.000 HBD",percent_hbd:1e4,allow_votes:!0,allow_curation_rewards:!0,extensions:[[0,{beneficiaries:t.bens}]]}]),delete t.bens),e.unshift(["comment",t]),this.toSign={type:"raw",key:"posting",op:JSON.stringify(e),callbacks:[],txid:`reply:${t.parent_author}/${t.permlink}`}},vote(t){var e,s,i;"object"==typeof t?(s=t.slider,i=t.flag,t=t.url):(e=`/@${t.split("/@")[1].split("/")[0]}/${t.split("/@")[1].split("/")[1]}`,s=this.posturls[e].slider,i=this.posturls[e].flag),this.toSign={type:"vote",cj:{author:t.split("/@")[1].split("/")[0],permlink:t.split("/@")[1].split("/")[1],weight:s*(i?-1:1)},msg:"Voting ...",ops:[""],txid:"vote"}},dropClaim(t,e){this.toSign={type:"cja",cj:{claim:!0},id:`${t}_${e}`,msg:"Claiming...",ops:["getTokenUser"],txid:"claim"}},rewardClaim(t,e,s=!1){this.toSign={type:"cja",cj:{gov:s},id:`${t}_${e}`,msg:"Claiming...",ops:["getTokenUser"],txid:"reward_claim"}},pending(t,e){this.posturls[t].comment=e,this.comment(t)},setRating(t,e){this.posturls[t].rating=e},comment(t){var e=this.posturls[t].edit?this.posturls[t].json_metadata:{tags:this.posturls[t].json_metadata.tags};this.posturls[t].rating&&(e.review={rating:this.posturls[t].rating}),this.toSign={type:"comment",cj:{author:this.account,title:this.posturls[t].edit?this.posturls[t].title:"",body:this.posturls[t].comment,parent_author:this.posturls[t].edit?this.posturls[t].parent_author:this.posturls[t].author,parent_permlink:this.posturls[t].edit?this.posturls[t].parent_permlink:this.posturls[t].permlink,permlink:this.posturls[t].edit?this.posturls[t].permlink:"re-"+this.posturls[t].permlink+this.posturls[t].children,json_metadata:JSON.stringify(e)},msg:"Commenting ...",ops:[""],txid:"comment"}},hasVoted(t){const e=this.posturls[t].active_votes.filter((t=>t.voter===this.account));return e.length?e[0].percent:0},precision:(t,e)=>parseFloat(t/Math.pow(10,e)).toFixed(e),toFixed:(t,e)=>parseFloat(t).toFixed(e),handleScroll(){const t=Date.now();t-this.lastScroll>1e3&&(this.lastScroll=t,document.documentElement.clientHeight+window.scrollY>document.documentElement.scrollHeight-2*document.documentElement.clientHeight&&this.getPosts())},modalNext(t,e){"item"==e||this.postSelect.VR.checked||this.postSelect.AR.checked||this.postSelect.XR.checked||this.postSelect.Blog.checked||"payout"==this.postSelect.sort||this.postSelect.searchTerm?(this[t].index=(this[t].index+1)%this[t].items.length,this[t].item=this[t].items[this[t].index]):this[t].index<this[t].items.length-1?(this[t].index++,this[t].item=this[t].items[this[t].index]):this[t].index<this.allPosts.length-1?this.selectPosts([t,this[t].index+1]):(this[t].index=0,this[t].item=this[t].items[this[t].index])},modalPrev(t){this[t].index?this[t].index--:this[t].index=this[t].items.length-1,this[t].item=this[t].items[this[t].index]},modalSelect(t){t.indexOf("/@")>0&&(t="/@"+t.split("/@")[1]),this.displayPost.index=t,this.displayPost.item=this.posturls[t],window.history.pushState("Blog Modal",this.displayPost.item.title,"/blog/@"+t.split("/@")[1]),this.displayPost.item?.children&&!this.displayPost.item.replies.length&&this.getReplies(this.displayPost.item.author,this.displayPost.item.permlink,!0)},getRewardFund(){fetch(this.hapi,{body:'{"jsonrpc":"2.0", "method":"condenser_api.get_reward_fund", "params":["post"], "id":1}',headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{this.rewardFund=t.result}))},getFeedPrice(){fetch(this.hapi,{body:'{"jsonrpc":"2.0", "method":"condenser_api.get_current_median_history_price", "params":[], "id":1}',headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{this.feedPrice=t.result}))},modalIndex(t,e,s="displayNFTs"){for(var i=0;i<this[s].length&&`${this[s][i].setname}:${this[s][i].uid}`!=e;i++);this[t].index=i,this[t].items=[...this[s]],this[t].item=this[t].items[i]},printProps:t=>Object.keys(t).map((e=>e+": "+t[e])).join(", "),sigFig(t,e){if(t){var s,i="function"==typeof t.split?t.split(" ")[1]:"";return(t=parseFloat(t))<1?(s=(1e3*t).toFixed(e),i="m"+i):t<1e3?s=t.toFixed(e):t<1e6?(s=(t/1e3).toFixed(e),i="K"+i):t<1e9?(s=(t/1e6).toFixed(e),i="M"+i):t<1e12?(s=(t/1e9).toFixed(e),i="B"+i):t<1e15?(s=(t/1e12).toFixed(e),i="T"+i):t<1e18&&(s=(t/1e15).toFixed(e),i="Q"+i),(s=s.replace(/\.?0+$/,""))+i}},removeOp(t){this.toSign.txid==t&&(this.toSign={})},log(t){},getReplies(t,e,s){return new Promise(((i,o)=>{fetch("https://api.hive.blog",{body:`{"jsonrpc":"2.0", "method":"condenser_api.get_content_replies", "params":["${t}","${e}"], "id":1}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((i=>{const o=`/@${t}/${e}`;var a=[];for(let t=0;t<i.result.length;t++){if(a.push(i.result[t].author),i.result[t].edit=!1,i.result[t].children&&this.getReplies(i.result[t].author,i.result[t].permlink),i.result[t].json_metadata)try{i.result[t].json_metadata=JSON.parse(i.result[t].json_metadata)}catch(t){}const e=`/@${i.result[t].author}/${i.result[t].permlink}`;if(s){const e=i.result[t].json_metadata?.review?.rating||0;e>0&&(this.posturls[o].ratings+=1,this.posturls[o].rating=parseFloat((e+this.posturls[o].rating)/this.posturls[o].ratings).toFixed(2))}this.posturls[e]=i.result[t],i.result[t].slider<0&&(i.result[t].flag=!0,i.result[t].slider=-1*i.result[t].slider),this.posturls[e].rep="...",this.posturls[e].rating=this.posturls[e].json_metadata?.review?.rating||0,this.rep(e)}this.posturls[o].replies=i.result,this.getHiveAuthors(a)})).catch((t=>{o(t)}))}))},run(t){"function"==typeof this[t]&&"GUEST"!=this.account&&this[t](this.account)},accountRelations(t){fetch("https://api.hive.blog",{body:`{"jsonrpc":"2.0", "method":"bridge.get_relationship_between_accounts", "params":["${this.account}","${t}"], "id":5}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{var e=t.result;this.relations=e}))},checkAccount(t,e){fetch("https://anyx.io",{body:`{"jsonrpc":"2.0", "method":"condenser_api.get_accounts", "params":[["${this[t]}"]], "id":1}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{var s=t.result[0];try{s.posting_json_metadata=JSON.parse(s.posting_json_metadata)}catch(t){try{s.posting_json_metadata=JSON.parse(s.json_metadata)}catch(t){s.posting_json_metadata={profile:{about:""}}}}s.posting_json_metadata.profile||(s.posting_json_metadata.profile={about:""}),t.result.length?this[e]=s:this[e]=!1}))},tokenSend(){this.sendFormValid&&(this.sendAllowed?this.toSign={type:"cja",cj:{to:this.sendTo,amount:parseInt(1e3*this.sendAmount),memo:this.sendMemo},id:`${this.prefix}send`,msg:`Trying to send ${this.TOKEN}...`,ops:["getTokenUser"],txid:"send"}:alert("Username not found"))},sendIt(t){this.toSign=t},frmDate:()=>(new Date).getMonth()+1,sendhive(){this.hiveFormValid&&(this.sendHiveAllowed?this.toSign={type:"xfr",cj:{to:this.sendHiveTo,hive:1e3*this.sendHiveAmount,memo:this.sendHiveMemo},txid:"sendhive",msg:"",ops:["getHiveUser"]}:alert("Account Not Found"))},sendhbd(){this.hbdFormValid&&(this.sendHBDAllowed?this.toSign={type:"xfr",cj:{to:this.sendHBDTo,hbd:1e3*this.sendHBDAmount,memo:this.sendHBDMemo},txid:"sendhbd",msg:"",ops:["getHiveUser"]}:alert("Account Not Found"))},localStoreSet(t,e){localStorage.setItem(t,e)},toFixed:(t,e)=>Number(t).toFixed(e),pFloat:t=>parseFloat(t),toUpperCase:t=>t.toUpperCase(),gt:(t,e)=>parseFloat(t)>parseFloat(e),formatNumber(t,e,s,i){if("number"!=typeof t){const e=t?t.split(" "):[];var o=0;for(r=0;r<e.length;r++)parseFloat(e[r])>0&&(o+=parseFloat(e[r]));t=o>parseFloat(t)?o:parseFloat(t)}if(isNaN(t))return"Invalid Number";if(!isFinite(t))return(t<0?"-":"")+"infinite";s=s||".",i=i||"";var a=t<0;t=Math.abs(t);var n=(null!=e&&0<=e?t.toFixed(e):t.toString()).split("."),r=n[0],h=1<n.length?s+n[1]:"";if(i)for(var c=/(\d+)(\d{3})/;c.test(r);)r=r.replace(c,"$1"+i+"$2");return(a?"-":"")+r+h},setApi(t){"/"==t.substr(-1)&&(t=t.substr(0,t.length-1));let e=t||prompt("Please enter your API","https://spkinstant.hivehoneycomb.com");-1!=t.indexOf("https://")?null!=e&&(location.hash&&e&&(location.hash=""),localStorage.setItem("lapi",e),location.search="?api="+e):alert("https is required")},toLowerCase:t=>"string"==typeof t?t.toLowerCase():t,suggestValue(t,e){if(t.split(".").length>1){let s=t.split("."),i=this[s[0]];for(let t=1;t<s.length;t++)t==s.length-1?i[s[t]]||(i[s[t]]=e):i=i[s[t]]}else this[t]||(this[t]=e)},addToken:t=>"#"+t,setMem(t,e,s){-1!=e.indexOf("https://")?("/"==e[e.length-1]&&(e=e.substring(0,e.length-1)),localStorage.setItem(t,e),s&&location.reload()):alert("https:// is required for security reasons")},sort(t,e,s){switch(s){case"asc":this[t].sort(((t,s)=>t[e]<s[e]?-1:1));break;case"desc":default:this[t].sort(((t,s)=>t[e]>s[e]?-1:1))}},validateForm(t,e){document.getElementById(t).querySelector("input:invalid")?this[e]=!1:this[e]=!0},getPosts(t){var e=0;for(var s in this.postSelect.types)this.postSelect.types[s].checked&&(e+=this.postSelect.types[s].bitFlag);t&&(this.posturls={}),(this.postSelect.bitMask!=e||t)&&(this.postSelect.bitMask=e,this.displayPosts=[],this[this.postSelect.entry]=[],this.postSelect[this.postSelect.entry].o=0,this.postSelect[this.postSelect.entry].e=!1),this.postSelect[this.postSelect.entry].e||this.postSelect[this.postSelect.entry].p||(this.postSelect[this.postSelect.entry].p=!0,fetch("https://api.hive.blog",{body:`{"jsonrpc":"2.0", "method":"condenser_api.get_blog_entries", "params":["${this.pageAccount}",${this.postSelect[this.postSelect.entry].o},${this.postSelect[this.postSelect.entry].a}], "id":1}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{this.postSelect[this.postSelect.entry].p=!1;var e=[];this.postSelect[this.postSelect.entry].o+=this.postSelect[this.postSelect.entry].a,t.result.length<this.postSelect[this.postSelect.entry].a&&(this.postSelect[this.postSelect.entry].e=!0);for(var s=0;s<t.result.length;s++)t.result[s].type="Blog",this.postSelect[this.postSelect.entry].o!=t.result[s].entry_id-1&&(this.postSelect[this.postSelect.entry].o=t.result[s].entry_id-1),this.posturls[`/@${t.result[s].author}/${t.result[s].permlink}`]||(this.posturls[`/@${t.result[s].author}/${t.result[s].permlink}`]=t.result[s]),this[this.postSelect.entry].push(`/@${t.result[s].author}/${t.result[s].permlink}`);var i=!1;for(var o in this.posturls)this.posturls[o].created||(this.getContent(this.posturls[o].author,this.posturls[o].permlink),i=!0),e.push(this.posturls[o].author);i||this.selectPosts(),e=[...new Set(e)],this.getHiveAuthors(e)})))},selectPosts(t,e){for(var s=[],i=0;i<this[this.postSelect.entry].length;i++)this.posturls[this[this.postSelect.entry][i]]&&s.push(this.posturls[this[this.postSelect.entry][i]]);this.displayPosts=s,t&&(this[t[0]].items=this.displayPosts,this[t[0]].item=this[t[0]].items[t[1]],this[t[0]].index=t[1])},getContent(t,e,s){t&&e&&fetch("https://api.hive.blog",{body:`{"jsonrpc":"2.0", "method":"condenser_api.get_content", "params":["${t}", "${e}"], "id":1}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{if(t.result){const a=`/@${t.result.author}/${t.result.permlink}`;t.result.url=a,this.posturls[a]={...this.posturls[a],...t.result,slider:1e4,flag:!1,upVotes:0,downVotes:0,edit:!1,hasVoted:!1,contract:{}},this.posturls[a].ratings||(this.posturls[a].ratings=0,this.posturls[a].rating=0);for(var e=0;e<this.posturls[a].active_votes.length;e++)this.posturls[a].active_votes[e].percent>0?this.posturls[a].upVotes++:this.posturls[a].downVotes++,this.posturls[a].active_votes[e].voter==this.account&&(this.posturls[a].slider=this.posturls[a].active_votes[e].percent,this.posturls[a].hasVoted=!0);var i=!1,o="Blog";try{if(this.posturls[a].json_metadata=JSON.parse(this.posturls[a].json_metadata),this.posturls[a].pic=this.picFind(this.posturls[a].json_metadata),this.posturls[a].json_metadata.assets)for(e=0;e<this.posturls[a].json_metadata.assets.length;e++)this.posturls[a].json_metadata.assets[e].contract&&(this.posturls[a].contract[this.posturls[a].json_metadata.assets[e].contract]={},i=!0);i&&this.getContracts(a),"QmNby3SMAAa9hBVHvdkKvvTqs7ssK4nYa2jBdZkxqmRc16"==this.posturls[a].json_metadata.vrHash||"QmZF2ZEZK8WBVUT7dnQyzA6eApLGnMXgNaJtWHFc3PCpqV"==this.posturls[a].json_metadata.vrHash||"Qma4dk3mWP325HrHYBDz3UdL9h1A6q8CSvZdc8JhqfgiMp"==this.posturls[a].json_metadata.vrHash?o="360":this.posturls[a].json_metadata.vrHash?o="VR":this.posturls[a].json_metadata.arHash?o="AR":this.posturls[a].json_metadata.appHash?o="APP":this.posturls[a].json_metadata.audHash?o="Audio":this.posturls[a].json_metadata.vidHash&&(o="Video")}catch(t){}this.posturls[a].type=o,this.posturls[a].url="Blog"!=o?"/dlux"+this.posturls[a].url:"/blog"+this.posturls[a].url,this.posturls[a].rep="...",this.rep(a),this.posturls[a].slider<0&&(this.posturls[a].slider=-1*this.posturls[a].slider,this.posturls[a].flag=!0),this.posturls[a].preview=this.removeMD(this.posturls[a].body).substr(0,250),this.posturls[a].ago=this.timeSince(this.posturls[a].created),this.selectPosts(),s&&this.modalSelect(a)}}))},getContracts(t){var e=[],s=(t,e)=>{fetch("https://spktest.dlux.io/api/fileContract/"+e).then((t=>t.json())).then((t=>{"string"!=typeof t.result?(t.result.extend="7",this.contracts[e]=t.result,this.extendcost[e]=parseInt(t.result.extend/30*t.result.r)):delete this.contracts[e]}))};for(var i in this.posturls[t].contract)e.push(i);e=[...new Set(e)];for(var o=0;o<e.length;o++)s(0,e[o])},imgUrlAlt(t){t.target.src="/img/dlux-logo-icon.png"},timeSince(t){var e=Math.floor((new Date-new Date(t+".000Z"))/1e3),s=Math.floor(e/86400);return s>7?new Date(t).toLocaleDateString():s>=1?s+` day${s>1?"s":""} ago`:(s=Math.floor(e/3600))>=1?s+` hour${s>1?"s":""} ago`:(s=Math.floor(e/60))>=1?`${s} minute${s>1?"s":""} ago`:Math.floor(e)+" seconds ago"},removeMD(t,e){(e=e||{}).listUnicodeChar=!!e.hasOwnProperty("listUnicodeChar")&&e.listUnicodeChar,e.stripListLeaders=!e.hasOwnProperty("stripListLeaders")||e.stripListLeaders,e.gfm=!e.hasOwnProperty("gfm")||e.gfm,e.useImgAltText=!!e.hasOwnProperty("useImgAltText")&&e.useImgAltText;var s=t||"";s=s.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm,"");try{e.stripListLeaders&&(s=e.listUnicodeChar?s.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,e.listUnicodeChar+" $1"):s.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),e.gfm&&(s=s.replace(/\n={2,}/g,"\n").replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),s=s.replace(/<[^>]*>/g,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g,e.useImgAltText?"$1":"").replace(/\[(.*?)\][\[\(].*?[\]\)]/g,"$1").replace(/^\s{0,3}>\s?/g,"").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n")}catch(e){return t}return s},picFind(t){var e;try{e=t.image[0]}catch(t){}return"string"==typeof t.image?t.image:"string"==typeof e?e:"string"==typeof t.Hash360?`https://ipfs.dlux.io/ipfs/${t.Hash360}`:"/img/dluxdefault.png"},getMint(t,e){for(let s=0;s<this.rNFTs.length;s++)if(this.rNFTs[s].setname==t)return e?this.rNFTs[s][e]:this.rNFTs[s];return 0},readRep(t){if(null==t)return t;let e=String(t);const s="-"===e.charAt(0);e=s?e.substring(1):e;let i=function(t){const e=parseInt(t.substring(0,4)),s=Math.log(e)/Math.LN10+1e-8;return t.length-1+(s-parseInt(s))}(e);return isNaN(i)&&(i=0),i=Math.max(i-9,0),i*=s?-1:1,i=9*i+25,i=parseInt(i),i},getQuotes(){fetch("https://api.coingecko.com/api/v3/simple/price?ids=hive&amp;vs_currencies=usd").then((t=>t.json())).then((t=>{this.hiveprice=t})),fetch("https://api.coingecko.com/api/v3/simple/price?ids=hive_dollar&amp;vs_currencies=usd").then((t=>t.json())).then((t=>{this.hbdprice=t}))},getSNodes(){fetch(this.sapi+"/markets").then((t=>t.json())).then((t=>{this.smarkets=t.markets,this.sstats=t.stats,this.sstats.head_block=t.head_block}))},reward_spk(){var t=0,e=this.saccountapi.head_block-this.saccountapi.spk_block;if(this.saccountapi.spk_block){if(e<28800)return 0;{t=parseInt(e/28800);const i=(this.saccountapi.gov?s(this.saccountapi.gov,t,this.sstats.spk_rate_lgov):0)+(this.saccountapi.pow?s(this.saccountapi.pow,t,this.sstats.spk_rate_lpow):0)+s(parseInt(this.saccountapi.granted?.t>0?this.saccountapi.granted.t:0)+parseInt(this.saccountapi.granting?.t>0?this.saccountapi.granting.t:0),t,this.sstats.spk_rate_ldel);return i||0}}return 0;function s(t,e,s){const i=t*(1+parseFloat(s)/365);return parseInt((i-t)*e)}},getProtocol(){fetch(this.lapi+"/api/protocol").then((t=>t.json())).then((t=>{this.prefix=t.prefix,this.multisig=t.multisig,this.jsontoken=t.jsontoken,this.TOKEN=t.jsontoken.toUpperCase(),this.node=t.node,this.features=t.features?t.features:this.features,this.behind=t.behind,this.behindTitle=t.behind+" Blocks Behind Hive"}))},removeUser(){this.balance=0,this.bartoken="",this.barpow="",this.bargov="",this.accountapi="",this.saccountapi="",this.hasDrop=!1,this.openorders=[],this.accountinfo={},this.barhive="",this.barhbd=""},getPFP(){this.account&&fetch("https://token.dlux.io/api/pfp/"+this.account).then((t=>t.json())).then((t=>{"No Profile Picture Set or Owned"!=t.result&&(this.pfp.setname=t.result[0].pfp.split(":")[0],this.pfp.uid=t.result[0].pfp.split(":")[1])}))},pm:(t,e)=>t.some((t=>e.includes(t))),naiString:t=>`${parseFloat(t.amount/Math.pow(10,t.precision)).toFixed(t.precision)} ${t.token}`,getSetDetailsInfo(t){let e="";if((t=this.baseScript[t])&&t.set)try{e=`${t.set.Description}`}catch(t){e=""}return`${e}`},rep(t){this.authors[this.posturls[t].author]?this.posturls[t].rep=this.readRep(this.authors[this.posturls[t].author].reputation):setTimeout(function(){this.rep(t)}.bind(this),500)},addBens(t){this.postBens.push(t)},getNFTs(t){this.accountNFTs=[],this.accountRNFTs=[];for(var e=0;e<this.providers.length;e++)this.NFTsLookUp(t,this.providers,e),this.trades(e),this.getSetDetails(e)},getSetDetails(t){fetch(`${this.providers[t].api}/api/sets`).then((t=>t.json())).then((e=>{this.chains[this.providers[t].token].sets={};for(var s=0;s<e.result.length;s++)this.chains[this.providers[t].token].sets[e.result[s].set]=e.result[s]}))},finishPFT(t){!this.baseScript[t.script]||t.to!=this.pageAccount&&t.from!=this.pageAccount?setTimeout((()=>{this.finishPFT(t)}),250):(t.source="FTtrades",this.FTtrades.push(t))},finishPNFT(t){!this.baseScript[t.script]||t.to!=this.pageAccount&&t.from!=this.pageAccount?setTimeout((()=>{this.finishPNFT(t)}),250):(t.setname=t.set,t.trade=!0,t.HTML=t.comp.HTML,t.set=t.comp.set,t.attributes=t.comp.attributes,this.NFTtrades.push(t))},trades(t){fetch(this.providers[t].api+"/api/trades/fts/"+this.account).then((t=>t.json())).then((e=>{const s=e.result,i=this.providers[t].token;for(var o=0;o<s.length;o++){var a=s[o];a.token=i,a.priceString=`${parseFloat(a.nai.amount/Math.pow(10,a.nai.precision)).toFixed(a.nai.precision)} ${i.toUpperCase()}`,a.qty=1,this.finishPFT(a)}})).catch((t=>{})),fetch(this.providers[t].api+"/api/trades/nfts/"+this.account).then((t=>t.json())).then((e=>{const s=e.result,i=this.providers[t].token;for(var o=0;o<s.length;o++){var a=s[o];a.token=i,a.priceString=`${parseFloat(a.nai.amount/Math.pow(10,a.nai.precision)).toFixed(a.nai.precision)} ${i.toUpperCase()}`,a.qty=1,this.callScript(a).then((t=>{a.comp=t,this.finishPNFT(a)}))}})).catch((t=>{}))},displayNFT(t,e){if(0!==t){if(1===t){this.displayNFTs=[...this.accountNFTs];for(var s=0;s<this.displayNFTs.length;s++)this.NFTselect.searchTerm&&-1==this.NFTselect.searchTerm.indexOf(this.displayNFTs[s][this.NFTselect.sort])&&(this.displayNFTs.splice(s,1),s--);"desc"==this.NFTselect.dir&&this.displayNFTs.reverse()}}else this.displayNFTs=this.accountNFTs},NFTsLookUp(t,e,s){fetch(e[s].api+"/api/nfts/"+t).then((t=>t.json())).then((i=>{for(var o=i.result,a=i.mint_tokens,n={},r=0;r<o.length;r++)o[r].token=e[s].token,o[r].owner=t,n[o[r].script]={token:e[s].token,set:o[r].setname},this.callScript(o[r]).then((t=>{this.accountNFTs.push(t),this.displayNFT(0)}));for(r=0;r<a.length;r++)a[r].token=e[s].token,n[a[r].script]=1,a[r].source="accountRNFTs",this.accountRNFTs.push(a[r]);for(var h in n)this.callScript({script:h,token:n[h].token,set:n[h].setname}).then((t=>{this.baseScript[t.script]=t,this.baseScript[t.script].token=e[s].token,this.baseScript[t.script].setname=n[h].setname}))}))},getAttr(t,e){if(this.baseScript[t])return this.baseScript[t].set[e]},getTokenUser(t=this.account,e){this.getPFP(),fetch(this.lapi+"/@"+t).then((t=>t.json())).then((t=>{t.tick=t.tick||.01,this.behind=t.behind,e?this.focusaccountapi=t:(this.balance=(t.balance/1e3).toFixed(3),this.bargov=(t.gov/1e3).toFixed(3),this.accountapi=t,this.denoms.DLUX={balance:`${this.formatNumber((t.balance/1e3).toFixed(3),3,".",",")} DLUX`},this.dluxval=(t.balance+t.gov+t.poweredUp+t.claim)/1e3)}))},getSpkStats(){fetch(this.sapi+"/stats").then((t=>t.json())).then((t=>{this.spkStats=t.result}))},getSapi(t=this.account,e){fetch(this.sapi+"/@"+t).then((t=>t.json())).then((t=>{if(t.tick=t.tick||.01,this.larynxbehind=t.behind,e)this.focussaccountapi=t;else{this.lbalance=(t.balance/1e3).toFixed(3),this.lbargov=(t.gov/1e3).toFixed(3),t.powerDowns=Object.keys(t.power_downs);for(var s=0;s<t.powerDowns.length;s++)t.powerDowns[s]=t.powerDowns[s].split(":")[0];this.saccountapi=t,this.saccountapi.spk+=this.reward_spk(),this.saccountapi.granted.t||(this.saccountapi.granted.t=0),this.saccountapi.granting.t||(this.saccountapi.granting.t=0),this.spkval=(t.balance+t.gov+t.poweredUp+this.saccountapi.granting.t+t.claim+t.spk)/1e3}}))},when(t){if(!t.length)return"";var e=3*(parseInt(t[0])-parseInt(this.saccountapi.head_block)),s=Math.floor(e/86400);return s>=1?s+" day"+(s>1?"s":""):(s=Math.floor(e/3600))>=1?s+" hour"+(s>1?"s":""):(s=Math.floor(e/60))>=1?`${s} minute${s>1?"s":""}`:Math.floor(e)+" seconds"},getHiveUser(t=this.account){fetch(hapi,{body:`{"jsonrpc":"2.0", "method":"condenser_api.get_accounts", "params":[["${t}"]], "id":1}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{this.accountinfo=t.result[0],this.barhive=this.accountinfo.balance,this.denoms.HIVE.balance=`${this.formatNumber(parseFloat(this.accountinfo.balance).toFixed(3),3,".",",")} HIVE`,this.barhbd=this.accountinfo.hbd_balance,this.denoms.HBD.balance=`${this.formatNumber(parseFloat(this.accountinfo.hbd_balance).toFixed(3),3,".",",")} HBD`;try{this.accountinfo.posting_json_metadata.profile.profile_image}catch(t){}const e=1e6*(parseInt(this.accountinfo.vesting_shares)+parseInt(this.accountinfo.received_vesting_shares)-parseInt(this.accountinfo.delegated_vesting_shares)),s=1e4*parseInt(this.accountinfo.voting_power)/1e4/50;this.accountinfo.rshares=s*e/1e4}))},getHiveStats(){fetch(this.hapi,{body:'{"jsonrpc":"2.0", "method":"condenser_api.get_dynamic_global_properties", "params":[], "id":1}',headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{this.hivestats=t.result}))},getHiveAuthors(t){for(var e="",s=0;s<t.length;s++)this.authors[t[s]]||(e+=`"${t[s]}",`);e.length>0&&(e=e.substring(0,e.length-1),fetch(hapi,{body:`{"jsonrpc":"2.0", "method":"condenser_api.get_accounts", "params":[[${e}]], "id":1}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"}).then((t=>t.json())).then((t=>{for(var e=0;e<t.result.length;e++)this.authors[t.result[e].name]=t.result[e]})))},pullScript(t){return new Promise(((e,s)=>{fetch(`https://ipfs.dlux.io/ipfs/${t}`).then((t=>t.text())).then((s=>{this.nftscripts[t]=s,e("OK")}))}))},Base64toNumber(t){var e=0;t=t.split("");for(var s=0;s<t.length;s++)e=64*e+"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+=".indexOf(t[s]);return e},callScript(o){return new Promise(((resolve,reject)=>{if(this.serviceWorker)this.callSWfunction("callScript",o).then((t=>{resolve(t)})).catch((t=>{this.serviceWorker=!1,this.callScript(o).then((t=>{resolve(t)}))}));else if(this.nftscripts[o.script]){const code=`(//${this.nftscripts[o.script]}\n)("${o.uid?o.uid:0}")`;var computed=eval(code);computed.uid=o.uid||"",computed.owner=o.owner||"",computed.script=o.script,computed.setname=o.set,computed.token=o.token,resolve(computed)}else this.pullScript(o.script).then((t=>{this.callScript(o).then((t=>{resolve(t)}))}))}))},keyOf(t="smarkets",e="node"){return this[t]&&this[t][e]?1:0},newme(t){this.posturls={},this.FTtrades=[],this.NFTtrades=[],this.accountNFTs=[],this.accountRNFTs=[],this.displayNFTs=[],this.postSelect={sort:"time",searchTerm:"",bitMask:0,entry:"new",search:{a:10,o:0,e:!1,p:!1},new:{a:10,o:0,e:!1,p:!1},trending:{a:10,o:0,e:!1,p:!1},promoted:{a:10,o:0,e:!1,p:!1},sortDir:"desc",types:{VR:{checked:!0,icon:"fa-solid fa-vr-cardboard me-2",launch:"3D / VR Experience",location:"/dlux/@",hint:"",bitFlag:1},AR:{checked:!0,icon:"fa-solid fa-glasses me-2",launch:"AR Experience",location:"/dlux/@",hint:"",bitFlag:2},XR:{checked:!0,icon:"fa-brands fa-unity me-2",launch:"Extended Reality Experience",location:"/dlux/@",hint:"",bitFlag:4},APP:{checked:!0,icon:"fa-solid fa-mobile-screen-button me-2",launch:"Unstoppable App",location:"/dlux/@",hint:"",bitFlag:8},360:{checked:!0,icon:"fa-solid fa-globe me-2",launch:"360 Photo Gallery",location:"/dlux/@",hint:"",bitFlag:16},"3D":{checked:!0,icon:"fa-solid fa-shapes me-2",launch:"3D / VR Experience",location:"/dlux/@",hint:"",bitFlag:32},Audio:{checked:!0,icon:"fa-solid fa-music me-2",launch:"Unstoppable Audio",location:"/dlux/@",hint:"",bitFlag:64},Video:{checked:!0,icon:"fa-solid fa-film me-2",launch:"Unstoppable Video",location:"/dlux/@",hint:"",bitFlag:128},Blog:{checked:!1,icon:"fa-solid fa-book me-2",launch:"Visit Full Blog",location:"/blog/@",hint:"",bitFlag:256}}},location.pathname.split("/@")[1]?this.pageAccount=location.pathname.split("/@")[1]:(this.pageAccount=this.account,this.me=!0),this.pageAccount==this.account&&(this.me=!0),this.focus.account=this.pageAccount,this.sapi=sapi,this.checkAccount("pageAccount","focus"),this.getHiveStats(),this.getHiveUser(),this.getQuotes(),this.getSNodes(),this.getPosts(),this.getProtocol(),this.getSpkStats(),this.getSPKUser(),this.getRewardFund(),this.getFeedPrice(),this.getSapi(this.pageAccount,!1),this.getTokenUser(this.pageAccount,!1),this.me||this.accountRelations(this.pageAccount),this.getNFTs(this.pageAccount)},goBack(){window.history.back()},getIcon(t){return this.baseScript[t]?this.baseScript[t].set.faicon:""},mintsQty(t){return this.getMint(this.chains[t.token]?.sets[t.set]?.set,"qty")},injectIndex(t){switch(t){case"up":this.activeIndexUp();break;case"dn":this.activeIndexDn();break;default:this.activeIndex=parseInt(t)}this.focusItem=this[this.focusItem.source][this.activeIndex]},activeIndexUp(){this.activeIndex<this[this.focusItem.source].length-1?this.activeIndex++:this.activeIndex=0},activeIndexDn(){this.activeIndex>0?this.activeIndex--:this.activeIndex=this[this.focusItem.source].length-1},onClassChange(t){t.split(" ").includes("active")}},mounted(){"serviceWorker"in navigator&&(navigator.onLine?(this.serviceWorker=!0,navigator.serviceWorker.addEventListener("message",(t=>{try{this.serviceWorkerPromises[`${t.data.script}:${t.data.uid}`].resolve(t.data),delete this.serviceWorkerPromises[`${t.data.script}:${t.data.uid}`]}catch(t){}})),navigator.serviceWorker.startMessages()):this.serviceWorker=!1),window.addEventListener("scroll",this.handleScroll),location.pathname.split("/@")[1]?(this.pageAccount=location.pathname.split("/@")[1],this.pageAccount.indexOf("/")>-1&&(this.pagePermlink=this.pageAccount.split("/")[1],this.pageAccount=this.pageAccount.split("/")[0])):location.pathname.split("/new/")[1]?this.builder=!0:(this.pageAccount=this.account,this.me=!0),this.pageAccount==this.account&&(this.me=!0),this.pagePermlink?this.getContent(this.pageAccount,this.pagePermlink,!0):(this.getIPFSproviders(),this.getMARKETS(),this.me||(this.focus.account=this.pageAccount,this.sapi=sapi,this.checkAccount("pageAccount","focus"),this.getHiveUser(),this.getSPKUser(),this.accountRelations(this.pageAccount),this.getHiveStats(),this.getQuotes(),this.getSNodes(),this.getPosts(),this.getProtocol(),this.getSpkStats(),this.getRewardFund(),this.getFeedPrice(),this.getSapi(this.pageAccount,!1)),this.builder||(deepLink(),this.observer=new MutationObserver((t=>{for(const e of t){const t=e.target.getAttribute(e.attributeName);this.$nextTick((()=>{this.onClassChange(t,e.oldValue)}))}})),this.observer.observe(this.$refs.filesTab,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]})))},beforeDestroy(){this.observer.disconnect()},unmounted(){window.removeEventListener("scroll",this.handleScroll)},watch:{postSelect(t,e){t.searchTerm==e.searchTerm&&t.bitMask==e.bitMask||(this.displayPosts=[],this[this.postSelect.entry]=[],this.postSelect[this.postSelect.entry].o=0,this.postSelect[this.postSelect.entry].e=!1)}},computed:{location:{get:()=>location},isNode:{get(){return!!this.smarkets.node[this.account]}},isntDlux:{get(){for(var t=0;t<this.postBens.length;t++)if("dlux-io"==this.postBens[t].account)return!0;return!1}},isntBenned:{get(){for(var t=[],e={},s=0;s<this.postBens.length;s++)e[this.postBens[s].account]=this.postBens[s].weight;for(s=0;s<this.spkapi.file_contracts.length;s++)(!e[this.spkapi.file_contracts[s].s.split(",")[0]]||e[this.spkapi.file_contracts[s].s.split(",")[0]]<this.spkapi.file_contracts[s].s.split(",")[1])&&t.push({contract:this.spkapi.file_contracts[s].i,account:this.spkapi.file_contracts[s].s.split(",")[0],weight:this.spkapi.file_contracts[s].s.split(",")[1]});return t}},compiledMarkdown:function(){return DOMPurify.sanitize(marked.parse(this.postBody,{sanitize:!0}))},voteVal(){return this.accountinfo.rshares/parseInt(this.rewardFund.recent_claims)*parseFloat(this.rewardFund.reward_balance)*parseFloat(this.feedPrice.base)}}}).mount("#app");